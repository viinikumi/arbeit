function Ox(e,t){for(var i=0;i<t.length;i++){const s=t[i];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in e)){const r=Object.getOwnPropertyDescriptor(s,n);r&&Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}})();function gR(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Sn(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var n=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(i,s,n.get?n:{enumerable:!0,get:function(){return e[s]}})}),i}var mR={exports:{}},Ed={},vR={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ma=Symbol.for("react.element"),Nx=Symbol.for("react.portal"),Gx=Symbol.for("react.fragment"),Hx=Symbol.for("react.strict_mode"),Vx=Symbol.for("react.profiler"),Bx=Symbol.for("react.provider"),Wx=Symbol.for("react.context"),zx=Symbol.for("react.forward_ref"),Ux=Symbol.for("react.suspense"),jx=Symbol.for("react.memo"),$x=Symbol.for("react.lazy"),NC=Symbol.iterator;function Kx(e){return e===null||typeof e!="object"?null:(e=NC&&e[NC]||e["@@iterator"],typeof e=="function"?e:null)}var CR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wR=Object.assign,yR={};function Ao(e,t,i){this.props=e,this.context=t,this.refs=yR,this.updater=i||CR}Ao.prototype.isReactComponent={};Ao.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ao.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function SR(){}SR.prototype=Ao.prototype;function Ug(e,t,i){this.props=e,this.context=t,this.refs=yR,this.updater=i||CR}var jg=Ug.prototype=new SR;jg.constructor=Ug;wR(jg,Ao.prototype);jg.isPureReactComponent=!0;var GC=Array.isArray,RR=Object.prototype.hasOwnProperty,$g={current:null},bR={key:!0,ref:!0,__self:!0,__source:!0};function ER(e,t,i){var s,n={},r=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(r=""+t.key),t)RR.call(t,s)&&!bR.hasOwnProperty(s)&&(n[s]=t[s]);var l=arguments.length-2;if(l===1)n.children=i;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)n[s]===void 0&&(n[s]=l[s]);return{$$typeof:Ma,type:e,key:r,ref:o,props:n,_owner:$g.current}}function qx(e,t){return{$$typeof:Ma,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Kg(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ma}function Yx(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var HC=/\/+/g;function jh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Yx(""+e.key):t.toString(36)}function Vu(e,t,i,s,n){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ma:case Nx:o=!0}}if(o)return o=e,n=n(o),e=s===""?"."+jh(o,0):s,GC(n)?(i="",e!=null&&(i=e.replace(HC,"$&/")+"/"),Vu(n,t,i,"",function(u){return u})):n!=null&&(Kg(n)&&(n=qx(n,i+(!n.key||o&&o.key===n.key?"":(""+n.key).replace(HC,"$&/")+"/")+e)),t.push(n)),1;if(o=0,s=s===""?".":s+":",GC(e))for(var l=0;l<e.length;l++){r=e[l];var a=s+jh(r,l);o+=Vu(r,t,i,a,n)}else if(a=Kx(e),typeof a=="function")for(e=a.call(e),l=0;!(r=e.next()).done;)r=r.value,a=s+jh(r,l++),o+=Vu(r,t,i,a,n);else if(r==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ou(e,t,i){if(e==null)return e;var s=[],n=0;return Vu(e,s,"","",function(r){return t.call(i,r,n++)}),s}function Qx(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var kt={current:null},Bu={transition:null},Jx={ReactCurrentDispatcher:kt,ReactCurrentBatchConfig:Bu,ReactCurrentOwner:$g};function PR(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:ou,forEach:function(e,t,i){ou(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return ou(e,function(){t++}),t},toArray:function(e){return ou(e,function(t){return t})||[]},only:function(e){if(!Kg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ne.Component=Ao;ne.Fragment=Gx;ne.Profiler=Vx;ne.PureComponent=Ug;ne.StrictMode=Hx;ne.Suspense=Ux;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jx;ne.act=PR;ne.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=wR({},e.props),n=e.key,r=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,o=$g.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(a in t)RR.call(t,a)&&!bR.hasOwnProperty(a)&&(s[a]=t[a]===void 0&&l!==void 0?l[a]:t[a])}var a=arguments.length-2;if(a===1)s.children=i;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:Ma,type:e.type,key:n,ref:r,props:s,_owner:o}};ne.createContext=function(e){return e={$$typeof:Wx,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Bx,_context:e},e.Consumer=e};ne.createElement=ER;ne.createFactory=function(e){var t=ER.bind(null,e);return t.type=e,t};ne.createRef=function(){return{current:null}};ne.forwardRef=function(e){return{$$typeof:zx,render:e}};ne.isValidElement=Kg;ne.lazy=function(e){return{$$typeof:$x,_payload:{_status:-1,_result:e},_init:Qx}};ne.memo=function(e,t){return{$$typeof:jx,type:e,compare:t===void 0?null:t}};ne.startTransition=function(e){var t=Bu.transition;Bu.transition={};try{e()}finally{Bu.transition=t}};ne.unstable_act=PR;ne.useCallback=function(e,t){return kt.current.useCallback(e,t)};ne.useContext=function(e){return kt.current.useContext(e)};ne.useDebugValue=function(){};ne.useDeferredValue=function(e){return kt.current.useDeferredValue(e)};ne.useEffect=function(e,t){return kt.current.useEffect(e,t)};ne.useId=function(){return kt.current.useId()};ne.useImperativeHandle=function(e,t,i){return kt.current.useImperativeHandle(e,t,i)};ne.useInsertionEffect=function(e,t){return kt.current.useInsertionEffect(e,t)};ne.useLayoutEffect=function(e,t){return kt.current.useLayoutEffect(e,t)};ne.useMemo=function(e,t){return kt.current.useMemo(e,t)};ne.useReducer=function(e,t,i){return kt.current.useReducer(e,t,i)};ne.useRef=function(e){return kt.current.useRef(e)};ne.useState=function(e){return kt.current.useState(e)};ne.useSyncExternalStore=function(e,t,i){return kt.current.useSyncExternalStore(e,t,i)};ne.useTransition=function(){return kt.current.useTransition()};ne.version="18.3.1";vR.exports=ne;var C=vR.exports;const _=gR(C),Zp=Ox({__proto__:null,default:_},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xx=C,Zx=Symbol.for("react.element"),eI=Symbol.for("react.fragment"),tI=Object.prototype.hasOwnProperty,iI=Xx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sI={key:!0,ref:!0,__self:!0,__source:!0};function FR(e,t,i){var s,n={},r=null,o=null;i!==void 0&&(r=""+i),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)tI.call(t,s)&&!sI.hasOwnProperty(s)&&(n[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)n[s]===void 0&&(n[s]=t[s]);return{$$typeof:Zx,type:e,key:r,ref:o,props:n,_owner:iI.current}}Ed.Fragment=eI;Ed.jsx=FR;Ed.jsxs=FR;mR.exports=Ed;var k=mR.exports,ef={},TR={exports:{}},ni={},xR={exports:{}},IR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,B){var U=L.length;L.push(B);e:for(;0<U;){var j=U-1>>>1,W=L[j];if(0<n(W,B))L[j]=B,L[U]=W,U=j;else break e}}function i(L){return L.length===0?null:L[0]}function s(L){if(L.length===0)return null;var B=L[0],U=L.pop();if(U!==B){L[0]=U;e:for(var j=0,W=L.length,Te=W>>>1;j<Te;){var Le=2*(j+1)-1,ue=L[Le],ct=Le+1,Oe=L[ct];if(0>n(ue,U))ct<W&&0>n(Oe,ue)?(L[j]=Oe,L[ct]=U,j=ct):(L[j]=ue,L[Le]=U,j=Le);else if(ct<W&&0>n(Oe,U))L[j]=Oe,L[ct]=U,j=ct;else break e}}return B}function n(L,B){var U=L.sortIndex-B.sortIndex;return U!==0?U:L.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var a=[],u=[],c=1,d=null,h=3,p=!1,f=!1,m=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(L){for(var B=i(u);B!==null;){if(B.callback===null)s(u);else if(B.startTime<=L)s(u),B.sortIndex=B.expirationTime,t(a,B);else break;B=i(u)}}function S(L){if(m=!1,y(L),!f)if(i(a)!==null)f=!0,Q(b);else{var B=i(u);B!==null&&re(S,B.startTime-L)}}function b(L,B){f=!1,m&&(m=!1,v(x),x=-1),p=!0;var U=h;try{for(y(B),d=i(a);d!==null&&(!(d.expirationTime>B)||L&&!G());){var j=d.callback;if(typeof j=="function"){d.callback=null,h=d.priorityLevel;var W=j(d.expirationTime<=B);B=e.unstable_now(),typeof W=="function"?d.callback=W:d===i(a)&&s(a),y(B)}else s(a);d=i(a)}if(d!==null)var Te=!0;else{var Le=i(u);Le!==null&&re(S,Le.startTime-B),Te=!1}return Te}finally{d=null,h=U,p=!1}}var R=!1,E=null,x=-1,I=5,D=-1;function G(){return!(e.unstable_now()-D<I)}function H(){if(E!==null){var L=e.unstable_now();D=L;var B=!0;try{B=E(!0,L)}finally{B?J():(R=!1,E=null)}}else R=!1}var J;if(typeof g=="function")J=function(){g(H)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,pe=Z.port2;Z.port1.onmessage=H,J=function(){pe.postMessage(null)}}else J=function(){w(H,0)};function Q(L){E=L,R||(R=!0,J())}function re(L,B){x=w(function(){L(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){f||p||(f=!0,Q(b))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return i(a)},e.unstable_next=function(L){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var U=h;h=B;try{return L()}finally{h=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,B){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var U=h;h=L;try{return B()}finally{h=U}},e.unstable_scheduleCallback=function(L,B,U){var j=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?j+U:j):U=j,L){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=U+W,L={id:c++,callback:B,priorityLevel:L,startTime:U,expirationTime:W,sortIndex:-1},U>j?(L.sortIndex=U,t(u,L),i(a)===null&&L===i(u)&&(m?(v(x),x=-1):m=!0,re(S,U-j))):(L.sortIndex=W,t(a,L),f||p||(f=!0,Q(b))),L},e.unstable_shouldYield=G,e.unstable_wrapCallback=function(L){var B=h;return function(){var U=h;h=B;try{return L.apply(this,arguments)}finally{h=U}}}})(IR);xR.exports=IR;var nI=xR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rI=C,ii=nI;function O(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var DR=new Set,$l={};function cr(e,t){fo(e,t),fo(e+"Capture",t)}function fo(e,t){for($l[e]=t,e=0;e<t.length;e++)DR.add(t[e])}var Ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tf=Object.prototype.hasOwnProperty,oI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,VC={},BC={};function lI(e){return tf.call(BC,e)?!0:tf.call(VC,e)?!1:oI.test(e)?BC[e]=!0:(VC[e]=!0,!1)}function aI(e,t,i,s){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function uI(e,t,i,s){if(t===null||typeof t>"u"||aI(e,t,i,s))return!0;if(s)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Mt(e,t,i,s,n,r,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=n,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=o}var gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){gt[e]=new Mt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];gt[t]=new Mt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){gt[e]=new Mt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){gt[e]=new Mt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){gt[e]=new Mt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){gt[e]=new Mt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){gt[e]=new Mt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){gt[e]=new Mt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){gt[e]=new Mt(e,5,!1,e.toLowerCase(),null,!1,!1)});var qg=/[\-:]([a-z])/g;function Yg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(qg,Yg);gt[t]=new Mt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(qg,Yg);gt[t]=new Mt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(qg,Yg);gt[t]=new Mt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){gt[e]=new Mt(e,1,!1,e.toLowerCase(),null,!1,!1)});gt.xlinkHref=new Mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){gt[e]=new Mt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Qg(e,t,i,s){var n=gt.hasOwnProperty(t)?gt[t]:null;(n!==null?n.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(uI(t,i,n,s)&&(i=null),s||n===null?lI(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):n.mustUseProperty?e[n.propertyName]=i===null?n.type===3?!1:"":i:(t=n.attributeName,s=n.attributeNamespace,i===null?e.removeAttribute(t):(n=n.type,i=n===3||n===4&&i===!0?"":""+i,s?e.setAttributeNS(s,t,i):e.setAttribute(t,i))))}var Ms=rI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lu=Symbol.for("react.element"),Ar=Symbol.for("react.portal"),_r=Symbol.for("react.fragment"),Jg=Symbol.for("react.strict_mode"),sf=Symbol.for("react.profiler"),kR=Symbol.for("react.provider"),MR=Symbol.for("react.context"),Xg=Symbol.for("react.forward_ref"),nf=Symbol.for("react.suspense"),rf=Symbol.for("react.suspense_list"),Zg=Symbol.for("react.memo"),Bs=Symbol.for("react.lazy"),AR=Symbol.for("react.offscreen"),WC=Symbol.iterator;function tl(e){return e===null||typeof e!="object"?null:(e=WC&&e[WC]||e["@@iterator"],typeof e=="function"?e:null)}var _e=Object.assign,$h;function Cl(e){if($h===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);$h=t&&t[1]||""}return`
`+$h+e}var Kh=!1;function qh(e,t){if(!e||Kh)return"";Kh=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){s=u}e.call(t.prototype)}else{try{throw Error()}catch(u){s=u}e()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var n=u.stack.split(`
`),r=s.stack.split(`
`),o=n.length-1,l=r.length-1;1<=o&&0<=l&&n[o]!==r[l];)l--;for(;1<=o&&0<=l;o--,l--)if(n[o]!==r[l]){if(o!==1||l!==1)do if(o--,l--,0>l||n[o]!==r[l]){var a=`
`+n[o].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=o&&0<=l);break}}}finally{Kh=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?Cl(e):""}function cI(e){switch(e.tag){case 5:return Cl(e.type);case 16:return Cl("Lazy");case 13:return Cl("Suspense");case 19:return Cl("SuspenseList");case 0:case 2:case 15:return e=qh(e.type,!1),e;case 11:return e=qh(e.type.render,!1),e;case 1:return e=qh(e.type,!0),e;default:return""}}function of(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _r:return"Fragment";case Ar:return"Portal";case sf:return"Profiler";case Jg:return"StrictMode";case nf:return"Suspense";case rf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case MR:return(e.displayName||"Context")+".Consumer";case kR:return(e._context.displayName||"Context")+".Provider";case Xg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Zg:return t=e.displayName||null,t!==null?t:of(e.type)||"Memo";case Bs:t=e._payload,e=e._init;try{return of(e(t))}catch{}}return null}function dI(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return of(t);case 8:return t===Jg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function mn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _R(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function hI(e){var t=_R(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var n=i.get,r=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(o){s=""+o,r.call(this,o)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function au(e){e._valueTracker||(e._valueTracker=hI(e))}function LR(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),s="";return e&&(s=_R(e)?e.checked?"true":"false":e.value),e=s,e!==i?(t.setValue(e),!0):!1}function pc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function lf(e,t){var i=t.checked;return _e({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function zC(e,t){var i=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;i=mn(t.value!=null?t.value:i),e._wrapperState={initialChecked:s,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function OR(e,t){t=t.checked,t!=null&&Qg(e,"checked",t,!1)}function af(e,t){OR(e,t);var i=mn(t.value),s=t.type;if(i!=null)s==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?uf(e,t.type,i):t.hasOwnProperty("defaultValue")&&uf(e,t.type,mn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function UC(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function uf(e,t,i){(t!=="number"||pc(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var wl=Array.isArray;function Jr(e,t,i,s){if(e=e.options,t){t={};for(var n=0;n<i.length;n++)t["$"+i[n]]=!0;for(i=0;i<e.length;i++)n=t.hasOwnProperty("$"+e[i].value),e[i].selected!==n&&(e[i].selected=n),n&&s&&(e[i].defaultSelected=!0)}else{for(i=""+mn(i),t=null,n=0;n<e.length;n++){if(e[n].value===i){e[n].selected=!0,s&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function cf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(O(91));return _e({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function jC(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(O(92));if(wl(i)){if(1<i.length)throw Error(O(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:mn(i)}}function NR(e,t){var i=mn(t.value),s=mn(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),s!=null&&(e.defaultValue=""+s)}function $C(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function GR(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function df(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?GR(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var uu,HR=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,s,n){MSApp.execUnsafeLocalFunction(function(){return e(t,i,s,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(uu=uu||document.createElement("div"),uu.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=uu.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Kl(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Fl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pI=["Webkit","ms","Moz","O"];Object.keys(Fl).forEach(function(e){pI.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Fl[t]=Fl[e]})});function VR(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||Fl.hasOwnProperty(e)&&Fl[e]?(""+t).trim():t+"px"}function BR(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var s=i.indexOf("--")===0,n=VR(i,t[i],s);i==="float"&&(i="cssFloat"),s?e.setProperty(i,n):e[i]=n}}var fI=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hf(e,t){if(t){if(fI[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(O(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(O(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(O(61))}if(t.style!=null&&typeof t.style!="object")throw Error(O(62))}}function pf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ff=null;function em(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gf=null,Xr=null,Zr=null;function KC(e){if(e=La(e)){if(typeof gf!="function")throw Error(O(280));var t=e.stateNode;t&&(t=Id(t),gf(e.stateNode,e.type,t))}}function WR(e){Xr?Zr?Zr.push(e):Zr=[e]:Xr=e}function zR(){if(Xr){var e=Xr,t=Zr;if(Zr=Xr=null,KC(e),t)for(e=0;e<t.length;e++)KC(t[e])}}function UR(e,t){return e(t)}function jR(){}var Yh=!1;function $R(e,t,i){if(Yh)return e(t,i);Yh=!0;try{return UR(e,t,i)}finally{Yh=!1,(Xr!==null||Zr!==null)&&(jR(),zR())}}function ql(e,t){var i=e.stateNode;if(i===null)return null;var s=Id(i);if(s===null)return null;i=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(O(231,t,typeof i));return i}var mf=!1;if(Ss)try{var il={};Object.defineProperty(il,"passive",{get:function(){mf=!0}}),window.addEventListener("test",il,il),window.removeEventListener("test",il,il)}catch{mf=!1}function gI(e,t,i,s,n,r,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{t.apply(i,u)}catch(c){this.onError(c)}}var Tl=!1,fc=null,gc=!1,vf=null,mI={onError:function(e){Tl=!0,fc=e}};function vI(e,t,i,s,n,r,o,l,a){Tl=!1,fc=null,gI.apply(mI,arguments)}function CI(e,t,i,s,n,r,o,l,a){if(vI.apply(this,arguments),Tl){if(Tl){var u=fc;Tl=!1,fc=null}else throw Error(O(198));gc||(gc=!0,vf=u)}}function dr(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function KR(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function qC(e){if(dr(e)!==e)throw Error(O(188))}function wI(e){var t=e.alternate;if(!t){if(t=dr(e),t===null)throw Error(O(188));return t!==e?null:e}for(var i=e,s=t;;){var n=i.return;if(n===null)break;var r=n.alternate;if(r===null){if(s=n.return,s!==null){i=s;continue}break}if(n.child===r.child){for(r=n.child;r;){if(r===i)return qC(n),e;if(r===s)return qC(n),t;r=r.sibling}throw Error(O(188))}if(i.return!==s.return)i=n,s=r;else{for(var o=!1,l=n.child;l;){if(l===i){o=!0,i=n,s=r;break}if(l===s){o=!0,s=n,i=r;break}l=l.sibling}if(!o){for(l=r.child;l;){if(l===i){o=!0,i=r,s=n;break}if(l===s){o=!0,s=r,i=n;break}l=l.sibling}if(!o)throw Error(O(189))}}if(i.alternate!==s)throw Error(O(190))}if(i.tag!==3)throw Error(O(188));return i.stateNode.current===i?e:t}function qR(e){return e=wI(e),e!==null?YR(e):null}function YR(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=YR(e);if(t!==null)return t;e=e.sibling}return null}var QR=ii.unstable_scheduleCallback,YC=ii.unstable_cancelCallback,yI=ii.unstable_shouldYield,SI=ii.unstable_requestPaint,$e=ii.unstable_now,RI=ii.unstable_getCurrentPriorityLevel,tm=ii.unstable_ImmediatePriority,JR=ii.unstable_UserBlockingPriority,mc=ii.unstable_NormalPriority,bI=ii.unstable_LowPriority,XR=ii.unstable_IdlePriority,Pd=null,Yi=null;function EI(e){if(Yi&&typeof Yi.onCommitFiberRoot=="function")try{Yi.onCommitFiberRoot(Pd,e,void 0,(e.current.flags&128)===128)}catch{}}var Ai=Math.clz32?Math.clz32:TI,PI=Math.log,FI=Math.LN2;function TI(e){return e>>>=0,e===0?32:31-(PI(e)/FI|0)|0}var cu=64,du=4194304;function yl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vc(e,t){var i=e.pendingLanes;if(i===0)return 0;var s=0,n=e.suspendedLanes,r=e.pingedLanes,o=i&268435455;if(o!==0){var l=o&~n;l!==0?s=yl(l):(r&=o,r!==0&&(s=yl(r)))}else o=i&~n,o!==0?s=yl(o):r!==0&&(s=yl(r));if(s===0)return 0;if(t!==0&&t!==s&&!(t&n)&&(n=s&-s,r=t&-t,n>=r||n===16&&(r&4194240)!==0))return t;if(s&4&&(s|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)i=31-Ai(t),n=1<<i,s|=e[i],t&=~n;return s}function xI(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function II(e,t){for(var i=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,r=e.pendingLanes;0<r;){var o=31-Ai(r),l=1<<o,a=n[o];a===-1?(!(l&i)||l&s)&&(n[o]=xI(l,t)):a<=t&&(e.expiredLanes|=l),r&=~l}}function Cf(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ZR(){var e=cu;return cu<<=1,!(cu&4194240)&&(cu=64),e}function Qh(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Aa(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ai(t),e[t]=i}function DI(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<i;){var n=31-Ai(i),r=1<<n;t[n]=0,s[n]=-1,e[n]=-1,i&=~r}}function im(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var s=31-Ai(i),n=1<<s;n&t|e[s]&t&&(e[s]|=t),i&=~n}}var fe=0;function eb(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var tb,sm,ib,sb,nb,wf=!1,hu=[],Zs=null,en=null,tn=null,Yl=new Map,Ql=new Map,zs=[],kI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function QC(e,t){switch(e){case"focusin":case"focusout":Zs=null;break;case"dragenter":case"dragleave":en=null;break;case"mouseover":case"mouseout":tn=null;break;case"pointerover":case"pointerout":Yl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ql.delete(t.pointerId)}}function sl(e,t,i,s,n,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:i,eventSystemFlags:s,nativeEvent:r,targetContainers:[n]},t!==null&&(t=La(t),t!==null&&sm(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function MI(e,t,i,s,n){switch(t){case"focusin":return Zs=sl(Zs,e,t,i,s,n),!0;case"dragenter":return en=sl(en,e,t,i,s,n),!0;case"mouseover":return tn=sl(tn,e,t,i,s,n),!0;case"pointerover":var r=n.pointerId;return Yl.set(r,sl(Yl.get(r)||null,e,t,i,s,n)),!0;case"gotpointercapture":return r=n.pointerId,Ql.set(r,sl(Ql.get(r)||null,e,t,i,s,n)),!0}return!1}function rb(e){var t=Nn(e.target);if(t!==null){var i=dr(t);if(i!==null){if(t=i.tag,t===13){if(t=KR(i),t!==null){e.blockedOn=t,nb(e.priority,function(){ib(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Wu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=yf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var s=new i.constructor(i.type,i);ff=s,i.target.dispatchEvent(s),ff=null}else return t=La(i),t!==null&&sm(t),e.blockedOn=i,!1;t.shift()}return!0}function JC(e,t,i){Wu(e)&&i.delete(t)}function AI(){wf=!1,Zs!==null&&Wu(Zs)&&(Zs=null),en!==null&&Wu(en)&&(en=null),tn!==null&&Wu(tn)&&(tn=null),Yl.forEach(JC),Ql.forEach(JC)}function nl(e,t){e.blockedOn===t&&(e.blockedOn=null,wf||(wf=!0,ii.unstable_scheduleCallback(ii.unstable_NormalPriority,AI)))}function Jl(e){function t(n){return nl(n,e)}if(0<hu.length){nl(hu[0],e);for(var i=1;i<hu.length;i++){var s=hu[i];s.blockedOn===e&&(s.blockedOn=null)}}for(Zs!==null&&nl(Zs,e),en!==null&&nl(en,e),tn!==null&&nl(tn,e),Yl.forEach(t),Ql.forEach(t),i=0;i<zs.length;i++)s=zs[i],s.blockedOn===e&&(s.blockedOn=null);for(;0<zs.length&&(i=zs[0],i.blockedOn===null);)rb(i),i.blockedOn===null&&zs.shift()}var eo=Ms.ReactCurrentBatchConfig,Cc=!0;function _I(e,t,i,s){var n=fe,r=eo.transition;eo.transition=null;try{fe=1,nm(e,t,i,s)}finally{fe=n,eo.transition=r}}function LI(e,t,i,s){var n=fe,r=eo.transition;eo.transition=null;try{fe=4,nm(e,t,i,s)}finally{fe=n,eo.transition=r}}function nm(e,t,i,s){if(Cc){var n=yf(e,t,i,s);if(n===null)op(e,t,s,wc,i),QC(e,s);else if(MI(n,e,t,i,s))s.stopPropagation();else if(QC(e,s),t&4&&-1<kI.indexOf(e)){for(;n!==null;){var r=La(n);if(r!==null&&tb(r),r=yf(e,t,i,s),r===null&&op(e,t,s,wc,i),r===n)break;n=r}n!==null&&s.stopPropagation()}else op(e,t,s,null,i)}}var wc=null;function yf(e,t,i,s){if(wc=null,e=em(s),e=Nn(e),e!==null)if(t=dr(e),t===null)e=null;else if(i=t.tag,i===13){if(e=KR(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return wc=e,null}function ob(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RI()){case tm:return 1;case JR:return 4;case mc:case bI:return 16;case XR:return 536870912;default:return 16}default:return 16}}var Qs=null,rm=null,zu=null;function lb(){if(zu)return zu;var e,t=rm,i=t.length,s,n="value"in Qs?Qs.value:Qs.textContent,r=n.length;for(e=0;e<i&&t[e]===n[e];e++);var o=i-e;for(s=1;s<=o&&t[i-s]===n[r-s];s++);return zu=n.slice(e,1<s?1-s:void 0)}function Uu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function pu(){return!0}function XC(){return!1}function ri(e){function t(i,s,n,r,o){this._reactName=i,this._targetInst=n,this.type=s,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(i=e[l],this[l]=i?i(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?pu:XC,this.isPropagationStopped=XC,this}return _e(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=pu)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=pu)},persist:function(){},isPersistent:pu}),t}var _o={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},om=ri(_o),_a=_e({},_o,{view:0,detail:0}),OI=ri(_a),Jh,Xh,rl,Fd=_e({},_a,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==rl&&(rl&&e.type==="mousemove"?(Jh=e.screenX-rl.screenX,Xh=e.screenY-rl.screenY):Xh=Jh=0,rl=e),Jh)},movementY:function(e){return"movementY"in e?e.movementY:Xh}}),ZC=ri(Fd),NI=_e({},Fd,{dataTransfer:0}),GI=ri(NI),HI=_e({},_a,{relatedTarget:0}),Zh=ri(HI),VI=_e({},_o,{animationName:0,elapsedTime:0,pseudoElement:0}),BI=ri(VI),WI=_e({},_o,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),zI=ri(WI),UI=_e({},_o,{data:0}),ew=ri(UI),jI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$I={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qI(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=KI[e])?!!t[e]:!1}function lm(){return qI}var YI=_e({},_a,{key:function(e){if(e.key){var t=jI[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Uu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$I[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lm,charCode:function(e){return e.type==="keypress"?Uu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Uu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),QI=ri(YI),JI=_e({},Fd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tw=ri(JI),XI=_e({},_a,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lm}),ZI=ri(XI),eD=_e({},_o,{propertyName:0,elapsedTime:0,pseudoElement:0}),tD=ri(eD),iD=_e({},Fd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sD=ri(iD),nD=[9,13,27,32],am=Ss&&"CompositionEvent"in window,xl=null;Ss&&"documentMode"in document&&(xl=document.documentMode);var rD=Ss&&"TextEvent"in window&&!xl,ab=Ss&&(!am||xl&&8<xl&&11>=xl),iw=String.fromCharCode(32),sw=!1;function ub(e,t){switch(e){case"keyup":return nD.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cb(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Lr=!1;function oD(e,t){switch(e){case"compositionend":return cb(t);case"keypress":return t.which!==32?null:(sw=!0,iw);case"textInput":return e=t.data,e===iw&&sw?null:e;default:return null}}function lD(e,t){if(Lr)return e==="compositionend"||!am&&ub(e,t)?(e=lb(),zu=rm=Qs=null,Lr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ab&&t.locale!=="ko"?null:t.data;default:return null}}var aD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!aD[e.type]:t==="textarea"}function db(e,t,i,s){WR(s),t=yc(t,"onChange"),0<t.length&&(i=new om("onChange","change",null,i,s),e.push({event:i,listeners:t}))}var Il=null,Xl=null;function uD(e){Rb(e,0)}function Td(e){var t=Gr(e);if(LR(t))return e}function cD(e,t){if(e==="change")return t}var hb=!1;if(Ss){var ep;if(Ss){var tp="oninput"in document;if(!tp){var rw=document.createElement("div");rw.setAttribute("oninput","return;"),tp=typeof rw.oninput=="function"}ep=tp}else ep=!1;hb=ep&&(!document.documentMode||9<document.documentMode)}function ow(){Il&&(Il.detachEvent("onpropertychange",pb),Xl=Il=null)}function pb(e){if(e.propertyName==="value"&&Td(Xl)){var t=[];db(t,Xl,e,em(e)),$R(uD,t)}}function dD(e,t,i){e==="focusin"?(ow(),Il=t,Xl=i,Il.attachEvent("onpropertychange",pb)):e==="focusout"&&ow()}function hD(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Td(Xl)}function pD(e,t){if(e==="click")return Td(t)}function fD(e,t){if(e==="input"||e==="change")return Td(t)}function gD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ni=typeof Object.is=="function"?Object.is:gD;function Zl(e,t){if(Ni(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var n=i[s];if(!tf.call(t,n)||!Ni(e[n],t[n]))return!1}return!0}function lw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function aw(e,t){var i=lw(e);e=0;for(var s;i;){if(i.nodeType===3){if(s=e+i.textContent.length,e<=t&&s>=t)return{node:i,offset:t-e};e=s}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=lw(i)}}function fb(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?fb(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function gb(){for(var e=window,t=pc();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=pc(e.document)}return t}function um(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function mD(e){var t=gb(),i=e.focusedElem,s=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&fb(i.ownerDocument.documentElement,i)){if(s!==null&&um(i)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=i.textContent.length,r=Math.min(s.start,n);s=s.end===void 0?r:Math.min(s.end,n),!e.extend&&r>s&&(n=s,s=r,r=n),n=aw(i,r);var o=aw(i,s);n&&o&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),r>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vD=Ss&&"documentMode"in document&&11>=document.documentMode,Or=null,Sf=null,Dl=null,Rf=!1;function uw(e,t,i){var s=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Rf||Or==null||Or!==pc(s)||(s=Or,"selectionStart"in s&&um(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Dl&&Zl(Dl,s)||(Dl=s,s=yc(Sf,"onSelect"),0<s.length&&(t=new om("onSelect","select",null,t,i),e.push({event:t,listeners:s}),t.target=Or)))}function fu(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Nr={animationend:fu("Animation","AnimationEnd"),animationiteration:fu("Animation","AnimationIteration"),animationstart:fu("Animation","AnimationStart"),transitionend:fu("Transition","TransitionEnd")},ip={},mb={};Ss&&(mb=document.createElement("div").style,"AnimationEvent"in window||(delete Nr.animationend.animation,delete Nr.animationiteration.animation,delete Nr.animationstart.animation),"TransitionEvent"in window||delete Nr.transitionend.transition);function xd(e){if(ip[e])return ip[e];if(!Nr[e])return e;var t=Nr[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in mb)return ip[e]=t[i];return e}var vb=xd("animationend"),Cb=xd("animationiteration"),wb=xd("animationstart"),yb=xd("transitionend"),Sb=new Map,cw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rn(e,t){Sb.set(e,t),cr(t,[e])}for(var sp=0;sp<cw.length;sp++){var np=cw[sp],CD=np.toLowerCase(),wD=np[0].toUpperCase()+np.slice(1);Rn(CD,"on"+wD)}Rn(vb,"onAnimationEnd");Rn(Cb,"onAnimationIteration");Rn(wb,"onAnimationStart");Rn("dblclick","onDoubleClick");Rn("focusin","onFocus");Rn("focusout","onBlur");Rn(yb,"onTransitionEnd");fo("onMouseEnter",["mouseout","mouseover"]);fo("onMouseLeave",["mouseout","mouseover"]);fo("onPointerEnter",["pointerout","pointerover"]);fo("onPointerLeave",["pointerout","pointerover"]);cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cr("onBeforeInput",["compositionend","keypress","textInput","paste"]);cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sl));function dw(e,t,i){var s=e.type||"unknown-event";e.currentTarget=i,CI(s,t,void 0,e),e.currentTarget=null}function Rb(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var s=e[i],n=s.event;s=s.listeners;e:{var r=void 0;if(t)for(var o=s.length-1;0<=o;o--){var l=s[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==r&&n.isPropagationStopped())break e;dw(n,l,u),r=a}else for(o=0;o<s.length;o++){if(l=s[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==r&&n.isPropagationStopped())break e;dw(n,l,u),r=a}}}if(gc)throw e=vf,gc=!1,vf=null,e}function Ee(e,t){var i=t[Tf];i===void 0&&(i=t[Tf]=new Set);var s=e+"__bubble";i.has(s)||(bb(t,e,2,!1),i.add(s))}function rp(e,t,i){var s=0;t&&(s|=4),bb(i,e,s,t)}var gu="_reactListening"+Math.random().toString(36).slice(2);function ea(e){if(!e[gu]){e[gu]=!0,DR.forEach(function(i){i!=="selectionchange"&&(yD.has(i)||rp(i,!1,e),rp(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gu]||(t[gu]=!0,rp("selectionchange",!1,t))}}function bb(e,t,i,s){switch(ob(t)){case 1:var n=_I;break;case 4:n=LI;break;default:n=nm}i=n.bind(null,t,i,e),n=void 0,!mf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),s?n!==void 0?e.addEventListener(t,i,{capture:!0,passive:n}):e.addEventListener(t,i,!0):n!==void 0?e.addEventListener(t,i,{passive:n}):e.addEventListener(t,i,!1)}function op(e,t,i,s,n){var r=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===n||l.nodeType===8&&l.parentNode===n)break;if(o===4)for(o=s.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===n||a.nodeType===8&&a.parentNode===n))return;o=o.return}for(;l!==null;){if(o=Nn(l),o===null)return;if(a=o.tag,a===5||a===6){s=r=o;continue e}l=l.parentNode}}s=s.return}$R(function(){var u=r,c=em(i),d=[];e:{var h=Sb.get(e);if(h!==void 0){var p=om,f=e;switch(e){case"keypress":if(Uu(i)===0)break e;case"keydown":case"keyup":p=QI;break;case"focusin":f="focus",p=Zh;break;case"focusout":f="blur",p=Zh;break;case"beforeblur":case"afterblur":p=Zh;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=ZC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=GI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=ZI;break;case vb:case Cb:case wb:p=BI;break;case yb:p=tD;break;case"scroll":p=OI;break;case"wheel":p=sD;break;case"copy":case"cut":case"paste":p=zI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=tw}var m=(t&4)!==0,w=!m&&e==="scroll",v=m?h!==null?h+"Capture":null:h;m=[];for(var g=u,y;g!==null;){y=g;var S=y.stateNode;if(y.tag===5&&S!==null&&(y=S,v!==null&&(S=ql(g,v),S!=null&&m.push(ta(g,S,y)))),w)break;g=g.return}0<m.length&&(h=new p(h,f,null,i,c),d.push({event:h,listeners:m}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&i!==ff&&(f=i.relatedTarget||i.fromElement)&&(Nn(f)||f[Rs]))break e;if((p||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,p?(f=i.relatedTarget||i.toElement,p=u,f=f?Nn(f):null,f!==null&&(w=dr(f),f!==w||f.tag!==5&&f.tag!==6)&&(f=null)):(p=null,f=u),p!==f)){if(m=ZC,S="onMouseLeave",v="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(m=tw,S="onPointerLeave",v="onPointerEnter",g="pointer"),w=p==null?h:Gr(p),y=f==null?h:Gr(f),h=new m(S,g+"leave",p,i,c),h.target=w,h.relatedTarget=y,S=null,Nn(c)===u&&(m=new m(v,g+"enter",f,i,c),m.target=y,m.relatedTarget=w,S=m),w=S,p&&f)t:{for(m=p,v=f,g=0,y=m;y;y=Rr(y))g++;for(y=0,S=v;S;S=Rr(S))y++;for(;0<g-y;)m=Rr(m),g--;for(;0<y-g;)v=Rr(v),y--;for(;g--;){if(m===v||v!==null&&m===v.alternate)break t;m=Rr(m),v=Rr(v)}m=null}else m=null;p!==null&&hw(d,h,p,m,!1),f!==null&&w!==null&&hw(d,w,f,m,!0)}}e:{if(h=u?Gr(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var b=cD;else if(nw(h))if(hb)b=fD;else{b=hD;var R=dD}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(b=pD);if(b&&(b=b(e,u))){db(d,b,i,c);break e}R&&R(e,h,u),e==="focusout"&&(R=h._wrapperState)&&R.controlled&&h.type==="number"&&uf(h,"number",h.value)}switch(R=u?Gr(u):window,e){case"focusin":(nw(R)||R.contentEditable==="true")&&(Or=R,Sf=u,Dl=null);break;case"focusout":Dl=Sf=Or=null;break;case"mousedown":Rf=!0;break;case"contextmenu":case"mouseup":case"dragend":Rf=!1,uw(d,i,c);break;case"selectionchange":if(vD)break;case"keydown":case"keyup":uw(d,i,c)}var E;if(am)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Lr?ub(e,i)&&(x="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(x="onCompositionStart");x&&(ab&&i.locale!=="ko"&&(Lr||x!=="onCompositionStart"?x==="onCompositionEnd"&&Lr&&(E=lb()):(Qs=c,rm="value"in Qs?Qs.value:Qs.textContent,Lr=!0)),R=yc(u,x),0<R.length&&(x=new ew(x,e,null,i,c),d.push({event:x,listeners:R}),E?x.data=E:(E=cb(i),E!==null&&(x.data=E)))),(E=rD?oD(e,i):lD(e,i))&&(u=yc(u,"onBeforeInput"),0<u.length&&(c=new ew("onBeforeInput","beforeinput",null,i,c),d.push({event:c,listeners:u}),c.data=E))}Rb(d,t)})}function ta(e,t,i){return{instance:e,listener:t,currentTarget:i}}function yc(e,t){for(var i=t+"Capture",s=[];e!==null;){var n=e,r=n.stateNode;n.tag===5&&r!==null&&(n=r,r=ql(e,i),r!=null&&s.unshift(ta(e,r,n)),r=ql(e,t),r!=null&&s.push(ta(e,r,n))),e=e.return}return s}function Rr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function hw(e,t,i,s,n){for(var r=t._reactName,o=[];i!==null&&i!==s;){var l=i,a=l.alternate,u=l.stateNode;if(a!==null&&a===s)break;l.tag===5&&u!==null&&(l=u,n?(a=ql(i,r),a!=null&&o.unshift(ta(i,a,l))):n||(a=ql(i,r),a!=null&&o.push(ta(i,a,l)))),i=i.return}o.length!==0&&e.push({event:t,listeners:o})}var SD=/\r\n?/g,RD=/\u0000|\uFFFD/g;function pw(e){return(typeof e=="string"?e:""+e).replace(SD,`
`).replace(RD,"")}function mu(e,t,i){if(t=pw(t),pw(e)!==t&&i)throw Error(O(425))}function Sc(){}var bf=null,Ef=null;function Pf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,bD=typeof clearTimeout=="function"?clearTimeout:void 0,fw=typeof Promise=="function"?Promise:void 0,ED=typeof queueMicrotask=="function"?queueMicrotask:typeof fw<"u"?function(e){return fw.resolve(null).then(e).catch(PD)}:Ff;function PD(e){setTimeout(function(){throw e})}function lp(e,t){var i=t,s=0;do{var n=i.nextSibling;if(e.removeChild(i),n&&n.nodeType===8)if(i=n.data,i==="/$"){if(s===0){e.removeChild(n),Jl(t);return}s--}else i!=="$"&&i!=="$?"&&i!=="$!"||s++;i=n}while(i);Jl(t)}function sn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function gw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Lo=Math.random().toString(36).slice(2),qi="__reactFiber$"+Lo,ia="__reactProps$"+Lo,Rs="__reactContainer$"+Lo,Tf="__reactEvents$"+Lo,FD="__reactListeners$"+Lo,TD="__reactHandles$"+Lo;function Nn(e){var t=e[qi];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Rs]||i[qi]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=gw(e);e!==null;){if(i=e[qi])return i;e=gw(e)}return t}e=i,i=e.parentNode}return null}function La(e){return e=e[qi]||e[Rs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Gr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(O(33))}function Id(e){return e[ia]||null}var xf=[],Hr=-1;function bn(e){return{current:e}}function Fe(e){0>Hr||(e.current=xf[Hr],xf[Hr]=null,Hr--)}function Re(e,t){Hr++,xf[Hr]=e.current,e.current=t}var vn={},bt=bn(vn),Vt=bn(!1),Jn=vn;function go(e,t){var i=e.type.contextTypes;if(!i)return vn;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var n={},r;for(r in i)n[r]=t[r];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function Bt(e){return e=e.childContextTypes,e!=null}function Rc(){Fe(Vt),Fe(bt)}function mw(e,t,i){if(bt.current!==vn)throw Error(O(168));Re(bt,t),Re(Vt,i)}function Eb(e,t,i){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return i;s=s.getChildContext();for(var n in s)if(!(n in t))throw Error(O(108,dI(e)||"Unknown",n));return _e({},i,s)}function bc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vn,Jn=bt.current,Re(bt,e),Re(Vt,Vt.current),!0}function vw(e,t,i){var s=e.stateNode;if(!s)throw Error(O(169));i?(e=Eb(e,t,Jn),s.__reactInternalMemoizedMergedChildContext=e,Fe(Vt),Fe(bt),Re(bt,e)):Fe(Vt),Re(Vt,i)}var as=null,Dd=!1,ap=!1;function Pb(e){as===null?as=[e]:as.push(e)}function xD(e){Dd=!0,Pb(e)}function En(){if(!ap&&as!==null){ap=!0;var e=0,t=fe;try{var i=as;for(fe=1;e<i.length;e++){var s=i[e];do s=s(!0);while(s!==null)}as=null,Dd=!1}catch(n){throw as!==null&&(as=as.slice(e+1)),QR(tm,En),n}finally{fe=t,ap=!1}}return null}var Vr=[],Br=0,Ec=null,Pc=0,ai=[],ui=0,Xn=null,cs=1,ds="";function Dn(e,t){Vr[Br++]=Pc,Vr[Br++]=Ec,Ec=e,Pc=t}function Fb(e,t,i){ai[ui++]=cs,ai[ui++]=ds,ai[ui++]=Xn,Xn=e;var s=cs;e=ds;var n=32-Ai(s)-1;s&=~(1<<n),i+=1;var r=32-Ai(t)+n;if(30<r){var o=n-n%5;r=(s&(1<<o)-1).toString(32),s>>=o,n-=o,cs=1<<32-Ai(t)+n|i<<n|s,ds=r+e}else cs=1<<r|i<<n|s,ds=e}function cm(e){e.return!==null&&(Dn(e,1),Fb(e,1,0))}function dm(e){for(;e===Ec;)Ec=Vr[--Br],Vr[Br]=null,Pc=Vr[--Br],Vr[Br]=null;for(;e===Xn;)Xn=ai[--ui],ai[ui]=null,ds=ai[--ui],ai[ui]=null,cs=ai[--ui],ai[ui]=null}var ei=null,Xt=null,Ie=!1,Ti=null;function Tb(e,t){var i=di(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function Cw(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ei=e,Xt=sn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ei=e,Xt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Xn!==null?{id:cs,overflow:ds}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=di(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,ei=e,Xt=null,!0):!1;default:return!1}}function If(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Df(e){if(Ie){var t=Xt;if(t){var i=t;if(!Cw(e,t)){if(If(e))throw Error(O(418));t=sn(i.nextSibling);var s=ei;t&&Cw(e,t)?Tb(s,i):(e.flags=e.flags&-4097|2,Ie=!1,ei=e)}}else{if(If(e))throw Error(O(418));e.flags=e.flags&-4097|2,Ie=!1,ei=e}}}function ww(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ei=e}function vu(e){if(e!==ei)return!1;if(!Ie)return ww(e),Ie=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Pf(e.type,e.memoizedProps)),t&&(t=Xt)){if(If(e))throw xb(),Error(O(418));for(;t;)Tb(e,t),t=sn(t.nextSibling)}if(ww(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(O(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){Xt=sn(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}Xt=null}}else Xt=ei?sn(e.stateNode.nextSibling):null;return!0}function xb(){for(var e=Xt;e;)e=sn(e.nextSibling)}function mo(){Xt=ei=null,Ie=!1}function hm(e){Ti===null?Ti=[e]:Ti.push(e)}var ID=Ms.ReactCurrentBatchConfig;function ol(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(O(309));var s=i.stateNode}if(!s)throw Error(O(147,e));var n=s,r=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(o){var l=n.refs;o===null?delete l[r]:l[r]=o},t._stringRef=r,t)}if(typeof e!="string")throw Error(O(284));if(!i._owner)throw Error(O(290,e))}return e}function Cu(e,t){throw e=Object.prototype.toString.call(t),Error(O(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yw(e){var t=e._init;return t(e._payload)}function Ib(e){function t(v,g){if(e){var y=v.deletions;y===null?(v.deletions=[g],v.flags|=16):y.push(g)}}function i(v,g){if(!e)return null;for(;g!==null;)t(v,g),g=g.sibling;return null}function s(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function n(v,g){return v=ln(v,g),v.index=0,v.sibling=null,v}function r(v,g,y){return v.index=y,e?(y=v.alternate,y!==null?(y=y.index,y<g?(v.flags|=2,g):y):(v.flags|=2,g)):(v.flags|=1048576,g)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,g,y,S){return g===null||g.tag!==6?(g=gp(y,v.mode,S),g.return=v,g):(g=n(g,y),g.return=v,g)}function a(v,g,y,S){var b=y.type;return b===_r?c(v,g,y.props.children,S,y.key):g!==null&&(g.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Bs&&yw(b)===g.type)?(S=n(g,y.props),S.ref=ol(v,g,y),S.return=v,S):(S=Ju(y.type,y.key,y.props,null,v.mode,S),S.ref=ol(v,g,y),S.return=v,S)}function u(v,g,y,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=mp(y,v.mode,S),g.return=v,g):(g=n(g,y.children||[]),g.return=v,g)}function c(v,g,y,S,b){return g===null||g.tag!==7?(g=Un(y,v.mode,S,b),g.return=v,g):(g=n(g,y),g.return=v,g)}function d(v,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=gp(""+g,v.mode,y),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case lu:return y=Ju(g.type,g.key,g.props,null,v.mode,y),y.ref=ol(v,null,g),y.return=v,y;case Ar:return g=mp(g,v.mode,y),g.return=v,g;case Bs:var S=g._init;return d(v,S(g._payload),y)}if(wl(g)||tl(g))return g=Un(g,v.mode,y,null),g.return=v,g;Cu(v,g)}return null}function h(v,g,y,S){var b=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return b!==null?null:l(v,g,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case lu:return y.key===b?a(v,g,y,S):null;case Ar:return y.key===b?u(v,g,y,S):null;case Bs:return b=y._init,h(v,g,b(y._payload),S)}if(wl(y)||tl(y))return b!==null?null:c(v,g,y,S,null);Cu(v,y)}return null}function p(v,g,y,S,b){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(y)||null,l(g,v,""+S,b);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case lu:return v=v.get(S.key===null?y:S.key)||null,a(g,v,S,b);case Ar:return v=v.get(S.key===null?y:S.key)||null,u(g,v,S,b);case Bs:var R=S._init;return p(v,g,y,R(S._payload),b)}if(wl(S)||tl(S))return v=v.get(y)||null,c(g,v,S,b,null);Cu(g,S)}return null}function f(v,g,y,S){for(var b=null,R=null,E=g,x=g=0,I=null;E!==null&&x<y.length;x++){E.index>x?(I=E,E=null):I=E.sibling;var D=h(v,E,y[x],S);if(D===null){E===null&&(E=I);break}e&&E&&D.alternate===null&&t(v,E),g=r(D,g,x),R===null?b=D:R.sibling=D,R=D,E=I}if(x===y.length)return i(v,E),Ie&&Dn(v,x),b;if(E===null){for(;x<y.length;x++)E=d(v,y[x],S),E!==null&&(g=r(E,g,x),R===null?b=E:R.sibling=E,R=E);return Ie&&Dn(v,x),b}for(E=s(v,E);x<y.length;x++)I=p(E,v,x,y[x],S),I!==null&&(e&&I.alternate!==null&&E.delete(I.key===null?x:I.key),g=r(I,g,x),R===null?b=I:R.sibling=I,R=I);return e&&E.forEach(function(G){return t(v,G)}),Ie&&Dn(v,x),b}function m(v,g,y,S){var b=tl(y);if(typeof b!="function")throw Error(O(150));if(y=b.call(y),y==null)throw Error(O(151));for(var R=b=null,E=g,x=g=0,I=null,D=y.next();E!==null&&!D.done;x++,D=y.next()){E.index>x?(I=E,E=null):I=E.sibling;var G=h(v,E,D.value,S);if(G===null){E===null&&(E=I);break}e&&E&&G.alternate===null&&t(v,E),g=r(G,g,x),R===null?b=G:R.sibling=G,R=G,E=I}if(D.done)return i(v,E),Ie&&Dn(v,x),b;if(E===null){for(;!D.done;x++,D=y.next())D=d(v,D.value,S),D!==null&&(g=r(D,g,x),R===null?b=D:R.sibling=D,R=D);return Ie&&Dn(v,x),b}for(E=s(v,E);!D.done;x++,D=y.next())D=p(E,v,x,D.value,S),D!==null&&(e&&D.alternate!==null&&E.delete(D.key===null?x:D.key),g=r(D,g,x),R===null?b=D:R.sibling=D,R=D);return e&&E.forEach(function(H){return t(v,H)}),Ie&&Dn(v,x),b}function w(v,g,y,S){if(typeof y=="object"&&y!==null&&y.type===_r&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case lu:e:{for(var b=y.key,R=g;R!==null;){if(R.key===b){if(b=y.type,b===_r){if(R.tag===7){i(v,R.sibling),g=n(R,y.props.children),g.return=v,v=g;break e}}else if(R.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Bs&&yw(b)===R.type){i(v,R.sibling),g=n(R,y.props),g.ref=ol(v,R,y),g.return=v,v=g;break e}i(v,R);break}else t(v,R);R=R.sibling}y.type===_r?(g=Un(y.props.children,v.mode,S,y.key),g.return=v,v=g):(S=Ju(y.type,y.key,y.props,null,v.mode,S),S.ref=ol(v,g,y),S.return=v,v=S)}return o(v);case Ar:e:{for(R=y.key;g!==null;){if(g.key===R)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){i(v,g.sibling),g=n(g,y.children||[]),g.return=v,v=g;break e}else{i(v,g);break}else t(v,g);g=g.sibling}g=mp(y,v.mode,S),g.return=v,v=g}return o(v);case Bs:return R=y._init,w(v,g,R(y._payload),S)}if(wl(y))return f(v,g,y,S);if(tl(y))return m(v,g,y,S);Cu(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(i(v,g.sibling),g=n(g,y),g.return=v,v=g):(i(v,g),g=gp(y,v.mode,S),g.return=v,v=g),o(v)):i(v,g)}return w}var vo=Ib(!0),Db=Ib(!1),Fc=bn(null),Tc=null,Wr=null,pm=null;function fm(){pm=Wr=Tc=null}function gm(e){var t=Fc.current;Fe(Fc),e._currentValue=t}function kf(e,t,i){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===i)break;e=e.return}}function to(e,t){Tc=e,pm=Wr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ot=!0),e.firstContext=null)}function vi(e){var t=e._currentValue;if(pm!==e)if(e={context:e,memoizedValue:t,next:null},Wr===null){if(Tc===null)throw Error(O(308));Wr=e,Tc.dependencies={lanes:0,firstContext:e}}else Wr=Wr.next=e;return t}var Gn=null;function mm(e){Gn===null?Gn=[e]:Gn.push(e)}function kb(e,t,i,s){var n=t.interleaved;return n===null?(i.next=i,mm(t)):(i.next=n.next,n.next=i),t.interleaved=i,bs(e,s)}function bs(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Ws=!1;function vm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mb(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function vs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function nn(e,t,i){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,le&2){var n=s.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),s.pending=t,bs(e,i)}return n=s.interleaved,n===null?(t.next=t,mm(s)):(t.next=n.next,n.next=t),s.interleaved=t,bs(e,i)}function ju(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,im(e,i)}}function Sw(e,t){var i=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,i===s)){var n=null,r=null;if(i=i.firstBaseUpdate,i!==null){do{var o={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};r===null?n=r=o:r=r.next=o,i=i.next}while(i!==null);r===null?n=r=t:r=r.next=t}else n=r=t;i={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:r,shared:s.shared,effects:s.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function xc(e,t,i,s){var n=e.updateQueue;Ws=!1;var r=n.firstBaseUpdate,o=n.lastBaseUpdate,l=n.shared.pending;if(l!==null){n.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?r=u:o.next=u,o=a;var c=e.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==o&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(r!==null){var d=n.baseState;o=0,c=u=a=null,l=r;do{var h=l.lane,p=l.eventTime;if((s&h)===h){c!==null&&(c=c.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var f=e,m=l;switch(h=t,p=i,m.tag){case 1:if(f=m.payload,typeof f=="function"){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=m.payload,h=typeof f=="function"?f.call(p,d,h):f,h==null)break e;d=_e({},d,h);break e;case 2:Ws=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=n.effects,h===null?n.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=p,a=d):c=c.next=p,o|=h;if(l=l.next,l===null){if(l=n.shared.pending,l===null)break;h=l,l=h.next,h.next=null,n.lastBaseUpdate=h,n.shared.pending=null}}while(1);if(c===null&&(a=d),n.baseState=a,n.firstBaseUpdate=u,n.lastBaseUpdate=c,t=n.shared.interleaved,t!==null){n=t;do o|=n.lane,n=n.next;while(n!==t)}else r===null&&(n.shared.lanes=0);er|=o,e.lanes=o,e.memoizedState=d}}function Rw(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],n=s.callback;if(n!==null){if(s.callback=null,s=i,typeof n!="function")throw Error(O(191,n));n.call(s)}}}var Oa={},Qi=bn(Oa),sa=bn(Oa),na=bn(Oa);function Hn(e){if(e===Oa)throw Error(O(174));return e}function Cm(e,t){switch(Re(na,t),Re(sa,e),Re(Qi,Oa),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:df(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=df(t,e)}Fe(Qi),Re(Qi,t)}function Co(){Fe(Qi),Fe(sa),Fe(na)}function Ab(e){Hn(na.current);var t=Hn(Qi.current),i=df(t,e.type);t!==i&&(Re(sa,e),Re(Qi,i))}function wm(e){sa.current===e&&(Fe(Qi),Fe(sa))}var ke=bn(0);function Ic(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var up=[];function ym(){for(var e=0;e<up.length;e++)up[e]._workInProgressVersionPrimary=null;up.length=0}var $u=Ms.ReactCurrentDispatcher,cp=Ms.ReactCurrentBatchConfig,Zn=0,Ae=null,Ze=null,nt=null,Dc=!1,kl=!1,ra=0,DD=0;function mt(){throw Error(O(321))}function Sm(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Ni(e[i],t[i]))return!1;return!0}function Rm(e,t,i,s,n,r){if(Zn=r,Ae=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$u.current=e===null||e.memoizedState===null?_D:LD,e=i(s,n),kl){r=0;do{if(kl=!1,ra=0,25<=r)throw Error(O(301));r+=1,nt=Ze=null,t.updateQueue=null,$u.current=OD,e=i(s,n)}while(kl)}if($u.current=kc,t=Ze!==null&&Ze.next!==null,Zn=0,nt=Ze=Ae=null,Dc=!1,t)throw Error(O(300));return e}function bm(){var e=ra!==0;return ra=0,e}function ji(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?Ae.memoizedState=nt=e:nt=nt.next=e,nt}function Ci(){if(Ze===null){var e=Ae.alternate;e=e!==null?e.memoizedState:null}else e=Ze.next;var t=nt===null?Ae.memoizedState:nt.next;if(t!==null)nt=t,Ze=e;else{if(e===null)throw Error(O(310));Ze=e,e={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},nt===null?Ae.memoizedState=nt=e:nt=nt.next=e}return nt}function oa(e,t){return typeof t=="function"?t(e):t}function dp(e){var t=Ci(),i=t.queue;if(i===null)throw Error(O(311));i.lastRenderedReducer=e;var s=Ze,n=s.baseQueue,r=i.pending;if(r!==null){if(n!==null){var o=n.next;n.next=r.next,r.next=o}s.baseQueue=n=r,i.pending=null}if(n!==null){r=n.next,s=s.baseState;var l=o=null,a=null,u=r;do{var c=u.lane;if((Zn&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=d,o=s):a=a.next=d,Ae.lanes|=c,er|=c}u=u.next}while(u!==null&&u!==r);a===null?o=s:a.next=l,Ni(s,t.memoizedState)||(Ot=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=a,i.lastRenderedState=s}if(e=i.interleaved,e!==null){n=e;do r=n.lane,Ae.lanes|=r,er|=r,n=n.next;while(n!==e)}else n===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function hp(e){var t=Ci(),i=t.queue;if(i===null)throw Error(O(311));i.lastRenderedReducer=e;var s=i.dispatch,n=i.pending,r=t.memoizedState;if(n!==null){i.pending=null;var o=n=n.next;do r=e(r,o.action),o=o.next;while(o!==n);Ni(r,t.memoizedState)||(Ot=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),i.lastRenderedState=r}return[r,s]}function _b(){}function Lb(e,t){var i=Ae,s=Ci(),n=t(),r=!Ni(s.memoizedState,n);if(r&&(s.memoizedState=n,Ot=!0),s=s.queue,Em(Gb.bind(null,i,s,e),[e]),s.getSnapshot!==t||r||nt!==null&&nt.memoizedState.tag&1){if(i.flags|=2048,la(9,Nb.bind(null,i,s,n,t),void 0,null),at===null)throw Error(O(349));Zn&30||Ob(i,t,n)}return n}function Ob(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Nb(e,t,i,s){t.value=i,t.getSnapshot=s,Hb(t)&&Vb(e)}function Gb(e,t,i){return i(function(){Hb(t)&&Vb(e)})}function Hb(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Ni(e,i)}catch{return!0}}function Vb(e){var t=bs(e,1);t!==null&&_i(t,e,1,-1)}function bw(e){var t=ji();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:e},t.queue=e,e=e.dispatch=AD.bind(null,Ae,e),[t.memoizedState,e]}function la(e,t,i,s){return e={tag:e,create:t,destroy:i,deps:s,next:null},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(s=i.next,i.next=e,e.next=s,t.lastEffect=e)),e}function Bb(){return Ci().memoizedState}function Ku(e,t,i,s){var n=ji();Ae.flags|=e,n.memoizedState=la(1|t,i,void 0,s===void 0?null:s)}function kd(e,t,i,s){var n=Ci();s=s===void 0?null:s;var r=void 0;if(Ze!==null){var o=Ze.memoizedState;if(r=o.destroy,s!==null&&Sm(s,o.deps)){n.memoizedState=la(t,i,r,s);return}}Ae.flags|=e,n.memoizedState=la(1|t,i,r,s)}function Ew(e,t){return Ku(8390656,8,e,t)}function Em(e,t){return kd(2048,8,e,t)}function Wb(e,t){return kd(4,2,e,t)}function zb(e,t){return kd(4,4,e,t)}function Ub(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function jb(e,t,i){return i=i!=null?i.concat([e]):null,kd(4,4,Ub.bind(null,t,e),i)}function Pm(){}function $b(e,t){var i=Ci();t=t===void 0?null:t;var s=i.memoizedState;return s!==null&&t!==null&&Sm(t,s[1])?s[0]:(i.memoizedState=[e,t],e)}function Kb(e,t){var i=Ci();t=t===void 0?null:t;var s=i.memoizedState;return s!==null&&t!==null&&Sm(t,s[1])?s[0]:(e=e(),i.memoizedState=[e,t],e)}function qb(e,t,i){return Zn&21?(Ni(i,t)||(i=ZR(),Ae.lanes|=i,er|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ot=!0),e.memoizedState=i)}function kD(e,t){var i=fe;fe=i!==0&&4>i?i:4,e(!0);var s=cp.transition;cp.transition={};try{e(!1),t()}finally{fe=i,cp.transition=s}}function Yb(){return Ci().memoizedState}function MD(e,t,i){var s=on(e);if(i={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null},Qb(e))Jb(t,i);else if(i=kb(e,t,i,s),i!==null){var n=Dt();_i(i,e,s,n),Xb(i,t,s)}}function AD(e,t,i){var s=on(e),n={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null};if(Qb(e))Jb(t,n);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var o=t.lastRenderedState,l=r(o,i);if(n.hasEagerState=!0,n.eagerState=l,Ni(l,o)){var a=t.interleaved;a===null?(n.next=n,mm(t)):(n.next=a.next,a.next=n),t.interleaved=n;return}}catch{}finally{}i=kb(e,t,n,s),i!==null&&(n=Dt(),_i(i,e,s,n),Xb(i,t,s))}}function Qb(e){var t=e.alternate;return e===Ae||t!==null&&t===Ae}function Jb(e,t){kl=Dc=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Xb(e,t,i){if(i&4194240){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,im(e,i)}}var kc={readContext:vi,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},_D={readContext:vi,useCallback:function(e,t){return ji().memoizedState=[e,t===void 0?null:t],e},useContext:vi,useEffect:Ew,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Ku(4194308,4,Ub.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Ku(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ku(4,2,e,t)},useMemo:function(e,t){var i=ji();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var s=ji();return t=i!==void 0?i(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=MD.bind(null,Ae,e),[s.memoizedState,e]},useRef:function(e){var t=ji();return e={current:e},t.memoizedState=e},useState:bw,useDebugValue:Pm,useDeferredValue:function(e){return ji().memoizedState=e},useTransition:function(){var e=bw(!1),t=e[0];return e=kD.bind(null,e[1]),ji().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var s=Ae,n=ji();if(Ie){if(i===void 0)throw Error(O(407));i=i()}else{if(i=t(),at===null)throw Error(O(349));Zn&30||Ob(s,t,i)}n.memoizedState=i;var r={value:i,getSnapshot:t};return n.queue=r,Ew(Gb.bind(null,s,r,e),[e]),s.flags|=2048,la(9,Nb.bind(null,s,r,i,t),void 0,null),i},useId:function(){var e=ji(),t=at.identifierPrefix;if(Ie){var i=ds,s=cs;i=(s&~(1<<32-Ai(s)-1)).toString(32)+i,t=":"+t+"R"+i,i=ra++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=DD++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},LD={readContext:vi,useCallback:$b,useContext:vi,useEffect:Em,useImperativeHandle:jb,useInsertionEffect:Wb,useLayoutEffect:zb,useMemo:Kb,useReducer:dp,useRef:Bb,useState:function(){return dp(oa)},useDebugValue:Pm,useDeferredValue:function(e){var t=Ci();return qb(t,Ze.memoizedState,e)},useTransition:function(){var e=dp(oa)[0],t=Ci().memoizedState;return[e,t]},useMutableSource:_b,useSyncExternalStore:Lb,useId:Yb,unstable_isNewReconciler:!1},OD={readContext:vi,useCallback:$b,useContext:vi,useEffect:Em,useImperativeHandle:jb,useInsertionEffect:Wb,useLayoutEffect:zb,useMemo:Kb,useReducer:hp,useRef:Bb,useState:function(){return hp(oa)},useDebugValue:Pm,useDeferredValue:function(e){var t=Ci();return Ze===null?t.memoizedState=e:qb(t,Ze.memoizedState,e)},useTransition:function(){var e=hp(oa)[0],t=Ci().memoizedState;return[e,t]},useMutableSource:_b,useSyncExternalStore:Lb,useId:Yb,unstable_isNewReconciler:!1};function Ei(e,t){if(e&&e.defaultProps){t=_e({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}function Mf(e,t,i,s){t=e.memoizedState,i=i(s,t),i=i==null?t:_e({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Md={isMounted:function(e){return(e=e._reactInternals)?dr(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var s=Dt(),n=on(e),r=vs(s,n);r.payload=t,i!=null&&(r.callback=i),t=nn(e,r,n),t!==null&&(_i(t,e,n,s),ju(t,e,n))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var s=Dt(),n=on(e),r=vs(s,n);r.tag=1,r.payload=t,i!=null&&(r.callback=i),t=nn(e,r,n),t!==null&&(_i(t,e,n,s),ju(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Dt(),s=on(e),n=vs(i,s);n.tag=2,t!=null&&(n.callback=t),t=nn(e,n,s),t!==null&&(_i(t,e,s,i),ju(t,e,s))}};function Pw(e,t,i,s,n,r,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,r,o):t.prototype&&t.prototype.isPureReactComponent?!Zl(i,s)||!Zl(n,r):!0}function Zb(e,t,i){var s=!1,n=vn,r=t.contextType;return typeof r=="object"&&r!==null?r=vi(r):(n=Bt(t)?Jn:bt.current,s=t.contextTypes,r=(s=s!=null)?go(e,n):vn),t=new t(i,r),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Md,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=r),t}function Fw(e,t,i,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,s),t.state!==e&&Md.enqueueReplaceState(t,t.state,null)}function Af(e,t,i,s){var n=e.stateNode;n.props=i,n.state=e.memoizedState,n.refs={},vm(e);var r=t.contextType;typeof r=="object"&&r!==null?n.context=vi(r):(r=Bt(t)?Jn:bt.current,n.context=go(e,r)),n.state=e.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(Mf(e,t,r,i),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&Md.enqueueReplaceState(n,n.state,null),xc(e,i,n,s),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function wo(e,t){try{var i="",s=t;do i+=cI(s),s=s.return;while(s);var n=i}catch(r){n=`
Error generating stack: `+r.message+`
`+r.stack}return{value:e,source:t,stack:n,digest:null}}function pp(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function _f(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var ND=typeof WeakMap=="function"?WeakMap:Map;function eE(e,t,i){i=vs(-1,i),i.tag=3,i.payload={element:null};var s=t.value;return i.callback=function(){Ac||(Ac=!0,Uf=s),_f(e,t)},i}function tE(e,t,i){i=vs(-1,i),i.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var n=t.value;i.payload=function(){return s(n)},i.callback=function(){_f(e,t)}}var r=e.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(i.callback=function(){_f(e,t),typeof s!="function"&&(rn===null?rn=new Set([this]):rn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),i}function Tw(e,t,i){var s=e.pingCache;if(s===null){s=e.pingCache=new ND;var n=new Set;s.set(t,n)}else n=s.get(t),n===void 0&&(n=new Set,s.set(t,n));n.has(i)||(n.add(i),e=JD.bind(null,e,t,i),t.then(e,e))}function xw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Iw(e,t,i,s,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=vs(-1,1),t.tag=2,nn(i,t,1))),i.lanes|=1),e)}var GD=Ms.ReactCurrentOwner,Ot=!1;function Ft(e,t,i,s){t.child=e===null?Db(t,null,i,s):vo(t,e.child,i,s)}function Dw(e,t,i,s,n){i=i.render;var r=t.ref;return to(t,n),s=Rm(e,t,i,s,r,n),i=bm(),e!==null&&!Ot?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Es(e,t,n)):(Ie&&i&&cm(t),t.flags|=1,Ft(e,t,s,n),t.child)}function kw(e,t,i,s,n){if(e===null){var r=i.type;return typeof r=="function"&&!Am(r)&&r.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=r,iE(e,t,r,s,n)):(e=Ju(i.type,null,s,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!(e.lanes&n)){var o=r.memoizedProps;if(i=i.compare,i=i!==null?i:Zl,i(o,s)&&e.ref===t.ref)return Es(e,t,n)}return t.flags|=1,e=ln(r,s),e.ref=t.ref,e.return=t,t.child=e}function iE(e,t,i,s,n){if(e!==null){var r=e.memoizedProps;if(Zl(r,s)&&e.ref===t.ref)if(Ot=!1,t.pendingProps=s=r,(e.lanes&n)!==0)e.flags&131072&&(Ot=!0);else return t.lanes=e.lanes,Es(e,t,n)}return Lf(e,t,i,s,n)}function sE(e,t,i){var s=t.pendingProps,n=s.children,r=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(Ur,Qt),Qt|=i;else{if(!(i&1073741824))return e=r!==null?r.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Re(Ur,Qt),Qt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=r!==null?r.baseLanes:i,Re(Ur,Qt),Qt|=s}else r!==null?(s=r.baseLanes|i,t.memoizedState=null):s=i,Re(Ur,Qt),Qt|=s;return Ft(e,t,n,i),t.child}function nE(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Lf(e,t,i,s,n){var r=Bt(i)?Jn:bt.current;return r=go(t,r),to(t,n),i=Rm(e,t,i,s,r,n),s=bm(),e!==null&&!Ot?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Es(e,t,n)):(Ie&&s&&cm(t),t.flags|=1,Ft(e,t,i,n),t.child)}function Mw(e,t,i,s,n){if(Bt(i)){var r=!0;bc(t)}else r=!1;if(to(t,n),t.stateNode===null)qu(e,t),Zb(t,i,s),Af(t,i,s,n),s=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var a=o.context,u=i.contextType;typeof u=="object"&&u!==null?u=vi(u):(u=Bt(i)?Jn:bt.current,u=go(t,u));var c=i.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||a!==u)&&Fw(t,o,s,u),Ws=!1;var h=t.memoizedState;o.state=h,xc(t,s,o,n),a=t.memoizedState,l!==s||h!==a||Vt.current||Ws?(typeof c=="function"&&(Mf(t,i,c,s),a=t.memoizedState),(l=Ws||Pw(t,i,l,s,h,a,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=a),o.props=s,o.state=a,o.context=u,s=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,Mb(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Ei(t.type,l),o.props=u,d=t.pendingProps,h=o.context,a=i.contextType,typeof a=="object"&&a!==null?a=vi(a):(a=Bt(i)?Jn:bt.current,a=go(t,a));var p=i.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||h!==a)&&Fw(t,o,s,a),Ws=!1,h=t.memoizedState,o.state=h,xc(t,s,o,n);var f=t.memoizedState;l!==d||h!==f||Vt.current||Ws?(typeof p=="function"&&(Mf(t,i,p,s),f=t.memoizedState),(u=Ws||Pw(t,i,u,s,h,f,a)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,f,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,f,a)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=f),o.props=s,o.state=f,o.context=a,s=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return Of(e,t,i,s,r,n)}function Of(e,t,i,s,n,r){nE(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return n&&vw(t,i,!1),Es(e,t,r);s=t.stateNode,GD.current=t;var l=o&&typeof i.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=vo(t,e.child,null,r),t.child=vo(t,null,l,r)):Ft(e,t,l,r),t.memoizedState=s.state,n&&vw(t,i,!0),t.child}function rE(e){var t=e.stateNode;t.pendingContext?mw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&mw(e,t.context,!1),Cm(e,t.containerInfo)}function Aw(e,t,i,s,n){return mo(),hm(n),t.flags|=256,Ft(e,t,i,s),t.child}var Nf={dehydrated:null,treeContext:null,retryLane:0};function Gf(e){return{baseLanes:e,cachePool:null,transitions:null}}function oE(e,t,i){var s=t.pendingProps,n=ke.current,r=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(n&2)!==0),l?(r=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),Re(ke,n&1),e===null)return Df(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,r?(s=t.mode,r=t.child,o={mode:"hidden",children:o},!(s&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=Ld(o,s,0,null),e=Un(e,s,i,null),r.return=t,e.return=t,r.sibling=e,t.child=r,t.child.memoizedState=Gf(i),t.memoizedState=Nf,e):Fm(t,o));if(n=e.memoizedState,n!==null&&(l=n.dehydrated,l!==null))return HD(e,t,o,s,l,n,i);if(r){r=s.fallback,o=t.mode,n=e.child,l=n.sibling;var a={mode:"hidden",children:s.children};return!(o&1)&&t.child!==n?(s=t.child,s.childLanes=0,s.pendingProps=a,t.deletions=null):(s=ln(n,a),s.subtreeFlags=n.subtreeFlags&14680064),l!==null?r=ln(l,r):(r=Un(r,o,i,null),r.flags|=2),r.return=t,s.return=t,s.sibling=r,t.child=s,s=r,r=t.child,o=e.child.memoizedState,o=o===null?Gf(i):{baseLanes:o.baseLanes|i,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=e.childLanes&~i,t.memoizedState=Nf,s}return r=e.child,e=r.sibling,s=ln(r,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=i),s.return=t,s.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=s,t.memoizedState=null,s}function Fm(e,t){return t=Ld({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function wu(e,t,i,s){return s!==null&&hm(s),vo(t,e.child,null,i),e=Fm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function HD(e,t,i,s,n,r,o){if(i)return t.flags&256?(t.flags&=-257,s=pp(Error(O(422))),wu(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(r=s.fallback,n=t.mode,s=Ld({mode:"visible",children:s.children},n,0,null),r=Un(r,n,o,null),r.flags|=2,s.return=t,r.return=t,s.sibling=r,t.child=s,t.mode&1&&vo(t,e.child,null,o),t.child.memoizedState=Gf(o),t.memoizedState=Nf,r);if(!(t.mode&1))return wu(e,t,o,null);if(n.data==="$!"){if(s=n.nextSibling&&n.nextSibling.dataset,s)var l=s.dgst;return s=l,r=Error(O(419)),s=pp(r,s,void 0),wu(e,t,o,s)}if(l=(o&e.childLanes)!==0,Ot||l){if(s=at,s!==null){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(s.suspendedLanes|o)?0:n,n!==0&&n!==r.retryLane&&(r.retryLane=n,bs(e,n),_i(s,e,n,-1))}return Mm(),s=pp(Error(O(421))),wu(e,t,o,s)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=XD.bind(null,e),n._reactRetry=t,null):(e=r.treeContext,Xt=sn(n.nextSibling),ei=t,Ie=!0,Ti=null,e!==null&&(ai[ui++]=cs,ai[ui++]=ds,ai[ui++]=Xn,cs=e.id,ds=e.overflow,Xn=t),t=Fm(t,s.children),t.flags|=4096,t)}function _w(e,t,i){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),kf(e.return,t,i)}function fp(e,t,i,s,n){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:n}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=s,r.tail=i,r.tailMode=n)}function lE(e,t,i){var s=t.pendingProps,n=s.revealOrder,r=s.tail;if(Ft(e,t,s.children,i),s=ke.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_w(e,i,t);else if(e.tag===19)_w(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Re(ke,s),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(i=t.child,n=null;i!==null;)e=i.alternate,e!==null&&Ic(e)===null&&(n=i),i=i.sibling;i=n,i===null?(n=t.child,t.child=null):(n=i.sibling,i.sibling=null),fp(t,!1,n,i,r);break;case"backwards":for(i=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Ic(e)===null){t.child=n;break}e=n.sibling,n.sibling=i,i=n,n=e}fp(t,!0,i,null,r);break;case"together":fp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Es(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),er|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(O(153));if(t.child!==null){for(e=t.child,i=ln(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=ln(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function VD(e,t,i){switch(t.tag){case 3:rE(t),mo();break;case 5:Ab(t);break;case 1:Bt(t.type)&&bc(t);break;case 4:Cm(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,n=t.memoizedProps.value;Re(Fc,s._currentValue),s._currentValue=n;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Re(ke,ke.current&1),t.flags|=128,null):i&t.child.childLanes?oE(e,t,i):(Re(ke,ke.current&1),e=Es(e,t,i),e!==null?e.sibling:null);Re(ke,ke.current&1);break;case 19:if(s=(i&t.childLanes)!==0,e.flags&128){if(s)return lE(e,t,i);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Re(ke,ke.current),s)break;return null;case 22:case 23:return t.lanes=0,sE(e,t,i)}return Es(e,t,i)}var aE,Hf,uE,cE;aE=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Hf=function(){};uE=function(e,t,i,s){var n=e.memoizedProps;if(n!==s){e=t.stateNode,Hn(Qi.current);var r=null;switch(i){case"input":n=lf(e,n),s=lf(e,s),r=[];break;case"select":n=_e({},n,{value:void 0}),s=_e({},s,{value:void 0}),r=[];break;case"textarea":n=cf(e,n),s=cf(e,s),r=[];break;default:typeof n.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Sc)}hf(i,s);var o;i=null;for(u in n)if(!s.hasOwnProperty(u)&&n.hasOwnProperty(u)&&n[u]!=null)if(u==="style"){var l=n[u];for(o in l)l.hasOwnProperty(o)&&(i||(i={}),i[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&($l.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in s){var a=s[u];if(l=n!=null?n[u]:void 0,s.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(i||(i={}),i[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(i||(i={}),i[o]=a[o])}else i||(r||(r=[]),r.push(u,i)),i=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(r=r||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(r=r||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&($l.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&Ee("scroll",e),r||l===a||(r=[])):(r=r||[]).push(u,a))}i&&(r=r||[]).push("style",i);var u=r;(t.updateQueue=u)&&(t.flags|=4)}};cE=function(e,t,i,s){i!==s&&(t.flags|=4)};function ll(e,t){if(!Ie)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function vt(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,s=0;if(t)for(var n=e.child;n!==null;)i|=n.lanes|n.childLanes,s|=n.subtreeFlags&14680064,s|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)i|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=i,t}function BD(e,t,i){var s=t.pendingProps;switch(dm(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(t),null;case 1:return Bt(t.type)&&Rc(),vt(t),null;case 3:return s=t.stateNode,Co(),Fe(Vt),Fe(bt),ym(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(vu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ti!==null&&(Kf(Ti),Ti=null))),Hf(e,t),vt(t),null;case 5:wm(t);var n=Hn(na.current);if(i=t.type,e!==null&&t.stateNode!=null)uE(e,t,i,s,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(O(166));return vt(t),null}if(e=Hn(Qi.current),vu(t)){s=t.stateNode,i=t.type;var r=t.memoizedProps;switch(s[qi]=t,s[ia]=r,e=(t.mode&1)!==0,i){case"dialog":Ee("cancel",s),Ee("close",s);break;case"iframe":case"object":case"embed":Ee("load",s);break;case"video":case"audio":for(n=0;n<Sl.length;n++)Ee(Sl[n],s);break;case"source":Ee("error",s);break;case"img":case"image":case"link":Ee("error",s),Ee("load",s);break;case"details":Ee("toggle",s);break;case"input":zC(s,r),Ee("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!r.multiple},Ee("invalid",s);break;case"textarea":jC(s,r),Ee("invalid",s)}hf(i,r),n=null;for(var o in r)if(r.hasOwnProperty(o)){var l=r[o];o==="children"?typeof l=="string"?s.textContent!==l&&(r.suppressHydrationWarning!==!0&&mu(s.textContent,l,e),n=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(r.suppressHydrationWarning!==!0&&mu(s.textContent,l,e),n=["children",""+l]):$l.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ee("scroll",s)}switch(i){case"input":au(s),UC(s,r,!0);break;case"textarea":au(s),$C(s);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(s.onclick=Sc)}s=n,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=GR(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(i,{is:s.is}):(e=o.createElement(i),i==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,i),e[qi]=t,e[ia]=s,aE(e,t,!1,!1),t.stateNode=e;e:{switch(o=pf(i,s),i){case"dialog":Ee("cancel",e),Ee("close",e),n=s;break;case"iframe":case"object":case"embed":Ee("load",e),n=s;break;case"video":case"audio":for(n=0;n<Sl.length;n++)Ee(Sl[n],e);n=s;break;case"source":Ee("error",e),n=s;break;case"img":case"image":case"link":Ee("error",e),Ee("load",e),n=s;break;case"details":Ee("toggle",e),n=s;break;case"input":zC(e,s),n=lf(e,s),Ee("invalid",e);break;case"option":n=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},n=_e({},s,{value:void 0}),Ee("invalid",e);break;case"textarea":jC(e,s),n=cf(e,s),Ee("invalid",e);break;default:n=s}hf(i,n),l=n;for(r in l)if(l.hasOwnProperty(r)){var a=l[r];r==="style"?BR(e,a):r==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&HR(e,a)):r==="children"?typeof a=="string"?(i!=="textarea"||a!=="")&&Kl(e,a):typeof a=="number"&&Kl(e,""+a):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&($l.hasOwnProperty(r)?a!=null&&r==="onScroll"&&Ee("scroll",e):a!=null&&Qg(e,r,a,o))}switch(i){case"input":au(e),UC(e,s,!1);break;case"textarea":au(e),$C(e);break;case"option":s.value!=null&&e.setAttribute("value",""+mn(s.value));break;case"select":e.multiple=!!s.multiple,r=s.value,r!=null?Jr(e,!!s.multiple,r,!1):s.defaultValue!=null&&Jr(e,!!s.multiple,s.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=Sc)}switch(i){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return vt(t),null;case 6:if(e&&t.stateNode!=null)cE(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(O(166));if(i=Hn(na.current),Hn(Qi.current),vu(t)){if(s=t.stateNode,i=t.memoizedProps,s[qi]=t,(r=s.nodeValue!==i)&&(e=ei,e!==null))switch(e.tag){case 3:mu(s.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&mu(s.nodeValue,i,(e.mode&1)!==0)}r&&(t.flags|=4)}else s=(i.nodeType===9?i:i.ownerDocument).createTextNode(s),s[qi]=t,t.stateNode=s}return vt(t),null;case 13:if(Fe(ke),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ie&&Xt!==null&&t.mode&1&&!(t.flags&128))xb(),mo(),t.flags|=98560,r=!1;else if(r=vu(t),s!==null&&s.dehydrated!==null){if(e===null){if(!r)throw Error(O(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(O(317));r[qi]=t}else mo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;vt(t),r=!1}else Ti!==null&&(Kf(Ti),Ti=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||ke.current&1?tt===0&&(tt=3):Mm())),t.updateQueue!==null&&(t.flags|=4),vt(t),null);case 4:return Co(),Hf(e,t),e===null&&ea(t.stateNode.containerInfo),vt(t),null;case 10:return gm(t.type._context),vt(t),null;case 17:return Bt(t.type)&&Rc(),vt(t),null;case 19:if(Fe(ke),r=t.memoizedState,r===null)return vt(t),null;if(s=(t.flags&128)!==0,o=r.rendering,o===null)if(s)ll(r,!1);else{if(tt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ic(e),o!==null){for(t.flags|=128,ll(r,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=i,i=t.child;i!==null;)r=i,e=s,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=e,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,e=o.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Re(ke,ke.current&1|2),t.child}e=e.sibling}r.tail!==null&&$e()>yo&&(t.flags|=128,s=!0,ll(r,!1),t.lanes=4194304)}else{if(!s)if(e=Ic(o),e!==null){if(t.flags|=128,s=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),ll(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!Ie)return vt(t),null}else 2*$e()-r.renderingStartTime>yo&&i!==1073741824&&(t.flags|=128,s=!0,ll(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(i=r.last,i!==null?i.sibling=o:t.child=o,r.last=o)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=$e(),t.sibling=null,i=ke.current,Re(ke,s?i&1|2:i&1),t):(vt(t),null);case 22:case 23:return km(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Qt&1073741824&&(vt(t),t.subtreeFlags&6&&(t.flags|=8192)):vt(t),null;case 24:return null;case 25:return null}throw Error(O(156,t.tag))}function WD(e,t){switch(dm(t),t.tag){case 1:return Bt(t.type)&&Rc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Co(),Fe(Vt),Fe(bt),ym(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return wm(t),null;case 13:if(Fe(ke),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(O(340));mo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Fe(ke),null;case 4:return Co(),null;case 10:return gm(t.type._context),null;case 22:case 23:return km(),null;case 24:return null;default:return null}}var yu=!1,yt=!1,zD=typeof WeakSet=="function"?WeakSet:Set,V=null;function zr(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(s){He(e,t,s)}else i.current=null}function Vf(e,t,i){try{i()}catch(s){He(e,t,s)}}var Lw=!1;function UD(e,t){if(bf=Cc,e=gb(),um(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var s=i.getSelection&&i.getSelection();if(s&&s.rangeCount!==0){i=s.anchorNode;var n=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{i.nodeType,r.nodeType}catch{i=null;break e}var o=0,l=-1,a=-1,u=0,c=0,d=e,h=null;t:for(;;){for(var p;d!==i||n!==0&&d.nodeType!==3||(l=o+n),d!==r||s!==0&&d.nodeType!==3||(a=o+s),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===e)break t;if(h===i&&++u===n&&(l=o),h===r&&++c===s&&(a=o),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}i=l===-1||a===-1?null:{start:l,end:a}}else i=null}i=i||{start:0,end:0}}else i=null;for(Ef={focusedElem:e,selectionRange:i},Cc=!1,V=t;V!==null;)if(t=V,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,V=e;else for(;V!==null;){t=V;try{var f=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var m=f.memoizedProps,w=f.memoizedState,v=t.stateNode,g=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:Ei(t.type,m),w);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(S){He(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,V=e;break}V=t.return}return f=Lw,Lw=!1,f}function Ml(e,t,i){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var n=s=s.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,r!==void 0&&Vf(t,i,r)}n=n.next}while(n!==s)}}function Ad(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var s=i.create;i.destroy=s()}i=i.next}while(i!==t)}}function Bf(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function dE(e){var t=e.alternate;t!==null&&(e.alternate=null,dE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[qi],delete t[ia],delete t[Tf],delete t[FD],delete t[TD])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function hE(e){return e.tag===5||e.tag===3||e.tag===4}function Ow(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||hE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wf(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Sc));else if(s!==4&&(e=e.child,e!==null))for(Wf(e,t,i),e=e.sibling;e!==null;)Wf(e,t,i),e=e.sibling}function zf(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(zf(e,t,i),e=e.sibling;e!==null;)zf(e,t,i),e=e.sibling}var dt=null,Pi=!1;function Gs(e,t,i){for(i=i.child;i!==null;)pE(e,t,i),i=i.sibling}function pE(e,t,i){if(Yi&&typeof Yi.onCommitFiberUnmount=="function")try{Yi.onCommitFiberUnmount(Pd,i)}catch{}switch(i.tag){case 5:yt||zr(i,t);case 6:var s=dt,n=Pi;dt=null,Gs(e,t,i),dt=s,Pi=n,dt!==null&&(Pi?(e=dt,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):dt.removeChild(i.stateNode));break;case 18:dt!==null&&(Pi?(e=dt,i=i.stateNode,e.nodeType===8?lp(e.parentNode,i):e.nodeType===1&&lp(e,i),Jl(e)):lp(dt,i.stateNode));break;case 4:s=dt,n=Pi,dt=i.stateNode.containerInfo,Pi=!0,Gs(e,t,i),dt=s,Pi=n;break;case 0:case 11:case 14:case 15:if(!yt&&(s=i.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){n=s=s.next;do{var r=n,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&Vf(i,t,o),n=n.next}while(n!==s)}Gs(e,t,i);break;case 1:if(!yt&&(zr(i,t),s=i.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=i.memoizedProps,s.state=i.memoizedState,s.componentWillUnmount()}catch(l){He(i,t,l)}Gs(e,t,i);break;case 21:Gs(e,t,i);break;case 22:i.mode&1?(yt=(s=yt)||i.memoizedState!==null,Gs(e,t,i),yt=s):Gs(e,t,i);break;default:Gs(e,t,i)}}function Nw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new zD),t.forEach(function(s){var n=ZD.bind(null,e,s);i.has(s)||(i.add(s),s.then(n,n))})}}function Ri(e,t){var i=t.deletions;if(i!==null)for(var s=0;s<i.length;s++){var n=i[s];try{var r=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:dt=l.stateNode,Pi=!1;break e;case 3:dt=l.stateNode.containerInfo,Pi=!0;break e;case 4:dt=l.stateNode.containerInfo,Pi=!0;break e}l=l.return}if(dt===null)throw Error(O(160));pE(r,o,n),dt=null,Pi=!1;var a=n.alternate;a!==null&&(a.return=null),n.return=null}catch(u){He(n,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)fE(t,e),t=t.sibling}function fE(e,t){var i=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ri(t,e),Bi(e),s&4){try{Ml(3,e,e.return),Ad(3,e)}catch(m){He(e,e.return,m)}try{Ml(5,e,e.return)}catch(m){He(e,e.return,m)}}break;case 1:Ri(t,e),Bi(e),s&512&&i!==null&&zr(i,i.return);break;case 5:if(Ri(t,e),Bi(e),s&512&&i!==null&&zr(i,i.return),e.flags&32){var n=e.stateNode;try{Kl(n,"")}catch(m){He(e,e.return,m)}}if(s&4&&(n=e.stateNode,n!=null)){var r=e.memoizedProps,o=i!==null?i.memoizedProps:r,l=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{l==="input"&&r.type==="radio"&&r.name!=null&&OR(n,r),pf(l,o);var u=pf(l,r);for(o=0;o<a.length;o+=2){var c=a[o],d=a[o+1];c==="style"?BR(n,d):c==="dangerouslySetInnerHTML"?HR(n,d):c==="children"?Kl(n,d):Qg(n,c,d,u)}switch(l){case"input":af(n,r);break;case"textarea":NR(n,r);break;case"select":var h=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?Jr(n,!!r.multiple,p,!1):h!==!!r.multiple&&(r.defaultValue!=null?Jr(n,!!r.multiple,r.defaultValue,!0):Jr(n,!!r.multiple,r.multiple?[]:"",!1))}n[ia]=r}catch(m){He(e,e.return,m)}}break;case 6:if(Ri(t,e),Bi(e),s&4){if(e.stateNode===null)throw Error(O(162));n=e.stateNode,r=e.memoizedProps;try{n.nodeValue=r}catch(m){He(e,e.return,m)}}break;case 3:if(Ri(t,e),Bi(e),s&4&&i!==null&&i.memoizedState.isDehydrated)try{Jl(t.containerInfo)}catch(m){He(e,e.return,m)}break;case 4:Ri(t,e),Bi(e);break;case 13:Ri(t,e),Bi(e),n=e.child,n.flags&8192&&(r=n.memoizedState!==null,n.stateNode.isHidden=r,!r||n.alternate!==null&&n.alternate.memoizedState!==null||(Im=$e())),s&4&&Nw(e);break;case 22:if(c=i!==null&&i.memoizedState!==null,e.mode&1?(yt=(u=yt)||c,Ri(t,e),yt=u):Ri(t,e),Bi(e),s&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(V=e,c=e.child;c!==null;){for(d=V=c;V!==null;){switch(h=V,p=h.child,h.tag){case 0:case 11:case 14:case 15:Ml(4,h,h.return);break;case 1:zr(h,h.return);var f=h.stateNode;if(typeof f.componentWillUnmount=="function"){s=h,i=h.return;try{t=s,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(m){He(s,i,m)}}break;case 5:zr(h,h.return);break;case 22:if(h.memoizedState!==null){Hw(d);continue}}p!==null?(p.return=h,V=p):Hw(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{n=d.stateNode,u?(r=n.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=VR("display",o))}catch(m){He(e,e.return,m)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){He(e,e.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ri(t,e),Bi(e),s&4&&Nw(e);break;case 21:break;default:Ri(t,e),Bi(e)}}function Bi(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(hE(i)){var s=i;break e}i=i.return}throw Error(O(160))}switch(s.tag){case 5:var n=s.stateNode;s.flags&32&&(Kl(n,""),s.flags&=-33);var r=Ow(e);zf(e,r,n);break;case 3:case 4:var o=s.stateNode.containerInfo,l=Ow(e);Wf(e,l,o);break;default:throw Error(O(161))}}catch(a){He(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jD(e,t,i){V=e,gE(e)}function gE(e,t,i){for(var s=(e.mode&1)!==0;V!==null;){var n=V,r=n.child;if(n.tag===22&&s){var o=n.memoizedState!==null||yu;if(!o){var l=n.alternate,a=l!==null&&l.memoizedState!==null||yt;l=yu;var u=yt;if(yu=o,(yt=a)&&!u)for(V=n;V!==null;)o=V,a=o.child,o.tag===22&&o.memoizedState!==null?Vw(n):a!==null?(a.return=o,V=a):Vw(n);for(;r!==null;)V=r,gE(r),r=r.sibling;V=n,yu=l,yt=u}Gw(e)}else n.subtreeFlags&8772&&r!==null?(r.return=n,V=r):Gw(e)}}function Gw(e){for(;V!==null;){var t=V;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:yt||Ad(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!yt)if(i===null)s.componentDidMount();else{var n=t.elementType===t.type?i.memoizedProps:Ei(t.type,i.memoizedProps);s.componentDidUpdate(n,i.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&Rw(t,r,s);break;case 3:var o=t.updateQueue;if(o!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}Rw(t,o,i)}break;case 5:var l=t.stateNode;if(i===null&&t.flags&4){i=l;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&i.focus();break;case"img":a.src&&(i.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Jl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}yt||t.flags&512&&Bf(t)}catch(h){He(t,t.return,h)}}if(t===e){V=null;break}if(i=t.sibling,i!==null){i.return=t.return,V=i;break}V=t.return}}function Hw(e){for(;V!==null;){var t=V;if(t===e){V=null;break}var i=t.sibling;if(i!==null){i.return=t.return,V=i;break}V=t.return}}function Vw(e){for(;V!==null;){var t=V;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{Ad(4,t)}catch(a){He(t,i,a)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var n=t.return;try{s.componentDidMount()}catch(a){He(t,n,a)}}var r=t.return;try{Bf(t)}catch(a){He(t,r,a)}break;case 5:var o=t.return;try{Bf(t)}catch(a){He(t,o,a)}}}catch(a){He(t,t.return,a)}if(t===e){V=null;break}var l=t.sibling;if(l!==null){l.return=t.return,V=l;break}V=t.return}}var $D=Math.ceil,Mc=Ms.ReactCurrentDispatcher,Tm=Ms.ReactCurrentOwner,fi=Ms.ReactCurrentBatchConfig,le=0,at=null,Je=null,ft=0,Qt=0,Ur=bn(0),tt=0,aa=null,er=0,_d=0,xm=0,Al=null,Lt=null,Im=0,yo=1/0,ls=null,Ac=!1,Uf=null,rn=null,Su=!1,Js=null,_c=0,_l=0,jf=null,Yu=-1,Qu=0;function Dt(){return le&6?$e():Yu!==-1?Yu:Yu=$e()}function on(e){return e.mode&1?le&2&&ft!==0?ft&-ft:ID.transition!==null?(Qu===0&&(Qu=ZR()),Qu):(e=fe,e!==0||(e=window.event,e=e===void 0?16:ob(e.type)),e):1}function _i(e,t,i,s){if(50<_l)throw _l=0,jf=null,Error(O(185));Aa(e,i,s),(!(le&2)||e!==at)&&(e===at&&(!(le&2)&&(_d|=i),tt===4&&Us(e,ft)),Wt(e,s),i===1&&le===0&&!(t.mode&1)&&(yo=$e()+500,Dd&&En()))}function Wt(e,t){var i=e.callbackNode;II(e,t);var s=vc(e,e===at?ft:0);if(s===0)i!==null&&YC(i),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(i!=null&&YC(i),t===1)e.tag===0?xD(Bw.bind(null,e)):Pb(Bw.bind(null,e)),ED(function(){!(le&6)&&En()}),i=null;else{switch(eb(s)){case 1:i=tm;break;case 4:i=JR;break;case 16:i=mc;break;case 536870912:i=XR;break;default:i=mc}i=bE(i,mE.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function mE(e,t){if(Yu=-1,Qu=0,le&6)throw Error(O(327));var i=e.callbackNode;if(io()&&e.callbackNode!==i)return null;var s=vc(e,e===at?ft:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Lc(e,s);else{t=s;var n=le;le|=2;var r=CE();(at!==e||ft!==t)&&(ls=null,yo=$e()+500,zn(e,t));do try{YD();break}catch(l){vE(e,l)}while(1);fm(),Mc.current=r,le=n,Je!==null?t=0:(at=null,ft=0,t=tt)}if(t!==0){if(t===2&&(n=Cf(e),n!==0&&(s=n,t=$f(e,n))),t===1)throw i=aa,zn(e,0),Us(e,s),Wt(e,$e()),i;if(t===6)Us(e,s);else{if(n=e.current.alternate,!(s&30)&&!KD(n)&&(t=Lc(e,s),t===2&&(r=Cf(e),r!==0&&(s=r,t=$f(e,r))),t===1))throw i=aa,zn(e,0),Us(e,s),Wt(e,$e()),i;switch(e.finishedWork=n,e.finishedLanes=s,t){case 0:case 1:throw Error(O(345));case 2:kn(e,Lt,ls);break;case 3:if(Us(e,s),(s&130023424)===s&&(t=Im+500-$e(),10<t)){if(vc(e,0)!==0)break;if(n=e.suspendedLanes,(n&s)!==s){Dt(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=Ff(kn.bind(null,e,Lt,ls),t);break}kn(e,Lt,ls);break;case 4:if(Us(e,s),(s&4194240)===s)break;for(t=e.eventTimes,n=-1;0<s;){var o=31-Ai(s);r=1<<o,o=t[o],o>n&&(n=o),s&=~r}if(s=n,s=$e()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*$D(s/1960))-s,10<s){e.timeoutHandle=Ff(kn.bind(null,e,Lt,ls),s);break}kn(e,Lt,ls);break;case 5:kn(e,Lt,ls);break;default:throw Error(O(329))}}}return Wt(e,$e()),e.callbackNode===i?mE.bind(null,e):null}function $f(e,t){var i=Al;return e.current.memoizedState.isDehydrated&&(zn(e,t).flags|=256),e=Lc(e,t),e!==2&&(t=Lt,Lt=i,t!==null&&Kf(t)),e}function Kf(e){Lt===null?Lt=e:Lt.push.apply(Lt,e)}function KD(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var s=0;s<i.length;s++){var n=i[s],r=n.getSnapshot;n=n.value;try{if(!Ni(r(),n))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Us(e,t){for(t&=~xm,t&=~_d,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Ai(t),s=1<<i;e[i]=-1,t&=~s}}function Bw(e){if(le&6)throw Error(O(327));io();var t=vc(e,0);if(!(t&1))return Wt(e,$e()),null;var i=Lc(e,t);if(e.tag!==0&&i===2){var s=Cf(e);s!==0&&(t=s,i=$f(e,s))}if(i===1)throw i=aa,zn(e,0),Us(e,t),Wt(e,$e()),i;if(i===6)throw Error(O(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kn(e,Lt,ls),Wt(e,$e()),null}function Dm(e,t){var i=le;le|=1;try{return e(t)}finally{le=i,le===0&&(yo=$e()+500,Dd&&En())}}function tr(e){Js!==null&&Js.tag===0&&!(le&6)&&io();var t=le;le|=1;var i=fi.transition,s=fe;try{if(fi.transition=null,fe=1,e)return e()}finally{fe=s,fi.transition=i,le=t,!(le&6)&&En()}}function km(){Qt=Ur.current,Fe(Ur)}function zn(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,bD(i)),Je!==null)for(i=Je.return;i!==null;){var s=i;switch(dm(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Rc();break;case 3:Co(),Fe(Vt),Fe(bt),ym();break;case 5:wm(s);break;case 4:Co();break;case 13:Fe(ke);break;case 19:Fe(ke);break;case 10:gm(s.type._context);break;case 22:case 23:km()}i=i.return}if(at=e,Je=e=ln(e.current,null),ft=Qt=t,tt=0,aa=null,xm=_d=er=0,Lt=Al=null,Gn!==null){for(t=0;t<Gn.length;t++)if(i=Gn[t],s=i.interleaved,s!==null){i.interleaved=null;var n=s.next,r=i.pending;if(r!==null){var o=r.next;r.next=n,s.next=o}i.pending=s}Gn=null}return e}function vE(e,t){do{var i=Je;try{if(fm(),$u.current=kc,Dc){for(var s=Ae.memoizedState;s!==null;){var n=s.queue;n!==null&&(n.pending=null),s=s.next}Dc=!1}if(Zn=0,nt=Ze=Ae=null,kl=!1,ra=0,Tm.current=null,i===null||i.return===null){tt=1,aa=t,Je=null;break}e:{var r=e,o=i.return,l=i,a=t;if(t=ft,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=xw(o);if(p!==null){p.flags&=-257,Iw(p,o,l,r,t),p.mode&1&&Tw(r,u,t),t=p,a=u;var f=t.updateQueue;if(f===null){var m=new Set;m.add(a),t.updateQueue=m}else f.add(a);break e}else{if(!(t&1)){Tw(r,u,t),Mm();break e}a=Error(O(426))}}else if(Ie&&l.mode&1){var w=xw(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Iw(w,o,l,r,t),hm(wo(a,l));break e}}r=a=wo(a,l),tt!==4&&(tt=2),Al===null?Al=[r]:Al.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var v=eE(r,a,t);Sw(r,v);break e;case 1:l=a;var g=r.type,y=r.stateNode;if(!(r.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(rn===null||!rn.has(y)))){r.flags|=65536,t&=-t,r.lanes|=t;var S=tE(r,l,t);Sw(r,S);break e}}r=r.return}while(r!==null)}yE(i)}catch(b){t=b,Je===i&&i!==null&&(Je=i=i.return);continue}break}while(1)}function CE(){var e=Mc.current;return Mc.current=kc,e===null?kc:e}function Mm(){(tt===0||tt===3||tt===2)&&(tt=4),at===null||!(er&268435455)&&!(_d&268435455)||Us(at,ft)}function Lc(e,t){var i=le;le|=2;var s=CE();(at!==e||ft!==t)&&(ls=null,zn(e,t));do try{qD();break}catch(n){vE(e,n)}while(1);if(fm(),le=i,Mc.current=s,Je!==null)throw Error(O(261));return at=null,ft=0,tt}function qD(){for(;Je!==null;)wE(Je)}function YD(){for(;Je!==null&&!yI();)wE(Je)}function wE(e){var t=RE(e.alternate,e,Qt);e.memoizedProps=e.pendingProps,t===null?yE(e):Je=t,Tm.current=null}function yE(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=WD(i,t),i!==null){i.flags&=32767,Je=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{tt=6,Je=null;return}}else if(i=BD(i,t,Qt),i!==null){Je=i;return}if(t=t.sibling,t!==null){Je=t;return}Je=t=e}while(t!==null);tt===0&&(tt=5)}function kn(e,t,i){var s=fe,n=fi.transition;try{fi.transition=null,fe=1,QD(e,t,i,s)}finally{fi.transition=n,fe=s}return null}function QD(e,t,i,s){do io();while(Js!==null);if(le&6)throw Error(O(327));i=e.finishedWork;var n=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(O(177));e.callbackNode=null,e.callbackPriority=0;var r=i.lanes|i.childLanes;if(DI(e,r),e===at&&(Je=at=null,ft=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||Su||(Su=!0,bE(mc,function(){return io(),null})),r=(i.flags&15990)!==0,i.subtreeFlags&15990||r){r=fi.transition,fi.transition=null;var o=fe;fe=1;var l=le;le|=4,Tm.current=null,UD(e,i),fE(i,e),mD(Ef),Cc=!!bf,Ef=bf=null,e.current=i,jD(i),SI(),le=l,fe=o,fi.transition=r}else e.current=i;if(Su&&(Su=!1,Js=e,_c=n),r=e.pendingLanes,r===0&&(rn=null),EI(i.stateNode),Wt(e,$e()),t!==null)for(s=e.onRecoverableError,i=0;i<t.length;i++)n=t[i],s(n.value,{componentStack:n.stack,digest:n.digest});if(Ac)throw Ac=!1,e=Uf,Uf=null,e;return _c&1&&e.tag!==0&&io(),r=e.pendingLanes,r&1?e===jf?_l++:(_l=0,jf=e):_l=0,En(),null}function io(){if(Js!==null){var e=eb(_c),t=fi.transition,i=fe;try{if(fi.transition=null,fe=16>e?16:e,Js===null)var s=!1;else{if(e=Js,Js=null,_c=0,le&6)throw Error(O(331));var n=le;for(le|=4,V=e.current;V!==null;){var r=V,o=r.child;if(V.flags&16){var l=r.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(V=u;V!==null;){var c=V;switch(c.tag){case 0:case 11:case 15:Ml(8,c,r)}var d=c.child;if(d!==null)d.return=c,V=d;else for(;V!==null;){c=V;var h=c.sibling,p=c.return;if(dE(c),c===u){V=null;break}if(h!==null){h.return=p,V=h;break}V=p}}}var f=r.alternate;if(f!==null){var m=f.child;if(m!==null){f.child=null;do{var w=m.sibling;m.sibling=null,m=w}while(m!==null)}}V=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,V=o;else e:for(;V!==null;){if(r=V,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Ml(9,r,r.return)}var v=r.sibling;if(v!==null){v.return=r.return,V=v;break e}V=r.return}}var g=e.current;for(V=g;V!==null;){o=V;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,V=y;else e:for(o=g;V!==null;){if(l=V,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ad(9,l)}}catch(b){He(l,l.return,b)}if(l===o){V=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,V=S;break e}V=l.return}}if(le=n,En(),Yi&&typeof Yi.onPostCommitFiberRoot=="function")try{Yi.onPostCommitFiberRoot(Pd,e)}catch{}s=!0}return s}finally{fe=i,fi.transition=t}}return!1}function Ww(e,t,i){t=wo(i,t),t=eE(e,t,1),e=nn(e,t,1),t=Dt(),e!==null&&(Aa(e,1,t),Wt(e,t))}function He(e,t,i){if(e.tag===3)Ww(e,e,i);else for(;t!==null;){if(t.tag===3){Ww(t,e,i);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(rn===null||!rn.has(s))){e=wo(i,e),e=tE(t,e,1),t=nn(t,e,1),e=Dt(),t!==null&&(Aa(t,1,e),Wt(t,e));break}}t=t.return}}function JD(e,t,i){var s=e.pingCache;s!==null&&s.delete(t),t=Dt(),e.pingedLanes|=e.suspendedLanes&i,at===e&&(ft&i)===i&&(tt===4||tt===3&&(ft&130023424)===ft&&500>$e()-Im?zn(e,0):xm|=i),Wt(e,t)}function SE(e,t){t===0&&(e.mode&1?(t=du,du<<=1,!(du&130023424)&&(du=4194304)):t=1);var i=Dt();e=bs(e,t),e!==null&&(Aa(e,t,i),Wt(e,i))}function XD(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),SE(e,i)}function ZD(e,t){var i=0;switch(e.tag){case 13:var s=e.stateNode,n=e.memoizedState;n!==null&&(i=n.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(O(314))}s!==null&&s.delete(t),SE(e,i)}var RE;RE=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||Vt.current)Ot=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return Ot=!1,VD(e,t,i);Ot=!!(e.flags&131072)}else Ot=!1,Ie&&t.flags&1048576&&Fb(t,Pc,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;qu(e,t),e=t.pendingProps;var n=go(t,bt.current);to(t,i),n=Rm(null,t,s,e,n,i);var r=bm();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Bt(s)?(r=!0,bc(t)):r=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,vm(t),n.updater=Md,t.stateNode=n,n._reactInternals=t,Af(t,s,e,i),t=Of(null,t,s,!0,r,i)):(t.tag=0,Ie&&r&&cm(t),Ft(null,t,n,i),t=t.child),t;case 16:s=t.elementType;e:{switch(qu(e,t),e=t.pendingProps,n=s._init,s=n(s._payload),t.type=s,n=t.tag=tk(s),e=Ei(s,e),n){case 0:t=Lf(null,t,s,e,i);break e;case 1:t=Mw(null,t,s,e,i);break e;case 11:t=Dw(null,t,s,e,i);break e;case 14:t=kw(null,t,s,Ei(s.type,e),i);break e}throw Error(O(306,s,""))}return t;case 0:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:Ei(s,n),Lf(e,t,s,n,i);case 1:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:Ei(s,n),Mw(e,t,s,n,i);case 3:e:{if(rE(t),e===null)throw Error(O(387));s=t.pendingProps,r=t.memoizedState,n=r.element,Mb(e,t),xc(t,s,null,i);var o=t.memoizedState;if(s=o.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){n=wo(Error(O(423)),t),t=Aw(e,t,s,i,n);break e}else if(s!==n){n=wo(Error(O(424)),t),t=Aw(e,t,s,i,n);break e}else for(Xt=sn(t.stateNode.containerInfo.firstChild),ei=t,Ie=!0,Ti=null,i=Db(t,null,s,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(mo(),s===n){t=Es(e,t,i);break e}Ft(e,t,s,i)}t=t.child}return t;case 5:return Ab(t),e===null&&Df(t),s=t.type,n=t.pendingProps,r=e!==null?e.memoizedProps:null,o=n.children,Pf(s,n)?o=null:r!==null&&Pf(s,r)&&(t.flags|=32),nE(e,t),Ft(e,t,o,i),t.child;case 6:return e===null&&Df(t),null;case 13:return oE(e,t,i);case 4:return Cm(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=vo(t,null,s,i):Ft(e,t,s,i),t.child;case 11:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:Ei(s,n),Dw(e,t,s,n,i);case 7:return Ft(e,t,t.pendingProps,i),t.child;case 8:return Ft(e,t,t.pendingProps.children,i),t.child;case 12:return Ft(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(s=t.type._context,n=t.pendingProps,r=t.memoizedProps,o=n.value,Re(Fc,s._currentValue),s._currentValue=o,r!==null)if(Ni(r.value,o)){if(r.children===n.children&&!Vt.current){t=Es(e,t,i);break e}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var l=r.dependencies;if(l!==null){o=r.child;for(var a=l.firstContext;a!==null;){if(a.context===s){if(r.tag===1){a=vs(-1,i&-i),a.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}r.lanes|=i,a=r.alternate,a!==null&&(a.lanes|=i),kf(r.return,i,t),l.lanes|=i;break}a=a.next}}else if(r.tag===10)o=r.type===t.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(O(341));o.lanes|=i,l=o.alternate,l!==null&&(l.lanes|=i),kf(o,i,t),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===t){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Ft(e,t,n.children,i),t=t.child}return t;case 9:return n=t.type,s=t.pendingProps.children,to(t,i),n=vi(n),s=s(n),t.flags|=1,Ft(e,t,s,i),t.child;case 14:return s=t.type,n=Ei(s,t.pendingProps),n=Ei(s.type,n),kw(e,t,s,n,i);case 15:return iE(e,t,t.type,t.pendingProps,i);case 17:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:Ei(s,n),qu(e,t),t.tag=1,Bt(s)?(e=!0,bc(t)):e=!1,to(t,i),Zb(t,s,n),Af(t,s,n,i),Of(null,t,s,!0,e,i);case 19:return lE(e,t,i);case 22:return sE(e,t,i)}throw Error(O(156,t.tag))};function bE(e,t){return QR(e,t)}function ek(e,t,i,s){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function di(e,t,i,s){return new ek(e,t,i,s)}function Am(e){return e=e.prototype,!(!e||!e.isReactComponent)}function tk(e){if(typeof e=="function")return Am(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Xg)return 11;if(e===Zg)return 14}return 2}function ln(e,t){var i=e.alternate;return i===null?(i=di(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Ju(e,t,i,s,n,r){var o=2;if(s=e,typeof e=="function")Am(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case _r:return Un(i.children,n,r,t);case Jg:o=8,n|=8;break;case sf:return e=di(12,i,t,n|2),e.elementType=sf,e.lanes=r,e;case nf:return e=di(13,i,t,n),e.elementType=nf,e.lanes=r,e;case rf:return e=di(19,i,t,n),e.elementType=rf,e.lanes=r,e;case AR:return Ld(i,n,r,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case kR:o=10;break e;case MR:o=9;break e;case Xg:o=11;break e;case Zg:o=14;break e;case Bs:o=16,s=null;break e}throw Error(O(130,e==null?e:typeof e,""))}return t=di(o,i,t,n),t.elementType=e,t.type=s,t.lanes=r,t}function Un(e,t,i,s){return e=di(7,e,s,t),e.lanes=i,e}function Ld(e,t,i,s){return e=di(22,e,s,t),e.elementType=AR,e.lanes=i,e.stateNode={isHidden:!1},e}function gp(e,t,i){return e=di(6,e,null,t),e.lanes=i,e}function mp(e,t,i){return t=di(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ik(e,t,i,s,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qh(0),this.expirationTimes=Qh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qh(0),this.identifierPrefix=s,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function _m(e,t,i,s,n,r,o,l,a){return e=new ik(e,t,i,l,a),t===1?(t=1,r===!0&&(t|=8)):t=0,r=di(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:s,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},vm(r),e}function sk(e,t,i){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ar,key:s==null?null:""+s,children:e,containerInfo:t,implementation:i}}function EE(e){if(!e)return vn;e=e._reactInternals;e:{if(dr(e)!==e||e.tag!==1)throw Error(O(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Bt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(O(171))}if(e.tag===1){var i=e.type;if(Bt(i))return Eb(e,i,t)}return t}function PE(e,t,i,s,n,r,o,l,a){return e=_m(i,s,!0,e,n,r,o,l,a),e.context=EE(null),i=e.current,s=Dt(),n=on(i),r=vs(s,n),r.callback=t??null,nn(i,r,n),e.current.lanes=n,Aa(e,n,s),Wt(e,s),e}function Od(e,t,i,s){var n=t.current,r=Dt(),o=on(n);return i=EE(i),t.context===null?t.context=i:t.pendingContext=i,t=vs(r,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=nn(n,t,o),e!==null&&(_i(e,n,o,r),ju(e,n,o)),o}function Oc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function zw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Lm(e,t){zw(e,t),(e=e.alternate)&&zw(e,t)}function nk(){return null}var FE=typeof reportError=="function"?reportError:function(e){console.error(e)};function Om(e){this._internalRoot=e}Nd.prototype.render=Om.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(O(409));Od(e,t,null,null)};Nd.prototype.unmount=Om.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;tr(function(){Od(null,e,null,null)}),t[Rs]=null}};function Nd(e){this._internalRoot=e}Nd.prototype.unstable_scheduleHydration=function(e){if(e){var t=sb();e={blockedOn:null,target:e,priority:t};for(var i=0;i<zs.length&&t!==0&&t<zs[i].priority;i++);zs.splice(i,0,e),i===0&&rb(e)}};function Nm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Gd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Uw(){}function rk(e,t,i,s,n){if(n){if(typeof s=="function"){var r=s;s=function(){var u=Oc(o);r.call(u)}}var o=PE(t,s,e,0,null,!1,!1,"",Uw);return e._reactRootContainer=o,e[Rs]=o.current,ea(e.nodeType===8?e.parentNode:e),tr(),o}for(;n=e.lastChild;)e.removeChild(n);if(typeof s=="function"){var l=s;s=function(){var u=Oc(a);l.call(u)}}var a=_m(e,0,!1,null,null,!1,!1,"",Uw);return e._reactRootContainer=a,e[Rs]=a.current,ea(e.nodeType===8?e.parentNode:e),tr(function(){Od(t,a,i,s)}),a}function Hd(e,t,i,s,n){var r=i._reactRootContainer;if(r){var o=r;if(typeof n=="function"){var l=n;n=function(){var a=Oc(o);l.call(a)}}Od(t,o,e,n)}else o=rk(i,t,e,n,s);return Oc(o)}tb=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=yl(t.pendingLanes);i!==0&&(im(t,i|1),Wt(t,$e()),!(le&6)&&(yo=$e()+500,En()))}break;case 13:tr(function(){var s=bs(e,1);if(s!==null){var n=Dt();_i(s,e,1,n)}}),Lm(e,1)}};sm=function(e){if(e.tag===13){var t=bs(e,134217728);if(t!==null){var i=Dt();_i(t,e,134217728,i)}Lm(e,134217728)}};ib=function(e){if(e.tag===13){var t=on(e),i=bs(e,t);if(i!==null){var s=Dt();_i(i,e,t,s)}Lm(e,t)}};sb=function(){return fe};nb=function(e,t){var i=fe;try{return fe=e,t()}finally{fe=i}};gf=function(e,t,i){switch(t){case"input":if(af(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var s=i[t];if(s!==e&&s.form===e.form){var n=Id(s);if(!n)throw Error(O(90));LR(s),af(s,n)}}}break;case"textarea":NR(e,i);break;case"select":t=i.value,t!=null&&Jr(e,!!i.multiple,t,!1)}};UR=Dm;jR=tr;var ok={usingClientEntryPoint:!1,Events:[La,Gr,Id,WR,zR,Dm]},al={findFiberByHostInstance:Nn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lk={bundleType:al.bundleType,version:al.version,rendererPackageName:al.rendererPackageName,rendererConfig:al.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ms.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=qR(e),e===null?null:e.stateNode},findFiberByHostInstance:al.findFiberByHostInstance||nk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ru.isDisabled&&Ru.supportsFiber)try{Pd=Ru.inject(lk),Yi=Ru}catch{}}ni.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ok;ni.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nm(t))throw Error(O(200));return sk(e,t,null,i)};ni.createRoot=function(e,t){if(!Nm(e))throw Error(O(299));var i=!1,s="",n=FE;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=_m(e,1,!1,null,null,i,!1,s,n),e[Rs]=t.current,ea(e.nodeType===8?e.parentNode:e),new Om(t)};ni.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(O(188)):(e=Object.keys(e).join(","),Error(O(268,e)));return e=qR(t),e=e===null?null:e.stateNode,e};ni.flushSync=function(e){return tr(e)};ni.hydrate=function(e,t,i){if(!Gd(t))throw Error(O(200));return Hd(null,e,t,!0,i)};ni.hydrateRoot=function(e,t,i){if(!Nm(e))throw Error(O(405));var s=i!=null&&i.hydratedSources||null,n=!1,r="",o=FE;if(i!=null&&(i.unstable_strictMode===!0&&(n=!0),i.identifierPrefix!==void 0&&(r=i.identifierPrefix),i.onRecoverableError!==void 0&&(o=i.onRecoverableError)),t=PE(t,null,e,1,i??null,n,!1,r,o),e[Rs]=t.current,ea(e),s)for(e=0;e<s.length;e++)i=s[e],n=i._getVersion,n=n(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,n]:t.mutableSourceEagerHydrationData.push(i,n);return new Nd(t)};ni.render=function(e,t,i){if(!Gd(t))throw Error(O(200));return Hd(null,e,t,!1,i)};ni.unmountComponentAtNode=function(e){if(!Gd(e))throw Error(O(40));return e._reactRootContainer?(tr(function(){Hd(null,null,e,!1,function(){e._reactRootContainer=null,e[Rs]=null})}),!0):!1};ni.unstable_batchedUpdates=Dm;ni.unstable_renderSubtreeIntoContainer=function(e,t,i,s){if(!Gd(i))throw Error(O(200));if(e==null||e._reactInternals===void 0)throw Error(O(38));return Hd(e,t,i,!1,s)};ni.version="18.3.1-next-f1338f8080-20240426";function TE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(TE)}catch(e){console.error(e)}}TE(),TR.exports=ni;var Vd=TR.exports;const qf=gR(Vd);var jw=Vd;ef.createRoot=jw.createRoot,ef.hydrateRoot=jw.hydrateRoot;/**
 * @remix-run/router v1.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ua(){return ua=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},ua.apply(this,arguments)}var Xs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Xs||(Xs={}));const $w="popstate";function ak(e){e===void 0&&(e={});function t(s,n){let{pathname:r,search:o,hash:l}=s.location;return Yf("",{pathname:r,search:o,hash:l},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function i(s,n){return typeof n=="string"?n:Nc(n)}return ck(t,i,null,e)}function We(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function xE(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function uk(){return Math.random().toString(36).substr(2,8)}function Kw(e,t){return{usr:e.state,key:e.key,idx:t}}function Yf(e,t,i,s){return i===void 0&&(i=null),ua({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Oo(t):t,{state:i,key:t&&t.key||s||uk()})}function Nc(e){let{pathname:t="/",search:i="",hash:s=""}=e;return i&&i!=="?"&&(t+=i.charAt(0)==="?"?i:"?"+i),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Oo(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substr(i),e=e.substr(0,i));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function ck(e,t,i,s){s===void 0&&(s={});let{window:n=document.defaultView,v5Compat:r=!1}=s,o=n.history,l=Xs.Pop,a=null,u=c();u==null&&(u=0,o.replaceState(ua({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){l=Xs.Pop;let w=c(),v=w==null?null:w-u;u=w,a&&a({action:l,location:m.location,delta:v})}function h(w,v){l=Xs.Push;let g=Yf(m.location,w,v);i&&i(g,w),u=c()+1;let y=Kw(g,u),S=m.createHref(g);try{o.pushState(y,"",S)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;n.location.assign(S)}r&&a&&a({action:l,location:m.location,delta:1})}function p(w,v){l=Xs.Replace;let g=Yf(m.location,w,v);i&&i(g,w),u=c();let y=Kw(g,u),S=m.createHref(g);o.replaceState(y,"",S),r&&a&&a({action:l,location:m.location,delta:0})}function f(w){let v=n.location.origin!=="null"?n.location.origin:n.location.href,g=typeof w=="string"?w:Nc(w);return g=g.replace(/ $/,"%20"),We(v,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,v)}let m={get action(){return l},get location(){return e(n,o)},listen(w){if(a)throw new Error("A history only accepts one active listener");return n.addEventListener($w,d),a=w,()=>{n.removeEventListener($w,d),a=null}},createHref(w){return t(n,w)},createURL:f,encodeLocation(w){let v=f(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:p,go(w){return o.go(w)}};return m}var qw;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(qw||(qw={}));function dk(e,t,i){return i===void 0&&(i="/"),hk(e,t,i,!1)}function hk(e,t,i,s){let n=typeof t=="string"?Oo(t):t,r=So(n.pathname||"/",i);if(r==null)return null;let o=IE(e);pk(o);let l=null;for(let a=0;l==null&&a<o.length;++a){let u=Ek(r);l=Rk(o[a],u,s)}return l}function IE(e,t,i,s){t===void 0&&(t=[]),i===void 0&&(i=[]),s===void 0&&(s="");let n=(r,o,l)=>{let a={relativePath:l===void 0?r.path||"":l,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};a.relativePath.startsWith("/")&&(We(a.relativePath.startsWith(s),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(s.length));let u=an([s,a.relativePath]),c=i.concat(a);r.children&&r.children.length>0&&(We(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),IE(r.children,t,c,u)),!(r.path==null&&!r.index)&&t.push({path:u,score:yk(u,r.index),routesMeta:c})};return e.forEach((r,o)=>{var l;if(r.path===""||!((l=r.path)!=null&&l.includes("?")))n(r,o);else for(let a of DE(r.path))n(r,o,a)}),t}function DE(e){let t=e.split("/");if(t.length===0)return[];let[i,...s]=t,n=i.endsWith("?"),r=i.replace(/\?$/,"");if(s.length===0)return n?[r,""]:[r];let o=DE(s.join("/")),l=[];return l.push(...o.map(a=>a===""?r:[r,a].join("/"))),n&&l.push(...o),l.map(a=>e.startsWith("/")&&a===""?"/":a)}function pk(e){e.sort((t,i)=>t.score!==i.score?i.score-t.score:Sk(t.routesMeta.map(s=>s.childrenIndex),i.routesMeta.map(s=>s.childrenIndex)))}const fk=/^:[\w-]+$/,gk=3,mk=2,vk=1,Ck=10,wk=-2,Yw=e=>e==="*";function yk(e,t){let i=e.split("/"),s=i.length;return i.some(Yw)&&(s+=wk),t&&(s+=mk),i.filter(n=>!Yw(n)).reduce((n,r)=>n+(fk.test(r)?gk:r===""?vk:Ck),s)}function Sk(e,t){return e.length===t.length&&e.slice(0,-1).every((s,n)=>s===t[n])?e[e.length-1]-t[t.length-1]:0}function Rk(e,t,i){i===void 0&&(i=!1);let{routesMeta:s}=e,n={},r="/",o=[];for(let l=0;l<s.length;++l){let a=s[l],u=l===s.length-1,c=r==="/"?t:t.slice(r.length)||"/",d=Gc({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},c),h=a.route;if(!d&&u&&i&&!s[s.length-1].route.index&&(d=Gc({path:a.relativePath,caseSensitive:a.caseSensitive,end:!1},c)),!d)return null;Object.assign(n,d.params),o.push({params:n,pathname:an([r,d.pathname]),pathnameBase:xk(an([r,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(r=an([r,d.pathnameBase]))}return o}function Gc(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,s]=bk(e.path,e.caseSensitive,e.end),n=t.match(i);if(!n)return null;let r=n[0],o=r.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:s.reduce((u,c,d)=>{let{paramName:h,isOptional:p}=c;if(h==="*"){let m=l[d]||"";o=r.slice(0,r.length-m.length).replace(/(.)\/+$/,"$1")}const f=l[d];return p&&!f?u[h]=void 0:u[h]=(f||"").replace(/%2F/g,"/"),u},{}),pathname:r,pathnameBase:o,pattern:e}}function bk(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!0),xE(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,a)=>(s.push({paramName:l,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),s]}function Ek(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return xE(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function So(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,s=e.charAt(i);return s&&s!=="/"?null:e.slice(i)||"/"}function Pk(e,t){t===void 0&&(t="/");let{pathname:i,search:s="",hash:n=""}=typeof e=="string"?Oo(e):e;return{pathname:i?i.startsWith("/")?i:Fk(i,t):t,search:Ik(s),hash:Dk(n)}}function Fk(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?i.length>1&&i.pop():n!=="."&&i.push(n)}),i.length>1?i.join("/"):"/"}function vp(e,t,i,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+i+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Tk(e){return e.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function kE(e,t){let i=Tk(e);return t?i.map((s,n)=>n===i.length-1?s.pathname:s.pathnameBase):i.map(s=>s.pathnameBase)}function ME(e,t,i,s){s===void 0&&(s=!1);let n;typeof e=="string"?n=Oo(e):(n=ua({},e),We(!n.pathname||!n.pathname.includes("?"),vp("?","pathname","search",n)),We(!n.pathname||!n.pathname.includes("#"),vp("#","pathname","hash",n)),We(!n.search||!n.search.includes("#"),vp("#","search","hash",n)));let r=e===""||n.pathname==="",o=r?"/":n.pathname,l;if(o==null)l=i;else{let d=t.length-1;if(!s&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;n.pathname=h.join("/")}l=d>=0?t[d]:"/"}let a=Pk(n,l),u=o&&o!=="/"&&o.endsWith("/"),c=(r||o===".")&&i.endsWith("/");return!a.pathname.endsWith("/")&&(u||c)&&(a.pathname+="/"),a}const an=e=>e.join("/").replace(/\/\/+/g,"/"),xk=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Ik=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Dk=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function kk(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const AE=["post","put","patch","delete"];new Set(AE);const Mk=["get",...AE];new Set(Mk);/**
 * React Router v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ca(){return ca=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},ca.apply(this,arguments)}const Bd=C.createContext(null),_E=C.createContext(null),Pn=C.createContext(null),Wd=C.createContext(null),hr=C.createContext({outlet:null,matches:[],isDataRoute:!1}),LE=C.createContext(null);function Ak(e,t){let{relative:i}=t===void 0?{}:t;Na()||We(!1);let{basename:s,navigator:n}=C.useContext(Pn),{hash:r,pathname:o,search:l}=zd(e,{relative:i}),a=o;return s!=="/"&&(a=o==="/"?s:an([s,o])),n.createHref({pathname:a,search:l,hash:r})}function Na(){return C.useContext(Wd)!=null}function No(){return Na()||We(!1),C.useContext(Wd).location}function OE(e){C.useContext(Pn).static||C.useLayoutEffect(e)}function _k(){let{isDataRoute:e}=C.useContext(hr);return e?Kk():Lk()}function Lk(){Na()||We(!1);let e=C.useContext(Bd),{basename:t,future:i,navigator:s}=C.useContext(Pn),{matches:n}=C.useContext(hr),{pathname:r}=No(),o=JSON.stringify(kE(n,i.v7_relativeSplatPath)),l=C.useRef(!1);return OE(()=>{l.current=!0}),C.useCallback(function(u,c){if(c===void 0&&(c={}),!l.current)return;if(typeof u=="number"){s.go(u);return}let d=ME(u,JSON.parse(o),r,c.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:an([t,d.pathname])),(c.replace?s.replace:s.push)(d,c.state,c)},[t,s,o,r,e])}function zd(e,t){let{relative:i}=t===void 0?{}:t,{future:s}=C.useContext(Pn),{matches:n}=C.useContext(hr),{pathname:r}=No(),o=JSON.stringify(kE(n,s.v7_relativeSplatPath));return C.useMemo(()=>ME(e,JSON.parse(o),r,i==="path"),[e,o,r,i])}function Ok(e,t){return Nk(e,t)}function Nk(e,t,i,s){Na()||We(!1);let{navigator:n}=C.useContext(Pn),{matches:r}=C.useContext(hr),o=r[r.length-1],l=o?o.params:{};o&&o.pathname;let a=o?o.pathnameBase:"/";o&&o.route;let u=No(),c;if(t){var d;let w=typeof t=="string"?Oo(t):t;a==="/"||(d=w.pathname)!=null&&d.startsWith(a)||We(!1),c=w}else c=u;let h=c.pathname||"/",p=h;if(a!=="/"){let w=a.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let f=dk(e,{pathname:p}),m=Wk(f&&f.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:an([a,n.encodeLocation?n.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?a:an([a,n.encodeLocation?n.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),r,i,s);return t&&m?C.createElement(Wd.Provider,{value:{location:ca({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Xs.Pop}},m):m}function Gk(){let e=$k(),t=kk(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},r=null;return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},t),i?C.createElement("pre",{style:n},i):null,r)}const Hk=C.createElement(Gk,null);class Vk extends C.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,i){return i.location!==t.location||i.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:i.error,location:i.location,revalidation:t.revalidation||i.revalidation}}componentDidCatch(t,i){console.error("React Router caught the following error during render",t,i)}render(){return this.state.error!==void 0?C.createElement(hr.Provider,{value:this.props.routeContext},C.createElement(LE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Bk(e){let{routeContext:t,match:i,children:s}=e,n=C.useContext(Bd);return n&&n.static&&n.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=i.route.id),C.createElement(hr.Provider,{value:t},s)}function Wk(e,t,i,s){var n;if(t===void 0&&(t=[]),i===void 0&&(i=null),s===void 0&&(s=null),e==null){var r;if((r=i)!=null&&r.errors)e=i.matches;else return null}let o=e,l=(n=i)==null?void 0:n.errors;if(l!=null){let c=o.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);c>=0||We(!1),o=o.slice(0,Math.min(o.length,c+1))}let a=!1,u=-1;if(i&&s&&s.v7_partialHydration)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:h,errors:p}=i,f=d.route.loader&&h[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||f){a=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,d,h)=>{let p,f=!1,m=null,w=null;i&&(p=l&&d.route.id?l[d.route.id]:void 0,m=d.route.errorElement||Hk,a&&(u<0&&h===0?(qk("route-fallback",!1),f=!0,w=null):u===h&&(f=!0,w=d.route.hydrateFallbackElement||null)));let v=t.concat(o.slice(0,h+1)),g=()=>{let y;return p?y=m:f?y=w:d.route.Component?y=C.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=c,C.createElement(Bk,{match:d,routeContext:{outlet:c,matches:v,isDataRoute:i!=null},children:y})};return i&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?C.createElement(Vk,{location:i.location,revalidation:i.revalidation,component:m,error:p,children:g(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):g()},null)}var NE=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(NE||{}),Hc=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Hc||{});function zk(e){let t=C.useContext(Bd);return t||We(!1),t}function Uk(e){let t=C.useContext(_E);return t||We(!1),t}function jk(e){let t=C.useContext(hr);return t||We(!1),t}function GE(e){let t=jk(),i=t.matches[t.matches.length-1];return i.route.id||We(!1),i.route.id}function $k(){var e;let t=C.useContext(LE),i=Uk(Hc.UseRouteError),s=GE(Hc.UseRouteError);return t!==void 0?t:(e=i.errors)==null?void 0:e[s]}function Kk(){let{router:e}=zk(NE.UseNavigateStable),t=GE(Hc.UseNavigateStable),i=C.useRef(!1);return OE(()=>{i.current=!0}),C.useCallback(function(n,r){r===void 0&&(r={}),i.current&&(typeof n=="number"?e.navigate(n):e.navigate(n,ca({fromRouteId:t},r)))},[e,t])}const Qw={};function qk(e,t,i){!t&&!Qw[e]&&(Qw[e]=!0)}function kr(e){We(!1)}function Yk(e){let{basename:t="/",children:i=null,location:s,navigationType:n=Xs.Pop,navigator:r,static:o=!1,future:l}=e;Na()&&We(!1);let a=t.replace(/^\/*/,"/"),u=C.useMemo(()=>({basename:a,navigator:r,static:o,future:ca({v7_relativeSplatPath:!1},l)}),[a,l,r,o]);typeof s=="string"&&(s=Oo(s));let{pathname:c="/",search:d="",hash:h="",state:p=null,key:f="default"}=s,m=C.useMemo(()=>{let w=So(c,a);return w==null?null:{location:{pathname:w,search:d,hash:h,state:p,key:f},navigationType:n}},[a,c,d,h,p,f,n]);return m==null?null:C.createElement(Pn.Provider,{value:u},C.createElement(Wd.Provider,{children:i,value:m}))}function Qk(e){let{children:t,location:i}=e;return Ok(Qf(t),i)}new Promise(()=>{});function Qf(e,t){t===void 0&&(t=[]);let i=[];return C.Children.forEach(e,(s,n)=>{if(!C.isValidElement(s))return;let r=[...t,n];if(s.type===C.Fragment){i.push.apply(i,Qf(s.props.children,r));return}s.type!==kr&&We(!1),!s.props.index||!s.props.children||We(!1);let o={id:s.props.id||r.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Qf(s.props.children,r)),i.push(o)}),i}/**
 * React Router DOM v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vc(){return Vc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Vc.apply(this,arguments)}function HE(e,t){if(e==null)return{};var i={},s=Object.keys(e),n,r;for(r=0;r<s.length;r++)n=s[r],!(t.indexOf(n)>=0)&&(i[n]=e[n]);return i}function Jk(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Xk(e,t){return e.button===0&&(!t||t==="_self")&&!Jk(e)}const Zk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],eM=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],tM="6";try{window.__reactRouterVersion=tM}catch{}const iM=C.createContext({isTransitioning:!1}),sM="startTransition",Jw=Zp[sM];function nM(e){let{basename:t,children:i,future:s,window:n}=e,r=C.useRef();r.current==null&&(r.current=ak({window:n,v5Compat:!0}));let o=r.current,[l,a]=C.useState({action:o.action,location:o.location}),{v7_startTransition:u}=s||{},c=C.useCallback(d=>{u&&Jw?Jw(()=>a(d)):a(d)},[a,u]);return C.useLayoutEffect(()=>o.listen(c),[o,c]),C.createElement(Yk,{basename:t,children:i,location:l.location,navigationType:l.action,navigator:o,future:s})}const rM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",oM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lM=C.forwardRef(function(t,i){let{onClick:s,relative:n,reloadDocument:r,replace:o,state:l,target:a,to:u,preventScrollReset:c,unstable_viewTransition:d}=t,h=HE(t,Zk),{basename:p}=C.useContext(Pn),f,m=!1;if(typeof u=="string"&&oM.test(u)&&(f=u,rM))try{let y=new URL(window.location.href),S=u.startsWith("//")?new URL(y.protocol+u):new URL(u),b=So(S.pathname,p);S.origin===y.origin&&b!=null?u=b+S.search+S.hash:m=!0}catch{}let w=Ak(u,{relative:n}),v=uM(u,{replace:o,state:l,target:a,preventScrollReset:c,relative:n,unstable_viewTransition:d});function g(y){s&&s(y),y.defaultPrevented||v(y)}return C.createElement("a",Vc({},h,{href:f||w,onClick:m||r?s:g,ref:i,target:a}))}),bu=C.forwardRef(function(t,i){let{"aria-current":s="page",caseSensitive:n=!1,className:r="",end:o=!1,style:l,to:a,unstable_viewTransition:u,children:c}=t,d=HE(t,eM),h=zd(a,{relative:d.relative}),p=No(),f=C.useContext(_E),{navigator:m,basename:w}=C.useContext(Pn),v=f!=null&&cM(h)&&u===!0,g=m.encodeLocation?m.encodeLocation(h).pathname:h.pathname,y=p.pathname,S=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;n||(y=y.toLowerCase(),S=S?S.toLowerCase():null,g=g.toLowerCase()),S&&w&&(S=So(S,w)||S);const b=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let R=y===g||!o&&y.startsWith(g)&&y.charAt(b)==="/",E=S!=null&&(S===g||!o&&S.startsWith(g)&&S.charAt(g.length)==="/"),x={isActive:R,isPending:E,isTransitioning:v},I=R?s:void 0,D;typeof r=="function"?D=r(x):D=[r,R?"active":null,E?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let G=typeof l=="function"?l(x):l;return C.createElement(lM,Vc({},d,{"aria-current":I,className:D,ref:i,style:G,to:a,unstable_viewTransition:u}),typeof c=="function"?c(x):c)});var Jf;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Jf||(Jf={}));var Xw;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Xw||(Xw={}));function aM(e){let t=C.useContext(Bd);return t||We(!1),t}function uM(e,t){let{target:i,replace:s,state:n,preventScrollReset:r,relative:o,unstable_viewTransition:l}=t===void 0?{}:t,a=_k(),u=No(),c=zd(e,{relative:o});return C.useCallback(d=>{if(Xk(d,i)){d.preventDefault();let h=s!==void 0?s:Nc(u)===Nc(c);a(e,{replace:h,state:n,preventScrollReset:r,relative:o,unstable_viewTransition:l})}},[u,a,c,s,n,i,e,r,o,l])}function cM(e,t){t===void 0&&(t={});let i=C.useContext(iM);i==null&&We(!1);let{basename:s}=aM(Jf.useViewTransitionState),n=zd(e,{relative:t.relative});if(!i.isTransitioning)return!1;let r=So(i.currentLocation.pathname,s)||i.currentLocation.pathname,o=So(i.nextLocation.pathname,s)||i.nextLocation.pathname;return Gc(n.pathname,o)!=null||Gc(n.pathname,r)!=null}const dM={"6:00A":{"6:00":"Ruoka + Aamulehdet","8:00":"Solu","8:55":"R-apteekki ja varastokuljetukset","10:00":"Solu","11:00":"G-rak. kuljetukset: Varastotavarat ja pienet laitteet","12:45":"R-häkkienkeruu, kerroksien auloista myös pahvit ja lääkekopat. Terminaalin käytäviltä tyhjät häkit"},"6:00B":{"6:00":"Varasto runko D, L ,Q","7:20":"Varasto runko B, A, H, F, E FM6-7(aamu) ja T-rakennus","8:45":"Ruoka+ Mundin vaunut","11:00":"Kuriiripaketit","11:50":"Näytekuljetus T-rak-FM4","12:10":"G-rak. kuljetukset: Roskat ja isot laitteet"},"7:00":{"7:00":"Pyykkikuljetukset, E ja T- rak. Jätetään 00.krs. T-rak. likapyykki. YT-tunnelin automaattien rullakoiden vaihto FM6/O-rak. pyykkien jälkeen","9:15":"Radius JÄTE+ Köökki jäte","11:45":"Tiistaisin apteekin lääkelavojen (R 0.krs.) määrän tarkistus, 3 lavaa huoneessa seinää vasten.","12:55":"FM6 + OBD APT/VAR + Henkilökunnan likapyyki T-rak. / FM6 risteys sekä FM6 vaatepalautusautomaatit ja käytävältä rullakko/rullakot"},"8:46":{"9:00":"Solu","10:00":"T-rak. Kuljetukset (apt, varasto, puhdas pyykki)","12:30":"FM6 + OBD jäte","14:30":"Pikiksiä, TORSTAISIN vaatteiden hyllytys","16:00":"Solu"},"12:00":{"12:00":"T-rak. jätekieppi + Radiuksen kuilut 0.krs ja 00.krs (pyykit, roskat ja bio)","14:00":"Solu","15:00":"Solu + labrahäkki","16:15":"T-rak. likapyykit","17:00":"APT valmistuksen jätteet + RSH 1.krs jäte´+ FM6 00.krs jähyo","18:30":"Ruokavaunujen palautus"}},hM={"6:00":{"6:00":"Puhtaan pyykinjako","7:35":"Laajennuksen jätekierros","9:45":"T-rakennuksen kylmätuotteet","11:00":"Nestetyppi (VAIN KESKIVIIKKOISIN)","11:45":"Coxan varastovaunut","12:20":"Coxan rullakoiden keräys","12:55":"PSU pyykin hyllytys (VAIN TI ja PE)"},"7:00":{"7:00":"Coxan varastovaunut","7:55":"F-rakennuksen lääkkeet TI-PE, ei MA","9:00":"Särmäisjätteet (Molok)","9:30":"Kylmätuotekuljetus 1","11:30":"Henkilökunnan likapyykit","12:00":"Fujitsu, laajennuksen jätekierros ja särmäisjätteet (Molok)"},"8:00":{"8:00":"Teho ja PSU Varastot + Rullakoiden keruu","9:45":"T-rakennuksen kylmätuotteet APUTEHTÄVÄ","10:15":"Coxan leikkurin ruoat (FM6 ravintola) sekä Coxan jätekierros","11:45":"Lääkekuljetus K-siipi + EK/ÄK","13:30":"Kylmätuotteiden jälkitoimitukset","14:15":"Rullakoiden keräys"},"9:00":{"9:00":"Varastotavaroiden jako T2 alueet (FM1-4, K, Coxa...)","11:00":"Nestetyppi (VAIN KESKIVIIKKOISIN)","11:45":"Lääkekuljetus FM 1-4, Coxa","13:45":"Ruoanjako Päivällinen","15:30":"Rullakoiden keräys"},"10:45":{"10:45":"Rullakoiden keräys","12:00":"Jäteaseman aputehtävä","13:30":"Hissi 43 ja Coxan jätteet","15:50":"Coxan sekä laajennuksen jätekierros"}},pM={"6:00A":{"6:00":"Ruuanjako osastoille","8:00":"Varastotavarat","8:45":"ÄK-lääke","9:55":"ÄK-lääke","10:50":"E-rak. kuljetukset"},"6:00B":{"6:00":"Pukuhuonepyykki","6:20":"Ruokakuljetus","7:55":"Pyykin nouto Ba + Varastotavarat","9:15":"F-rakennuksen kuljetukset","10:45":"Kuilu + Henkilökunnanlikapyykki","13:00":"Maitovaunu"},"6:45":{"6:45":"Ruokakuljetus","7:45":"Puhdas pyykki","8:45":"Ruokakuljetus","10:10":"Vaunujen palautus + Herko","11:45":"Jälkitoimitukset","12:50":"Apt (A, H, P)","13:30":"ÄK-Lääke"},"7:00":{"7:00":"Kuilu + E-rak.","9:40":"Häkit + Pahvit + tyhjät apt.kopat","11:50":"Kuilu + fujitsu tarvittaessa","13:30":"Kuilu"},"8:30A":{"8:30":"Voimian likapyykki MA, KE, PE","8:45":"Ruokakuljetus","10:30":"Kylmätuote Ba","11:45":"Apt + tyhjät lääkekopat'","13:30":"Coxan VHK","14:00":"ÄK-Lääke"},"8:30B":{"8:45":"Ruokakuljetus","10:30":"Kylmäkuljetus Bb + F-rak.","11:00":"Puhdin roskat","12:40":"BB-Kerrosjätteet + pahvit hissiauloista","13:45":"Ruokakuljetus","15:30":"Jätteiden puristus Ba-kuilu + Biojäte"},"12:00A":{"12:00":"Häkit ja pahvit kerroksista + pkl","13:45":"Ruokakuljetus","15:35":"Ba-jäte + imupussit klo 16 ->","17:15":"L, N, E, Ba ja Bb-kuilut","18:30":"Coxa VHK","19:00":"Kuilut + jätteiden puristus"},"12:00B":{"12:00":"Voimia puhdas pyykki (MA, KE, PE)","13:45":"Ruokakuljetus","15:35":"Häkit + pahvit","16:30":"Mund:in vaunujen nouto","16:45":"Köökki lisätilaukset","17:30":"Ruokavaunujen palautus"}},fM={"6:00A":{"6:00":"VHK Päivystys","7:00":"Maitovaunu VTO-ÄMK","7:10":"VHK Päivystys","8:15":"VHK Päivystys + PSU + Acuta","9:00":"Q-siiven ruokavaunut","10:00":"VHK PFO (ma & ti)","11:00":"VHK Päivystys","12:00":"VHK Päivystys"},"6:00B":{"6:00":"VHK 6.00","7:20":"VHK 7.20","9:00":"VHK Päivystys + PGAS","10:00":"VHK Päivystys + PGAS","11:00":"VHK PGAS","11:50":"VHK 11.50 (ma-ti) / VHK 12.00 (ke-pe)","13:00":"VHK PGAS"},"7:00A":{"7:00 ma":"Varasto-/pyykkikujetusta","7:00 ti-pe":"Varasto-/pyykkikujetusta","7:40 ti-pe":"7.40 D-siiven lääke","8:15 ti-pe":"Varasto-/pyykkikujetusta","9:00":"N-rakennuksen tyhjät häkit","9:15":"L- ja D-rak likapyykit","10:45":"L-rakennuksen lääkekuljetus","12:45":"D-rakennuksen lääkekuljetus"},"7:00B":{"7:00":"N-rak. D00 jättet","7:20":"Varasto-/pyykkikujetusta","8:45":"Lasten C&C kylmäruokakuljetus","9:45":"Kylmäkuljetus L- , N- ja D-rakennukset","11:15":"Pikakuljetuksia","12:45 ma":"N-rak. lääke-/jätekuljetus, likapyykit ja tyhjät häkit","12:00 to":"N-rak. lääke-/jätekuljetus, likapyykit ja tyhjät häkit + D00 jäte","12:15 ti,ke,pe":"N-rak. lääke-/jätekuljetus, likapyykit ja tyhjät häkit","13:45":"Tyhjät pyykkihäkit D00, pyykit D00 ja L00 a-puoli"},"10:00":{"10:00":"D-rakennuksen jätekierros","12:00":"VHK PGAS","13:30":"VHK PGAS","14:00":"VHK PGAS","15:00":"VHK PGAS","16:00":"VHK PGAS","16:30":"VHK COXA"},"10:45":{"10:45":"L-rakennuksen jätekierros","13:00":"VHK päivystys","14:55":"VHK 14:45","16:00":"VHK päivystys (myös URP2/PKO)","17:00":"VHK päivystys","18:00":"VHK PGAS"},"14:00A":{"14:00":"VHK päivystys","15:00":"VHK päivystys","16:30":"D-rakennus kerrosroskat, 00 aulapahvit ja tyhjät häkit","17:30":"D-rakennus jätehuoneen roskat","18:00":"VHK päivystys","19:00":"VHK päivystys","20:00":"VHK päivystys","21:00":"VHK päivystys"},"14:00B":{"14:00":"VHK Coxa 14.00 + 14.30 Coxa","15:00":"VHK Coxa 15.00 + 15.30 Coxa","16:30":"VHK 16.30 KRKO (PFO ma ti)","17:00":"D-rakennus likapyykit ja pyykkihäkit","17:30":"Coxa VHK","18:00":"VHK päivystys + TULO D8 imupussit","19:00":"VHK päivystys (tehdään aputehtävällä)","20:00":"VHK päivystys (tehdään aputehtävällä)","21:00":"VHK päivystys (tehdään aputehtävällä)"}},gM={"6:00A":{"6:00":"Ruoanjako","8:45":"Ruoanjako","10:40":"Jäte: Ba kerrosjätteet + imujätteet TULO D8","11:45":"Ruoka: Jälkitoimitusaterioidenjako","12:15":"Särmäisjätteet"},"6:00B":{"6:00":"Ruoanjako","8:45":"Ruoanjako","10:40":"Jäte: BB-kerrosjätteet + ruokavaunujen palautus B-siipi","12:30":"D 00.07/D Jätehuone + biojäte"},"6:00C":{"6:00":"Ruoanjako + Aamulehtien haku","7:45":"Jäte: Laajennuksen hissi 44 (Pea, 3.krs ja 00.26).","8:45":"Ruoanjako + Aamulehtien haku tarvittaessa","10:40":"Jäte: Tehon ja laajennuksen jätekierros. (Ei hissi 44) + Coxan pyykkikuilu","12:15":"Keittiön roskat","13:00":"VHK: PSU - ACUTA"},"7:00A":{"7:00":"VHK-päivystys 7:00","7:30":"Coxan VHK Tarvittaessa","8:45":"Ruoanjako","11:30":"T-rakennus jäte ja likapyykki","14:00":"Coxan VHK Tarvittaessa"},"7:00B":{"7:00":"Pyykkikuljetus ","9:30":"Kylmäkuljetus1","11:00":"Pyykkiaputehtävä tarvittaessa","12:00":"Jäte: L-rakennus A- ja B-puoli jäte ja likapyykki","13:30":"Kylmätuotteiden jälkitoimitus"},"7:00C":{"7:00":"Maitovaunu D-rak. - L-rak. 7.00, VHK päiv. 7.10, Kuilut, aamut + E-rak","9:15":"VHK: ACUTA","9:30":"Kylmäkuljetus 2","12:00":"N-rakennus jäte","12:30":"Jäte: Kuilut, Muista maitovaunu klo 13.00"},"8:45":{"8:45":"Lasten kylmäruoka","9:45":"T-rakennus kylmäkuljetus","11:00":"VHK: PSU - ACUTA + Päivystys","11:50":"T-rak. näytekuljetus","13:45":"Ruoanjako","14:50":"Jäteaseman (Coxan) kuilun pyykit","15:00":"VHK: PSU - ACUTA + Päivystys + PKO"},"12:00A":{"12:00":"Jäte: E-rakennus","13:45":"Ruoanjako","16:45":"Ruoka: Jälkitoimitusaterioidenjako","17:15":"Coxan vhk-kuljetus tarvittaessa. Pikakuljetuksia","18:00":"Ruokavaunujen palautus"},"12:00B":{"12:00":"Jäte: Radius + Coxa laajennus","13:45":"Ruoanjako","15:30":"Tyhjien häkkien ja lääkekoppien keräily","17:30":"Jäte: Kuilut","18:15":"Ruokavaunujen palautus"},"12:00C":{"12.00":"D-rakennus likapyykit ja jätteet","13:45":"Ruoanjako","15:30":"Jäte: Tehon roskat","16:00":"Jäte: Laajennuksen jätekierros","17:00":"Vhk: Päivystys LE4/LE7/LE8","17:30":"Ruokavaunujen palautus + D00 pyykkikuilu + TULO 8.krs imupussit"}},mM={"6:00A":{"6:00":"Ruoanjako","8:45":"Ruoanjako","10:40":"Jäte: Ba kerrosjätteet + imujätteet TULO D8","11:45":"Ruoka: Jälkitoimitusaterioidenjako","12:15":"Särmäisjätteet"},"6:00B":{"6:00":"Ruoanjako","8:45":"Ruoanjako","10:40":"Jäte: BB-kerrosjätteet + ruokavaunujen palautus B-siipi","12:30":"D 00.07/D Jätehuone + biojäte"},"6:00C":{"6:00":"Ruoanjako + Aamulehtien haku","7:45":"Jäte: Laajennuksen hissi 44 (Pea, 3.krs ja 00.26).","8:45":"Ruoanjako + Aamulehtien haku tarvittaessa","10:40":"Jäte: Tehon ja laajennuksen jätekierros. (Ei hissi 44) + Coxan pyykkikuilu","12:15":"Keittiön roskat","13:00":"VHK: PSU - ACUTA"},"7:00A":{"7:00":"VHK-päivystys 7:00","7:30":"Coxan VHK Tarvittaessa","8:45":"Ruoanjako","11:30":"T-rakennus jäte ja likapyykki","14:00":"Coxan VHK Tarvittaessa"},"7:00B":{"7:00":"Trukkien ja trukkitilan huolto ","8:00":"Henkilökunnan likapyykit","9:30":"Kylmäkuljetus1","11:00":"Pyykkiaputehtävä tarvittaessa","12:00":"Jäte: L-rakennus A- ja B-puoli jäte ja likapyykki","13:30":"Kylmätuotteiden jälkitoimitus"},"7:00C":{"7:00":"Maitovaunu D-rak. - L-rak. 7.00, VHK päiv. 7.10, Kuilut, aamut + E-rak","9:15":"VHK: ACUTA","9:30":"Kylmäkuljetus 2","12:00":"N-rakennus jäte","12:30":"Jäte: Kuilut, Muista maitovaunu klo 13.00"},"8:45":{"8:45":"Lasten kylmäruoka","9:45":"T-rakennus kylmäkuljetus","11:00":"VHK: PSU - ACUTA + Päivystys","11:50":"T-rak. näytekuljetus","13:45":"Ruoanjako","14:50":"Jäteaseman (Coxan) kuilun pyykit","15:00":"VHK: PSU - ACUTA + Päivystys + PKO"},"12:00A":{"12:00":"Jäte: E-rakennus","13:45":"Ruoanjako","16:45":"Ruoka: Jälkitoimitusaterioidenjako","17:15":"Coxan vhk-kuljetus tarvittaessa. Pikakuljetuksia","18:00":"Ruokavaunujen palautus","19:15":"Coxan henkilökunnan likapyykit"},"12:00B":{"12:00":"Jäte: Radius + Coxa laajennus","13:45":"Ruoanjako","15:30":"Tyhjien häkkien ja lääkekoppien keräily","17:30":"Jäte: Kuilut","18:15":"Ruokavaunujen palautus"},"12:00C":{"12.00":"D-rakennus likapyykit ja jätteet","13:45":"Ruoanjako","15:30":"Jäte: Tehon roskat","16:00":"Jäte: Laajennuksen jätekierros","17:00":"Vhk: Päivystys LE4/LE7/LE8","17:30":"Ruokavaunujen palautus + D00 pyykkikuilu + TULO 8.krs imupussit"}},Cp={T1:dM,T2:hM,T3:pM,T4:fM,LA:gM,SU:mM};function vM(){const[e,t]=C.useState(!1),[i,s]=C.useState(!1),[n,r]=C.useState(""),[o,l]=C.useState(""),a=d=>{t(!0),l(d.target.name),console.log(o)},u=d=>{t(!1),s(!0),r(d)},c=()=>{s(!1),t(!0)};return k.jsxs("div",{children:[k.jsx("div",{className:"raami1",children:k.jsx("div",{className:"tiimi",children:Object.keys(Cp).map(d=>k.jsx("div",{children:k.jsx("div",{className:"reittinappi1",children:k.jsx("button",{onClick:a,name:d,className:"reittinappiB",children:d})})},d))})}),e&&k.jsxs("div",{className:"harmaaL",children:[k.jsx("div",{onClick:()=>t(!1),className:"x",children:"x"}),k.jsxs("div",{className:"raami",children:[k.jsx("div",{className:"otsi",children:o}),Object.keys(Cp[o]).map(d=>k.jsx("div",{onClick:()=>u(d),className:"reitti",children:k.jsx("div",{id:d,className:"reittinappi",children:k.jsx("p",{children:d})})},d))]})]}),i&&k.jsxs("div",{className:"harmaaL",children:[k.jsx("div",{onClick:()=>c(),className:"x",children:"x"}),k.jsx("div",{style:{color:"white",position:"fixed",marginLeft:"140px",fontSize:"16px",marginTop:"5px"},children:n}),k.jsx("div",{style:{marginTop:"30px"},children:Object.entries(Cp[o][n]).map(([d,h],p)=>k.jsx("table",{children:k.jsx("tbody",{children:k.jsxs("tr",{children:[k.jsx("th",{style:{width:"50px",padding:"5px",color:"black",fontWeight:"200px",backgroundColor:"white",border:"1px solid black"},children:d}),k.jsx("th",{style:{width:"280px",padding:"5px",color:"black",backgroundColor:"white",border:"1px solid black"},children:h})]})})},p))})]})]})}const CM=()=>k.jsx(k.Fragment,{children:k.jsx(vM,{})});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N=function(e,t){if(!e)throw Go(t)},Go=function(e){return new Error("Firebase Database ("+VE.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE=function(e){const t=[];let i=0;for(let s=0;s<e.length;s++){let n=e.charCodeAt(s);n<128?t[i++]=n:n<2048?(t[i++]=n>>6|192,t[i++]=n&63|128):(n&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(n=65536+((n&1023)<<10)+(e.charCodeAt(++s)&1023),t[i++]=n>>18|240,t[i++]=n>>12&63|128,t[i++]=n>>6&63|128,t[i++]=n&63|128):(t[i++]=n>>12|224,t[i++]=n>>6&63|128,t[i++]=n&63|128)}return t},wM=function(e){const t=[];let i=0,s=0;for(;i<e.length;){const n=e[i++];if(n<128)t[s++]=String.fromCharCode(n);else if(n>191&&n<224){const r=e[i++];t[s++]=String.fromCharCode((n&31)<<6|r&63)}else if(n>239&&n<365){const r=e[i++],o=e[i++],l=e[i++],a=((n&7)<<18|(r&63)<<12|(o&63)<<6|l&63)-65536;t[s++]=String.fromCharCode(55296+(a>>10)),t[s++]=String.fromCharCode(56320+(a&1023))}else{const r=e[i++],o=e[i++];t[s++]=String.fromCharCode((n&15)<<12|(r&63)<<6|o&63)}}return t.join("")},Gm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let n=0;n<e.length;n+=3){const r=e[n],o=n+1<e.length,l=o?e[n+1]:0,a=n+2<e.length,u=a?e[n+2]:0,c=r>>2,d=(r&3)<<4|l>>4;let h=(l&15)<<2|u>>6,p=u&63;a||(p=64,o||(h=64)),s.push(i[c],i[d],i[h],i[p])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(BE(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):wM(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let n=0;n<e.length;){const r=i[e.charAt(n++)],l=n<e.length?i[e.charAt(n)]:0;++n;const u=n<e.length?i[e.charAt(n)]:64;++n;const d=n<e.length?i[e.charAt(n)]:64;if(++n,r==null||l==null||u==null||d==null)throw new yM;const h=r<<2|l>>4;if(s.push(h),u!==64){const p=l<<4&240|u>>2;if(s.push(p),d!==64){const f=u<<6&192|d;s.push(f)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class yM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WE=function(e){const t=BE(e);return Gm.encodeByteArray(t,!0)},Bc=function(e){return WE(e).replace(/\./g,"")},Wc=function(e){try{return Gm.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SM(e){return zE(void 0,e)}function zE(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const i=t;return new Date(i.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(const i in t)!t.hasOwnProperty(i)||!RM(i)||(e[i]=zE(e[i],t[i]));return e}function RM(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM=()=>bM().__FIREBASE_DEFAULTS__,PM=()=>{if(typeof process>"u"||typeof process.env>"u")return;const e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},FM=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Wc(e[1]);return t&&JSON.parse(t)},Hm=()=>{try{return EM()||PM()||FM()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},UE=e=>{var t,i;return(i=(t=Hm())===null||t===void 0?void 0:t.emulatorHosts)===null||i===void 0?void 0:i[e]},TM=e=>{const t=UE(e);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),s]:[t.substring(0,i),s]},jE=()=>{var e;return(e=Hm())===null||e===void 0?void 0:e.config},$E=e=>{var t;return(t=Hm())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,s)=>{i?this.reject(i):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xM(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},s=t||"demo-project",n=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:n,exp:n+3600,auth_time:n,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e),l="";return[Bc(JSON.stringify(i)),Bc(JSON.stringify(o)),l].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Vm(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Et())}function IM(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function KE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DM(){const e=Et();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function qE(){return VE.NODE_ADMIN===!0}function kM(){try{return typeof indexedDB=="object"}catch{return!1}}function MM(){return new Promise((e,t)=>{try{let i=!0;const s="validate-browser-context-for-indexeddb-analytics-module",n=self.indexedDB.open(s);n.onsuccess=()=>{n.result.close(),i||self.indexedDB.deleteDatabase(s),e(!0)},n.onupgradeneeded=()=>{i=!1},n.onerror=()=>{var r;t(((r=n.error)===null||r===void 0?void 0:r.message)||"")}}catch(i){t(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM="FirebaseError";class Fn extends Error{constructor(t,i,s){super(i),this.code=t,this.customData=s,this.name=AM,Object.setPrototypeOf(this,Fn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ga.prototype.create)}}class Ga{constructor(t,i,s){this.service=t,this.serviceName=i,this.errors=s}create(t,...i){const s=i[0]||{},n=`${this.service}/${t}`,r=this.errors[t],o=r?_M(r,s):"Error",l=`${this.serviceName}: ${o} (${n}).`;return new Fn(n,l,s)}}function _M(e,t){return e.replace(LM,(i,s)=>{const n=t[s];return n!=null?String(n):`<${s}?>`})}const LM=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(e){return JSON.parse(e)}function ot(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=function(e){let t={},i={},s={},n="";try{const r=e.split(".");t=da(Wc(r[0])||""),i=da(Wc(r[1])||""),n=r[2],s=i.d||{},delete i.d}catch{}return{header:t,claims:i,data:s,signature:n}},OM=function(e){const t=YE(e),i=t.claims;return!!i&&typeof i=="object"&&i.hasOwnProperty("iat")},NM=function(e){const t=YE(e).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ro(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function Xf(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function zc(e,t,i){const s={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(s[n]=t.call(i,e[n],n,e));return s}function Uc(e,t){if(e===t)return!0;const i=Object.keys(e),s=Object.keys(t);for(const n of i){if(!s.includes(n))return!1;const r=e[n],o=t[n];if(Zw(r)&&Zw(o)){if(!Uc(r,o))return!1}else if(r!==o)return!1}for(const n of s)if(!i.includes(n))return!1;return!0}function Zw(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(e){const t=[];for(const[i,s]of Object.entries(e))Array.isArray(s)?s.forEach(n=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function Rl(e){const t={};return e.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[n,r]=s.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function bl(e){const t=e.indexOf("?");if(!t)return"";const i=e.indexOf("#",t);return e.substring(t,i>0?i:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,i){i||(i=0);const s=this.W_;if(typeof t=="string")for(let d=0;d<16;d++)s[d]=t.charCodeAt(i)<<24|t.charCodeAt(i+1)<<16|t.charCodeAt(i+2)<<8|t.charCodeAt(i+3),i+=4;else for(let d=0;d<16;d++)s[d]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i+=4;for(let d=16;d<80;d++){const h=s[d-3]^s[d-8]^s[d-14]^s[d-16];s[d]=(h<<1|h>>>31)&4294967295}let n=this.chain_[0],r=this.chain_[1],o=this.chain_[2],l=this.chain_[3],a=this.chain_[4],u,c;for(let d=0;d<80;d++){d<40?d<20?(u=l^r&(o^l),c=1518500249):(u=r^o^l,c=1859775393):d<60?(u=r&o|l&(r|o),c=2400959708):(u=r^o^l,c=3395469782);const h=(n<<5|n>>>27)+u+a+c+s[d]&4294967295;a=l,l=o,o=(r<<30|r>>>2)&4294967295,r=n,n=h}this.chain_[0]=this.chain_[0]+n&4294967295,this.chain_[1]=this.chain_[1]+r&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+a&4294967295}update(t,i){if(t==null)return;i===void 0&&(i=t.length);const s=i-this.blockSize;let n=0;const r=this.buf_;let o=this.inbuf_;for(;n<i;){if(o===0)for(;n<=s;)this.compress_(t,n),n+=this.blockSize;if(typeof t=="string"){for(;n<i;)if(r[o]=t.charCodeAt(n),++o,++n,o===this.blockSize){this.compress_(r),o=0;break}}else for(;n<i;)if(r[o]=t[n],++o,++n,o===this.blockSize){this.compress_(r),o=0;break}}this.inbuf_=o,this.total_+=i}digest(){const t=[];let i=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let n=this.blockSize-1;n>=56;n--)this.buf_[n]=i&255,i/=256;this.compress_(this.buf_);let s=0;for(let n=0;n<5;n++)for(let r=24;r>=0;r-=8)t[s]=this.chain_[n]>>r&255,++s;return t}}function HM(e,t){const i=new VM(e,t);return i.subscribe.bind(i)}class VM{constructor(t,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(i=>{i.next(t)})}error(t){this.forEachObserver(i=>{i.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,i,s){let n;if(t===void 0&&i===void 0&&s===void 0)throw new Error("Missing Observer.");BM(t,["next","error","complete"])?n=t:n={next:t,error:i,complete:s},n.next===void 0&&(n.next=wp),n.error===void 0&&(n.error=wp),n.complete===void 0&&(n.complete=wp);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch{}}),this.observers.push(n),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,t)}sendOne(t,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{i(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BM(e,t){if(typeof e!="object"||e===null)return!1;for(const i of t)if(i in e&&typeof e[i]=="function")return!0;return!1}function wp(){}function Bm(e,t){return`${e} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM=function(e){const t=[];let i=0;for(let s=0;s<e.length;s++){let n=e.charCodeAt(s);if(n>=55296&&n<=56319){const r=n-55296;s++,N(s<e.length,"Surrogate pair missing trail surrogate.");const o=e.charCodeAt(s)-56320;n=65536+(r<<10)+o}n<128?t[i++]=n:n<2048?(t[i++]=n>>6|192,t[i++]=n&63|128):n<65536?(t[i++]=n>>12|224,t[i++]=n>>6&63|128,t[i++]=n&63|128):(t[i++]=n>>18|240,t[i++]=n>>12&63|128,t[i++]=n>>6&63|128,t[i++]=n&63|128)}return t},jd=function(e){let t=0;for(let i=0;i<e.length;i++){const s=e.charCodeAt(i);s<128?t++:s<2048?t+=2:s>=55296&&s<=56319?(t+=4,i++):t+=3}return t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(e){return e&&e._delegate?e._delegate:e}let ir=class{constructor(t,i,s){this.name=t,this.instanceFactory=i,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const s=new Ud;if(this.instancesDeferred.set(i,s),this.isInitialized(i)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:i});n&&s.resolve(n)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){var i;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(i=t==null?void 0:t.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(r){if(n)return null;throw r}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(jM(t))try{this.getOrInitializeService({instanceIdentifier:Mn})}catch{}for(const[i,s]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(i);try{const r=this.getOrInitializeService({instanceIdentifier:n});s.resolve(r)}catch{}}}}clearInstance(t=Mn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Mn){return this.instances.has(t)}getOptions(t=Mn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:s,options:i});for(const[r,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);s===l&&o.resolve(n)}return n}onInit(t,i){var s;const n=this.normalizeInstanceIdentifier(i),r=(s=this.onInitCallbacks.get(n))!==null&&s!==void 0?s:new Set;r.add(t),this.onInitCallbacks.set(n,r);const o=this.instances.get(n);return o&&t(o,n),()=>{r.delete(t)}}invokeOnInitCallbacks(t,i){const s=this.onInitCallbacks.get(i);if(s)for(const n of s)try{n(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:UM(t),options:i}),this.instances.set(t,s),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Mn){return this.component?this.component.multipleInstances?t:Mn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function UM(e){return e===Mn?void 0:e}function jM(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new zM(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Ce||(Ce={}));const KM={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},qM=Ce.INFO,YM={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},QM=(e,t,...i)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),n=YM[t];if(n)console[n](`[${s}]  ${e.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Wm{constructor(t){this.name=t,this._logLevel=qM,this._logHandler=QM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ce))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?KM[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...t),this._logHandler(this,Ce.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...t),this._logHandler(this,Ce.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...t),this._logHandler(this,Ce.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...t),this._logHandler(this,Ce.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...t),this._logHandler(this,Ce.ERROR,...t)}}const JM=(e,t)=>t.some(i=>e instanceof i);let ey,ty;function XM(){return ey||(ey=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZM(){return ty||(ty=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const QE=new WeakMap,Zf=new WeakMap,JE=new WeakMap,yp=new WeakMap,zm=new WeakMap;function eA(e){const t=new Promise((i,s)=>{const n=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{i(un(e.result)),n()},o=()=>{s(e.error),n()};e.addEventListener("success",r),e.addEventListener("error",o)});return t.then(i=>{i instanceof IDBCursor&&QE.set(i,e)}).catch(()=>{}),zm.set(t,e),t}function tA(e){if(Zf.has(e))return;const t=new Promise((i,s)=>{const n=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{i(),n()},o=()=>{s(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)});Zf.set(e,t)}let eg={get(e,t,i){if(e instanceof IDBTransaction){if(t==="done")return Zf.get(e);if(t==="objectStoreNames")return e.objectStoreNames||JE.get(e);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return un(e[t])},set(e,t,i){return e[t]=i,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function iA(e){eg=e(eg)}function sA(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const s=e.call(Sp(this),t,...i);return JE.set(s,t.sort?t.sort():[t]),un(s)}:ZM().includes(e)?function(...t){return e.apply(Sp(this),t),un(QE.get(this))}:function(...t){return un(e.apply(Sp(this),t))}}function nA(e){return typeof e=="function"?sA(e):(e instanceof IDBTransaction&&tA(e),JM(e,XM())?new Proxy(e,eg):e)}function un(e){if(e instanceof IDBRequest)return eA(e);if(yp.has(e))return yp.get(e);const t=nA(e);return t!==e&&(yp.set(e,t),zm.set(t,e)),t}const Sp=e=>zm.get(e);function rA(e,t,{blocked:i,upgrade:s,blocking:n,terminated:r}={}){const o=indexedDB.open(e,t),l=un(o);return s&&o.addEventListener("upgradeneeded",a=>{s(un(o.result),a.oldVersion,a.newVersion,un(o.transaction),a)}),i&&o.addEventListener("blocked",a=>i(a.oldVersion,a.newVersion,a)),l.then(a=>{r&&a.addEventListener("close",()=>r()),n&&a.addEventListener("versionchange",u=>n(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const oA=["get","getKey","getAll","getAllKeys","count"],lA=["put","add","delete","clear"],Rp=new Map;function iy(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Rp.get(t))return Rp.get(t);const i=t.replace(/FromIndex$/,""),s=t!==i,n=lA.includes(i);if(!(i in(s?IDBIndex:IDBObjectStore).prototype)||!(n||oA.includes(i)))return;const r=async function(o,...l){const a=this.transaction(o,n?"readwrite":"readonly");let u=a.store;return s&&(u=u.index(l.shift())),(await Promise.all([u[i](...l),n&&a.done]))[0]};return Rp.set(t,r),r}iA(e=>({...e,get:(t,i,s)=>iy(t,i)||e.get(t,i,s),has:(t,i)=>!!iy(t,i)||e.has(t,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(uA(i)){const s=i.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(i=>i).join(" ")}}function uA(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const tg="@firebase/app",sy="0.10.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr=new Wm("@firebase/app"),cA="@firebase/app-compat",dA="@firebase/analytics-compat",hA="@firebase/analytics",pA="@firebase/app-check-compat",fA="@firebase/app-check",gA="@firebase/auth",mA="@firebase/auth-compat",vA="@firebase/database",CA="@firebase/database-compat",wA="@firebase/functions",yA="@firebase/functions-compat",SA="@firebase/installations",RA="@firebase/installations-compat",bA="@firebase/messaging",EA="@firebase/messaging-compat",PA="@firebase/performance",FA="@firebase/performance-compat",TA="@firebase/remote-config",xA="@firebase/remote-config-compat",IA="@firebase/storage",DA="@firebase/storage-compat",kA="@firebase/firestore",MA="@firebase/vertexai-preview",AA="@firebase/firestore-compat",_A="firebase",LA="10.12.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig="[DEFAULT]",OA={[tg]:"fire-core",[cA]:"fire-core-compat",[hA]:"fire-analytics",[dA]:"fire-analytics-compat",[fA]:"fire-app-check",[pA]:"fire-app-check-compat",[gA]:"fire-auth",[mA]:"fire-auth-compat",[vA]:"fire-rtdb",[CA]:"fire-rtdb-compat",[wA]:"fire-fn",[yA]:"fire-fn-compat",[SA]:"fire-iid",[RA]:"fire-iid-compat",[bA]:"fire-fcm",[EA]:"fire-fcm-compat",[PA]:"fire-perf",[FA]:"fire-perf-compat",[TA]:"fire-rc",[xA]:"fire-rc-compat",[IA]:"fire-gcs",[DA]:"fire-gcs-compat",[kA]:"fire-fst",[AA]:"fire-fst-compat",[MA]:"fire-vertex","fire-js":"fire-js",[_A]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=new Map,NA=new Map,sg=new Map;function ny(e,t){try{e.container.addComponent(t)}catch(i){sr.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,i)}}function bo(e){const t=e.name;if(sg.has(t))return sr.debug(`There were multiple attempts to register component ${t}.`),!1;sg.set(t,e);for(const i of ha.values())ny(i,e);for(const i of NA.values())ny(i,e);return!0}function Um(e,t){const i=e.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),e.container.getProvider(t)}function hs(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cn=new Ga("app","Firebase",GA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(t,i,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ir("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw cn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=LA;function XE(e,t={}){let i=e;typeof t!="object"&&(t={name:t});const s=Object.assign({name:ig,automaticDataCollectionEnabled:!1},t),n=s.name;if(typeof n!="string"||!n)throw cn.create("bad-app-name",{appName:String(n)});if(i||(i=jE()),!i)throw cn.create("no-options");const r=ha.get(n);if(r){if(Uc(i,r.options)&&Uc(s,r.config))return r;throw cn.create("duplicate-app",{appName:n})}const o=new $M(n);for(const a of sg.values())o.addComponent(a);const l=new HA(i,s,o);return ha.set(n,l),l}function jm(e=ig){const t=ha.get(e);if(!t&&e===ig&&jE())return XE();if(!t)throw cn.create("no-app",{appName:e});return t}function VA(){return Array.from(ha.values())}function dn(e,t,i){var s;let n=(s=OA[e])!==null&&s!==void 0?s:e;i&&(n+=`-${i}`);const r=n.match(/\s|\//),o=t.match(/\s|\//);if(r||o){const l=[`Unable to register library "${n}" with version "${t}":`];r&&l.push(`library name "${n}" contains illegal characters (whitespace or "/")`),r&&o&&l.push("and"),o&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),sr.warn(l.join(" "));return}bo(new ir(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA="firebase-heartbeat-database",WA=1,pa="firebase-heartbeat-store";let bp=null;function ZE(){return bp||(bp=rA(BA,WA,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(pa)}catch(i){console.warn(i)}}}}).catch(e=>{throw cn.create("idb-open",{originalErrorMessage:e.message})})),bp}async function zA(e){try{const i=(await ZE()).transaction(pa),s=await i.objectStore(pa).get(e0(e));return await i.done,s}catch(t){if(t instanceof Fn)sr.warn(t.message);else{const i=cn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});sr.warn(i.message)}}}async function ry(e,t){try{const s=(await ZE()).transaction(pa,"readwrite");await s.objectStore(pa).put(t,e0(e)),await s.done}catch(i){if(i instanceof Fn)sr.warn(i.message);else{const s=cn.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});sr.warn(s.message)}}}function e0(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=1024,jA=30*24*60*60*1e3;class $A{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new qA(i),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,i;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=oy();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=jA}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=oy(),{heartbeatsToSend:s,unsentEntries:n}=KA(this._heartbeatsCache.heartbeats),r=Bc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=i,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function oy(){return new Date().toISOString().substring(0,10)}function KA(e,t=UA){const i=[];let s=e.slice();for(const n of e){const r=i.find(o=>o.agent===n.agent);if(r){if(r.dates.push(n.date),ly(i)>t){r.dates.pop();break}}else if(i.push({agent:n.agent,dates:[n.date]}),ly(i)>t){i.pop();break}s=s.slice(1)}return{heartbeatsToSend:i,unsentEntries:s}}class qA{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kM()?MM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await zA(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var i;if(await this._canUseIndexedDBPromise){const n=await this.read();return ry(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var i;if(await this._canUseIndexedDBPromise){const n=await this.read();return ry(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function ly(e){return Bc(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(e){bo(new ir("platform-logger",t=>new aA(t),"PRIVATE")),bo(new ir("heartbeat",t=>new $A(t),"PRIVATE")),dn(tg,sy,e),dn(tg,sy,"esm2017"),dn("fire-js","")}YA("");const ay="@firebase/database",uy="1.0.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let t0="";function QA(e){t0=e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,i){i==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),ot(i))}get(t){const i=this.domStorage_.getItem(this.prefixedName_(t));return i==null?null:da(i)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,i){i==null?delete this.cache_[t]:this.cache_[t]=i}get(t){return As(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new JA(t)}}catch{}return new XA},Vn=i0("localStorage"),ng=i0("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=new Wm("@firebase/database"),ZA=function(){let e=1;return function(){return e++}}(),s0=function(e){const t=WM(e),i=new GM;i.update(t);const s=i.digest();return Gm.encodeByteArray(s)},Ha=function(...e){let t="";for(let i=0;i<e.length;i++){const s=e[i];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?t+=Ha.apply(null,s):typeof s=="object"?t+=ot(s):t+=s,t+=" "}return t};let jn=null,cy=!0;const e_=function(e,t){N(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(so.logLevel=Ce.VERBOSE,jn=so.log.bind(so),t&&ng.set("logging_enabled",!0)):typeof e=="function"?jn=e:(jn=null,ng.remove("logging_enabled"))},St=function(...e){if(cy===!0&&(cy=!1,jn===null&&ng.get("logging_enabled")===!0&&e_(!0)),jn){const t=Ha.apply(null,e);jn(t)}},Va=function(e){return function(...t){St(e,...t)}},rg=function(...e){const t="FIREBASE INTERNAL ERROR: "+Ha(...e);so.error(t)},Ps=function(...e){const t=`FIREBASE FATAL ERROR: ${Ha(...e)}`;throw so.error(t),new Error(t)},zt=function(...e){const t="FIREBASE WARNING: "+Ha(...e);so.warn(t)},t_=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&zt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},n0=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},i_=function(e){if(document.readyState==="complete")e();else{let t=!1;const i=function(){if(!document.body){setTimeout(i,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&i()}),window.attachEvent("onload",i))}},Eo="[MIN_NAME]",nr="[MAX_NAME]",Bo=function(e,t){if(e===t)return 0;if(e===Eo||t===nr)return-1;if(t===Eo||e===nr)return 1;{const i=dy(e),s=dy(t);return i!==null?s!==null?i-s===0?e.length-t.length:i-s:-1:s!==null?1:e<t?-1:1}},s_=function(e,t){return e===t?0:e<t?-1:1},ul=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+ot(t))},$m=function(e){if(typeof e!="object"||e===null)return ot(e);const t=[];for(const s in e)t.push(s);t.sort();let i="{";for(let s=0;s<t.length;s++)s!==0&&(i+=","),i+=ot(t[s]),i+=":",i+=$m(e[t[s]]);return i+="}",i},r0=function(e,t){const i=e.length;if(i<=t)return[e];const s=[];for(let n=0;n<i;n+=t)n+t>i?s.push(e.substring(n,i)):s.push(e.substring(n,n+t));return s};function Ut(e,t){for(const i in e)e.hasOwnProperty(i)&&t(i,e[i])}const o0=function(e){N(!n0(e),"Invalid JSON number");const t=11,i=52,s=(1<<t-1)-1;let n,r,o,l,a;e===0?(r=0,o=0,n=1/e===-1/0?1:0):(n=e<0,e=Math.abs(e),e>=Math.pow(2,1-s)?(l=Math.min(Math.floor(Math.log(e)/Math.LN2),s),r=l+s,o=Math.round(e*Math.pow(2,i-l)-Math.pow(2,i))):(r=0,o=Math.round(e/Math.pow(2,1-s-i))));const u=[];for(a=i;a;a-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(a=t;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);u.push(n?1:0),u.reverse();const c=u.join("");let d="";for(a=0;a<64;a+=8){let h=parseInt(c.substr(a,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},n_=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},r_=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function o_(e,t){let i="Unknown Error";e==="too_big"?i="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?i="Client doesn't have permission to access the desired data.":e==="unavailable"&&(i="The service is unavailable");const s=new Error(e+" at "+t._path.toString()+": "+i);return s.code=e.toUpperCase(),s}const l_=new RegExp("^-?(0*)\\d{1,10}$"),a_=-2147483648,u_=2147483647,dy=function(e){if(l_.test(e)){const t=Number(e);if(t>=a_&&t<=u_)return t}return null},Wo=function(e){try{e()}catch(t){setTimeout(()=>{const i=t.stack||"";throw zt("Exception was thrown by user callback.",i),t},Math.floor(0))}},c_=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ll=function(e,t){const i=setTimeout(e,t);return typeof i=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(i):typeof i=="object"&&i.unref&&i.unref(),i};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(t,i){this.appName_=t,this.appCheckProvider=i,this.appCheck=i==null?void 0:i.getImmediate({optional:!0}),this.appCheck||i==null||i.get().then(s=>this.appCheck=s)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((i,s)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(i,s):i(null)},0)})}addTokenChangeListener(t){var i;(i=this.appCheckProvider)===null||i===void 0||i.get().then(s=>s.addTokenListener(t))}notifyForInvalidToken(){zt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(t,i,s){this.appName_=t,this.firebaseOptions_=i,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(n=>this.auth_=n)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(i=>i&&i.code==="auth/token-not-initialized"?(St("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)):new Promise((i,s)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(i,s):i(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(i=>i.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(i=>i.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',zt(t)}}class no{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}no.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km="5",l0="v",a0="s",u0="r",c0="f",d0=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,h0="ls",p0="p",og="ac",f0="websocket",g0="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(t,i,s,n,r=!1,o="",l=!1,a=!1){this.secure=i,this.namespace=s,this.webSocketOnly=n,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Vn.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Vn.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",i=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${i}`}}function p_(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function v0(e,t,i){N(typeof t=="string","typeof type must == string"),N(typeof i=="object","typeof params must == object");let s;if(t===f0)s=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===g0)s=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);p_(e)&&(i.ns=e.namespace);const n=[];return Ut(i,(r,o)=>{n.push(r+"="+o)}),s+n.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(){this.counters_={}}incrementCounter(t,i=1){As(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=i}get(){return SM(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep={},Pp={};function qm(e){const t=e.toString();return Ep[t]||(Ep[t]=new f_),Ep[t]}function g_(e,t){const i=e.toString();return Pp[i]||(Pp[i]=t()),Pp[i]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,i){this.closeAfterResponse=t,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,i){for(this.pendingResponses[t]=i;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let n=0;n<s.length;++n)s[n]&&Wo(()=>{this.onMessage_(s[n])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy="start",v_="close",C_="pLPCommand",w_="pRTLPCB",C0="id",w0="pw",y0="ser",y_="cb",S_="seg",R_="ts",b_="d",E_="dframe",S0=1870,R0=30,P_=S0-R0,F_=25e3,T_=3e4;class jr{constructor(t,i,s,n,r,o,l){this.connId=t,this.repoInfo=i,this.applicationId=s,this.appCheckToken=n,this.authToken=r,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Va(t),this.stats_=qm(i),this.urlFn=a=>(this.appCheckToken&&(a[og]=this.appCheckToken),v0(i,g0,a))}open(t,i){this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new m_(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(T_)),i_(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ym((...r)=>{const[o,l,a,u,c]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===hy)this.id=l,this.password=a;else if(o===v_)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...r)=>{const[o,l]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const s={};s[hy]="t",s[y0]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[y_]=this.scriptTagHolder.uniqueCallbackIdentifier),s[l0]=Km,this.transportSessionId&&(s[a0]=this.transportSessionId),this.lastSessionId&&(s[h0]=this.lastSessionId),this.applicationId&&(s[p0]=this.applicationId),this.appCheckToken&&(s[og]=this.appCheckToken),typeof location<"u"&&location.hostname&&d0.test(location.hostname)&&(s[u0]=c0);const n=this.urlFn(s);this.log_("Connecting via long-poll to "+n),this.scriptTagHolder.addTag(n,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){jr.forceAllow_=!0}static forceDisallow(){jr.forceDisallow_=!0}static isAvailable(){return jr.forceAllow_?!0:!jr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!n_()&&!r_()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const i=ot(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const s=WE(i),n=r0(s,P_);for(let r=0;r<n.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,n.length,n[r]),this.curSegmentNum++}addDisconnectPingFrame(t,i){this.myDisconnFrame=document.createElement("iframe");const s={};s[E_]="t",s[C0]=t,s[w0]=i,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const i=ot(t).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)}}class Ym{constructor(t,i,s,n){this.onDisconnect=s,this.urlFn=n,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=ZA(),window[C_+this.uniqueCallbackIdentifier]=t,window[w_+this.uniqueCallbackIdentifier]=i,this.myIFrame=Ym.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){St("frame writing exception"),l.stack&&St(l.stack),St(l)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||St("No IE domain setting required")}catch{const s=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,i){for(this.myID=t,this.myPW=i,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[C0]=this.myID,t[w0]=this.myPW,t[y0]=this.currentSerial;let i=this.urlFn(t),s="",n=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+R0+s.length<=S0;){const o=this.pendingSegs.shift();s=s+"&"+S_+n+"="+o.seg+"&"+R_+n+"="+o.ts+"&"+b_+n+"="+o.d,n++}return i=i+s,this.addLongPollTag_(i,this.currentSerial),!0}else return!1}enqueueSegment(t,i,s){this.pendingSegs.push({seg:t,ts:i,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(t,i){this.outstandingRequests.add(i);const s=()=>{this.outstandingRequests.delete(i),this.newRequest_()},n=setTimeout(s,Math.floor(F_)),r=()=>{clearTimeout(n),s()};this.addTag(t,r)}addTag(t,i){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=t,s.onload=s.onreadystatechange=function(){const n=s.readyState;(!n||n==="loaded"||n==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),i())},s.onerror=()=>{St("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_=16384,I_=45e3;let jc=null;typeof MozWebSocket<"u"?jc=MozWebSocket:typeof WebSocket<"u"&&(jc=WebSocket);class xi{constructor(t,i,s,n,r,o,l){this.connId=t,this.applicationId=s,this.appCheckToken=n,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Va(this.connId),this.stats_=qm(i),this.connURL=xi.connectionURL_(i,o,l,n,s),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,s,n,r){const o={};return o[l0]=Km,typeof location<"u"&&location.hostname&&d0.test(location.hostname)&&(o[u0]=c0),i&&(o[a0]=i),s&&(o[h0]=s),n&&(o[og]=n),r&&(o[p0]=r),v0(t,f0,o)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Vn.set("previous_websocket_failure",!0);try{let s;qE(),this.mySock=new jc(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const n=s.message||s.data;n&&this.log_(n),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const n=s.message||s.data;n&&this.log_(n),this.onClosed_()}}start(){}static forceDisallow(){xi.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(i);s&&s.length>1&&parseFloat(s[1])<4.4&&(t=!0)}return!t&&jc!==null&&!xi.forceDisallow_}static previouslyFailed(){return Vn.isInMemoryStorage||Vn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Vn.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const s=da(i);this.onMessage(s)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(N(this.frames===null,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{const s=this.extractFrameCount_(i);s!==null&&this.appendFrame_(s)}}send(t){this.resetKeepAlive();const i=ot(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const s=r0(i,x_);s.length>1&&this.sendString_(String(s.length));for(let n=0;n<s.length;n++)this.sendString_(s[n])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(I_))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}xi.responsesRequiredToBeHealthy=2;xi.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[jr,xi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=xi&&xi.isAvailable();let s=i&&!xi.previouslyFailed();if(t.webSocketOnly&&(i||zt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[xi];else{const n=this.transports_=[];for(const r of fa.ALL_TRANSPORTS)r&&r.isAvailable()&&n.push(r);fa.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}fa.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_=6e4,k_=5e3,M_=10*1024,A_=100*1024,Fp="t",py="d",__="s",fy="r",L_="e",gy="o",my="a",vy="n",Cy="p",O_="h";class N_{constructor(t,i,s,n,r,o,l,a,u,c){this.id=t,this.repoInfo_=i,this.applicationId_=s,this.appCheckToken_=n,this.authToken_=r,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Va("c:"+this.id+":"),this.transportManager_=new fa(i),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(i,s)},Math.floor(0));const n=t.healthyTimeout||0;n>0&&(this.healthyTimeout_=Ll(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>A_?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>M_?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(n)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return i=>{t===this.conn_?this.onConnectionLost_(i):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return i=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(i):t===this.secondaryConn_?this.onSecondaryMessageReceived_(i):this.log_("message on old connection"))}}sendRequest(t){const i={t:"d",d:t};this.sendData_(i)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Fp in t){const i=t[Fp];i===my?this.upgradeIfSecondaryHealthy_():i===fy?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):i===gy&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const i=ul("t",t),s=ul("d",t);if(i==="c")this.onSecondaryControl_(s);else if(i==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+i)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Cy,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:my,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:vy,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const i=ul("t",t),s=ul("d",t);i==="c"?this.onControl_(s):i==="d"&&this.onDataMessage_(s)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const i=ul(Fp,t);if(py in t){const s=t[py];if(i===O_){const n=Object.assign({},s);this.repoInfo_.isUsingEmulator&&(n.h=this.repoInfo_.host),this.onHandshake_(n)}else if(i===vy){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let n=0;n<this.pendingDataMessages.length;++n)this.onDataMessage_(this.pendingDataMessages[n]);this.pendingDataMessages=[],this.tryCleanupConnection()}else i===__?this.onConnectionShutdown_(s):i===fy?this.onReset_(s):i===L_?rg("Server Error: "+s):i===gy?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):rg("Unknown control packet command: "+i)}}onHandshake_(t){const i=t.ts,s=t.v,n=t.h;this.sessionId=t.s,this.repoInfo_.host=n,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),Km!==s&&zt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,s),Ll(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(D_))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,i){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ll(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(k_))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Cy,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Vn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{put(t,i,s,n){}merge(t,i,s,n){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,i,s){}onDisconnectMerge(t,i,s){}onDisconnectCancel(t,i){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(t){this.allowedEvents_=t,this.listeners_={},N(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...i){if(Array.isArray(this.listeners_[t])){const s=[...this.listeners_[t]];for(let n=0;n<s.length;n++)s[n].callback.apply(s[n].context,i)}}on(t,i,s){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:i,context:s});const n=this.getInitialEvent(t);n&&i.apply(s,n)}off(t,i,s){this.validateEventType_(t);const n=this.listeners_[t]||[];for(let r=0;r<n.length;r++)if(n[r].callback===i&&(!s||s===n[r].context)){n.splice(r,1);return}}validateEventType_(t){N(this.allowedEvents_.find(i=>i===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends E0{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Vm()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new $c}getInitialEvent(t){return N(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy=32,yy=768;class ye{constructor(t,i){if(i===void 0){this.pieces_=t.split("/");let s=0;for(let n=0;n<this.pieces_.length;n++)this.pieces_[n].length>0&&(this.pieces_[s]=this.pieces_[n],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=i}toString(){let t="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)this.pieces_[i]!==""&&(t+="/"+this.pieces_[i]);return t||"/"}}function he(){return new ye("")}function ee(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Cn(e){return e.pieces_.length-e.pieceNum_}function Se(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new ye(e.pieces_,t)}function P0(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function G_(e){let t="";for(let i=e.pieceNum_;i<e.pieces_.length;i++)e.pieces_[i]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[i])));return t||"/"}function F0(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function T0(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let i=e.pieceNum_;i<e.pieces_.length-1;i++)t.push(e.pieces_[i]);return new ye(t,0)}function et(e,t){const i=[];for(let s=e.pieceNum_;s<e.pieces_.length;s++)i.push(e.pieces_[s]);if(t instanceof ye)for(let s=t.pieceNum_;s<t.pieces_.length;s++)i.push(t.pieces_[s]);else{const s=t.split("/");for(let n=0;n<s.length;n++)s[n].length>0&&i.push(s[n])}return new ye(i,0)}function ie(e){return e.pieceNum_>=e.pieces_.length}function Nt(e,t){const i=ee(e),s=ee(t);if(i===null)return t;if(i===s)return Nt(Se(e),Se(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Qm(e,t){if(Cn(e)!==Cn(t))return!1;for(let i=e.pieceNum_,s=t.pieceNum_;i<=e.pieces_.length;i++,s++)if(e.pieces_[i]!==t.pieces_[s])return!1;return!0}function Di(e,t){let i=e.pieceNum_,s=t.pieceNum_;if(Cn(e)>Cn(t))return!1;for(;i<e.pieces_.length;){if(e.pieces_[i]!==t.pieces_[s])return!1;++i,++s}return!0}class H_{constructor(t,i){this.errorPrefix_=i,this.parts_=F0(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=jd(this.parts_[s]);x0(this)}}function V_(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=jd(t),x0(e)}function B_(e){const t=e.parts_.pop();e.byteLength_-=jd(t),e.parts_.length>0&&(e.byteLength_-=1)}function x0(e){if(e.byteLength_>yy)throw new Error(e.errorPrefix_+"has a key path longer than "+yy+" bytes ("+e.byteLength_+").");if(e.parts_.length>wy)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+wy+") or object contains a cycle "+An(e))}function An(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm extends E0{constructor(){super(["visible"]);let t,i;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,i&&document.addEventListener(i,()=>{const s=!document[t];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}static getInstance(){return new Jm}getInitialEvent(t){return N(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl=1e3,W_=60*5*1e3,Sy=30*1e3,z_=1.3,U_=3e4,j_="server_kill",Ry=3;class Cs extends b0{constructor(t,i,s,n,r,o,l,a){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=s,this.onConnectStatus_=n,this.onServerInfoUpdate_=r,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=a,this.id=Cs.nextPersistentConnectionId_++,this.log_=Va("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=cl,this.maxReconnectDelay_=W_,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!qE())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Jm.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&$c.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,s){const n=++this.requestNumber_,r={r:n,a:t,b:i};this.log_(ot(r)),N(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),s&&(this.requestCBHash_[n]=s)}get(t){this.initConnection_();const i=new Ud,n={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?i.resolve(l):i.reject(l)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),i.promise}listen(t,i,s,n){this.initConnection_();const r=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+r),this.listens.has(o)||this.listens.set(o,new Map),N(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),N(!this.listens.get(o).has(r),"listen() called twice for same path/queryId.");const l={onComplete:n,hashFn:i,query:t,tag:s};this.listens.get(o).set(r,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,s=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(s)})}sendListen_(t){const i=t.query,s=i._path.toString(),n=i._queryIdentifier;this.log_("Listen on "+s+" for "+n);const r={p:s},o="q";t.tag&&(r.q=i._queryObject,r.t=t.tag),r.h=t.hashFn(),this.sendRequest(o,r,l=>{const a=l.d,u=l.s;Cs.warnOnListenWarnings_(a,i),(this.listens.get(s)&&this.listens.get(s).get(n))===t&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(s,n),t.onComplete&&t.onComplete(u,a))})}static warnOnListenWarnings_(t,i){if(t&&typeof t=="object"&&As(t,"w")){const s=Ro(t,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const n='".indexOn": "'+i._queryParams.getIndex().toString()+'"',r=i._path.toString();zt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${n} at ${r} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||NM(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Sy)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=OM(t)?"auth":"gauth",s={cred:t};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(i,s,n=>{const r=n.s,o=n.d||"error";this.authToken_===t&&(r==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(r,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,s=t.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,s)})}unlisten(t,i){const s=t._path.toString(),n=t._queryIdentifier;this.log_("Unlisten called for "+s+" "+n),N(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,n)&&this.connected_&&this.sendUnlisten_(s,n,t._queryObject,i)}sendUnlisten_(t,i,s,n){this.log_("Unlisten on "+t+" for "+i);const r={p:t},o="n";n&&(r.q=s,r.t=n),this.sendRequest(o,r)}onDisconnectPut(t,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:s})}onDisconnectMerge(t,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:s})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,s,n){const r={p:i,d:s};this.log_("onDisconnect "+t,r),this.sendRequest(t,r,o=>{n&&setTimeout(()=>{n(o.s,o.d)},Math.floor(0))})}put(t,i,s,n){this.putInternal("p",t,i,s,n)}merge(t,i,s,n){this.putInternal("m",t,i,s,n)}putInternal(t,i,s,n,r){this.initConnection_();const o={p:i,d:s};r!==void 0&&(o.h=r),this.outstandingPuts_.push({action:t,request:o,onComplete:n}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,s=this.outstandingPuts_[t].request,n=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,s,r=>{this.log_(i+" response",r),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),n&&n(r.s,r.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,s=>{if(s.s!=="ok"){const r=s.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+ot(t));const i=t.r,s=this.requestCBHash_[i];s&&(delete this.requestCBHash_[i],s(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),t==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):t==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):t==="c"?this.onListenRevoked_(i.p,i.q):t==="ac"?this.onAuthRevoked_(i.s,i.d):t==="apc"?this.onAppCheckRevoked_(i.s,i.d):t==="sd"?this.onSecurityDebugPacket_(i):rg("Unrecognized action received from server: "+ot(t)+`
Are you using the latest client?`)}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){N(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=cl,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=cl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>U_&&(this.reconnectDelay_=cl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=new Date().getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*z_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),n=this.id+":"+Cs.nextConnectionId_++,r=this.lastSessionId;let o=!1,l=null;const a=function(){l?l.close():(o=!0,s())},u=function(d){N(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(d)};this.realtime_={close:a,sendRequest:u};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);o?St("getToken() completed but was canceled"):(St("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,l=new N_(n,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,i,s,p=>{zt(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(j_)},r))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&zt(d),a())}}}interrupt(t){St("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){St("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Xf(this.interruptReasons_)&&(this.reconnectDelay_=cl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let s;i?s=i.map(r=>$m(r)).join("$"):s="default";const n=this.removeListen_(t,s);n&&n.onComplete&&n.onComplete("permission_denied")}removeListen_(t,i){const s=new ye(t).toString();let n;if(this.listens.has(s)){const r=this.listens.get(s);n=r.get(i),r.delete(i),r.size===0&&this.listens.delete(s)}else n=void 0;return n}onAuthRevoked_(t,i){St("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Ry&&(this.reconnectDelay_=Sy,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){St("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Ry&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";t["sdk."+i+"."+t0.replace(/\./g,"-")]=1,Vm()?t["framework.cordova"]=1:KE()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=$c.getInstance().currentlyOnline();return Xf(this.interruptReasons_)&&t}}Cs.nextPersistentConnectionId_=0;Cs.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(t,i){this.name=t,this.node=i}static Wrap(t,i){return new te(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,i){const s=new te(Eo,t),n=new te(Eo,i);return this.compare(s,n)!==0}minPost(){return te.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eu;class I0 extends $d{static get __EMPTY_NODE(){return Eu}static set __EMPTY_NODE(t){Eu=t}compare(t,i){return Bo(t.name,i.name)}isDefinedOn(t){throw Go("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,i){return!1}minPost(){return te.MIN}maxPost(){return new te(nr,Eu)}makePost(t,i){return N(typeof t=="string","KeyIndex indexValue must always be a string."),new te(t,Eu)}toString(){return".key"}}const ro=new I0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(t,i,s,n,r=null){this.isReverse_=n,this.resultGenerator_=r,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(t=t,o=i?s(t.key,i):1,n&&(o*=-1),o<0)this.isReverse_?t=t.left:t=t.right;else if(o===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),i;if(this.resultGenerator_?i=this.resultGenerator_(t.key,t.value):i={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return i}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class rt{constructor(t,i,s,n,r){this.key=t,this.value=i,this.color=s??rt.RED,this.left=n??Gt.EMPTY_NODE,this.right=r??Gt.EMPTY_NODE}copy(t,i,s,n,r){return new rt(t??this.key,i??this.value,s??this.color,n??this.left,r??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,s){let n=this;const r=s(t,n.key);return r<0?n=n.copy(null,null,null,n.left.insert(t,i,s),null):r===0?n=n.copy(null,i,null,null,null):n=n.copy(null,null,null,null,n.right.insert(t,i,s)),n.fixUp_()}removeMin_(){if(this.left.isEmpty())return Gt.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let s,n;if(s=this,i(t,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(t,i),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),i(t,s.key)===0){if(s.right.isEmpty())return Gt.EMPTY_NODE;n=s.right.min_(),s=s.copy(n.key,n.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(t,i))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}rt.RED=!0;rt.BLACK=!1;class $_{copy(t,i,s,n,r){return this}insert(t,i,s){return new rt(t,i,null)}remove(t,i){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Gt{constructor(t,i=Gt.EMPTY_NODE){this.comparator_=t,this.root_=i}insert(t,i){return new Gt(this.comparator_,this.root_.insert(t,i,this.comparator_).copy(null,null,rt.BLACK,null,null))}remove(t){return new Gt(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,rt.BLACK,null,null))}get(t){let i,s=this.root_;for(;!s.isEmpty();){if(i=this.comparator_(t,s.key),i===0)return s.value;i<0?s=s.left:i>0&&(s=s.right)}return null}getPredecessorKey(t){let i,s=this.root_,n=null;for(;!s.isEmpty();)if(i=this.comparator_(t,s.key),i===0){if(s.left.isEmpty())return n?n.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else i<0?s=s.left:i>0&&(n=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Pu(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,i){return new Pu(this.root_,t,this.comparator_,!1,i)}getReverseIteratorFrom(t,i){return new Pu(this.root_,t,this.comparator_,!0,i)}getReverseIterator(t){return new Pu(this.root_,null,this.comparator_,!0,t)}}Gt.EMPTY_NODE=new $_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(e,t){return Bo(e.name,t.name)}function Xm(e,t){return Bo(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lg;function q_(e){lg=e}const D0=function(e){return typeof e=="number"?"number:"+o0(e):"string:"+e},k0=function(e){if(e.isLeafNode()){const t=e.val();N(typeof t=="string"||typeof t=="number"||typeof t=="object"&&As(t,".sv"),"Priority must be a string or number.")}else N(e===lg||e.isEmpty(),"priority of unexpected type.");N(e===lg||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let by;class st{constructor(t,i=st.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,N(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),k0(this.priorityNode_)}static set __childrenNodeConstructor(t){by=t}static get __childrenNodeConstructor(){return by}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new st(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:st.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ie(t)?this:ee(t)===".priority"?this.priorityNode_:st.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return t===".priority"?this.updatePriority(i):i.isEmpty()&&t!==".priority"?this:st.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const s=ee(t);return s===null?i:i.isEmpty()&&s!==".priority"?this:(N(s!==".priority"||Cn(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,st.__childrenNodeConstructor.EMPTY_NODE.updateChild(Se(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+D0(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",i==="number"?t+=o0(this.value_):t+=this.value_,this.lazyHash_=s0(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===st.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof st.__childrenNodeConstructor?-1:(N(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,s=typeof this.value_,n=st.VALUE_TYPE_ORDER.indexOf(i),r=st.VALUE_TYPE_ORDER.indexOf(s);return N(n>=0,"Unknown leaf type: "+i),N(r>=0,"Unknown leaf type: "+s),n===r?s==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:r-n}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}st.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let M0,A0;function Y_(e){M0=e}function Q_(e){A0=e}class J_ extends $d{compare(t,i){const s=t.node.getPriority(),n=i.node.getPriority(),r=s.compareTo(n);return r===0?Bo(t.name,i.name):r}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,i){return!t.getPriority().equals(i.getPriority())}minPost(){return te.MIN}maxPost(){return new te(nr,new st("[PRIORITY-POST]",A0))}makePost(t,i){const s=M0(t);return new te(i,new st("[PRIORITY-POST]",s))}toString(){return".priority"}}const Be=new J_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_=Math.log(2);class Z_{constructor(t){const i=r=>parseInt(Math.log(r)/X_,10),s=r=>parseInt(Array(r+1).join("1"),2);this.count=i(t+1),this.current_=this.count-1;const n=s(this.count);this.bits_=t+1&n}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Kc=function(e,t,i,s){e.sort(t);const n=function(a,u){const c=u-a;let d,h;if(c===0)return null;if(c===1)return d=e[a],h=i?i(d):d,new rt(h,d.node,rt.BLACK,null,null);{const p=parseInt(c/2,10)+a,f=n(a,p),m=n(p+1,u);return d=e[p],h=i?i(d):d,new rt(h,d.node,rt.BLACK,f,m)}},r=function(a){let u=null,c=null,d=e.length;const h=function(f,m){const w=d-f,v=d;d-=f;const g=n(w+1,v),y=e[w],S=i?i(y):y;p(new rt(S,y.node,m,null,g))},p=function(f){u?(u.left=f,u=f):(c=f,u=f)};for(let f=0;f<a.count;++f){const m=a.nextBitIsOne(),w=Math.pow(2,a.count-(f+1));m?h(w,rt.BLACK):(h(w,rt.BLACK),h(w,rt.RED))}return c},o=new Z_(e.length),l=r(o);return new Gt(s||t,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tp;const br={};class ps{constructor(t,i){this.indexes_=t,this.indexSet_=i}static get Default(){return N(br&&Be,"ChildrenNode.ts has not been loaded"),Tp=Tp||new ps({".priority":br},{".priority":Be}),Tp}get(t){const i=Ro(this.indexes_,t);if(!i)throw new Error("No index defined for "+t);return i instanceof Gt?i:null}hasIndex(t){return As(this.indexSet_,t.toString())}addIndex(t,i){N(t!==ro,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let n=!1;const r=i.getIterator(te.Wrap);let o=r.getNext();for(;o;)n=n||t.isDefinedOn(o.node),s.push(o),o=r.getNext();let l;n?l=Kc(s,t.getCompare()):l=br;const a=t.toString(),u=Object.assign({},this.indexSet_);u[a]=t;const c=Object.assign({},this.indexes_);return c[a]=l,new ps(c,u)}addToIndexes(t,i){const s=zc(this.indexes_,(n,r)=>{const o=Ro(this.indexSet_,r);if(N(o,"Missing index implementation for "+r),n===br)if(o.isDefinedOn(t.node)){const l=[],a=i.getIterator(te.Wrap);let u=a.getNext();for(;u;)u.name!==t.name&&l.push(u),u=a.getNext();return l.push(t),Kc(l,o.getCompare())}else return br;else{const l=i.get(t.name);let a=n;return l&&(a=a.remove(new te(t.name,l))),a.insert(t,t.node)}});return new ps(s,this.indexSet_)}removeFromIndexes(t,i){const s=zc(this.indexes_,n=>{if(n===br)return n;{const r=i.get(t.name);return r?n.remove(new te(t.name,r)):n}});return new ps(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dl;class q{constructor(t,i,s){this.children_=t,this.priorityNode_=i,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&k0(this.priorityNode_),this.children_.isEmpty()&&N(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return dl||(dl=new q(new Gt(Xm),null,ps.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||dl}updatePriority(t){return this.children_.isEmpty()?this:new q(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const i=this.children_.get(t);return i===null?dl:i}}getChild(t){const i=ee(t);return i===null?this:this.getImmediateChild(i).getChild(Se(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,i){if(N(i,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(i);{const s=new te(t,i);let n,r;i.isEmpty()?(n=this.children_.remove(t),r=this.indexMap_.removeFromIndexes(s,this.children_)):(n=this.children_.insert(t,i),r=this.indexMap_.addToIndexes(s,this.children_));const o=n.isEmpty()?dl:this.priorityNode_;return new q(n,o,r)}}updateChild(t,i){const s=ee(t);if(s===null)return i;{N(ee(t)!==".priority"||Cn(t)===1,".priority must be the last token in a path");const n=this.getImmediateChild(s).updateChild(Se(t),i);return this.updateImmediateChild(s,n)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let s=0,n=0,r=!0;if(this.forEachChild(Be,(o,l)=>{i[o]=l.val(t),s++,r&&q.INTEGER_REGEXP_.test(o)?n=Math.max(n,Number(o)):r=!1}),!t&&r&&n<2*s){const o=[];for(const l in i)o[l]=i[l];return o}else return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+D0(this.getPriority().val())+":"),this.forEachChild(Be,(i,s)=>{const n=s.hash();n!==""&&(t+=":"+i+":"+n)}),this.lazyHash_=t===""?"":s0(t)}return this.lazyHash_}getPredecessorChildName(t,i,s){const n=this.resolveIndex_(s);if(n){const r=n.getPredecessorKey(new te(t,i));return r?r.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const s=i.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new te(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const s=i.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new te(i,this.children_.get(i)):null}forEachChild(t,i){const s=this.resolveIndex_(t);return s?s.inorderTraversal(n=>i(n.name,n.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const s=this.resolveIndex_(i);if(s)return s.getIteratorFrom(t,n=>n);{const n=this.children_.getIteratorFrom(t.name,te.Wrap);let r=n.peek();for(;r!=null&&i.compare(r,t)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const s=this.resolveIndex_(i);if(s)return s.getReverseIteratorFrom(t,n=>n);{const n=this.children_.getReverseIteratorFrom(t.name,te.Wrap);let r=n.peek();for(;r!=null&&i.compare(r,t)>0;)n.getNext(),r=n.peek();return n}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Ba?-1:0}withIndex(t){if(t===ro||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new q(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===ro||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){const s=this.getIterator(Be),n=i.getIterator(Be);let r=s.getNext(),o=n.getNext();for(;r&&o;){if(r.name!==o.name||!r.node.equals(o.node))return!1;r=s.getNext(),o=n.getNext()}return r===null&&o===null}else return!1;else return!1}}resolveIndex_(t){return t===ro?null:this.indexMap_.get(t.toString())}}q.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class eL extends q{constructor(){super(new Gt(Xm),q.EMPTY_NODE,ps.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return q.EMPTY_NODE}isEmpty(){return!1}}const Ba=new eL;Object.defineProperties(te,{MIN:{value:new te(Eo,q.EMPTY_NODE)},MAX:{value:new te(nr,Ba)}});I0.__EMPTY_NODE=q.EMPTY_NODE;st.__childrenNodeConstructor=q;q_(Ba);Q_(Ba);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL=!0;function pt(e,t=null){if(e===null)return q.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),N(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){const i=e;return new st(i,pt(t))}if(!(e instanceof Array)&&tL){const i=[];let s=!1;if(Ut(e,(o,l)=>{if(o.substring(0,1)!=="."){const a=pt(l);a.isEmpty()||(s=s||!a.getPriority().isEmpty(),i.push(new te(o,a)))}}),i.length===0)return q.EMPTY_NODE;const r=Kc(i,K_,o=>o.name,Xm);if(s){const o=Kc(i,Be.getCompare());return new q(r,pt(t),new ps({".priority":o},{".priority":Be}))}else return new q(r,pt(t),ps.Default)}else{let i=q.EMPTY_NODE;return Ut(e,(s,n)=>{if(As(e,s)&&s.substring(0,1)!=="."){const r=pt(n);(r.isLeafNode()||!r.isEmpty())&&(i=i.updateImmediateChild(s,r))}}),i.updatePriority(pt(t))}}Y_(pt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL extends $d{constructor(t){super(),this.indexPath_=t,N(!ie(t)&&ee(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,i){const s=this.extractChild(t.node),n=this.extractChild(i.node),r=s.compareTo(n);return r===0?Bo(t.name,i.name):r}makePost(t,i){const s=pt(t),n=q.EMPTY_NODE.updateChild(this.indexPath_,s);return new te(i,n)}maxPost(){const t=q.EMPTY_NODE.updateChild(this.indexPath_,Ba);return new te(nr,t)}toString(){return F0(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL extends $d{compare(t,i){const s=t.node.compareTo(i.node);return s===0?Bo(t.name,i.name):s}isDefinedOn(t){return!0}indexedValueChanged(t,i){return!t.equals(i)}minPost(){return te.MIN}maxPost(){return te.MAX}makePost(t,i){const s=pt(t);return new te(i,s)}toString(){return".value"}}const nL=new sL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(e){return{type:"value",snapshotNode:e}}function Po(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function ga(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function ma(e,t,i){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:i}}function rL(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(t){this.index_=t}updateChild(t,i,s,n,r,o){N(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=t.getImmediateChild(i);return l.getChild(n).equals(s.getChild(n))&&l.isEmpty()===s.isEmpty()||(o!=null&&(s.isEmpty()?t.hasChild(i)?o.trackChildChange(ga(i,l)):N(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(Po(i,s)):o.trackChildChange(ma(i,s,l))),t.isLeafNode()&&s.isEmpty())?t:t.updateImmediateChild(i,s).withIndex(this.index_)}updateFullNode(t,i,s){return s!=null&&(t.isLeafNode()||t.forEachChild(Be,(n,r)=>{i.hasChild(n)||s.trackChildChange(ga(n,r))}),i.isLeafNode()||i.forEachChild(Be,(n,r)=>{if(t.hasChild(n)){const o=t.getImmediateChild(n);o.equals(r)||s.trackChildChange(ma(n,r,o))}else s.trackChildChange(Po(n,r))})),i.withIndex(this.index_)}updatePriority(t,i){return t.isEmpty()?q.EMPTY_NODE:t.updatePriority(i)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(t){this.indexedFilter_=new Zm(t.getIndex()),this.index_=t.getIndex(),this.startPost_=va.getStartPost_(t),this.endPost_=va.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const i=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,s=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return i&&s}updateChild(t,i,s,n,r,o){return this.matches(new te(i,s))||(s=q.EMPTY_NODE),this.indexedFilter_.updateChild(t,i,s,n,r,o)}updateFullNode(t,i,s){i.isLeafNode()&&(i=q.EMPTY_NODE);let n=i.withIndex(this.index_);n=n.updatePriority(q.EMPTY_NODE);const r=this;return i.forEachChild(Be,(o,l)=>{r.matches(new te(o,l))||(n=n.updateImmediateChild(o,q.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,n,s)}updatePriority(t,i){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const i=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),i)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const i=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),i)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(t){this.withinDirectionalStart=i=>this.reverse_?this.withinEndPost(i):this.withinStartPost(i),this.withinDirectionalEnd=i=>this.reverse_?this.withinStartPost(i):this.withinEndPost(i),this.withinStartPost=i=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),i);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=i=>{const s=this.index_.compare(i,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new va(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,i,s,n,r,o){return this.rangedFilter_.matches(new te(i,s))||(s=q.EMPTY_NODE),t.getImmediateChild(i).equals(s)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,i,s,n,r,o):this.fullLimitUpdateChild_(t,i,s,r,o)}updateFullNode(t,i,s){let n;if(i.isLeafNode()||i.isEmpty())n=q.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<i.numChildren()&&i.isIndexed(this.index_)){n=q.EMPTY_NODE.withIndex(this.index_);let r;this.reverse_?r=i.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r=i.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;r.hasNext()&&o<this.limit_;){const l=r.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))n=n.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{n=i.withIndex(this.index_),n=n.updatePriority(q.EMPTY_NODE);let r;this.reverse_?r=n.getReverseIterator(this.index_):r=n.getIterator(this.index_);let o=0;for(;r.hasNext();){const l=r.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:n=n.updateImmediateChild(l.name,q.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,n,s)}updatePriority(t,i){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,i,s,n,r){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,p)=>d(p,h)}else o=this.index_.getCompare();const l=t;N(l.numChildren()===this.limit_,"");const a=new te(i,s),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(l.hasChild(i)){const d=l.getImmediateChild(i);let h=n.getChildAfterChild(this.index_,u,this.reverse_);for(;h!=null&&(h.name===i||l.hasChild(h.name));)h=n.getChildAfterChild(this.index_,h,this.reverse_);const p=h==null?1:o(h,a);if(c&&!s.isEmpty()&&p>=0)return r!=null&&r.trackChildChange(ma(i,s,d)),l.updateImmediateChild(i,s);{r!=null&&r.trackChildChange(ga(i,d));const m=l.updateImmediateChild(i,q.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(r!=null&&r.trackChildChange(Po(h.name,h.node)),m.updateImmediateChild(h.name,h.node)):m}}else return s.isEmpty()?t:c&&o(u,a)>=0?(r!=null&&(r.trackChildChange(ga(u.name,u.node)),r.trackChildChange(Po(i,s))),l.updateImmediateChild(i,s).updateImmediateChild(u.name,q.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Be}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return N(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return N(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Eo}hasEnd(){return this.endSet_}getIndexEndValue(){return N(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return N(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:nr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return N(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Be}copy(){const t=new ev;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function lL(e){return e.loadsAllData()?new Zm(e.getIndex()):e.hasLimit()?new oL(e):new va(e)}function Ey(e){const t={};if(e.isDefault())return t;let i;if(e.index_===Be?i="$priority":e.index_===nL?i="$value":e.index_===ro?i="$key":(N(e.index_ instanceof iL,"Unrecognized index type!"),i=e.index_.toString()),t.orderBy=ot(i),e.startSet_){const s=e.startAfterSet_?"startAfter":"startAt";t[s]=ot(e.indexStartValue_),e.startNameSet_&&(t[s]+=","+ot(e.indexStartName_))}if(e.endSet_){const s=e.endBeforeSet_?"endBefore":"endAt";t[s]=ot(e.indexEndValue_),e.endNameSet_&&(t[s]+=","+ot(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Py(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let i=e.viewFrom_;i===""&&(e.isViewFromLeft()?i="l":i="r"),t.vf=i}return e.index_!==Be&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends b0{constructor(t,i,s,n){super(),this.repoInfo_=t,this.onDataUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=n,this.log_=Va("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,i){return i!==void 0?"tag$"+i:(N(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,i,s,n){const r=t._path.toString();this.log_("Listen called for "+r+" "+t._queryIdentifier);const o=qc.getListenId_(t,s),l={};this.listens_[o]=l;const a=Ey(t._queryParams);this.restRequest_(r+".json",a,(u,c)=>{let d=c;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(r,d,!1,s),Ro(this.listens_,o)===l){let h;u?u===401?h="permission_denied":h="rest_error:"+u:h="ok",n(h,null)}})}unlisten(t,i){const s=qc.getListenId_(t,i);delete this.listens_[s]}get(t){const i=Ey(t._queryParams),s=t._path.toString(),n=new Ud;return this.restRequest_(s+".json",i,(r,o)=>{let l=o;r===404&&(l=null,r=null),r===null?(this.onDataUpdate_(s,l,!1,null),n.resolve(l)):n.reject(new Error(l))}),n.promise}refreshAuthToken(t){}restRequest_(t,i={},s){return i.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([n,r])=>{n&&n.accessToken&&(i.auth=n.accessToken),r&&r.token&&(i.ac=r.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Ho(i);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(s&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let a=null;if(l.status>=200&&l.status<300){try{a=da(l.responseText)}catch{zt("Failed to parse JSON response for "+o+": "+l.responseText)}s(null,a)}else l.status!==401&&l.status!==404&&zt("Got unsuccessful REST response for "+o+" Status: "+l.status),s(l.status);s=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(){this.rootNode_=q.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,i){this.rootNode_=this.rootNode_.updateChild(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(){return{value:null,children:new Map}}function L0(e,t,i){if(ie(t))e.value=i,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,i);else{const s=ee(t);e.children.has(s)||e.children.set(s,Yc());const n=e.children.get(s);t=Se(t),L0(n,t,i)}}function ag(e,t,i){e.value!==null?i(t,e.value):uL(e,(s,n)=>{const r=new ye(t.toString()+"/"+s);ag(n,r,i)})}function uL(e,t){e.children.forEach((i,s)=>{t(s,i)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),i=Object.assign({},t);return this.last_&&Ut(this.last_,(s,n)=>{i[s]=i[s]-n}),this.last_=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy=10*1e3,dL=30*1e3,hL=5*60*1e3;class pL{constructor(t,i){this.server_=i,this.statsToReport_={},this.statsListener_=new cL(t);const s=Fy+(dL-Fy)*Math.random();Ll(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const t=this.statsListener_.get(),i={};let s=!1;Ut(t,(n,r)=>{r>0&&As(this.statsToReport_,n)&&(i[n]=r,s=!0)}),s&&this.server_.reportStats(i),Ll(this.reportStats_.bind(this),Math.floor(Math.random()*2*hL))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ki;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ki||(ki={}));function O0(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function tv(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function iv(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(t,i,s){this.path=t,this.affectedTree=i,this.revert=s,this.type=ki.ACK_USER_WRITE,this.source=O0()}operationForChild(t){if(ie(this.path)){if(this.affectedTree.value!=null)return N(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const i=this.affectedTree.subtree(new ye(t));return new Qc(he(),i,this.revert)}}else return N(ee(this.path)===t,"operationForChild called for unrelated child."),new Qc(Se(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(t,i){this.source=t,this.path=i,this.type=ki.LISTEN_COMPLETE}operationForChild(t){return ie(this.path)?new Ca(this.source,he()):new Ca(this.source,Se(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(t,i,s){this.source=t,this.path=i,this.snap=s,this.type=ki.OVERWRITE}operationForChild(t){return ie(this.path)?new rr(this.source,he(),this.snap.getImmediateChild(t)):new rr(this.source,Se(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(t,i,s){this.source=t,this.path=i,this.children=s,this.type=ki.MERGE}operationForChild(t){if(ie(this.path)){const i=this.children.subtree(new ye(t));return i.isEmpty()?null:i.value?new rr(this.source,he(),i.value):new wa(this.source,he(),i)}else return N(ee(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new wa(this.source,Se(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(t,i,s){this.node_=t,this.fullyInitialized_=i,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(ie(t))return this.isFullyInitialized()&&!this.filtered_;const i=ee(t);return this.isCompleteForChild(i)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function gL(e,t,i,s){const n=[],r=[];return t.forEach(o=>{o.type==="child_changed"&&e.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&r.push(rL(o.childName,o.snapshotNode))}),hl(e,n,"child_removed",t,s,i),hl(e,n,"child_added",t,s,i),hl(e,n,"child_moved",r,s,i),hl(e,n,"child_changed",t,s,i),hl(e,n,"value",t,s,i),n}function hl(e,t,i,s,n,r){const o=s.filter(l=>l.type===i);o.sort((l,a)=>vL(e,l,a)),o.forEach(l=>{const a=mL(e,l,r);n.forEach(u=>{u.respondsTo(l.type)&&t.push(u.createEvent(a,e.query_))})})}function mL(e,t,i){return t.type==="value"||t.type==="child_removed"||(t.prevName=i.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function vL(e,t,i){if(t.childName==null||i.childName==null)throw Go("Should only compare child_ events.");const s=new te(t.childName,t.snapshotNode),n=new te(i.childName,i.snapshotNode);return e.index_.compare(s,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(e,t){return{eventCache:e,serverCache:t}}function Ol(e,t,i,s){return Kd(new or(t,i,s),e.serverCache)}function N0(e,t,i,s){return Kd(e.eventCache,new or(t,i,s))}function ug(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function lr(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xp;const CL=()=>(xp||(xp=new Gt(s_)),xp);class Pe{constructor(t,i=CL()){this.value=t,this.children=i}static fromObject(t){let i=new Pe(null);return Ut(t,(s,n)=>{i=i.set(new ye(s),n)}),i}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,i){if(this.value!=null&&i(this.value))return{path:he(),value:this.value};if(ie(t))return null;{const s=ee(t),n=this.children.get(s);if(n!==null){const r=n.findRootMostMatchingPathAndValue(Se(t),i);return r!=null?{path:et(new ye(s),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(ie(t))return this;{const i=ee(t),s=this.children.get(i);return s!==null?s.subtree(Se(t)):new Pe(null)}}set(t,i){if(ie(t))return new Pe(i,this.children);{const s=ee(t),r=(this.children.get(s)||new Pe(null)).set(Se(t),i),o=this.children.insert(s,r);return new Pe(this.value,o)}}remove(t){if(ie(t))return this.children.isEmpty()?new Pe(null):new Pe(null,this.children);{const i=ee(t),s=this.children.get(i);if(s){const n=s.remove(Se(t));let r;return n.isEmpty()?r=this.children.remove(i):r=this.children.insert(i,n),this.value===null&&r.isEmpty()?new Pe(null):new Pe(this.value,r)}else return this}}get(t){if(ie(t))return this.value;{const i=ee(t),s=this.children.get(i);return s?s.get(Se(t)):null}}setTree(t,i){if(ie(t))return i;{const s=ee(t),r=(this.children.get(s)||new Pe(null)).setTree(Se(t),i);let o;return r.isEmpty()?o=this.children.remove(s):o=this.children.insert(s,r),new Pe(this.value,o)}}fold(t){return this.fold_(he(),t)}fold_(t,i){const s={};return this.children.inorderTraversal((n,r)=>{s[n]=r.fold_(et(t,n),i)}),i(t,this.value,s)}findOnPath(t,i){return this.findOnPath_(t,he(),i)}findOnPath_(t,i,s){const n=this.value?s(i,this.value):!1;if(n)return n;if(ie(t))return null;{const r=ee(t),o=this.children.get(r);return o?o.findOnPath_(Se(t),et(i,r),s):null}}foreachOnPath(t,i){return this.foreachOnPath_(t,he(),i)}foreachOnPath_(t,i,s){if(ie(t))return this;{this.value&&s(i,this.value);const n=ee(t),r=this.children.get(n);return r?r.foreachOnPath_(Se(t),et(i,n),s):new Pe(null)}}foreach(t){this.foreach_(he(),t)}foreach_(t,i){this.children.inorderTraversal((s,n)=>{n.foreach_(et(t,s),i)}),this.value&&i(t,this.value)}foreachChild(t){this.children.inorderTraversal((i,s)=>{s.value&&t(i,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(t){this.writeTree_=t}static empty(){return new Li(new Pe(null))}}function Nl(e,t,i){if(ie(t))return new Li(new Pe(i));{const s=e.writeTree_.findRootMostValueAndPath(t);if(s!=null){const n=s.path;let r=s.value;const o=Nt(n,t);return r=r.updateChild(o,i),new Li(e.writeTree_.set(n,r))}else{const n=new Pe(i),r=e.writeTree_.setTree(t,n);return new Li(r)}}}function Ty(e,t,i){let s=e;return Ut(i,(n,r)=>{s=Nl(s,et(t,n),r)}),s}function xy(e,t){if(ie(t))return Li.empty();{const i=e.writeTree_.setTree(t,new Pe(null));return new Li(i)}}function cg(e,t){return pr(e,t)!=null}function pr(e,t){const i=e.writeTree_.findRootMostValueAndPath(t);return i!=null?e.writeTree_.get(i.path).getChild(Nt(i.path,t)):null}function Iy(e){const t=[],i=e.writeTree_.value;return i!=null?i.isLeafNode()||i.forEachChild(Be,(s,n)=>{t.push(new te(s,n))}):e.writeTree_.children.inorderTraversal((s,n)=>{n.value!=null&&t.push(new te(s,n.value))}),t}function hn(e,t){if(ie(t))return e;{const i=pr(e,t);return i!=null?new Li(new Pe(i)):new Li(e.writeTree_.subtree(t))}}function dg(e){return e.writeTree_.isEmpty()}function Fo(e,t){return G0(he(),e.writeTree_,t)}function G0(e,t,i){if(t.value!=null)return i.updateChild(e,t.value);{let s=null;return t.children.inorderTraversal((n,r)=>{n===".priority"?(N(r.value!==null,"Priority writes must always be leaf nodes"),s=r.value):i=G0(et(e,n),r,i)}),!i.getChild(e).isEmpty()&&s!==null&&(i=i.updateChild(et(e,".priority"),s)),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(e,t){return W0(t,e)}function wL(e,t,i,s,n){N(s>e.lastWriteId,"Stacking an older write on top of newer ones"),n===void 0&&(n=!0),e.allWrites.push({path:t,snap:i,writeId:s,visible:n}),n&&(e.visibleWrites=Nl(e.visibleWrites,t,i)),e.lastWriteId=s}function yL(e,t){for(let i=0;i<e.allWrites.length;i++){const s=e.allWrites[i];if(s.writeId===t)return s}return null}function SL(e,t){const i=e.allWrites.findIndex(l=>l.writeId===t);N(i>=0,"removeWrite called with nonexistent writeId.");const s=e.allWrites[i];e.allWrites.splice(i,1);let n=s.visible,r=!1,o=e.allWrites.length-1;for(;n&&o>=0;){const l=e.allWrites[o];l.visible&&(o>=i&&RL(l,s.path)?n=!1:Di(s.path,l.path)&&(r=!0)),o--}if(n){if(r)return bL(e),!0;if(s.snap)e.visibleWrites=xy(e.visibleWrites,s.path);else{const l=s.children;Ut(l,a=>{e.visibleWrites=xy(e.visibleWrites,et(s.path,a))})}return!0}else return!1}function RL(e,t){if(e.snap)return Di(e.path,t);for(const i in e.children)if(e.children.hasOwnProperty(i)&&Di(et(e.path,i),t))return!0;return!1}function bL(e){e.visibleWrites=H0(e.allWrites,EL,he()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function EL(e){return e.visible}function H0(e,t,i){let s=Li.empty();for(let n=0;n<e.length;++n){const r=e[n];if(t(r)){const o=r.path;let l;if(r.snap)Di(i,o)?(l=Nt(i,o),s=Nl(s,l,r.snap)):Di(o,i)&&(l=Nt(o,i),s=Nl(s,he(),r.snap.getChild(l)));else if(r.children){if(Di(i,o))l=Nt(i,o),s=Ty(s,l,r.children);else if(Di(o,i))if(l=Nt(o,i),ie(l))s=Ty(s,he(),r.children);else{const a=Ro(r.children,ee(l));if(a){const u=a.getChild(Se(l));s=Nl(s,he(),u)}}}else throw Go("WriteRecord should have .snap or .children")}}return s}function V0(e,t,i,s,n){if(!s&&!n){const r=pr(e.visibleWrites,t);if(r!=null)return r;{const o=hn(e.visibleWrites,t);if(dg(o))return i;if(i==null&&!cg(o,he()))return null;{const l=i||q.EMPTY_NODE;return Fo(o,l)}}}else{const r=hn(e.visibleWrites,t);if(!n&&dg(r))return i;if(!n&&i==null&&!cg(r,he()))return null;{const o=function(u){return(u.visible||n)&&(!s||!~s.indexOf(u.writeId))&&(Di(u.path,t)||Di(t,u.path))},l=H0(e.allWrites,o,t),a=i||q.EMPTY_NODE;return Fo(l,a)}}}function PL(e,t,i){let s=q.EMPTY_NODE;const n=pr(e.visibleWrites,t);if(n)return n.isLeafNode()||n.forEachChild(Be,(r,o)=>{s=s.updateImmediateChild(r,o)}),s;if(i){const r=hn(e.visibleWrites,t);return i.forEachChild(Be,(o,l)=>{const a=Fo(hn(r,new ye(o)),l);s=s.updateImmediateChild(o,a)}),Iy(r).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}else{const r=hn(e.visibleWrites,t);return Iy(r).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}}function FL(e,t,i,s,n){N(s||n,"Either existingEventSnap or existingServerSnap must exist");const r=et(t,i);if(cg(e.visibleWrites,r))return null;{const o=hn(e.visibleWrites,r);return dg(o)?n.getChild(i):Fo(o,n.getChild(i))}}function TL(e,t,i,s){const n=et(t,i),r=pr(e.visibleWrites,n);if(r!=null)return r;if(s.isCompleteForChild(i)){const o=hn(e.visibleWrites,n);return Fo(o,s.getNode().getImmediateChild(i))}else return null}function xL(e,t){return pr(e.visibleWrites,t)}function IL(e,t,i,s,n,r,o){let l;const a=hn(e.visibleWrites,t),u=pr(a,he());if(u!=null)l=u;else if(i!=null)l=Fo(a,i);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const c=[],d=o.getCompare(),h=r?l.getReverseIteratorFrom(s,o):l.getIteratorFrom(s,o);let p=h.getNext();for(;p&&c.length<n;)d(p,s)!==0&&c.push(p),p=h.getNext();return c}else return[]}function DL(){return{visibleWrites:Li.empty(),allWrites:[],lastWriteId:-1}}function Jc(e,t,i,s){return V0(e.writeTree,e.treePath,t,i,s)}function nv(e,t){return PL(e.writeTree,e.treePath,t)}function Dy(e,t,i,s){return FL(e.writeTree,e.treePath,t,i,s)}function Xc(e,t){return xL(e.writeTree,et(e.treePath,t))}function kL(e,t,i,s,n,r){return IL(e.writeTree,e.treePath,t,i,s,n,r)}function rv(e,t,i){return TL(e.writeTree,e.treePath,t,i)}function B0(e,t){return W0(et(e.treePath,t),e.writeTree)}function W0(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(){this.changeMap=new Map}trackChildChange(t){const i=t.type,s=t.childName;N(i==="child_added"||i==="child_changed"||i==="child_removed","Only child changes supported for tracking"),N(s!==".priority","Only non-priority child changes can be tracked.");const n=this.changeMap.get(s);if(n){const r=n.type;if(i==="child_added"&&r==="child_removed")this.changeMap.set(s,ma(s,t.snapshotNode,n.snapshotNode));else if(i==="child_removed"&&r==="child_added")this.changeMap.delete(s);else if(i==="child_removed"&&r==="child_changed")this.changeMap.set(s,ga(s,n.oldSnap));else if(i==="child_changed"&&r==="child_added")this.changeMap.set(s,Po(s,t.snapshotNode));else if(i==="child_changed"&&r==="child_changed")this.changeMap.set(s,ma(s,t.snapshotNode,n.oldSnap));else throw Go("Illegal combination of changes: "+t+" occurred after "+n)}else this.changeMap.set(s,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{getCompleteChild(t){return null}getChildAfterChild(t,i,s){return null}}const z0=new AL;class ov{constructor(t,i,s=null){this.writes_=t,this.viewCache_=i,this.optCompleteServerCache_=s}getCompleteChild(t){const i=this.viewCache_.eventCache;if(i.isCompleteForChild(t))return i.getNode().getImmediateChild(t);{const s=this.optCompleteServerCache_!=null?new or(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return rv(this.writes_,t,s)}}getChildAfterChild(t,i,s){const n=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:lr(this.viewCache_),r=kL(this.writes_,n,i,1,s,t);return r.length===0?null:r[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _L(e){return{filter:e}}function LL(e,t){N(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),N(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function OL(e,t,i,s,n){const r=new ML;let o,l;if(i.type===ki.OVERWRITE){const u=i;u.source.fromUser?o=hg(e,t,u.path,u.snap,s,n,r):(N(u.source.fromServer,"Unknown source."),l=u.source.tagged||t.serverCache.isFiltered()&&!ie(u.path),o=Zc(e,t,u.path,u.snap,s,n,l,r))}else if(i.type===ki.MERGE){const u=i;u.source.fromUser?o=GL(e,t,u.path,u.children,s,n,r):(N(u.source.fromServer,"Unknown source."),l=u.source.tagged||t.serverCache.isFiltered(),o=pg(e,t,u.path,u.children,s,n,l,r))}else if(i.type===ki.ACK_USER_WRITE){const u=i;u.revert?o=BL(e,t,u.path,s,n,r):o=HL(e,t,u.path,u.affectedTree,s,n,r)}else if(i.type===ki.LISTEN_COMPLETE)o=VL(e,t,i.path,s,r);else throw Go("Unknown operation type: "+i.type);const a=r.getChanges();return NL(t,o,a),{viewCache:o,changes:a}}function NL(e,t,i){const s=t.eventCache;if(s.isFullyInitialized()){const n=s.getNode().isLeafNode()||s.getNode().isEmpty(),r=ug(e);(i.length>0||!e.eventCache.isFullyInitialized()||n&&!s.getNode().equals(r)||!s.getNode().getPriority().equals(r.getPriority()))&&i.push(_0(ug(t)))}}function U0(e,t,i,s,n,r){const o=t.eventCache;if(Xc(s,i)!=null)return t;{let l,a;if(ie(i))if(N(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const u=lr(t),c=u instanceof q?u:q.EMPTY_NODE,d=nv(s,c);l=e.filter.updateFullNode(t.eventCache.getNode(),d,r)}else{const u=Jc(s,lr(t));l=e.filter.updateFullNode(t.eventCache.getNode(),u,r)}else{const u=ee(i);if(u===".priority"){N(Cn(i)===1,"Can't have a priority with additional path components");const c=o.getNode();a=t.serverCache.getNode();const d=Dy(s,i,c,a);d!=null?l=e.filter.updatePriority(c,d):l=o.getNode()}else{const c=Se(i);let d;if(o.isCompleteForChild(u)){a=t.serverCache.getNode();const h=Dy(s,i,o.getNode(),a);h!=null?d=o.getNode().getImmediateChild(u).updateChild(c,h):d=o.getNode().getImmediateChild(u)}else d=rv(s,u,t.serverCache);d!=null?l=e.filter.updateChild(o.getNode(),u,d,c,n,r):l=o.getNode()}}return Ol(t,l,o.isFullyInitialized()||ie(i),e.filter.filtersNodes())}}function Zc(e,t,i,s,n,r,o,l){const a=t.serverCache;let u;const c=o?e.filter:e.filter.getIndexedFilter();if(ie(i))u=c.updateFullNode(a.getNode(),s,null);else if(c.filtersNodes()&&!a.isFiltered()){const p=a.getNode().updateChild(i,s);u=c.updateFullNode(a.getNode(),p,null)}else{const p=ee(i);if(!a.isCompleteForPath(i)&&Cn(i)>1)return t;const f=Se(i),w=a.getNode().getImmediateChild(p).updateChild(f,s);p===".priority"?u=c.updatePriority(a.getNode(),w):u=c.updateChild(a.getNode(),p,w,f,z0,null)}const d=N0(t,u,a.isFullyInitialized()||ie(i),c.filtersNodes()),h=new ov(n,d,r);return U0(e,d,i,n,h,l)}function hg(e,t,i,s,n,r,o){const l=t.eventCache;let a,u;const c=new ov(n,t,r);if(ie(i))u=e.filter.updateFullNode(t.eventCache.getNode(),s,o),a=Ol(t,u,!0,e.filter.filtersNodes());else{const d=ee(i);if(d===".priority")u=e.filter.updatePriority(t.eventCache.getNode(),s),a=Ol(t,u,l.isFullyInitialized(),l.isFiltered());else{const h=Se(i),p=l.getNode().getImmediateChild(d);let f;if(ie(h))f=s;else{const m=c.getCompleteChild(d);m!=null?P0(h)===".priority"&&m.getChild(T0(h)).isEmpty()?f=m:f=m.updateChild(h,s):f=q.EMPTY_NODE}if(p.equals(f))a=t;else{const m=e.filter.updateChild(l.getNode(),d,f,h,c,o);a=Ol(t,m,l.isFullyInitialized(),e.filter.filtersNodes())}}}return a}function ky(e,t){return e.eventCache.isCompleteForChild(t)}function GL(e,t,i,s,n,r,o){let l=t;return s.foreach((a,u)=>{const c=et(i,a);ky(t,ee(c))&&(l=hg(e,l,c,u,n,r,o))}),s.foreach((a,u)=>{const c=et(i,a);ky(t,ee(c))||(l=hg(e,l,c,u,n,r,o))}),l}function My(e,t,i){return i.foreach((s,n)=>{t=t.updateChild(s,n)}),t}function pg(e,t,i,s,n,r,o,l){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let a=t,u;ie(i)?u=s:u=new Pe(null).setTree(i,s);const c=t.serverCache.getNode();return u.children.inorderTraversal((d,h)=>{if(c.hasChild(d)){const p=t.serverCache.getNode().getImmediateChild(d),f=My(e,p,h);a=Zc(e,a,new ye(d),f,n,r,o,l)}}),u.children.inorderTraversal((d,h)=>{const p=!t.serverCache.isCompleteForChild(d)&&h.value===null;if(!c.hasChild(d)&&!p){const f=t.serverCache.getNode().getImmediateChild(d),m=My(e,f,h);a=Zc(e,a,new ye(d),m,n,r,o,l)}}),a}function HL(e,t,i,s,n,r,o){if(Xc(n,i)!=null)return t;const l=t.serverCache.isFiltered(),a=t.serverCache;if(s.value!=null){if(ie(i)&&a.isFullyInitialized()||a.isCompleteForPath(i))return Zc(e,t,i,a.getNode().getChild(i),n,r,l,o);if(ie(i)){let u=new Pe(null);return a.getNode().forEachChild(ro,(c,d)=>{u=u.set(new ye(c),d)}),pg(e,t,i,u,n,r,l,o)}else return t}else{let u=new Pe(null);return s.foreach((c,d)=>{const h=et(i,c);a.isCompleteForPath(h)&&(u=u.set(c,a.getNode().getChild(h)))}),pg(e,t,i,u,n,r,l,o)}}function VL(e,t,i,s,n){const r=t.serverCache,o=N0(t,r.getNode(),r.isFullyInitialized()||ie(i),r.isFiltered());return U0(e,o,i,s,z0,n)}function BL(e,t,i,s,n,r){let o;if(Xc(s,i)!=null)return t;{const l=new ov(s,t,n),a=t.eventCache.getNode();let u;if(ie(i)||ee(i)===".priority"){let c;if(t.serverCache.isFullyInitialized())c=Jc(s,lr(t));else{const d=t.serverCache.getNode();N(d instanceof q,"serverChildren would be complete if leaf node"),c=nv(s,d)}c=c,u=e.filter.updateFullNode(a,c,r)}else{const c=ee(i);let d=rv(s,c,t.serverCache);d==null&&t.serverCache.isCompleteForChild(c)&&(d=a.getImmediateChild(c)),d!=null?u=e.filter.updateChild(a,c,d,Se(i),l,r):t.eventCache.getNode().hasChild(c)?u=e.filter.updateChild(a,c,q.EMPTY_NODE,Se(i),l,r):u=a,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Jc(s,lr(t)),o.isLeafNode()&&(u=e.filter.updateFullNode(u,o,r)))}return o=t.serverCache.isFullyInitialized()||Xc(s,he())!=null,Ol(t,u,o,e.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(t,i){this.query_=t,this.eventRegistrations_=[];const s=this.query_._queryParams,n=new Zm(s.getIndex()),r=lL(s);this.processor_=_L(r);const o=i.serverCache,l=i.eventCache,a=n.updateFullNode(q.EMPTY_NODE,o.getNode(),null),u=r.updateFullNode(q.EMPTY_NODE,l.getNode(),null),c=new or(a,o.isFullyInitialized(),n.filtersNodes()),d=new or(u,l.isFullyInitialized(),r.filtersNodes());this.viewCache_=Kd(d,c),this.eventGenerator_=new fL(this.query_)}get query(){return this.query_}}function zL(e){return e.viewCache_.serverCache.getNode()}function UL(e,t){const i=lr(e.viewCache_);return i&&(e.query._queryParams.loadsAllData()||!ie(t)&&!i.getImmediateChild(ee(t)).isEmpty())?i.getChild(t):null}function Ay(e){return e.eventRegistrations_.length===0}function jL(e,t){e.eventRegistrations_.push(t)}function _y(e,t,i){const s=[];if(i){N(t==null,"A cancel should cancel all event registrations.");const n=e.query._path;e.eventRegistrations_.forEach(r=>{const o=r.createCancelEvent(i,n);o&&s.push(o)})}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const o=e.eventRegistrations_[r];if(!o.matches(t))n.push(o);else if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}e.eventRegistrations_=n}else e.eventRegistrations_=[];return s}function Ly(e,t,i,s){t.type===ki.MERGE&&t.source.queryId!==null&&(N(lr(e.viewCache_),"We should always have a full cache before handling merges"),N(ug(e.viewCache_),"Missing event cache, even though we have a server cache"));const n=e.viewCache_,r=OL(e.processor_,n,t,i,s);return LL(e.processor_,r.viewCache),N(r.viewCache.serverCache.isFullyInitialized()||!n.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=r.viewCache,j0(e,r.changes,r.viewCache.eventCache.getNode(),null)}function $L(e,t){const i=e.viewCache_.eventCache,s=[];return i.getNode().isLeafNode()||i.getNode().forEachChild(Be,(r,o)=>{s.push(Po(r,o))}),i.isFullyInitialized()&&s.push(_0(i.getNode())),j0(e,s,i.getNode(),t)}function j0(e,t,i,s){const n=s?[s]:e.eventRegistrations_;return gL(e.eventGenerator_,t,i,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ed;class KL{constructor(){this.views=new Map}}function qL(e){N(!ed,"__referenceConstructor has already been defined"),ed=e}function YL(){return N(ed,"Reference.ts has not been loaded"),ed}function QL(e){return e.views.size===0}function lv(e,t,i,s){const n=t.source.queryId;if(n!==null){const r=e.views.get(n);return N(r!=null,"SyncTree gave us an op for an invalid query."),Ly(r,t,i,s)}else{let r=[];for(const o of e.views.values())r=r.concat(Ly(o,t,i,s));return r}}function JL(e,t,i,s,n){const r=t._queryIdentifier,o=e.views.get(r);if(!o){let l=Jc(i,n?s:null),a=!1;l?a=!0:s instanceof q?(l=nv(i,s),a=!1):(l=q.EMPTY_NODE,a=!1);const u=Kd(new or(l,a,!1),new or(s,n,!1));return new WL(t,u)}return o}function XL(e,t,i,s,n,r){const o=JL(e,t,s,n,r);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),jL(o,i),$L(o,i)}function ZL(e,t,i,s){const n=t._queryIdentifier,r=[];let o=[];const l=wn(e);if(n==="default")for(const[a,u]of e.views.entries())o=o.concat(_y(u,i,s)),Ay(u)&&(e.views.delete(a),u.query._queryParams.loadsAllData()||r.push(u.query));else{const a=e.views.get(n);a&&(o=o.concat(_y(a,i,s)),Ay(a)&&(e.views.delete(n),a.query._queryParams.loadsAllData()||r.push(a.query)))}return l&&!wn(e)&&r.push(new(YL())(t._repo,t._path)),{removed:r,events:o}}function $0(e){const t=[];for(const i of e.views.values())i.query._queryParams.loadsAllData()||t.push(i);return t}function oo(e,t){let i=null;for(const s of e.views.values())i=i||UL(s,t);return i}function K0(e,t){if(t._queryParams.loadsAllData())return qd(e);{const s=t._queryIdentifier;return e.views.get(s)}}function q0(e,t){return K0(e,t)!=null}function wn(e){return qd(e)!=null}function qd(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let td;function eO(e){N(!td,"__referenceConstructor has already been defined"),td=e}function tO(){return N(td,"Reference.ts has not been loaded"),td}let iO=1;class Oy{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Pe(null),this.pendingWriteTree_=DL(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Y0(e,t,i,s,n){return wL(e.pendingWriteTree_,t,i,s,n),n?Wa(e,new rr(O0(),t,i)):[]}function Bn(e,t,i=!1){const s=yL(e.pendingWriteTree_,t);if(SL(e.pendingWriteTree_,t)){let r=new Pe(null);return s.snap!=null?r=r.set(he(),!0):Ut(s.children,o=>{r=r.set(new ye(o),!0)}),Wa(e,new Qc(s.path,r,i))}else return[]}function Yd(e,t,i){return Wa(e,new rr(tv(),t,i))}function sO(e,t,i){const s=Pe.fromObject(i);return Wa(e,new wa(tv(),t,s))}function nO(e,t){return Wa(e,new Ca(tv(),t))}function rO(e,t,i){const s=uv(e,i);if(s){const n=cv(s),r=n.path,o=n.queryId,l=Nt(r,t),a=new Ca(iv(o),l);return dv(e,r,a)}else return[]}function fg(e,t,i,s,n=!1){const r=t._path,o=e.syncPointTree_.get(r);let l=[];if(o&&(t._queryIdentifier==="default"||q0(o,t))){const a=ZL(o,t,i,s);QL(o)&&(e.syncPointTree_=e.syncPointTree_.remove(r));const u=a.removed;if(l=a.events,!n){const c=u.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=e.syncPointTree_.findOnPath(r,(h,p)=>wn(p));if(c&&!d){const h=e.syncPointTree_.subtree(r);if(!h.isEmpty()){const p=aO(h);for(let f=0;f<p.length;++f){const m=p[f],w=m.query,v=X0(e,m);e.listenProvider_.startListening(Gl(w),id(e,w),v.hashFn,v.onComplete)}}}!d&&u.length>0&&!s&&(c?e.listenProvider_.stopListening(Gl(t),null):u.forEach(h=>{const p=e.queryToTagMap.get(Qd(h));e.listenProvider_.stopListening(Gl(h),p)}))}uO(e,u)}return l}function oO(e,t,i,s){const n=uv(e,s);if(n!=null){const r=cv(n),o=r.path,l=r.queryId,a=Nt(o,t),u=new rr(iv(l),a,i);return dv(e,o,u)}else return[]}function lO(e,t,i,s){const n=uv(e,s);if(n){const r=cv(n),o=r.path,l=r.queryId,a=Nt(o,t),u=Pe.fromObject(i),c=new wa(iv(l),a,u);return dv(e,o,c)}else return[]}function Ny(e,t,i,s=!1){const n=t._path;let r=null,o=!1;e.syncPointTree_.foreachOnPath(n,(h,p)=>{const f=Nt(h,n);r=r||oo(p,f),o=o||wn(p)});let l=e.syncPointTree_.get(n);l?(o=o||wn(l),r=r||oo(l,he())):(l=new KL,e.syncPointTree_=e.syncPointTree_.set(n,l));let a;r!=null?a=!0:(a=!1,r=q.EMPTY_NODE,e.syncPointTree_.subtree(n).foreachChild((p,f)=>{const m=oo(f,he());m&&(r=r.updateImmediateChild(p,m))}));const u=q0(l,t);if(!u&&!t._queryParams.loadsAllData()){const h=Qd(t);N(!e.queryToTagMap.has(h),"View does not exist, but we have a tag");const p=cO();e.queryToTagMap.set(h,p),e.tagToQueryMap.set(p,h)}const c=sv(e.pendingWriteTree_,n);let d=XL(l,t,i,c,r,a);if(!u&&!o&&!s){const h=K0(l,t);d=d.concat(dO(e,t,h))}return d}function av(e,t,i){const n=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,(o,l)=>{const a=Nt(o,t),u=oo(l,a);if(u)return u});return V0(n,t,r,i,!0)}function Wa(e,t){return Q0(t,e.syncPointTree_,null,sv(e.pendingWriteTree_,he()))}function Q0(e,t,i,s){if(ie(e.path))return J0(e,t,i,s);{const n=t.get(he());i==null&&n!=null&&(i=oo(n,he()));let r=[];const o=ee(e.path),l=e.operationForChild(o),a=t.children.get(o);if(a&&l){const u=i?i.getImmediateChild(o):null,c=B0(s,o);r=r.concat(Q0(l,a,u,c))}return n&&(r=r.concat(lv(n,e,s,i))),r}}function J0(e,t,i,s){const n=t.get(he());i==null&&n!=null&&(i=oo(n,he()));let r=[];return t.children.inorderTraversal((o,l)=>{const a=i?i.getImmediateChild(o):null,u=B0(s,o),c=e.operationForChild(o);c&&(r=r.concat(J0(c,l,a,u)))}),n&&(r=r.concat(lv(n,e,s,i))),r}function X0(e,t){const i=t.query,s=id(e,i);return{hashFn:()=>(zL(t)||q.EMPTY_NODE).hash(),onComplete:n=>{if(n==="ok")return s?rO(e,i._path,s):nO(e,i._path);{const r=o_(n,i);return fg(e,i,null,r)}}}}function id(e,t){const i=Qd(t);return e.queryToTagMap.get(i)}function Qd(e){return e._path.toString()+"$"+e._queryIdentifier}function uv(e,t){return e.tagToQueryMap.get(t)}function cv(e){const t=e.indexOf("$");return N(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ye(e.substr(0,t))}}function dv(e,t,i){const s=e.syncPointTree_.get(t);N(s,"Missing sync point for query tag that we're tracking");const n=sv(e.pendingWriteTree_,t);return lv(s,i,n,null)}function aO(e){return e.fold((t,i,s)=>{if(i&&wn(i))return[qd(i)];{let n=[];return i&&(n=$0(i)),Ut(s,(r,o)=>{n=n.concat(o)}),n}})}function Gl(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(tO())(e._repo,e._path):e}function uO(e,t){for(let i=0;i<t.length;++i){const s=t[i];if(!s._queryParams.loadsAllData()){const n=Qd(s),r=e.queryToTagMap.get(n);e.queryToTagMap.delete(n),e.tagToQueryMap.delete(r)}}}function cO(){return iO++}function dO(e,t,i){const s=t._path,n=id(e,t),r=X0(e,i),o=e.listenProvider_.startListening(Gl(t),n,r.hashFn,r.onComplete),l=e.syncPointTree_.subtree(s);if(n)N(!wn(l.value),"If we're adding a query, it shouldn't be shadowed");else{const a=l.fold((u,c,d)=>{if(!ie(u)&&c&&wn(c))return[qd(c).query];{let h=[];return c&&(h=h.concat($0(c).map(p=>p.query))),Ut(d,(p,f)=>{h=h.concat(f)}),h}});for(let u=0;u<a.length;++u){const c=a[u];e.listenProvider_.stopListening(Gl(c),id(e,c))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(t){this.node_=t}getImmediateChild(t){const i=this.node_.getImmediateChild(t);return new hv(i)}node(){return this.node_}}class pv{constructor(t,i){this.syncTree_=t,this.path_=i}getImmediateChild(t){const i=et(this.path_,t);return new pv(this.syncTree_,i)}node(){return av(this.syncTree_,this.path_)}}const hO=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},Gy=function(e,t,i){if(!e||typeof e!="object")return e;if(N(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return pO(e[".sv"],t,i);if(typeof e[".sv"]=="object")return fO(e[".sv"],t);N(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},pO=function(e,t,i){switch(e){case"timestamp":return i.timestamp;default:N(!1,"Unexpected server value: "+e)}},fO=function(e,t,i){e.hasOwnProperty("increment")||N(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const s=e.increment;typeof s!="number"&&N(!1,"Unexpected increment value: "+s);const n=t.node();if(N(n!==null&&typeof n<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!n.isLeafNode())return s;const o=n.getValue();return typeof o!="number"?s:o+s},gO=function(e,t,i,s){return fv(t,new pv(i,e),s)},Z0=function(e,t,i){return fv(e,new hv(t),i)};function fv(e,t,i){const s=e.getPriority().val(),n=Gy(s,t.getImmediateChild(".priority"),i);let r;if(e.isLeafNode()){const o=e,l=Gy(o.getValue(),t,i);return l!==o.getValue()||n!==o.getPriority().val()?new st(l,pt(n)):e}else{const o=e;return r=o,n!==o.getPriority().val()&&(r=r.updatePriority(new st(n))),o.forEachChild(Be,(l,a)=>{const u=fv(a,t.getImmediateChild(l),i);u!==a&&(r=r.updateImmediateChild(l,u))}),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(t="",i=null,s={children:{},childCount:0}){this.name=t,this.parent=i,this.node=s}}function mv(e,t){let i=t instanceof ye?t:new ye(t),s=e,n=ee(i);for(;n!==null;){const r=Ro(s.node.children,n)||{children:{},childCount:0};s=new gv(n,s,r),i=Se(i),n=ee(i)}return s}function zo(e){return e.node.value}function eP(e,t){e.node.value=t,gg(e)}function tP(e){return e.node.childCount>0}function mO(e){return zo(e)===void 0&&!tP(e)}function Jd(e,t){Ut(e.node.children,(i,s)=>{t(new gv(i,e,s))})}function iP(e,t,i,s){i&&!s&&t(e),Jd(e,n=>{iP(n,t,!0,s)}),i&&s&&t(e)}function vO(e,t,i){let s=i?e:e.parent;for(;s!==null;){if(t(s))return!0;s=s.parent}return!1}function za(e){return new ye(e.parent===null?e.name:za(e.parent)+"/"+e.name)}function gg(e){e.parent!==null&&CO(e.parent,e.name,e)}function CO(e,t,i){const s=mO(i),n=As(e.node.children,t);s&&n?(delete e.node.children[t],e.node.childCount--,gg(e)):!s&&!n&&(e.node.children[t]=i.node,e.node.childCount++,gg(e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO=/[\[\].#$\/\u0000-\u001F\u007F]/,yO=/[\[\].#$\u0000-\u001F\u007F]/,Ip=10*1024*1024,sP=function(e){return typeof e=="string"&&e.length!==0&&!wO.test(e)},nP=function(e){return typeof e=="string"&&e.length!==0&&!yO.test(e)},SO=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),nP(e)},RO=function(e,t,i,s){s&&t===void 0||vv(Bm(e,"value"),t,i)},vv=function(e,t,i){const s=i instanceof ye?new H_(i,e):i;if(t===void 0)throw new Error(e+"contains undefined "+An(s));if(typeof t=="function")throw new Error(e+"contains a function "+An(s)+" with contents = "+t.toString());if(n0(t))throw new Error(e+"contains "+t.toString()+" "+An(s));if(typeof t=="string"&&t.length>Ip/3&&jd(t)>Ip)throw new Error(e+"contains a string greater than "+Ip+" utf8 bytes "+An(s)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let n=!1,r=!1;if(Ut(t,(o,l)=>{if(o===".value")n=!0;else if(o!==".priority"&&o!==".sv"&&(r=!0,!sP(o)))throw new Error(e+" contains an invalid key ("+o+") "+An(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);V_(s,o),vv(e,l,s),B_(s)}),n&&r)throw new Error(e+' contains ".value" child '+An(s)+" in addition to actual children.")}},rP=function(e,t,i,s){if(!(s&&i===void 0)&&!nP(i))throw new Error(Bm(e,t)+'was an invalid path = "'+i+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},bO=function(e,t,i,s){i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),rP(e,t,i,s)},EO=function(e,t){if(ee(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},PO=function(e,t){const i=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!sP(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||i.length!==0&&!SO(i))throw new Error(Bm(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Cv(e,t){let i=null;for(let s=0;s<t.length;s++){const n=t[s],r=n.getPath();i!==null&&!Qm(r,i.path)&&(e.eventLists_.push(i),i=null),i===null&&(i={events:[],path:r}),i.events.push(n)}i&&e.eventLists_.push(i)}function oP(e,t,i){Cv(e,i),lP(e,s=>Qm(s,t))}function Fs(e,t,i){Cv(e,i),lP(e,s=>Di(s,t)||Di(t,s))}function lP(e,t){e.recursionDepth_++;let i=!0;for(let s=0;s<e.eventLists_.length;s++){const n=e.eventLists_[s];if(n){const r=n.path;t(r)?(TO(e.eventLists_[s]),e.eventLists_[s]=null):i=!1}}i&&(e.eventLists_=[]),e.recursionDepth_--}function TO(e){for(let t=0;t<e.events.length;t++){const i=e.events[t];if(i!==null){e.events[t]=null;const s=i.getEventRunner();jn&&St("event: "+i.toString()),Wo(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO="repo_interrupt",IO=25;class DO{constructor(t,i,s,n){this.repoInfo_=t,this.forceRestClient_=i,this.authTokenProvider_=s,this.appCheckProvider_=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new FO,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Yc(),this.transactionQueueTree_=new gv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function kO(e,t,i){if(e.stats_=qm(e.repoInfo_),e.forceRestClient_||c_())e.server_=new qc(e.repoInfo_,(s,n,r,o)=>{Hy(e,s,n,r,o)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>Vy(e,!0),0);else{if(typeof i<"u"&&i!==null){if(typeof i!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ot(i)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}e.persistentConnection_=new Cs(e.repoInfo_,t,(s,n,r,o)=>{Hy(e,s,n,r,o)},s=>{Vy(e,s)},s=>{AO(e,s)},e.authTokenProvider_,e.appCheckProvider_,i),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(s=>{e.server_.refreshAuthToken(s)}),e.appCheckProvider_.addTokenChangeListener(s=>{e.server_.refreshAppCheckToken(s.token)}),e.statsReporter_=g_(e.repoInfo_,()=>new pL(e.stats_,e.server_)),e.infoData_=new aL,e.infoSyncTree_=new Oy({startListening:(s,n,r,o)=>{let l=[];const a=e.infoData_.getNode(s._path);return a.isEmpty()||(l=Yd(e.infoSyncTree_,s._path,a),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),yv(e,"connected",!1),e.serverSyncTree_=new Oy({startListening:(s,n,r,o)=>(e.server_.listen(s,r,n,(l,a)=>{const u=o(l,a);Fs(e.eventQueue_,s._path,u)}),[]),stopListening:(s,n)=>{e.server_.unlisten(s,n)}})}function MO(e){const i=e.infoData_.getNode(new ye(".info/serverTimeOffset")).val()||0;return new Date().getTime()+i}function wv(e){return hO({timestamp:MO(e)})}function Hy(e,t,i,s,n){e.dataUpdateCount++;const r=new ye(t);i=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,i):i;let o=[];if(n)if(s){const a=zc(i,u=>pt(u));o=lO(e.serverSyncTree_,r,a,n)}else{const a=pt(i);o=oO(e.serverSyncTree_,r,a,n)}else if(s){const a=zc(i,u=>pt(u));o=sO(e.serverSyncTree_,r,a)}else{const a=pt(i);o=Yd(e.serverSyncTree_,r,a)}let l=r;o.length>0&&(l=Xd(e,r)),Fs(e.eventQueue_,l,o)}function Vy(e,t){yv(e,"connected",t),t===!1&&LO(e)}function AO(e,t){Ut(t,(i,s)=>{yv(e,i,s)})}function yv(e,t,i){const s=new ye("/.info/"+t),n=pt(i);e.infoData_.updateSnapshot(s,n);const r=Yd(e.infoSyncTree_,s,n);Fs(e.eventQueue_,s,r)}function aP(e){return e.nextWriteId_++}function _O(e,t,i,s,n){Sv(e,"set",{path:t.toString(),value:i,priority:s});const r=wv(e),o=pt(i,s),l=av(e.serverSyncTree_,t),a=Z0(o,l,r),u=aP(e),c=Y0(e.serverSyncTree_,t,a,u,!0);Cv(e.eventQueue_,c),e.server_.put(t.toString(),o.val(!0),(h,p)=>{const f=h==="ok";f||zt("set at "+t+" failed: "+h);const m=Bn(e.serverSyncTree_,u,!f);Fs(e.eventQueue_,t,m),GO(e,n,h,p)});const d=pP(e,t);Xd(e,d),Fs(e.eventQueue_,d,[])}function LO(e){Sv(e,"onDisconnectEvents");const t=wv(e),i=Yc();ag(e.onDisconnect_,he(),(n,r)=>{const o=gO(n,r,e.serverSyncTree_,t);L0(i,n,o)});let s=[];ag(i,he(),(n,r)=>{s=s.concat(Yd(e.serverSyncTree_,n,r));const o=pP(e,n);Xd(e,o)}),e.onDisconnect_=Yc(),Fs(e.eventQueue_,he(),s)}function OO(e,t,i){let s;ee(t._path)===".info"?s=Ny(e.infoSyncTree_,t,i):s=Ny(e.serverSyncTree_,t,i),oP(e.eventQueue_,t._path,s)}function By(e,t,i){let s;ee(t._path)===".info"?s=fg(e.infoSyncTree_,t,i):s=fg(e.serverSyncTree_,t,i),oP(e.eventQueue_,t._path,s)}function NO(e){e.persistentConnection_&&e.persistentConnection_.interrupt(xO)}function Sv(e,...t){let i="";e.persistentConnection_&&(i=e.persistentConnection_.id+":"),St(i,...t)}function GO(e,t,i,s){t&&Wo(()=>{if(i==="ok")t(null);else{const n=(i||"error").toUpperCase();let r=n;s&&(r+=": "+s);const o=new Error(r);o.code=n,t(o)}})}function uP(e,t,i){return av(e.serverSyncTree_,t,i)||q.EMPTY_NODE}function Rv(e,t=e.transactionQueueTree_){if(t||Zd(e,t),zo(t)){const i=dP(e,t);N(i.length>0,"Sending zero length transaction queue"),i.every(n=>n.status===0)&&HO(e,za(t),i)}else tP(t)&&Jd(t,i=>{Rv(e,i)})}function HO(e,t,i){const s=i.map(u=>u.currentWriteId),n=uP(e,t,s);let r=n;const o=n.hash();for(let u=0;u<i.length;u++){const c=i[u];N(c.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;const d=Nt(t,c.path);r=r.updateChild(d,c.currentOutputSnapshotRaw)}const l=r.val(!0),a=t;e.server_.put(a.toString(),l,u=>{Sv(e,"transaction put response",{path:a.toString(),status:u});let c=[];if(u==="ok"){const d=[];for(let h=0;h<i.length;h++)i[h].status=2,c=c.concat(Bn(e.serverSyncTree_,i[h].currentWriteId)),i[h].onComplete&&d.push(()=>i[h].onComplete(null,!0,i[h].currentOutputSnapshotResolved)),i[h].unwatcher();Zd(e,mv(e.transactionQueueTree_,t)),Rv(e,e.transactionQueueTree_),Fs(e.eventQueue_,t,c);for(let h=0;h<d.length;h++)Wo(d[h])}else{if(u==="datastale")for(let d=0;d<i.length;d++)i[d].status===3?i[d].status=4:i[d].status=0;else{zt("transaction at "+a.toString()+" failed: "+u);for(let d=0;d<i.length;d++)i[d].status=4,i[d].abortReason=u}Xd(e,t)}},o)}function Xd(e,t){const i=cP(e,t),s=za(i),n=dP(e,i);return VO(e,n,s),s}function VO(e,t,i){if(t.length===0)return;const s=[];let n=[];const o=t.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<t.length;l++){const a=t[l],u=Nt(i,a.path);let c=!1,d;if(N(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)c=!0,d=a.abortReason,n=n.concat(Bn(e.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=IO)c=!0,d="maxretry",n=n.concat(Bn(e.serverSyncTree_,a.currentWriteId,!0));else{const h=uP(e,a.path,o);a.currentInputSnapshot=h;const p=t[l].update(h.val());if(p!==void 0){vv("transaction failed: Data returned ",p,a.path);let f=pt(p);typeof p=="object"&&p!=null&&As(p,".priority")||(f=f.updatePriority(h.getPriority()));const w=a.currentWriteId,v=wv(e),g=Z0(f,h,v);a.currentOutputSnapshotRaw=f,a.currentOutputSnapshotResolved=g,a.currentWriteId=aP(e),o.splice(o.indexOf(w),1),n=n.concat(Y0(e.serverSyncTree_,a.path,g,a.currentWriteId,a.applyLocally)),n=n.concat(Bn(e.serverSyncTree_,w,!0))}else c=!0,d="nodata",n=n.concat(Bn(e.serverSyncTree_,a.currentWriteId,!0))}Fs(e.eventQueue_,i,n),n=[],c&&(t[l].status=2,function(h){setTimeout(h,Math.floor(0))}(t[l].unwatcher),t[l].onComplete&&(d==="nodata"?s.push(()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot)):s.push(()=>t[l].onComplete(new Error(d),!1,null))))}Zd(e,e.transactionQueueTree_);for(let l=0;l<s.length;l++)Wo(s[l]);Rv(e,e.transactionQueueTree_)}function cP(e,t){let i,s=e.transactionQueueTree_;for(i=ee(t);i!==null&&zo(s)===void 0;)s=mv(s,i),t=Se(t),i=ee(t);return s}function dP(e,t){const i=[];return hP(e,t,i),i.sort((s,n)=>s.order-n.order),i}function hP(e,t,i){const s=zo(t);if(s)for(let n=0;n<s.length;n++)i.push(s[n]);Jd(t,n=>{hP(e,n,i)})}function Zd(e,t){const i=zo(t);if(i){let s=0;for(let n=0;n<i.length;n++)i[n].status!==2&&(i[s]=i[n],s++);i.length=s,eP(t,i.length>0?i:void 0)}Jd(t,s=>{Zd(e,s)})}function pP(e,t){const i=za(cP(e,t)),s=mv(e.transactionQueueTree_,t);return vO(s,n=>{Dp(e,n)}),Dp(e,s),iP(s,n=>{Dp(e,n)}),i}function Dp(e,t){const i=zo(t);if(i){const s=[];let n=[],r=-1;for(let o=0;o<i.length;o++)i[o].status===3||(i[o].status===1?(N(r===o-1,"All SENT items should be at beginning of queue."),r=o,i[o].status=3,i[o].abortReason="set"):(N(i[o].status===0,"Unexpected transaction status in abort"),i[o].unwatcher(),n=n.concat(Bn(e.serverSyncTree_,i[o].currentWriteId,!0)),i[o].onComplete&&s.push(i[o].onComplete.bind(null,new Error("set"),!1,null))));r===-1?eP(t,void 0):i.length=r+1,Fs(e.eventQueue_,za(t),n);for(let o=0;o<s.length;o++)Wo(s[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BO(e){let t="";const i=e.split("/");for(let s=0;s<i.length;s++)if(i[s].length>0){let n=i[s];try{n=decodeURIComponent(n.replace(/\+/g," "))}catch{}t+="/"+n}return t}function WO(e){const t={};e.charAt(0)==="?"&&(e=e.substring(1));for(const i of e.split("&")){if(i.length===0)continue;const s=i.split("=");s.length===2?t[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):zt(`Invalid query segment '${i}' in query '${e}'`)}return t}const Wy=function(e,t){const i=zO(e),s=i.namespace;i.domain==="firebase.com"&&Ps(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&i.domain!=="localhost"&&Ps("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||t_();const n=i.scheme==="ws"||i.scheme==="wss";return{repoInfo:new m0(i.host,i.secure,s,n,t,"",s!==i.subdomain),path:new ye(i.pathString)}},zO=function(e){let t="",i="",s="",n="",r="",o=!0,l="https",a=443;if(typeof e=="string"){let u=e.indexOf("//");u>=0&&(l=e.substring(0,u-1),e=e.substring(u+2));let c=e.indexOf("/");c===-1&&(c=e.length);let d=e.indexOf("?");d===-1&&(d=e.length),t=e.substring(0,Math.min(c,d)),c<d&&(n=BO(e.substring(c,d)));const h=WO(e.substring(Math.min(e.length,d)));u=t.indexOf(":"),u>=0?(o=l==="https"||l==="wss",a=parseInt(t.substring(u+1),10)):u=t.length;const p=t.slice(0,u);if(p.toLowerCase()==="localhost")i="localhost";else if(p.split(".").length<=2)i=p;else{const f=t.indexOf(".");s=t.substring(0,f).toLowerCase(),i=t.substring(f+1),r=s}"ns"in h&&(r=h.ns)}return{host:t,port:a,domain:i,subdomain:s,secure:o,scheme:l,pathString:n,namespace:r}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(t,i,s,n){this.eventType=t,this.eventRegistration=i,this.snapshot=s,this.prevName=n}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ot(this.snapshot.exportVal())}}class gP{constructor(t,i,s){this.eventRegistration=t,this.error=i,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(t,i){this.snapshotCallback=t,this.cancelCallback=i}onValue(t,i){this.snapshotCallback.call(null,t,i)}onCancel(t){return N(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(t,i,s,n){this._repo=t,this._path=i,this._queryParams=s,this._orderByCalled=n}get key(){return ie(this._path)?null:P0(this._path)}get ref(){return new _s(this._repo,this._path)}get _queryIdentifier(){const t=Py(this._queryParams),i=$m(t);return i==="{}"?"default":i}get _queryObject(){return Py(this._queryParams)}isEqual(t){if(t=$t(t),!(t instanceof bv))return!1;const i=this._repo===t._repo,s=Qm(this._path,t._path),n=this._queryIdentifier===t._queryIdentifier;return i&&s&&n}toJSON(){return this.toString()}toString(){return this._repo.toString()+G_(this._path)}}class _s extends bv{constructor(t,i){super(t,i,new ev,!1)}get parent(){const t=T0(this._path);return t===null?null:new _s(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class ya{constructor(t,i,s){this._node=t,this.ref=i,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const i=new ye(t),s=sd(this.ref,t);return new ya(this._node.getChild(i),s,Be)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,n)=>t(new ya(n,sd(this.ref,s),Be)))}hasChild(t){const i=new ye(t);return!this._node.getChild(i).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function zy(e,t){return e=$t(e),e._checkNotDeleted("ref"),t!==void 0?sd(e._root,t):e._root}function sd(e,t){return e=$t(e),ee(e._path)===null?bO("child","path",t,!1):rP("child","path",t,!1),new _s(e._repo,et(e._path,t))}function jO(e,t){e=$t(e),EO("set",e._path),RO("set",t,e._path,!1);const i=new Ud;return _O(e._repo,e._path,t,null,i.wrapCallback(()=>{})),i.promise}class Ev{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,i){const s=i._queryParams.getIndex();return new fP("value",this,new ya(t.snapshotNode,new _s(i._repo,i._path),s))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,i){return this.callbackContext.hasCancelCallback?new gP(this,t,i):null}matches(t){return t instanceof Ev?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Pv{constructor(t,i){this.eventType=t,this.callbackContext=i}respondsTo(t){let i=t==="children_added"?"child_added":t;return i=i==="children_removed"?"child_removed":i,this.eventType===i}createCancelEvent(t,i){return this.callbackContext.hasCancelCallback?new gP(this,t,i):null}createEvent(t,i){N(t.childName!=null,"Child events should have a childName.");const s=sd(new _s(i._repo,i._path),t.childName),n=i._queryParams.getIndex();return new fP(t.type,this,new ya(t.snapshotNode,s,n),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof Pv?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function $O(e,t,i,s,n){let r;if(typeof s=="object"&&(r=void 0,n=s),typeof s=="function"&&(r=s),n&&n.onlyOnce){const a=i,u=(c,d)=>{By(e._repo,e,l),a(c,d)};u.userCallback=i.userCallback,u.context=i.context,i=u}const o=new UO(i,r||void 0),l=t==="value"?new Ev(o):new Pv(t,o);return OO(e._repo,e,l),()=>By(e._repo,e,l)}function KO(e,t,i,s){return $O(e,"value",t,i,s)}qL(_s);eO(_s);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO="FIREBASE_DATABASE_EMULATOR_HOST",mg={};let YO=!1;function QO(e,t,i,s){e.repoInfo_=new m0(`${t}:${i}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),s&&(e.authTokenProvider_=s)}function JO(e,t,i,s,n){let r=s||e.options.databaseURL;r===void 0&&(e.options.projectId||Ps("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),St("Using default host for project ",e.options.projectId),r=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o=Wy(r,n),l=o.repoInfo,a,u;typeof process<"u"&&process.env&&(u=process.env[qO]),u?(a=!0,r=`http://${u}?ns=${l.namespace}`,o=Wy(r,n),l=o.repoInfo):a=!o.repoInfo.secure;const c=n&&a?new no(no.OWNER):new h_(e.name,e.options,t);PO("Invalid Firebase Database URL",o),ie(o.path)||Ps("Database URL must point to the root of a Firebase Database (not including a child path).");const d=ZO(l,e,c,new d_(e.name,i));return new e1(d,e)}function XO(e,t){const i=mg[t];(!i||i[e.key]!==e)&&Ps(`Database ${t}(${e.repoInfo_}) has already been deleted.`),NO(e),delete i[e.key]}function ZO(e,t,i,s){let n=mg[t.name];n||(n={},mg[t.name]=n);let r=n[e.toURLString()];return r&&Ps("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new DO(e,YO,i,s),n[e.toURLString()]=r,r}class e1{constructor(t,i){this._repoInternal=t,this.app=i,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(kO(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new _s(this._repo,he())),this._rootInternal}_delete(){return this._rootInternal!==null&&(XO(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Ps("Cannot call "+t+" on a deleted database.")}}function t1(e=jm(),t){const i=Um(e,"database").getImmediate({identifier:t});if(!i._instanceStarted){const s=TM("database");s&&i1(i,...s)}return i}function i1(e,t,i,s={}){e=$t(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&Ps("Cannot call useEmulator() after instance has already been initialized.");const n=e._repoInternal;let r;if(n.repoInfo_.nodeAdmin)s.mockUserToken&&Ps('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),r=new no(no.OWNER);else if(s.mockUserToken){const o=typeof s.mockUserToken=="string"?s.mockUserToken:xM(s.mockUserToken,e.app.options.projectId);r=new no(o)}QO(n,t,i,r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(e){QA(Vo),bo(new ir("database",(t,{instanceIdentifier:i})=>{const s=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return JO(s,n,r,i)},"PUBLIC").setMultipleInstances(!0)),dn(ay,uy,e),dn(ay,uy,"esm2017")}Cs.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};Cs.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};s1();function Fv(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]]);return i}function mP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const n1=mP,vP=new Ga("auth","Firebase",mP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd=new Wm("@firebase/auth");function r1(e,...t){nd.logLevel<=Ce.WARN&&nd.warn(`Auth (${Vo}): ${e}`,...t)}function Xu(e,...t){nd.logLevel<=Ce.ERROR&&nd.error(`Auth (${Vo}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(e,...t){throw Tv(e,...t)}function Ji(e,...t){return Tv(e,...t)}function CP(e,t,i){const s=Object.assign(Object.assign({},n1()),{[t]:i});return new Ga("auth","Firebase",s).create(t,{appName:e.name})}function pn(e){return CP(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tv(e,...t){if(typeof e!="string"){const i=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=e.name),e._errorFactory.create(i,...s)}return vP.create(e,...t)}function K(e,t,...i){if(!e)throw Tv(t,...i)}function fs(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Xu(t),new Error(t)}function Ts(e,t){e||fs(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function o1(){return Uy()==="http:"||Uy()==="https:"}function Uy(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(o1()||IM()||"connection"in navigator)?navigator.onLine:!0}function a1(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(t,i){this.shortDelay=t,this.longDelay=i,Ts(i>t,"Short delay should be less than long delay!"),this.isMobile=Vm()||KE()}get(){return l1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(e,t){Ts(e.emulator,"Emulator should always be set here");const{url:i}=e.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{static initialize(t,i,s){this.fetchImpl=t,i&&(this.headersImpl=i),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=new Ua(3e4,6e4);function fr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Tn(e,t,i,s,n={}){return yP(e,n,async()=>{let r={},o={};s&&(t==="GET"?o=s:r={body:JSON.stringify(s)});const l=Ho(Object.assign({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),wP.fetch()(SP(e,e.config.apiHost,i,l),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},r))})}async function yP(e,t,i){e._canInitEmulator=!1;const s=Object.assign(Object.assign({},u1),t);try{const n=new h1(e),r=await Promise.race([i(),n.promise]);n.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw Fu(e,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const l=r.ok?o.errorMessage:o.error.message,[a,u]=l.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fu(e,"credential-already-in-use",o);if(a==="EMAIL_EXISTS")throw Fu(e,"email-already-in-use",o);if(a==="USER_DISABLED")throw Fu(e,"user-disabled",o);const c=s[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw CP(e,c,u);Gi(e,c)}}catch(n){if(n instanceof Fn)throw n;Gi(e,"network-request-failed",{message:String(n)})}}async function eh(e,t,i,s,n={}){const r=await Tn(e,t,i,s,n);return"mfaPendingCredential"in r&&Gi(e,"multi-factor-auth-required",{_serverResponse:r}),r}function SP(e,t,i,s){const n=`${t}${i}?${s}`;return e.config.emulator?xv(e.config,n):`${e.config.apiScheme}://${n}`}function d1(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class h1{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((i,s)=>{this.timer=setTimeout(()=>s(Ji(this.auth,"network-request-failed")),c1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fu(e,t,i){const s={appName:e.name};i.email&&(s.email=i.email),i.phoneNumber&&(s.phoneNumber=i.phoneNumber);const n=Ji(e,t,s);return n.customData._tokenResponse=i,n}function jy(e){return e!==void 0&&e.enterprise!==void 0}class p1{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const i of this.recaptchaEnforcementState)if(i.provider&&i.provider===t)return d1(i.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}}async function f1(e,t){return Tn(e,"GET","/v2/recaptchaConfig",fr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g1(e,t){return Tn(e,"POST","/v1/accounts:delete",t)}async function RP(e,t){return Tn(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function m1(e,t=!1){const i=$t(e),s=await i.getIdToken(t),n=Iv(s);K(n&&n.exp&&n.auth_time&&n.iat,i.auth,"internal-error");const r=typeof n.firebase=="object"?n.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:n,token:s,authTime:Hl(kp(n.auth_time)),issuedAtTime:Hl(kp(n.iat)),expirationTime:Hl(kp(n.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function kp(e){return Number(e)*1e3}function Iv(e){const[t,i,s]=e.split(".");if(t===void 0||i===void 0||s===void 0)return Xu("JWT malformed, contained fewer than 3 sections"),null;try{const n=Wc(i);return n?JSON.parse(n):(Xu("Failed to decode base64 JWT payload"),null)}catch(n){return Xu("Caught error parsing JWT payload as JSON",n==null?void 0:n.toString()),null}}function $y(e){const t=Iv(e);return K(t,"internal-error"),K(typeof t.exp<"u","internal-error"),K(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sa(e,t,i=!1){if(i)return t;try{return await t}catch(s){throw s instanceof Fn&&v1(s)&&e.auth.currentUser===e&&await e.auth.signOut(),s}}function v1({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var i;if(t){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const n=((i=this.user.stsTokenManager.expirationTime)!==null&&i!==void 0?i:0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const i=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(t,i){this.createdAt=t,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hl(this.lastLoginAt),this.creationTime=Hl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rd(e){var t;const i=e.auth,s=await e.getIdToken(),n=await Sa(e,RP(i,{idToken:s}));K(n==null?void 0:n.users.length,i,"internal-error");const r=n.users[0];e._notifyReloadListener(r);const o=!((t=r.providerUserInfo)===null||t===void 0)&&t.length?bP(r.providerUserInfo):[],l=y1(e.providerData,o),a=e.isAnonymous,u=!(e.email&&r.passwordHash)&&!(l!=null&&l.length),c=a?u:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new Cg(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(e,d)}async function w1(e){const t=$t(e);await rd(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function y1(e,t){return[...e.filter(s=>!t.some(n=>n.providerId===s.providerId)),...t]}function bP(e){return e.map(t=>{var{providerId:i}=t,s=Fv(t,["providerId"]);return{providerId:i,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S1(e,t){const i=await yP(e,{},async()=>{const s=Ho({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:n,apiKey:r}=e.config,o=SP(e,n,"/v1/token",`key=${r}`),l=await e._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",wP.fetch()(o,{method:"POST",headers:l,body:s})});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function R1(e,t){return Tn(e,"POST","/v2/accounts:revokeToken",fr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){K(t.idToken,"internal-error"),K(typeof t.idToken<"u","internal-error"),K(typeof t.refreshToken<"u","internal-error");const i="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):$y(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,i)}updateFromIdToken(t){K(t.length!==0,"internal-error");const i=$y(t);this.updateTokensAndExpiration(t,null,i)}async getToken(t,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,i){const{accessToken:s,refreshToken:n,expiresIn:r}=await S1(t,i);this.updateTokensAndExpiration(s,n,Number(r))}updateTokensAndExpiration(t,i,s){this.refreshToken=i||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,i){const{refreshToken:s,accessToken:n,expirationTime:r}=i,o=new lo;return s&&(K(typeof s=="string","internal-error",{appName:t}),o.refreshToken=s),n&&(K(typeof n=="string","internal-error",{appName:t}),o.accessToken=n),r&&(K(typeof r=="number","internal-error",{appName:t}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new lo,this.toJSON())}_performRefresh(){return fs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hs(e,t){K(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class gs{constructor(t){var{uid:i,auth:s,stsTokenManager:n}=t,r=Fv(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new C1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=i,this.auth=s,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Cg(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const i=await Sa(this,this.stsTokenManager.getToken(this.auth,t));return K(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(t){return m1(this,t)}reload(){return w1(this)}_assign(t){this!==t&&(K(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(i=>Object.assign({},i)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const i=new gs(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return i.metadata._copy(this.metadata),i}_onReload(t){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,i=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),i&&await rd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hs(this.auth.app))return Promise.reject(pn(this.auth));const t=await this.getIdToken();return await Sa(this,g1(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,i){var s,n,r,o,l,a,u,c;const d=(s=i.displayName)!==null&&s!==void 0?s:void 0,h=(n=i.email)!==null&&n!==void 0?n:void 0,p=(r=i.phoneNumber)!==null&&r!==void 0?r:void 0,f=(o=i.photoURL)!==null&&o!==void 0?o:void 0,m=(l=i.tenantId)!==null&&l!==void 0?l:void 0,w=(a=i._redirectEventId)!==null&&a!==void 0?a:void 0,v=(u=i.createdAt)!==null&&u!==void 0?u:void 0,g=(c=i.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:y,emailVerified:S,isAnonymous:b,providerData:R,stsTokenManager:E}=i;K(y&&E,t,"internal-error");const x=lo.fromJSON(this.name,E);K(typeof y=="string",t,"internal-error"),Hs(d,t.name),Hs(h,t.name),K(typeof S=="boolean",t,"internal-error"),K(typeof b=="boolean",t,"internal-error"),Hs(p,t.name),Hs(f,t.name),Hs(m,t.name),Hs(w,t.name),Hs(v,t.name),Hs(g,t.name);const I=new gs({uid:y,auth:t,email:h,emailVerified:S,displayName:d,isAnonymous:b,photoURL:f,phoneNumber:p,tenantId:m,stsTokenManager:x,createdAt:v,lastLoginAt:g});return R&&Array.isArray(R)&&(I.providerData=R.map(D=>Object.assign({},D))),w&&(I._redirectEventId=w),I}static async _fromIdTokenResponse(t,i,s=!1){const n=new lo;n.updateFromServerResponse(i);const r=new gs({uid:i.localId,auth:t,stsTokenManager:n,isAnonymous:s});return await rd(r),r}static async _fromGetAccountInfoResponse(t,i,s){const n=i.users[0];K(n.localId!==void 0,"internal-error");const r=n.providerUserInfo!==void 0?bP(n.providerUserInfo):[],o=!(n.email&&n.passwordHash)&&!(r!=null&&r.length),l=new lo;l.updateFromIdToken(s);const a=new gs({uid:n.localId,auth:t,stsTokenManager:l,isAnonymous:o}),u={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:r,metadata:new Cg(n.createdAt,n.lastLoginAt),isAnonymous:!(n.email&&n.passwordHash)&&!(r!=null&&r.length)};return Object.assign(a,u),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky=new Map;function ms(e){Ts(e instanceof Function,"Expected a class definition");let t=Ky.get(e);return t?(Ts(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ky.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){const i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}EP.type="NONE";const qy=EP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(e,t,i){return`firebase:${e}:${t}:${i}`}class ao{constructor(t,i,s){this.persistence=t,this.auth=i,this.userKey=s;const{config:n,name:r}=this.auth;this.fullUserKey=Zu(this.userKey,n.apiKey,r),this.fullPersistenceKey=Zu("persistence",n.apiKey,r),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?gs._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,i,s="authUser"){if(!i.length)return new ao(ms(qy),t,s);const n=(await Promise.all(i.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let r=n[0]||ms(qy);const o=Zu(s,t.config.apiKey,t.name);let l=null;for(const u of i)try{const c=await u._get(o);if(c){const d=gs._fromJSON(t,c);u!==r&&(l=d),r=u;break}}catch{}const a=n.filter(u=>u._shouldAllowMigration);return!r._shouldAllowMigration||!a.length?new ao(r,t,s):(r=a[0],l&&await r._set(o,l.toJSON()),await Promise.all(i.map(async u=>{if(u!==r)try{await u._remove(o)}catch{}})),new ao(r,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(TP(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(PP(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(IP(t))return"Blackberry";if(DP(t))return"Webos";if(Dv(t))return"Safari";if((t.includes("chrome/")||FP(t))&&!t.includes("edge/"))return"Chrome";if(xP(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=e.match(i);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function PP(e=Et()){return/firefox\//i.test(e)}function Dv(e=Et()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function FP(e=Et()){return/crios\//i.test(e)}function TP(e=Et()){return/iemobile/i.test(e)}function xP(e=Et()){return/android/i.test(e)}function IP(e=Et()){return/blackberry/i.test(e)}function DP(e=Et()){return/webos/i.test(e)}function th(e=Et()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function b1(e=Et()){var t;return th(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function E1(){return DM()&&document.documentMode===10}function kP(e=Et()){return th(e)||xP(e)||DP(e)||IP(e)||/windows phone/i.test(e)||TP(e)}function P1(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(e,t=[]){let i;switch(e){case"Browser":i=Yy(Et());break;case"Worker":i=`${Yy(Et())}-${e}`;break;default:i=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${Vo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,i){const s=r=>new Promise((o,l)=>{try{const a=t(r);o(a)}catch(a){l(a)}});s.onAbort=i,this.queue.push(s);const n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const i=[];try{for(const s of this.queue)await s(t),s.onAbort&&i.push(s.onAbort)}catch(s){i.reverse();for(const n of i)try{n()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T1(e,t={}){return Tn(e,"GET","/v2/passwordPolicy",fr(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=6;class I1{constructor(t){var i,s,n,r;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(i=o.minPasswordLength)!==null&&i!==void 0?i:x1,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(n=(s=t.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&n!==void 0?n:"",this.forceUpgradeOnSignin=(r=t.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var i,s,n,r,o,l;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,a),this.validatePasswordCharacterOptions(t,a),a.isValid&&(a.isValid=(i=a.meetsMinPasswordLength)!==null&&i!==void 0?i:!0),a.isValid&&(a.isValid=(s=a.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),a.isValid&&(a.isValid=(n=a.containsLowercaseLetter)!==null&&n!==void 0?n:!0),a.isValid&&(a.isValid=(r=a.containsUppercaseLetter)!==null&&r!==void 0?r:!0),a.isValid&&(a.isValid=(o=a.containsNumericCharacter)!==null&&o!==void 0?o:!0),a.isValid&&(a.isValid=(l=a.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),a}validatePasswordLengthOptions(t,i){const s=this.customStrengthOptions.minPasswordLength,n=this.customStrengthOptions.maxPasswordLength;s&&(i.meetsMinPasswordLength=t.length>=s),n&&(i.meetsMaxPasswordLength=t.length<=n)}validatePasswordCharacterOptions(t,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let s;for(let n=0;n<t.length;n++)s=t.charAt(n),this.updatePasswordCharacterOptionsStatuses(i,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,i,s,n,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=n)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(t,i,s,n){this.app=t,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=s,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qy(this),this.idTokenSubscription=new Qy(this),this.beforeStateQueue=new F1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(t,i){return i&&(this._popupRedirectResolver=ms(i)),this._initializationPromise=this.queue(async()=>{var s,n;if(!this._deleted&&(this.persistenceManager=await ao.create(this,t),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=((n=this.currentUser)===null||n===void 0?void 0:n.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const i=await RP(this,{idToken:t}),s=await gs._fromGetAccountInfoResponse(this,i,t);await this.directlySetCurrentUser(s)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var i;if(hs(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let n=s,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId,l=n==null?void 0:n._redirectEventId,a=await this.tryRedirectSignIn(t);(!o||o===l)&&(a!=null&&a.user)&&(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(t){try{await rd(t)}catch(i){if((i==null?void 0:i.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=a1()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(hs(this.app))return Promise.reject(pn(this));const i=t?$t(t):null;return i&&K(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(t,i=!1){if(!this._deleted)return t&&K(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return hs(this.app)?Promise.reject(pn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return hs(this.app)?Promise.reject(pn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ms(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await T1(this),i=new I1(t);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Ga("auth","Firebase",t())}onAuthStateChanged(t,i,s){return this.registerStateListener(this.authStateSubscription,t,i,s)}beforeAuthStateChanged(t,i){return this.beforeStateQueue.pushCallback(t,i)}onIdTokenChanged(t,i,s){return this.registerStateListener(this.idTokenSubscription,t,i,s)}authStateReady(){return new Promise((t,i)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},i)}})}async revokeAccessToken(t){if(this.currentUser){const i=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:i};this.tenantId!=null&&(s.tenantId=this.tenantId),await R1(this,s)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,i){const s=await this.getOrInitRedirectPersistenceManager(i);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const i=t&&ms(t)||this._popupRedirectResolver;K(i,this,"argument-error"),this.redirectPersistenceManager=await ao.create(this,[ms(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var i,s;return this._isInitialized&&await this.queue(async()=>{}),((i=this._currentUser)===null||i===void 0?void 0:i._redirectEventId)===t?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,i;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(i=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&i!==void 0?i:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,i,s,n){if(this._deleted)return()=>{};const r=typeof i=="function"?i:i.next.bind(i);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(l,this,"internal-error"),l.then(()=>{o||r(this.currentUser)}),typeof i=="function"){const a=t.addObserver(i,s,n);return()=>{o=!0,a()}}else{const a=t.addObserver(i);return()=>{o=!0,a()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=MP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const i={"X-Client-Version":this.clientVersion};this.app.options.appId&&(i["X-Firebase-gmpid"]=this.app.options.appId);const s=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());s&&(i["X-Firebase-Client"]=s);const n=await this._getAppCheckToken();return n&&(i["X-Firebase-AppCheck"]=n),i}async _getAppCheckToken(){var t;const i=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return i!=null&&i.error&&r1(`Error while retrieving App Check token: ${i.error}`),i==null?void 0:i.token}}function Uo(e){return $t(e)}class Qy{constructor(t){this.auth=t,this.observer=null,this.addObserver=HM(i=>this.observer=i)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ih={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function k1(e){ih=e}function AP(e){return ih.loadJS(e)}function M1(){return ih.recaptchaEnterpriseScript}function A1(){return ih.gapiScript}function _1(e){return`__${e}${Math.floor(Math.random()*1e6)}`}const L1="recaptcha-enterprise",O1="NO_RECAPTCHA";class N1{constructor(t){this.type=L1,this.auth=Uo(t)}async verify(t="verify",i=!1){async function s(r){if(!i){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,l)=>{f1(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(a=>{if(a.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new p1(a);return r.tenantId==null?r._agentRecaptchaConfig=u:r._tenantRecaptchaConfigs[r.tenantId]=u,o(u.siteKey)}}).catch(a=>{l(a)})})}function n(r,o,l){const a=window.grecaptcha;jy(a)?a.enterprise.ready(()=>{a.enterprise.execute(r,{action:t}).then(u=>{o(u)}).catch(()=>{o(O1)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((r,o)=>{s(this.auth).then(l=>{if(!i&&jy(window.grecaptcha))n(l,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let a=M1();a.length!==0&&(a+=l),AP(a).then(()=>{n(l,r,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function Jy(e,t,i,s=!1){const n=new N1(e);let r;try{r=await n.verify(i)}catch{r=await n.verify(i,!0)}const o=Object.assign({},t);return s?Object.assign(o,{captchaResp:r}):Object.assign(o,{captchaResponse:r}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Xy(e,t,i,s){var n;if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await Jy(e,t,i,i==="getOobCode");return s(e,r)}else return s(e,t).catch(async r=>{if(r.code==="auth/missing-recaptcha-token"){console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Jy(e,t,i,i==="getOobCode");return s(e,o)}else return Promise.reject(r)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(e,t){const i=Um(e,"auth");if(i.isInitialized()){const n=i.getImmediate(),r=i.getOptions();if(Uc(r,t??{}))return n;Gi(n,"already-initialized")}return i.initialize({options:t})}function H1(e,t){const i=(t==null?void 0:t.persistence)||[],s=(Array.isArray(i)?i:[i]).map(ms);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(s,t==null?void 0:t.popupRedirectResolver)}function V1(e,t,i){const s=Uo(e);K(s._canInitEmulator,s,"emulator-config-failed"),K(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const n=!!(i!=null&&i.disableWarnings),r=_P(t),{host:o,port:l}=B1(t),a=l===null?"":`:${l}`;s.config.emulator={url:`${r}//${o}${a}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:o,port:l,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:n})}),n||W1()}function _P(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function B1(e){const t=_P(e),i=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!i)return{host:"",port:null};const s=i[2].split("@").pop()||"",n=/^(\[[^\]]+\])(:|$)/.exec(s);if(n){const r=n[1];return{host:r,port:Zy(s.substr(r.length+1))}}else{const[r,o]=s.split(":");return{host:r,port:Zy(o)}}}function Zy(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function W1(){function e(){const t=document.createElement("p"),i=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(t,i){this.providerId=t,this.signInMethod=i}toJSON(){return fs("not implemented")}_getIdTokenResponse(t){return fs("not implemented")}_linkToIdToken(t,i){return fs("not implemented")}_getReauthenticationResolver(t){return fs("not implemented")}}async function z1(e,t){return Tn(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U1(e,t){return eh(e,"POST","/v1/accounts:signInWithPassword",fr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j1(e,t){return eh(e,"POST","/v1/accounts:signInWithEmailLink",fr(e,t))}async function $1(e,t){return eh(e,"POST","/v1/accounts:signInWithEmailLink",fr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra extends kv{constructor(t,i,s,n=null){super("password",s),this._email=t,this._password=i,this._tenantId=n}static _fromEmailAndPassword(t,i){return new Ra(t,i,"password")}static _fromEmailAndCode(t,i,s=null){return new Ra(t,i,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t;if(i!=null&&i.email&&(i!=null&&i.password)){if(i.signInMethod==="password")return this._fromEmailAndPassword(i.email,i.password);if(i.signInMethod==="emailLink")return this._fromEmailAndCode(i.email,i.password,i.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xy(t,i,"signInWithPassword",U1);case"emailLink":return j1(t,{email:this._email,oobCode:this._password});default:Gi(t,"internal-error")}}async _linkToIdToken(t,i){switch(this.signInMethod){case"password":const s={idToken:i,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xy(t,s,"signUpPassword",z1);case"emailLink":return $1(t,{idToken:i,email:this._email,oobCode:this._password});default:Gi(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(e,t){return eh(e,"POST","/v1/accounts:signInWithIdp",fr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="http://localhost";class ar extends kv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const i=new ar(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(i.idToken=t.idToken),t.accessToken&&(i.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(i.nonce=t.nonce),t.pendingToken&&(i.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(i.accessToken=t.oauthToken,i.secret=t.oauthTokenSecret):Gi("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:n}=i,r=Fv(i,["providerId","signInMethod"]);if(!s||!n)return null;const o=new ar(s,n);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(t){const i=this.buildRequest();return uo(t,i)}_linkToIdToken(t,i){const s=this.buildRequest();return s.idToken=i,uo(t,s)}_getReauthenticationResolver(t){const i=this.buildRequest();return i.autoCreate=!1,uo(t,i)}buildRequest(){const t={requestUri:K1,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),t.postBody=Ho(i)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Y1(e){const t=Rl(bl(e)).link,i=t?Rl(bl(t)).deep_link_id:null,s=Rl(bl(e)).deep_link_id;return(s?Rl(bl(s)).link:null)||s||i||t||e}class Mv{constructor(t){var i,s,n,r,o,l;const a=Rl(bl(t)),u=(i=a.apiKey)!==null&&i!==void 0?i:null,c=(s=a.oobCode)!==null&&s!==void 0?s:null,d=q1((n=a.mode)!==null&&n!==void 0?n:null);K(u&&c&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=c,this.continueUrl=(r=a.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(o=a.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=a.tenantId)!==null&&l!==void 0?l:null}static parseLink(t){const i=Y1(t);try{return new Mv(i)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(){this.providerId=jo.PROVIDER_ID}static credential(t,i){return Ra._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){const s=Mv.parseLink(i);return K(s,"argument-error"),Ra._fromEmailAndCode(t,s.code,s.tenantId)}}jo.PROVIDER_ID="password";jo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";jo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja extends LP{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends ja{constructor(){super("facebook.com")}static credential(t){return ar._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return js.credentialFromTaggedObject(t)}static credentialFromError(t){return js.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return js.credential(t.oauthAccessToken)}catch{return null}}}js.FACEBOOK_SIGN_IN_METHOD="facebook.com";js.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends ja{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return ar._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return $s.credentialFromTaggedObject(t)}static credentialFromError(t){return $s.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:s}=t;if(!i&&!s)return null;try{return $s.credential(i,s)}catch{return null}}}$s.GOOGLE_SIGN_IN_METHOD="google.com";$s.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks extends ja{constructor(){super("github.com")}static credential(t){return ar._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ks.credentialFromTaggedObject(t)}static credentialFromError(t){return Ks.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ks.credential(t.oauthAccessToken)}catch{return null}}}Ks.GITHUB_SIGN_IN_METHOD="github.com";Ks.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends ja{constructor(){super("twitter.com")}static credential(t,i){return ar._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return qs.credentialFromTaggedObject(t)}static credentialFromError(t){return qs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:s}=t;if(!i||!s)return null;try{return qs.credential(i,s)}catch{return null}}}qs.TWITTER_SIGN_IN_METHOD="twitter.com";qs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,i,s,n=!1){const r=await gs._fromIdTokenResponse(t,s,n),o=eS(s);return new To({user:r,providerId:o,_tokenResponse:s,operationType:i})}static async _forOperation(t,i,s){await t._updateTokensIfNecessary(s,!0);const n=eS(s);return new To({user:t,providerId:n,_tokenResponse:s,operationType:i})}}function eS(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od extends Fn{constructor(t,i,s,n){var r;super(i.code,i.message),this.operationType=s,this.user=n,Object.setPrototypeOf(this,od.prototype),this.customData={appName:t.name,tenantId:(r=t.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:i.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,i,s,n){return new od(t,i,s,n)}}function OP(e,t,i,s){return(t==="reauthenticate"?i._getReauthenticationResolver(e):i._getIdTokenResponse(e)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?od._fromErrorAndOperation(e,r,t,s):r})}async function Q1(e,t,i=!1){const s=await Sa(e,t._linkToIdToken(e.auth,await e.getIdToken()),i);return To._forOperation(e,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J1(e,t,i=!1){const{auth:s}=e;if(hs(s.app))return Promise.reject(pn(s));const n="reauthenticate";try{const r=await Sa(e,OP(s,n,t,e),i);K(r.idToken,s,"internal-error");const o=Iv(r.idToken);K(o,s,"internal-error");const{sub:l}=o;return K(e.uid===l,s,"user-mismatch"),To._forOperation(e,n,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&Gi(s,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NP(e,t,i=!1){if(hs(e.app))return Promise.reject(pn(e));const s="signIn",n=await OP(e,s,t),r=await To._fromIdTokenResponse(e,s,n);return i||await e._updateCurrentUser(r.user),r}async function X1(e,t){return NP(Uo(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z1(e){const t=Uo(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function eN(e,t,i){return hs(e.app)?Promise.reject(pn(e)):X1($t(e),jo.credential(t,i)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Z1(e),s})}function tN(e,t,i,s){return $t(e).onIdTokenChanged(t,i,s)}function iN(e,t,i){return $t(e).beforeAuthStateChanged(t,i)}function GP(e,t,i,s){return $t(e).onAuthStateChanged(t,i,s)}function sN(e){return $t(e).signOut()}const ld="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(t,i){this.storageRetriever=t,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(ld,"1"),this.storage.removeItem(ld),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,i){return this.storage.setItem(t,JSON.stringify(i)),Promise.resolve()}_get(t){const i=this.storage.getItem(t);return Promise.resolve(i?JSON.parse(i):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(){const e=Et();return Dv(e)||th(e)}const rN=1e3,oN=10;class VP extends HP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=nN()&&P1(),this.fallbackToPolling=kP(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const s=this.storage.getItem(i),n=this.localCache[i];s!==n&&t(i,n,s)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((o,l,a)=>{this.notifyListeners(o,a)});return}const s=t.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(s);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(s,t.newValue):this.storage.removeItem(s);else if(this.localCache[s]===t.newValue&&!i)return}const n=()=>{const o=this.storage.getItem(s);!i&&this.localCache[s]===o||this.notifyListeners(s,o)},r=this.storage.getItem(s);E1()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(n,oN):n()}notifyListeners(t,i){this.localCache[t]=i;const s=this.listeners[t];if(s)for(const n of Array.from(s))n(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:s}),!0)})},rN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){const i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}VP.type="LOCAL";const lN=VP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP extends HP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}BP.type="SESSION";const WP=BP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(n=>n.isListeningto(t));if(i)return i;const s=new sh(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const i=t,{eventId:s,eventType:n,data:r}=i.data,o=this.handlersMap[n];if(!(o!=null&&o.size))return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:n});const l=Array.from(o).map(async u=>u(i.origin,r)),a=await aN(l);i.ports[0].postMessage({status:"done",eventId:s,eventType:n,response:a})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(e="",t=10){let i="";for(let s=0;s<t;s++)i+=Math.floor(Math.random()*10);return e+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,i,s=50){const n=typeof MessageChannel<"u"?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let r,o;return new Promise((l,a)=>{const u=Av("",20);n.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},s);o={messageChannel:n,onMessage(d){const h=d;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(c),r=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),l(h.data.response);break;default:clearTimeout(c),clearTimeout(r),a(new Error("invalid_response"));break}}},this.handlers.add(o),n.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:u,data:i},[n.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(){return window}function cN(e){Xi().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(){return typeof Xi().WorkerGlobalScope<"u"&&typeof Xi().importScripts=="function"}async function dN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hN(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function pN(){return zP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP="firebaseLocalStorageDb",fN=1,ad="firebaseLocalStorage",jP="fbase_key";class $a{constructor(t){this.request=t}toPromise(){return new Promise((t,i)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function nh(e,t){return e.transaction([ad],t?"readwrite":"readonly").objectStore(ad)}function gN(){const e=indexedDB.deleteDatabase(UP);return new $a(e).toPromise()}function wg(){const e=indexedDB.open(UP,fN);return new Promise((t,i)=>{e.addEventListener("error",()=>{i(e.error)}),e.addEventListener("upgradeneeded",()=>{const s=e.result;try{s.createObjectStore(ad,{keyPath:jP})}catch(n){i(n)}}),e.addEventListener("success",async()=>{const s=e.result;s.objectStoreNames.contains(ad)?t(s):(s.close(),await gN(),t(await wg()))})})}async function tS(e,t,i){const s=nh(e,!0).put({[jP]:t,value:i});return new $a(s).toPromise()}async function mN(e,t){const i=nh(e,!1).get(t),s=await new $a(i).toPromise();return s===void 0?null:s.value}function iS(e,t){const i=nh(e,!0).delete(t);return new $a(i).toPromise()}const vN=800,CN=3;class $P{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wg(),this.db)}async _withRetries(t){let i=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(i++>CN)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sh._getInstance(pN()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await dN(),!this.activeServiceWorker)return;this.sender=new uN(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((t=s[0])===null||t===void 0)&&t.fulfilled&&!((i=s[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||hN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await wg();return await tS(t,ld,"1"),await iS(t,ld),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(s=>tS(s,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){const i=await this._withRetries(s=>mN(s,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>iS(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(n=>{const r=nh(n,!1).getAll();return new $a(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const i=[],s=new Set;if(t.length!==0)for(const{fbase_key:n,value:r}of t)s.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(r)&&(this.notifyListeners(n,r),i.push(n));for(const n of Object.keys(this.localCache))this.localCache[n]&&!s.has(n)&&(this.notifyListeners(n,null),i.push(n));return i}notifyListeners(t,i){this.localCache[t]=i;const s=this.listeners[t];if(s)for(const n of Array.from(s))n(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$P.type="LOCAL";const wN=$P;new Ua(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(e,t){return t?ms(t):(K(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v extends kv{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return uo(t,this._buildIdpRequest())}_linkToIdToken(t,i){return uo(t,this._buildIdpRequest(i))}_getReauthenticationResolver(t){return uo(t,this._buildIdpRequest())}_buildIdpRequest(t){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(i.idToken=t),i}}function SN(e){return NP(e.auth,new _v(e),e.bypassAuthState)}function RN(e){const{auth:t,user:i}=e;return K(i,t,"internal-error"),J1(i,new _v(e),e.bypassAuthState)}async function bN(e){const{auth:t,user:i}=e;return K(i,t,"internal-error"),Q1(i,new _v(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(t,i,s,n,r=!1){this.auth=t,this.resolver=s,this.user=n,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(t,i)=>{this.pendingPromise={resolve:t,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:i,sessionId:s,postBody:n,tenantId:r,error:o,type:l}=t;if(o){this.reject(o);return}const a={auth:this.auth,requestUri:i,sessionId:s,tenantId:r||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(a))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return SN;case"linkViaPopup":case"linkViaRedirect":return bN;case"reauthViaPopup":case"reauthViaRedirect":return RN;default:Gi(this.auth,"internal-error")}}resolve(t){Ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=new Ua(2e3,1e4);class $r extends KP{constructor(t,i,s,n,r){super(t,i,n,r),this.provider=s,this.authWindow=null,this.pollId=null,$r.currentPopupAction&&$r.currentPopupAction.cancel(),$r.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return K(t,this.auth,"internal-error"),t}async onExecution(){Ts(this.filter.length===1,"Popup operations only handle one event");const t=Av();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(Ji(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Ji(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$r.currentPopupAction=null}pollUserCancellation(){const t=()=>{var i,s;if(!((s=(i=this.authWindow)===null||i===void 0?void 0:i.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ji(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,EN.get())};t()}}$r.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="pendingRedirect",ec=new Map;class FN extends KP{constructor(t,i,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,s),this.eventId=null}async execute(){let t=ec.get(this.auth._key());if(!t){try{const s=await TN(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(i){t=()=>Promise.reject(i)}ec.set(this.auth._key(),t)}return this.bypassAuthState||ec.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const i=await this.auth._redirectUserForId(t.eventId);if(i)return this.user=i,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function TN(e,t){const i=DN(t),s=IN(e);if(!await s._isAvailable())return!1;const n=await s._get(i)==="true";return await s._remove(i),n}function xN(e,t){ec.set(e._key(),t)}function IN(e){return ms(e._redirectPersistence)}function DN(e){return Zu(PN,e.config.apiKey,e.name)}async function kN(e,t,i=!1){if(hs(e.app))return Promise.reject(pn(e));const s=Uo(e),n=yN(s,t),o=await new FN(s,n,i).execute();return o&&!i&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN=10*60*1e3;class AN{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let i=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(i=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!_N(t)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=t,i=!0)),i}sendToConsumer(t,i){var s;if(t.error&&!qP(t)){const n=((s=t.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";i.onError(Ji(this.auth,n))}else i.onAuthEvent(t)}isEventForConsumer(t,i){const s=i.eventId===null||!!t.eventId&&t.eventId===i.eventId;return i.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=MN&&this.cachedEventUids.clear(),this.cachedEventUids.has(sS(t))}saveEventToCache(t){this.cachedEventUids.add(sS(t)),this.lastProcessedEventTime=Date.now()}}function sS(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function qP({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function _N(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qP(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LN(e,t={}){return Tn(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NN=/^https?/;async function GN(e){if(e.config.emulator)return;const{authorizedDomains:t}=await LN(e);for(const i of t)try{if(HN(i))return}catch{}Gi(e,"unauthorized-domain")}function HN(e){const t=vg(),{protocol:i,hostname:s}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&s===""?i==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):i==="chrome-extension:"&&o.hostname===s}if(!NN.test(i))return!1;if(ON.test(e))return s===e;const n=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+n+"|"+n+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=new Ua(3e4,6e4);function nS(){const e=Xi().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let i=0;i<e.CP.length;i++)e.CP[i]=null}}function BN(e){return new Promise((t,i)=>{var s,n,r;function o(){nS(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{nS(),i(Ji(e,"network-request-failed"))},timeout:VN.get()})}if(!((n=(s=Xi().gapi)===null||s===void 0?void 0:s.iframes)===null||n===void 0)&&n.Iframe)t(gapi.iframes.getContext());else if(!((r=Xi().gapi)===null||r===void 0)&&r.load)o();else{const l=_1("iframefcb");return Xi()[l]=()=>{gapi.load?o():i(Ji(e,"network-request-failed"))},AP(`${A1()}?onload=${l}`).catch(a=>i(a))}}).catch(t=>{throw tc=null,t})}let tc=null;function WN(e){return tc=tc||BN(e),tc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=new Ua(5e3,15e3),UN="__/auth/iframe",jN="emulator/auth/iframe",$N={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qN(e){const t=e.config;K(t.authDomain,e,"auth-domain-config-required");const i=t.emulator?xv(t,jN):`https://${e.config.authDomain}/${UN}`,s={apiKey:t.apiKey,appName:e.name,v:Vo},n=KN.get(e.config.apiHost);n&&(s.eid=n);const r=e._getFrameworks();return r.length&&(s.fw=r.join(",")),`${i}?${Ho(s).slice(1)}`}async function YN(e){const t=await WN(e),i=Xi().gapi;return K(i,e,"internal-error"),t.open({where:document.body,url:qN(e),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$N,dontclear:!0},s=>new Promise(async(n,r)=>{await s.restyle({setHideOnLeave:!1});const o=Ji(e,"network-request-failed"),l=Xi().setTimeout(()=>{r(o)},zN.get());function a(){Xi().clearTimeout(l),n(s)}s.ping(a).then(a,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JN=500,XN=600,ZN="_blank",eG="http://localhost";class rS{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tG(e,t,i,s=JN,n=XN){const r=Math.max((window.screen.availHeight-n)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const a=Object.assign(Object.assign({},QN),{width:s.toString(),height:n.toString(),top:r,left:o}),u=Et().toLowerCase();i&&(l=FP(u)?ZN:i),PP(u)&&(t=t||eG,a.scrollbars="yes");const c=Object.entries(a).reduce((h,[p,f])=>`${h}${p}=${f},`,"");if(b1(u)&&l!=="_self")return iG(t||"",l),new rS(null);const d=window.open(t||"",l,c);K(d,e,"popup-blocked");try{d.focus()}catch{}return new rS(d)}function iG(e,t){const i=document.createElement("a");i.href=e,i.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sG="__/auth/handler",nG="emulator/auth/handler",rG=encodeURIComponent("fac");async function oS(e,t,i,s,n,r){K(e.config.authDomain,e,"auth-domain-config-required"),K(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:i,redirectUrl:s,v:Vo,eventId:n};if(t instanceof LP){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Xf(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,d]of Object.entries(r||{}))o[c]=d}if(t instanceof ja){const c=t.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const l=o;for(const c of Object.keys(l))l[c]===void 0&&delete l[c];const a=await e._getAppCheckToken(),u=a?`#${rG}=${encodeURIComponent(a)}`:"";return`${oG(e)}?${Ho(l).slice(1)}${u}`}function oG({config:e}){return e.emulator?xv(e,nG):`https://${e.authDomain}/${sG}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp="webStorageSupport";class lG{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=WP,this._completeRedirectFn=kN,this._overrideRedirectResult=xN}async _openPopup(t,i,s,n){var r;Ts((r=this.eventManagers[t._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const o=await oS(t,i,s,vg(),n);return tG(t,o,Av())}async _openRedirect(t,i,s,n){await this._originValidation(t);const r=await oS(t,i,s,vg(),n);return cN(r),new Promise(()=>{})}_initialize(t){const i=t._key();if(this.eventManagers[i]){const{manager:n,promise:r}=this.eventManagers[i];return n?Promise.resolve(n):(Ts(r,"If manager is not set, promise should be"),r)}const s=this.initAndGetManager(t);return this.eventManagers[i]={promise:s},s.catch(()=>{delete this.eventManagers[i]}),s}async initAndGetManager(t){const i=await YN(t),s=new AN(t);return i.register("authEvent",n=>(K(n==null?void 0:n.authEvent,t,"invalid-auth-event"),{status:s.onEvent(n.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=i,s}_isIframeWebStorageSupported(t,i){this.iframes[t._key()].send(Mp,{type:Mp},n=>{var r;const o=(r=n==null?void 0:n[0])===null||r===void 0?void 0:r[Mp];o!==void 0&&i(!!o),Gi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const i=t._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=GN(t)),this.originValidationPromises[i]}get _shouldInitProactively(){return kP()||Dv()||th()}}const aG=lG;var lS="@firebase/auth",aS="1.7.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uG{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const i=this.auth.onIdTokenChanged(s=>{t((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,i),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const i=this.internalListeners.get(t);i&&(this.internalListeners.delete(t),i(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cG(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dG(e){bo(new ir("auth",(t,{options:i})=>{const s=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;K(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const a={apiKey:o,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:MP(e)},u=new D1(s,n,r,a);return H1(u,i),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,i,s)=>{t.getProvider("auth-internal").initialize()})),bo(new ir("auth-internal",t=>{const i=Uo(t.getProvider("auth").getImmediate());return(s=>new uG(s))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),dn(lS,aS,cG(e)),dn(lS,aS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hG=5*60,pG=$E("authIdTokenMaxAge")||hG;let uS=null;const fG=e=>async t=>{const i=t&&await t.getIdTokenResult(),s=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(s&&s>pG)return;const n=i==null?void 0:i.token;uS!==n&&(uS=n,await fetch(e,{method:n?"POST":"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}}))};function gG(e=jm()){const t=Um(e,"auth");if(t.isInitialized())return t.getImmediate();const i=G1(e,{popupRedirectResolver:aG,persistence:[wN,lN,WP]}),s=$E("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(s,location.origin);if(location.origin===r.origin){const o=fG(r.toString());iN(i,o,()=>o(i.currentUser)),tN(i,l=>o(l))}}const n=UE("auth");return n&&V1(i,`http://${n}`),i}function mG(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}k1({loadJS(e){return new Promise((t,i)=>{const s=document.createElement("script");s.setAttribute("src",e),s.onload=t,s.onerror=n=>{const r=Ji("internal-error");r.customData=n,i(r)},s.type="text/javascript",s.charset="UTF-8",mG().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dG("Browser");var vG="firebase",CG="10.12.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dn(vG,CG,"app");const wG={apiKey:"AIzaSyCoPYss0jsMH3q9PDzzMmABAfhy125Yf2Q",authDomain:"sikala-d0060.firebaseapp.com",databaseURL:"https://sikala-d0060-default-rtdb.europe-west1.firebasedatabase.app",projectId:"sikala-d0060",storageBucket:"sikala-d0060.appspot.com",messagingSenderId:"881281568551",appId:"1:881281568551:web:841dbebb613333c9dbe302"};let ud;VA().length===0?ud=XE(wG):ud=jm();const cd=gG(ud),cS=t1(ud),yG=e=>{let t="";switch(!0){case e<13:t="B";break;case(e>=13&&e<16):t="L";break;case(e>=16&&e<21):t="N";break;case(e>=21&&e<34):t="T";break;case(e>=35&&e<40):t="D";break;case(e>=40&&e<44):t="K";break;case(e>=44&&e<46):t="COXA";break;case(e>=46&&e<48):t="FM1";break;case(e>=48&&e<50):t="E";break;case(e>=50&&e<52):t="R";break;case e==52:t="FM6";break;case e==53:t="F";break;default:t="ei löydy"}return t},SG=()=>{const[e,t]=C.useState({}),[i,s]=C.useState(!0);C.useEffect(()=>{const l=GP(cd,a=>{a?n():(console.log("User not signed in"),s(!1))});return()=>l()},[]);const n=()=>{const l=zy(cS,"/"),a=KO(l,u=>{u.exists()?(t(u.val()),s(!1)):(console.log("No data available"),s(!1))},u=>{console.error("Error fetching data:",u),s(!1)});return()=>a()};C.useEffect(()=>{const l=async()=>{try{const a=zy(cS,"/");await jO(a,e),console.log("Data sent successfully")}catch(a){console.error("Error sending data:",a)}};Object.keys(e).length>0&&l()},[e]);const r=()=>{let l={...e};Object.keys(l).forEach(a=>{l[a]=l[a].map(u=>({...u,className:"laatikot"}))}),t(l)},o=l=>{var d;let a=l.target.id,u=yG(a),c=((d=e[u])==null?void 0:d.map(h=>h.id===l.target.id?{...h,className:h.className==="laatikot"?"laatikot2":"laatikot"}:h))||[];t({...e,[u]:c})};return i?k.jsx("div",{children:"Haetaan..."}):k.jsxs("div",{style:{marginTop:"10px"},children:[k.jsx("h5",{className:"reset",onClick:r,children:"reset"}),k.jsx("div",{className:"Alueetbox",children:Object.keys(e).map(l=>{var a;return k.jsxs("div",{className:`alueet${l}`,children:[k.jsx("p",{className:"siipiotsikko",children:l}),(a=e[l])==null?void 0:a.map(u=>k.jsx("div",{children:k.jsx("p",{className:u.className,id:u.id,onClick:o,children:u.nimi})},u.id))]},l)})})]})},RG=()=>k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"nollaus",children:"VAUNUT"}),k.jsx(SG,{})]});var $o=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,i){const s=t?this.allAsyncListeners:this.allSyncListeners;let n=s.get(e);return!n&&i&&(n=new Set,s.set(e,n)),n}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,i=!1){this.getListeners(e,i,!0).add(t)}removeEventListener(e,t,i=!1){const s=this.getListeners(e,i,!1);s&&(s.delete(t),s.size===0&&(i?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){const t=e;this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){const i=e.type;if(t&&"event"in e){const l=e.event;l instanceof Event&&(e.eventPath=l.composedPath())}const s=(l,a)=>l.forEach(u=>{if(!a.has(u))return;const c=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>u(e)):()=>u(e);t?this.dispatchAsync(c):c()}),n=this.getListeners(i,t,!1)??new Set,r=new Set(n);r.size>0&&s(r,n),new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach(l=>{const a=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>l(i,e)):()=>l(i,e);t?this.dispatchAsync(a):a()})}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(t=>t())}};function se(e){if(!(!e||!e.length))return e[e.length-1]}function gr(e,t,i){return e==null&&t==null?!0:e!=null&&t!=null&&e.length===t.length&&e.every((s,n)=>i?i(s,t[n]):t[n]===s)}function bG(e){return e.sort((t,i)=>t-i)}function YP(e,t){const i=e.indexOf(t);i>=0&&(e[i]=e[e.length-1],e.pop())}function xt(e,t){const i=e.indexOf(t);i>=0&&e.splice(i,1)}function EG(e,t){for(let i=0;i<t.length;i++)YP(e,t[i])}function PG(e,t){for(let i=0;i<t.length;i++)xt(e,t[i])}function dd(e,t,i){e.splice(i,0,t)}function QP(e,t,i){PG(e,t),t.slice().reverse().forEach(s=>dd(e,s,i))}function $n(e,t){return e.indexOf(t)>-1}function FG(e){return[].concat.apply([],e)}function dS(e,t){t==null||e==null||t.forEach(i=>e.push(i))}var JP="__ag_Grid_Stop_Propagation",TG=["touchstart","touchend","touchmove","touchcancel","scroll"],Ap={};function xo(e){e[JP]=!0}function fn(e){return e[JP]===!0}var XP=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return i=>{if(typeof Ap[i]=="boolean")return Ap[i];const s=document.createElement(e[i]||"div");return i="on"+i,Ap[i]=i in s}})();function yg(e,t,i){let s=t;for(;s;){const n=e.getDomData(s,i);if(n)return n;s=s.parentElement}return null}function xG(e,t){return!t||!e?!1:DG(t).indexOf(e)>=0}function IG(e){const t=[];let i=e.target;for(;i;)t.push(i),i=i.parentElement;return t}function DG(e){const t=e;return t.path?t.path:t.composedPath?t.composedPath():IG(t)}function kG(e,t,i,s){const r=$n(TG,i)?{passive:!0}:void 0;e&&e.addEventListener&&e.addEventListener(t,i,s,r)}var T=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.gridId=e.context.getGridId(),this.frameworkOverrides=e.frameworkOverrides,this.stubContext=e.context,this.eventService=e.eventService,this.gos=e.gos,this.localeService=e.localeService}getFrameworkOverrides(){return this.frameworkOverrides}destroy(){for(let e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t){this.localEventService||(this.localEventService=new $o),this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService&&this.localEventService.removeEventListener(e,t)}dispatchLocalEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventService,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const i=[];for(const s in t){const n=t[s];n&&i.push(this._setupListener(e,s,n))}return i}_setupListener(e,t,i){if(this.destroyed)return()=>null;e instanceof HTMLElement?kG(this.getFrameworkOverrides(),e,t,i):e.addEventListener(t,i);const s=()=>(e.removeEventListener(t,i),null);return this.destroyFunctions.push(s),()=>(s(),this.destroyFunctions=this.destroyFunctions.filter(n=>n!==s),null)}setupGridOptionListener(e,t){this.gos.addPropertyEventListener(e,t);const i=()=>(this.gos.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(s=>s!==i),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const i=e.join("-")+this.propertyListenerId++,s=n=>{if(n.changeSet){if(n.changeSet&&n.changeSet.id===this.lastChangeSetIdLookup[i])return;this.lastChangeSetIdLookup[i]=n.changeSet.id}const r={type:"gridPropertyChanged",changeSet:n.changeSet,source:n.source};t(r)};e.forEach(n=>this.setupGridOptionListener(n,s))}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,t){const i=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),i}createBean(e,t,i){return(t||this.stubContext).createBean(e,i)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}},Lv=class{constructor(e){this.frameworkOverrides=e,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=i=>{this.frameworkOverrides.wrapOutgoing(()=>e(i))},this.wrappedListeners.set(e,t)),t}wrapGlobal(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=(i,s)=>{this.frameworkOverrides.wrapOutgoing(()=>e(i,s))},this.wrappedGlobalListeners.set(e,t)),t}unwrap(e){return this.wrappedListeners.get(e)??e}unwrapGlobal(e){return this.wrappedGlobalListeners.get(e)??e}};function Kn(e){return e==null||e===""?null:e}function A(e,t=!1){return e!=null&&(e!==""||t)}function X(e){return!A(e)}function lt(e){return e==null||e.length===0}function Sg(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function qn(e){if(e===void 0)return;if(e===null||e==="")return null;if(typeof e=="number")return isNaN(e)?void 0:e;const t=parseInt(e,10);return isNaN(t)?void 0:t}function Rg(e){if(e!==void 0)return e===null||e===""?!1:bg(e)}function bg(e){return typeof e=="boolean"?e:typeof e=="string"?e.toUpperCase()==="TRUE"||e=="":!1}function hd(e,t){const i=e?JSON.stringify(e):null,s=t?JSON.stringify(t):null;return i===s}function MG(e,t,i=!1){const s=e==null,n=t==null;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),s&&n)return 0;if(s)return-1;if(n)return 1;function r(o,l){return o>l?1:o<l?-1:0}if(typeof e!="string"||!i)return r(e,t);try{return e.localeCompare(t)}catch{return r(e,t)}}function ic(e){if(e instanceof Set||e instanceof Map){const t=[];return e.forEach(i=>t.push(i)),t}return Object.values(e)}var Ov=new Set(["__proto__","constructor","prototype"]);function Ii(e,t){if(e!=null){if(Array.isArray(e)){for(let i=0;i<e.length;i++)t(i.toString(),e[i]);return}for(const[i,s]of Object.entries(e))t(i,s)}}function ZP(e){const t={},i=Object.keys(e);for(let s=0;s<i.length;s++){if(Ov.has(i[s]))continue;const n=i[s],r=e[n];t[n]=r}return t}function Eg(e,t){if(!e)return;const i=e,s={};return Object.keys(i).forEach(n=>{if(t&&t.indexOf(n)>=0||Ov.has(n))return;const r=i[n];Fg(r)&&r.constructor===Object?s[n]=Eg(r):s[n]=r}),s}function Pg(e){if(!e)return[];const t=Object;if(typeof t.values=="function")return t.values(e);const i=[];for(const s in e)e.hasOwnProperty(s)&&e.propertyIsEnumerable(s)&&i.push(e[s]);return i}function hi(e,t,i=!0,s=!1){A(t)&&Ii(t,(n,r)=>{if(Ov.has(n))return;let o=e[n];o!==r&&(s&&o==null&&r!=null&&typeof r=="object"&&r.constructor===Object&&(o={},e[n]=o),Fg(r)&&Fg(o)&&!Array.isArray(o)?hi(o,r,i,s):(i||r!==void 0)&&(e[n]=r))})}function Vl(e,t,i){if(!t||!e)return;if(!i)return e[t];const s=t.split(".");let n=e;for(let r=0;r<s.length;r++){if(n==null)return;n=n[s[r]]}return n}function Fg(e){return typeof e=="object"&&e!==null}var AG={resizable:!0,sortable:!0},_G=0;function eF(){return _G++}function yn(e){return e instanceof iF}var tF=20,iF=class extends T{constructor(e,t,i,s){super(),this.isColumn=!0,this.instanceId=eF(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.columnEventService=new $o,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=t,this.colId=i,this.primary=s,this.setState(e)}wireBeans(e){this.columnHoverService=e.columnHoverService}getInstanceId(){return this.instanceId}setState(e){e.sort!==void 0?(e.sort==="asc"||e.sort==="desc")&&(this.sort=e.sort):(e.initialSort==="asc"||e.initialSort==="desc")&&(this.sort=e.initialSort);const t=e.sortIndex,i=e.initialSortIndex;t!==void 0?t!==null&&(this.sortIndex=t):i!==null&&(this.sortIndex=i);const s=e.hide,n=e.initialHide;s!==void 0?this.visible=!s:this.visible=!n,e.pinned!==void 0?this.setPinned(e.pinned):this.setPinned(e.initialPinned);const r=e.flex,o=e.initialFlex;r!==void 0?this.flex=r:o!==void 0&&(this.flex=o)}setColDef(e,t,i){this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.columnEventService.dispatchEvent(this.createColumnEvent("colDefChanged",i))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}postConstruct(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){const e=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=A(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=A(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=e.minWidth??tF,this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=A(this.colDef.tooltipField)||A(this.colDef.tooltipValueGetter)||A(this.colDef.tooltipComponent)}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t;const i=qn(e.width),s=qn(e.initialWidth);return i!=null?t=i:s!=null?t=s:t=200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){if(X(this.colDef)||X(this.colDef.showRowGroup))return!1;const t=this.colDef.showRowGroup===!0,i=this.colDef.showRowGroup===e;return t||i}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}addEventListener(e,t){var s;this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.columnEventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new Lv(this.frameworkOverrides));const i=((s=this.frameworkEventListenerService)==null?void 0:s.wrap(t))??t;this.columnEventService.addEventListener(e,i)}removeEventListener(e,t){var s;const i=((s=this.frameworkEventListenerService)==null?void 0:s.unwrap(t))??t;this.columnEventService.removeEventListener(e,i)}createColumnFunctionCallbackParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){const t=this.createColumnFunctionCallbackParams(e),i=this.colDef.suppressNavigable;return i(t)}return!1}isCellEditable(e){return e.group&&!this.gos.get("enableGroupEdit")?!1:this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??AG[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){const i=this.createColumnFunctionCallbackParams(e);return t(i)}return!1}setMoving(e,t){this.moving=e,this.columnEventService.dispatchEvent(this.createColumnEvent("movingChanged",t))}createColumnEvent(e,t){return this.gos.addGridCommonParams({type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,t){this.sort!==e&&(this.sort=e,this.columnEventService.dispatchEvent(this.createColumnEvent("sortChanged",t))),this.dispatchStateUpdatedEvent("sort")}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return X(this.sort)}isSorting(){return A(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setMenuVisible(e,t){this.menuVisible!==e&&(this.menuVisible=e,this.columnEventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",t)))}isMenuVisible(){return this.menuVisible}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.columnEventService.dispatchEvent(this.createColumnEvent("leftChanged",t)))}isFilterActive(){return this.filterActive}setFilterActive(e,t,i){this.filterActive!==e&&(this.filterActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",t)));const s=this.createColumnEvent("filterChanged",t);i&&hi(s,i),this.columnEventService.dispatchEvent(s)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){e===!0||e==="left"?this.pinned="left":e==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",t)))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",t)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){const i=e===!0;this.visible!==i&&(this.visible=i,this.columnEventService.dispatchEvent(this.createColumnEvent("visibleChanged",t))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){const e=this.getColDef();return!e.suppressSpanHeaderHeight&&!e.autoHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let i=!0;for(;e;){if(!e.isPadding()){i=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:i}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(X(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.colSpan(t);return Math.max(i,1)}getRowSpan(e){if(X(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.rowSpan(t);return Math.max(i,1)}setActualWidth(e,t,i=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),i||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.columnEventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e){this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,t){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",t))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,t){this.pivotActive!==e&&(this.pivotActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",t))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,t){this.aggregationActive!==e&&(this.aggregationActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnValueChanged",t)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchStateUpdatedEvent(e){this.columnEventService.dispatchEvent({type:"columnStateUpdated",key:e})}};function Tt(e){return e instanceof sc}var sc=class extends T{constructor(e,t,i,s){super(),this.isColumn=!1,this.expandable=!1,this.instanceId=eF(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=t,this.expanded=!!e&&!!e.openByDefault,this.padding=i,this.level=s}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach(t=>{yn(t)?e.push(t):Tt(t)&&t.addLeafColumns(e)})}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(t=>t.addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(t=>t.removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,i=!1;const s=this.findChildrenRemovingPadding();for(let r=0,o=s.length;r<o;r++){const l=s[r];if(!l.isVisible())continue;const a=l.getColumnGroupShow();a==="open"?(e=!0,i=!0):a==="closed"?(t=!0,i=!0):(e=!0,t=!0)}const n=e&&t&&i;this.expandable!==n&&(this.expandable=n,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=i=>{i.forEach(s=>{Tt(s)&&s.isPadding()?t(s.children):e.push(s)})};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},LG={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},hS={};function Nv(e,t){hS[t]||(e(),hS[t]=!0)}function Mi(e,...t){console.log("AG Grid: "+e,...t)}function M(e,...t){Nv(()=>console.warn("AG Grid: "+e,...t),e+(t==null?void 0:t.join("")))}function oe(e,...t){Nv(()=>console.error("AG Grid: "+e,...t),e+(t==null?void 0:t.join("")))}function Gv(e){return!!(e&&e.constructor&&e.call&&e.apply)}function OG(e){NG(e,400)}var _p=[],Lp=!1;function pS(e){_p.push(e),!Lp&&(Lp=!0,window.setTimeout(()=>{const t=_p.slice();_p.length=0,Lp=!1,t.forEach(i=>i())},0))}function NG(e,t=0){e.length>0&&window.setTimeout(()=>e.forEach(i=>i()),t)}function It(e,t){let i;return function(...s){const n=this;window.clearTimeout(i),i=window.setTimeout(function(){e.apply(n,s)},t)}}function fS(e,t){let i=0;return function(...s){const n=this,r=new Date().getTime();r-i<t||(i=r,e.apply(n,s))}}function GG(e,t,i=100,s){const n=new Date().getTime();let r=null,o=!1;const l=()=>{const a=new Date().getTime()-n>i;(e()||a)&&(t(),o=!0,r!=null&&(window.clearInterval(r),r=null),a&&s&&M(s))};l(),o||(r=window.setInterval(l,10))}function HG(...e){return t=>e.reduce((i,s)=>s(i),t)}var VG=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=Sg(e);let i=0;for(;;){let s;if(e?(s=e,i!==0&&(s+="_"+i)):t?(s=t,i!==0&&(s+="_"+i)):s=i,!this.existingKeys[s])return this.existingKeys[s]=!0,String(s);i++}}},Ka="ag-Grid-AutoColumn";function Hv(e){const t=[],i=s=>{for(let n=0;n<s.length;n++){const r=s[n];yn(r)?t.push(r):Tt(r)&&i(r.getChildren())}};return i(e),t}function us(e){return e.reduce((t,i)=>t+i.getActualWidth(),0)}function Kr(e,t,i){const s={};if(!t)return;xs(null,t,r=>{s[r.getInstanceId()]=r}),i&&xs(null,i,r=>{s[r.getInstanceId()]=null});const n=Object.values(s).filter(r=>r!=null);e.destroyBeans(n)}function gS(e){return e.getId().startsWith(Ka)}function nc(e){let t=[];return e instanceof Array?e.some(s=>typeof s!="string")?M("if colDef.type is supplied an array it should be of type 'string[]'"):t=e:typeof e=="string"?t=e.split(","):M("colDef.type should be of type 'string' | 'string[]'"),t}var BG=class extends T{constructor(){super(...arguments),this.beanName="columnFactory"}wireBeans(e){this.dataTypeService=e.dataTypeService}createColumnTree(e,t,i,s){const n=new VG,{existingCols:r,existingGroups:o,existingColKeys:l}=this.extractExistingTreeData(i);n.addExistingKeys(l);const a=this.recursivelyCreateColumns(e,0,t,r,n,o,s),u=this.findMaxDept(a,0),c=this.balanceColumnTree(a,0,u,n);return xs(null,c,(h,p)=>{Tt(h)&&h.setupExpandable(),h.setOriginalParent(p)}),{columnTree:c,treeDept:u}}extractExistingTreeData(e){const t=[],i=[],s=[];return e&&xs(null,e,n=>{if(Tt(n)){const r=n;i.push(r)}else{const r=n;s.push(r.getId()),t.push(r)}}),{existingCols:t,existingGroups:i,existingColKeys:s}}createForAutoGroups(e,t){const i=[],s=this.findDepth(t);return e.forEach(n=>{let r=n;for(let o=s-1;o>=0;o--){const l=new sc(null,`FAKE_PATH_${n.getId()}}_${o}`,!0,o);this.createBean(l),l.setChildren([r]),r.setOriginalParent(l),r=l}s===0&&n.setOriginalParent(null),i.push(r)}),[i,s]}findDepth(e){let t=0,i=e;for(;i&&i[0]&&Tt(i[0]);)t++,i=i[0].getChildren();return t}balanceColumnTree(e,t,i,s){const n=[];for(let r=0;r<e.length;r++){const o=e[r];if(Tt(o)){const l=o,a=this.balanceColumnTree(l.getChildren(),t+1,i,s);l.setChildren(a),n.push(l)}else{let l,a;for(let u=i-1;u>=t;u--){const c=s.getUniqueKey(null,null),d=this.createMergedColGroupDef(null),h=new sc(d,c,!0,t);this.createBean(h),a&&a.setChildren([h]),a=h,l||(l=a)}if(l&&a)if(n.push(l),e.some(c=>Tt(c))){a.setChildren([o]);continue}else{a.setChildren(e);break}n.push(o)}}return n}findMaxDept(e,t){let i=t;for(let s=0;s<e.length;s++){const n=e[s];if(Tt(n)){const r=n,o=this.findMaxDept(r.getChildren(),t+1);i<o&&(i=o)}}return i}recursivelyCreateColumns(e,t,i,s,n,r,o){if(!e)return[];const l=new Array(e.length);for(let a=0;a<l.length;a++){const u=e[a];this.isColumnGroup(u)?l[a]=this.createColumnGroup(i,u,t,s,n,r,o):l[a]=this.createColumn(i,u,s,n,o)}return l}createColumnGroup(e,t,i,s,n,r,o){const l=this.createMergedColGroupDef(t),a=n.getUniqueKey(l.groupId||null,null),u=new sc(l,a,!1,i);this.createBean(u);const c=this.findExistingGroup(t,r);c&&r.splice(c.idx,1);const d=c==null?void 0:c.group;d&&u.setExpanded(d.isExpanded());const h=this.recursivelyCreateColumns(l.children,i+1,e,s,n,r,o);return u.setChildren(h),u}createMergedColGroupDef(e){const t={};return Object.assign(t,this.gos.get("defaultColGroupDef")),Object.assign(t,e),t}createColumn(e,t,i,s,n){var l;const r=this.findExistingColumn(t,i);r&&(i==null||i.splice(r.idx,1));let o=r==null?void 0:r.column;if(o){const a=this.addColumnDefaultAndTypes(t,o.getColId());o.setColDef(a,t,n),this.applyColumnState(o,a,n)}else{const a=s.getUniqueKey(t.colId,t.field),u=this.addColumnDefaultAndTypes(t,a);o=new iF(u,t,a,e),this.createBean(o)}return(l=this.dataTypeService)==null||l.addColumnListeners(o),o}applyColumnState(e,t,i){const s=qn(t.flex);if(s!==void 0&&e.setFlex(s),e.getFlex()<=0){const l=qn(t.width);if(l!=null)e.setActualWidth(l,i);else{const a=e.getActualWidth();e.setActualWidth(a,i)}}t.sort!==void 0&&(t.sort=="asc"||t.sort=="desc"?e.setSort(t.sort,i):e.setSort(void 0,i));const r=qn(t.sortIndex);r!==void 0&&e.setSortIndex(r);const o=Rg(t.hide);o!==void 0&&e.setVisible(!o,i),t.pinned!==void 0&&e.setPinned(t.pinned)}findExistingColumn(e,t){if(t)for(let i=0;i<t.length;i++){const s=t[i].getUserProvidedColDef();if(!s)continue;if(e.colId!=null){if(t[i].getId()===e.colId)return{idx:i,column:t[i]};continue}if(e.field!=null){if(s.field===e.field)return{idx:i,column:t[i]};continue}if(s===e)return{idx:i,column:t[i]}}}findExistingGroup(e,t){if(e.groupId!=null)for(let s=0;s<t.length;s++){const n=t[s];if(n.getColGroupDef()&&n.getId()===e.groupId)return{idx:s,group:n}}}addColumnDefaultAndTypes(e,t){var l;const i={},s=this.gos.get("defaultColDef");hi(i,s,!1,!0);const n=this.updateColDefAndGetColumnType(i,e,t);n&&this.assignColumnTypes(n,i),hi(i,e,!1,!0);const r=this.gos.get("autoGroupColumnDef"),o=this.gos.isColumnsSortingCoupledToGroup();return e.rowGroup&&r&&o&&hi(i,{sort:r.sort,initialSort:r.initialSort},!1,!0),(l=this.dataTypeService)==null||l.validateColDef(i),i}updateColDefAndGetColumnType(e,t,i){var r;const s=(r=this.dataTypeService)==null?void 0:r.updateColDefAndGetColumnType(e,t,i),n=t.type??s??e.type;return e.type=n,n?nc(n):void 0}assignColumnTypes(e,t){if(!e.length)return;const i=Object.assign({},LG),s=this.gos.get("columnTypes")||{};Ii(s,(n,r)=>{n in i?M(`the column type '${n}' is a default column type and cannot be overridden.`):(r.type&&M("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),i[n]=r)}),e.forEach(n=>{const r=i[n.trim()];r?hi(t,r,!1,!0):M("colDef.type '"+n+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(e){return e.children!==void 0}};function xs(e,t,i){if(t)for(let s=0;s<t.length;s++){const n=t[s];Tt(n)&&xs(n,n.getChildren(),i),i(n,e)}}var WG=class extends T{constructor(){super(...arguments),this.beanName="columnModel",this.pivotMode=!1,this.autoHeightActiveAtLeastOnce=!1,this.ready=!1,this.changeEventsDispatching=!1,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}wireBeans(e){this.context=e.context,this.columnFactory=e.columnFactory,this.columnSizeService=e.columnSizeService,this.visibleColsService=e.visibleColsService,this.columnViewportService=e.columnViewportService,this.pivotResultColsService=e.pivotResultColsService,this.columnAnimationService=e.columnAnimationService,this.autoColService=e.autoColService,this.valueCache=e.valueCache,this.columnDefFactory=e.columnDefFactory,this.columnApplyStateService=e.columnApplyStateService,this.columnGroupStateService=e.columnGroupStateService,this.eventDispatcher=e.columnEventDispatcher,this.columnMoveService=e.columnMoveService,this.columnAutosizeService=e.columnAutosizeService,this.funcColsService=e.funcColsService,this.quickFilterService=e.quickFilterService,this.showRowGroupColsService=e.showRowGroupColsService,this.environment=e.environment}postConstruct(){const e=this.gos.get("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],t=>this.refreshAll(qr(t.source))),this.addManagedPropertyListener("autoGroupColumnDef",t=>this.onAutoGroupColumnDefChanged(qr(t.source))),this.addManagedPropertyListeners(["defaultColDef","columnTypes","suppressFieldDotNotation"],t=>this.recreateColumnDefs(qr(t.source))),this.addManagedPropertyListener("pivotMode",t=>this.setPivotMode(this.gos.get("pivotMode"),qr(t.source))),this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}createColsFromColDefs(e,t){var d;const i=e?this.columnApplyStateService.compareColumnStatesAndDispatchEvents(t):void 0;this.valueCache.expire();const s=this.colDefCols&&this.colDefCols.list,n=this.colDefCols&&this.colDefCols.tree,r=this.columnFactory.createColumnTree(this.colDefs,!0,n,t);Kr(this.context,(d=this.colDefCols)==null?void 0:d.tree,r.columnTree);const o=r.columnTree,l=r.treeDept,a=Hv(o),u={};a.forEach(h=>u[h.getId()]=h),this.colDefCols={tree:o,treeDepth:l,list:a,map:u},this.funcColsService.extractCols(t,s),this.ready=!0,this.refreshCols(),e&&!this.showingPivotResult&&!this.gos.get("maintainColumnOrder")&&this.orderColsLikeColDefCols(),this.visibleColsService.refresh(t),this.columnViewportService.checkViewportColumns(),this.eventDispatcher.everythingChanged(t),i&&(this.changeEventsDispatching=!0,i(),this.changeEventsDispatching=!1),this.eventDispatcher.newColumnsLoaded(t),t==="gridInitializing"&&this.columnSizeService.applyAutosizeStrategy()}refreshCols(){var i,s,n;if(!this.colDefCols)return;const e=(i=this.cols)==null?void 0:i.tree;this.saveColOrder(),this.selectCols(),this.createAutoCols(),this.addAutoCols(),this.restoreColOrder(),this.positionLockedCols(),(s=this.showRowGroupColsService)==null||s.refresh(),(n=this.quickFilterService)==null||n.refreshQuickFilterCols(),this.setColSpanActive(),this.setAutoHeightActive(),this.visibleColsService.clear(),this.columnViewportService.clear(),!gr(e,this.cols.tree)&&this.eventDispatcher.gridColumns()}selectCols(){const e=this.pivotResultColsService.getPivotResultCols();if(this.showingPivotResult=e!=null,e){const{map:t,list:i,tree:s,treeDepth:n}=e;this.cols={list:i.slice(),map:{...t},tree:s.slice(),treeDepth:n},e.list.some(o=>{var l;return((l=this.cols)==null?void 0:l.map[o.getColId()])!==void 0})||(this.lastPivotOrder=null)}else{const{map:t,list:i,tree:s,treeDepth:n}=this.colDefCols;this.cols={list:i.slice(),map:{...t},tree:s.slice(),treeDepth:n}}}getColsToShow(){const e=this.isPivotMode()&&!this.isShowingPivotResult(),t=this.funcColsService.getValueColumns();return this.cols.list.filter(s=>{const n=gS(s);if(e){const r=t&&$n(t,s);return n||r}else return n||s.isVisible()})}addAutoCols(){this.autoCols!=null&&(this.cols.list=this.autoCols.list.concat(this.cols.list),this.cols.tree=this.autoCols.tree.concat(this.cols.tree),zG(this.cols))}createAutoCols(){var f,m;const e=this.gos.isGroupUseEntireRow(this.pivotMode),t=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isSuppressAutoCol(),i=this.funcColsService.getRowGroupColumns(),n=!(i.length>0||this.gos.get("treeData"))||t||e,r=()=>{this.autoCols&&(Kr(this.context,this.autoCols.tree),this.autoCols=null)};if(n||!this.autoColService){r();return}const o=this.autoColService.createAutoCols(i)??[],l=UG(o,((f=this.autoCols)==null?void 0:f.list)||null),a=this.cols.treeDepth,c=(this.autoCols?this.autoCols.treeDepth:-1)==a;if(l&&c)return;r();const[d,h]=this.columnFactory.createForAutoGroups(o,(m=this.cols)==null?void 0:m.tree);this.autoCols={list:o,tree:d,treeDepth:h,map:{}};const p=w=>{if(!w)return null;const v=w.filter(g=>!gS(g));return[...o,...v]};this.lastOrder=p(this.lastOrder),this.lastPivotOrder=p(this.lastPivotOrder)}refreshAll(e){this.isReady()&&(this.refreshCols(),this.visibleColsService.refresh(e))}setColsVisible(e,t=!1,i){this.columnApplyStateService.applyColumnState({state:e.map(s=>({colId:typeof s=="string"?s:s.getColId(),hide:!t}))},i)}setColsPinned(e,t,i){if(!this.cols||lt(e))return;if(this.gos.isDomLayout("print")){M("Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let s;t===!0||t==="left"?s="left":t==="right"?s="right":s=null;const n=[];e.forEach(r=>{if(!r)return;const o=this.getCol(r);o&&o.getPinned()!==s&&(o.setPinned(s),n.push(o))}),n.length&&(this.visibleColsService.refresh(i),this.eventDispatcher.columnPinned(n,i)),this.columnAnimationService.finish()}setColumnGroupOpened(e,t,i){let s;Tt(e)?s=e.getId():s=e||"",this.columnGroupStateService.setColumnGroupState([{groupId:s,open:t}],i)}getProvidedColGroup(e){var i;let t=null;return xs(null,(i=this.cols)==null?void 0:i.tree,s=>{Tt(s)&&s.getId()===e&&(t=s)}),t}isColGroupLocked(e){const t=this.gos.get("groupLockGroupColumns");if(!e.isRowGroupActive()||t===0)return!1;if(t===-1)return!0;const s=this.funcColsService.getRowGroupColumns().findIndex(n=>n.getColId()===e.getColId());return t>s}isSuppressAutoCol(){return this.gos.get("groupDisplayType")==="custom"?!0:this.gos.get("treeDataDisplayType")==="custom"}setAutoHeightActive(){this.autoHeightActive=this.cols.list.some(e=>e.isAutoHeight()),this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,this.gos.isRowModelType("clientSide")||this.gos.isRowModelType("serverSide")||M("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}restoreColOrder(){const e=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!e)return;const t=new Map(e.map((a,u)=>[a,u]));if(!this.cols.list.some(a=>t.has(a)))return;const s=new Map(this.cols.list.map(a=>[a,!0])),n=e.filter(a=>s.has(a)),r=new Map(n.map(a=>[a,!0])),o=this.cols.list.filter(a=>!r.has(a)),l=n.slice();o.forEach(a=>{let u=a.getOriginalParent();if(!u){l.push(a);return}const c=[];for(;!c.length&&u;)u.getLeafColumns().forEach(f=>{const m=l.indexOf(f)>=0,w=c.indexOf(f)<0;m&&w&&c.push(f)}),u=u.getOriginalParent();if(!c.length){l.push(a);return}const d=c.map(p=>l.indexOf(p)),h=Math.max(...d);dd(l,a,h+1)}),this.cols.list=l}orderColsLikeColDefCols(){if(!this.colDefCols||!this.cols)return;const e=this.colDefCols.list.filter(i=>this.cols.list.indexOf(i)>=0),t=this.cols.list.filter(i=>e.indexOf(i)<0);this.cols.list=[...t,...e],this.cols.list=this.columnMoveService.placeLockedColumns(this.cols.list)}sortColsLikeKeys(e){if(this.cols==null)return;let t=[];const i={};e.forEach(n=>{if(i[n])return;const r=this.cols.map[n];r&&(t.push(r),i[n]=!0)});let s=0;if(this.cols.list.forEach(n=>{const r=n.getColId();if(i[r]!=null)return;r.startsWith(Ka)?dd(t,n,s++):t.push(n)}),t=this.columnMoveService.placeLockedColumns(t),!this.columnMoveService.doesMovePassMarryChildren(t)){M("Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.cols.list=t}sortColsLikeCols(e){!e||e.length<=1||e.filter(i=>this.cols.list.indexOf(i)<0).length>0||e.sort((i,s)=>{const n=this.cols.list.indexOf(i),r=this.cols.list.indexOf(s);return n-r})}resetColDefIntoCol(e,t){const i=e.getUserProvidedColDef();if(!i)return!1;const s=this.columnFactory.addColumnDefaultAndTypes(i,e.getColId());return e.setColDef(s,i,t),!0}queueResizeOperations(){this.shouldQueueResizeOperations=!0}isShouldQueueResizeOperations(){return this.shouldQueueResizeOperations}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}moveInCols(e,t,i){var s;QP((s=this.cols)==null?void 0:s.list,e,t),this.visibleColsService.refresh(i)}positionLockedCols(){this.cols.list=this.columnMoveService.placeLockedColumns(this.cols.list)}saveColOrder(){var e,t;this.showingPivotResult?this.lastPivotOrder=(e=this.cols)==null?void 0:e.list:this.lastOrder=(t=this.cols)==null?void 0:t.list}getColumnDefs(){if(!this.colDefCols)return;const e=this.colDefCols.list.slice();this.showingPivotResult?e.sort((s,n)=>this.lastOrder.indexOf(s)-this.lastOrder.indexOf(n)):this.lastOrder&&e.sort((s,n)=>this.cols.list.indexOf(s)-this.cols.list.indexOf(n));const t=this.funcColsService.getRowGroupColumns(),i=this.funcColsService.getPivotColumns();return this.columnDefFactory.buildColumnDefs(e,t,i)}isShowingPivotResult(){return this.showingPivotResult}isChangeEventsDispatching(){return this.changeEventsDispatching}isColSpanActive(){return this.colSpanActive}isProvidedColGroupsPresent(){var e;return((e=this.colDefCols)==null?void 0:e.treeDepth)>0}setColSpanActive(){this.colSpanActive=this.cols.list.some(e=>e.getColDef().colSpan!=null)}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}getHeaderRowCount(){return this.cols?this.cols.treeDepth+1:-1}isReady(){return this.ready}isPivotMode(){return this.pivotMode}setPivotMode(e,t){e===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode)||(this.pivotMode=e,this.ready&&(this.refreshCols(),this.visibleColsService.refresh(t),this.eventDispatcher.pivotModeChanged()))}isPivotSettingAllowed(e){return e&&this.gos.get("treeData")?(M("Pivot mode not available with treeData."),!1):!0}isPivotActive(){const e=this.funcColsService.getPivotColumns();return this.pivotMode&&!lt(e)}recreateColumnDefs(e){this.cols&&(this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e),this.createColsFromColDefs(!0,e))}setColumnDefs(e,t){const i=!!this.colDefs;this.colDefs=e,this.createColsFromColDefs(i,t)}destroy(){var e,t;Kr(this.context,(e=this.colDefCols)==null?void 0:e.tree),Kr(this.context,(t=this.autoCols)==null?void 0:t.tree),super.destroy()}getColTree(){return this.cols.tree}getColDefColTree(){return this.colDefCols.tree}getColDefCols(){var e;return(e=this.colDefCols)!=null&&e.list?this.colDefCols.list:null}getCols(){var e;return((e=this.cols)==null?void 0:e.list)??[]}getAllCols(){var i,s;const e=this.pivotResultColsService.getPivotResultCols(),t=e==null?void 0:e.list;return[].concat(((i=this.colDefCols)==null?void 0:i.list)||[],((s=this.autoCols)==null?void 0:s.list)||[],t||[])}getColsForKeys(e){return e?e.map(i=>this.getCol(i)).filter(i=>i!=null):[]}getColDefCol(e){var t;return(t=this.colDefCols)!=null&&t.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColFromCollection(e,t){if(t==null)return null;const{map:i,list:s}=t;if(typeof e=="string"&&i[e])return i[e];for(let n=0;n<s.length;n++)if(mS(s[n],e))return s[n];return this.getAutoCol(e)}getAutoCol(e){return this.autoCols==null?null:this.autoCols.list.find(t=>mS(t,e))||null}getAutoCols(){var e;return((e=this.autoCols)==null?void 0:e.list)||null}setColHeaderHeight(e,t){e.setAutoHeaderHeight(t)&&this.eventDispatcher.headerHeight(e)}getColumnGroupHeaderRowHeight(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()}getColumnHeaderRowHeight(){const e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),i=this.visibleColsService.getAllCols().filter(s=>s.isAutoHeaderHeight()).map(s=>s.getAutoHeaderHeight()||0);return Math.max(e,...i)}getHeaderHeight(){return this.gos.get("headerHeight")??this.environment.getDefaultHeaderHeight()}getFloatingFiltersHeight(){return this.gos.get("floatingFiltersHeight")??this.getHeaderHeight()}getGroupHeaderHeight(){return this.gos.get("groupHeaderHeight")??this.getHeaderHeight()}getPivotHeaderHeight(){return this.gos.get("pivotHeaderHeight")??this.getHeaderHeight()}getPivotGroupHeaderHeight(){return this.gos.get("pivotGroupHeaderHeight")??this.getGroupHeaderHeight()}onFirstDataRendered(){const e=this.gos.get("autoSizeStrategy");if((e==null?void 0:e.type)!=="fitCellContents")return;const{colIds:t,skipHeader:i}=e;setTimeout(()=>{t?this.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:i,source:"autosizeColumns"}):this.columnAutosizeService.autoSizeAllColumns("autosizeColumns",i)})}onAutoGroupColumnDefChanged(e){this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e)}};function qr(e){return e==="gridOptionsUpdated"?"gridOptionsChanged":e}function zG(e){e.map={},e.list.forEach(t=>e.map[t.getId()]=t)}function mS(e,t){const i=e===t,s=e.getColDef()===t,n=e.getColId()==t;return i||s||n}function UG(e,t){return gr(e,t,(i,s)=>i.getColId()===s.getColId())}var jG=class extends T{constructor(){super(...arguments),this.beanName="columnAutosizeService",this.timesDelayed=0}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.animationFrameService=e.animationFrameService,this.autoWidthCalculator=e.autoWidthCalculator,this.eventDispatcher=e.columnEventDispatcher,this.ctrlsService=e.ctrlsService,this.renderStatusService=e.renderStatusService}autoSizeCols(e){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeCols(e));return}const{colKeys:t,skipHeader:i,skipHeaderGroups:s,stopAtGroup:n,source:r="api"}=e;if(this.animationFrameService.flushAllFrames(),this.timesDelayed<5&&this.renderStatusService&&!this.renderStatusService.areHeaderCellsRendered()){this.timesDelayed++,setTimeout(()=>this.autoSizeCols(e));return}this.timesDelayed=0;const o=[];let l=-1;const a=i??this.gos.get("skipHeaderOnAutoSize"),u=s??a;for(;l!==0;){l=0;const c=[];t.forEach(d=>{if(!d)return;const h=this.columnModel.getCol(d);if(!h||o.indexOf(h)>=0)return;const p=this.autoWidthCalculator.getPreferredWidthForColumn(h,a);if(p>0){const f=this.normaliseColumnWidth(h,p);h.setActualWidth(f,r),o.push(h),l++}c.push(h)}),c.length&&this.visibleColsService.refresh(r)}u||this.autoSizeColumnGroupsByColumns(t,r,n),this.eventDispatcher.columnResized(o,!0,"autosizeColumns")}autoSizeColumn(e,t,i){e&&this.autoSizeCols({colKeys:[e],skipHeader:i,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,i){const s=new Set;this.columnModel.getColsForKeys(e).forEach(l=>{let a=l.getParent();for(;a&&a!=i;)a.isPadding()||s.add(a),a=a.getParent()});let r;const o=[];for(const l of s){for(const a of this.ctrlsService.getHeaderRowContainerCtrls())if(r=a.getHeaderCtrlForColumn(l),r)break;r&&r.resizeLeafColumnsToFit(t)}return o}autoSizeAllColumns(e,t){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeAllColumns(e,t));return}const i=this.visibleColsService.getAllCols();this.autoSizeCols({colKeys:i,skipHeader:t,source:e})}normaliseColumnWidth(e,t){const i=e.getMinWidth();t<i&&(t=i);const s=e.getMaxWidth();return e.isGreaterThanMax(t)&&(t=s),t}},$G=class extends T{constructor(){super(...arguments),this.beanName="funcColsService",this.rowGroupCols=[],this.valueCols=[],this.pivotCols=[]}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.aggFuncService=e.aggFuncService,this.visibleColsService=e.visibleColsService}getModifyColumnsNoEventsCallbacks(){return{addGroupCol:e=>this.rowGroupCols.push(e),removeGroupCol:e=>xt(this.rowGroupCols,e),addPivotCol:e=>this.pivotCols.push(e),removePivotCol:e=>xt(this.pivotCols,e),addValueCol:e=>this.valueCols.push(e),removeValueCol:e=>xt(this.valueCols,e)}}getSourceColumnsForGroupColumn(e){const t=e.getColDef().showRowGroup;if(!t)return null;if(t===!0)return this.rowGroupCols.slice(0);const i=this.columnModel.getColDefCol(t);return i?[i]:null}sortRowGroupColumns(e){this.rowGroupCols.sort(e)}sortPivotColumns(e){this.pivotCols.sort(e)}getValueColumns(){return this.valueCols?this.valueCols:[]}getPivotColumns(){return this.pivotCols?this.pivotCols:[]}getRowGroupColumns(){return this.rowGroupCols?this.rowGroupCols:[]}isRowGroupEmpty(){return lt(this.rowGroupCols)}setColumnAggFunc(e,t,i){if(!e)return;const s=this.columnModel.getColDefCol(e);s&&(s.setAggFunc(t),this.eventDispatcher.columnChanged("columnValueChanged",[s],i))}setRowGroupColumns(e,t){this.setColList(e,this.rowGroupCols,"columnRowGroupChanged",!0,!0,(i,s)=>this.setRowGroupActive(i,s,t),t)}setRowGroupActive(e,t,i){e!==t.isRowGroupActive()&&(t.setRowGroupActive(e,i),e&&!this.gos.get("suppressRowGroupHidesColumns")&&this.columnModel.setColsVisible([t],!1,i),!e&&!this.gos.get("suppressMakeColumnVisibleAfterUnGroup")&&this.columnModel.setColsVisible([t],!0,i))}addRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!0,!0,i=>this.setRowGroupActive(!0,i,t),"columnRowGroupChanged",t)}removeRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!1,!0,i=>this.setRowGroupActive(!1,i,t),"columnRowGroupChanged",t)}addPivotColumns(e,t){this.updateColList(e,this.pivotCols,!0,!1,i=>i.setPivotActive(!0,t),"columnPivotChanged",t)}setPivotColumns(e,t){this.setColList(e,this.pivotCols,"columnPivotChanged",!0,!1,(i,s)=>{s.setPivotActive(i,t)},t)}removePivotColumns(e,t){this.updateColList(e,this.pivotCols,!1,!1,i=>i.setPivotActive(!1,t),"columnPivotChanged",t)}setValueColumns(e,t){this.setColList(e,this.valueCols,"columnValueChanged",!1,!1,(i,s)=>this.setValueActive(i,s,t),t)}setValueActive(e,t,i){if(e!==t.isValueActive()&&(t.setValueActive(e,i),e&&!t.getAggFunc()&&this.aggFuncService)){const s=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(s)}}addValueColumns(e,t){this.updateColList(e,this.valueCols,!0,!1,i=>this.setValueActive(!0,i,t),"columnValueChanged",t)}removeValueColumns(e,t){this.updateColList(e,this.valueCols,!1,!1,i=>this.setValueActive(!1,i,t),"columnValueChanged",t)}moveRowGroupColumn(e,t,i){if(this.isRowGroupEmpty())return;const s=this.rowGroupCols[e],n=this.rowGroupCols.slice(e,t);this.rowGroupCols.splice(e,1),this.rowGroupCols.splice(t,0,s),this.eventDispatcher.rowGroupChanged(n,i)}setColList(e,t,i,s,n,r,o){const l=this.columnModel.getCols();if(lt(l))return;const a=new Map;t.forEach((c,d)=>a.set(c,d)),t.length=0,A(e)&&e.forEach(c=>{const d=this.columnModel.getColDefCol(c);d&&t.push(d)}),t.forEach((c,d)=>{const h=a.get(c);if(h===void 0){a.set(c,0);return}s&&h!==d||a.delete(c)}),(this.columnModel.getColDefCols()||[]).forEach(c=>{const d=t.indexOf(c)>=0;r(d,c)}),n&&this.columnModel.refreshCols(),this.visibleColsService.refresh(o),this.eventDispatcher.columnChanged(i,[...a.keys()],o)}updateColList(e,t,i,s,n,r,o){if(!e||lt(e))return;let l=!1;e.forEach(a=>{if(!a)return;const u=this.columnModel.getColDefCol(a);if(u){if(i){if(t.indexOf(u)>=0)return;t.push(u)}else{if(t.indexOf(u)<0)return;xt(t,u)}n(u),l=!0}}),l&&(s&&this.columnModel.refreshCols(),this.visibleColsService.refresh(o),this.eventDispatcher.genericColumnEvent(r,t,o))}extractCols(e,t){this.extractRowGroupCols(e,t),this.extractPivotCols(e,t),this.extractValueCols(e,t)}extractValueCols(e,t){this.valueCols=this.extractColsCommon(t,this.valueCols,(i,s)=>i.setValueActive(s,e),()=>{},()=>{},i=>{const s=i.aggFunc;if(s===null||s==="")return null;if(s!==void 0)return!!s},i=>i.initialAggFunc!=null&&i.initialAggFunc!=""),this.valueCols.forEach(i=>{const s=i.getColDef();s.aggFunc!=null&&s.aggFunc!=""?i.setAggFunc(s.aggFunc):i.getAggFunc()||i.setAggFunc(s.initialAggFunc)})}extractRowGroupCols(e,t){this.rowGroupCols=this.extractColsCommon(t,this.rowGroupCols,(i,s)=>i.setRowGroupActive(s,e),i=>i.rowGroupIndex,i=>i.initialRowGroupIndex,i=>i.rowGroup,i=>i.initialRowGroup)}extractPivotCols(e,t){this.pivotCols=this.extractColsCommon(t,this.pivotCols,(i,s)=>i.setPivotActive(s,e),i=>i.pivotIndex,i=>i.initialPivotIndex,i=>i.pivot,i=>i.initialPivot)}extractColsCommon(e=[],t=[],i,s,n,r,o){const l=[],a=[];(this.columnModel.getColDefCols()||[]).forEach(h=>{const p=e.indexOf(h)<0,f=h.getColDef(),m=Rg(r(f)),w=Rg(o(f)),v=qn(s(f)),g=qn(n(f));let y;m!==void 0?y=m:v!==void 0?v===null?y=!1:y=v>=0:p?w!==void 0?y=w:g!==void 0?y=g!=null&&g>=0:y=!1:y=t.indexOf(h)>=0,y&&((p?v!=null||g!=null:v!=null)?l.push(h):a.push(h))});const c=h=>{const p=s(h.getColDef()),f=n(h.getColDef());return p??f};l.sort((h,p)=>{const f=c(h),m=c(p);return f===m?0:f<m?-1:1});const d=[].concat(l);return t.forEach(h=>{a.indexOf(h)>=0&&d.push(h)}),a.forEach(h=>{d.indexOf(h)<0&&d.push(h)}),t.forEach(h=>{d.indexOf(h)<0&&i(h,!1)}),d.forEach(h=>{t.indexOf(h)<0&&i(h,!0)}),d}generateColumnStateForRowGroupAndPivotIndexes(e,t){const i={},s=(n,r,o,l,a,u)=>{const c=this.columnModel.getColDefCols();if(!r.length||!c)return[];const d=Object.keys(n),h=new Set(d),p=new Set(d),f=new Set(r.map(R=>{const E=R.getColId();return p.delete(E),E}).concat(d)),m=[],w={};let v=0;for(let R=0;R<c.length;R++){const E=c[R].getColId();f.has(E)&&(m.push(E),w[E]=v++)}let g=1e3,y=!1,S=0;const b=R=>{const E=w[R];for(let x=S;x<E;x++){const I=m[x];p.has(I)&&(n[I][a]=g++,p.delete(I))}S=E};r.forEach(R=>{const E=R.getColId();if(h.has(E))b(E),n[E][a]=g++;else{const x=R.getColDef();(x[a]===null||x[a]===void 0&&x[u]==null)&&(y||(x[o]||x[o]===void 0&&x[l]?b(E):(p.forEach(G=>{n[G][a]=g+w[G]}),g+=m.length,y=!0)),i[E]||(i[E]={colId:E}),i[E][a]=g++)}})};return s(e,this.rowGroupCols,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),s(t,this.pivotCols,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(i)}},KG=class extends T{constructor(){super(...arguments),this.beanName="columnApplyStateService"}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.sortController=e.sortController,this.columnGetStateService=e.columnGetStateService,this.funcColsService=e.funcColsService,this.visibleColsService=e.visibleColsService,this.columnAnimationService=e.columnAnimationService,this.pivotResultColsService=e.pivotResultColsService}applyColumnState(e,t){const i=this.columnModel.getColDefCols()||[];if(lt(i))return!1;if(e&&e.state&&!e.state.forEach)return M("applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;const s=this.funcColsService.getModifyColumnsNoEventsCallbacks(),n=(l,a,u)=>{const c=this.compareColumnStatesAndDispatchEvents(t),d=a.slice(),h={},p={},f=[],m=[];let w=0;const v=this.funcColsService.getRowGroupColumns().slice(),g=this.funcColsService.getPivotColumns().slice();l.forEach(R=>{const E=R.colId||"";if(E.startsWith(Ka)){f.push(R),m.push(R);return}const I=u(E);I?(this.syncColumnWithStateItem(I,R,e.defaultState,h,p,!1,t,s),xt(d,I)):(m.push(R),w+=1)});const y=R=>this.syncColumnWithStateItem(R,null,e.defaultState,h,p,!1,t,s);d.forEach(y),this.funcColsService.sortRowGroupColumns(vS.bind(this,h,v)),this.funcColsService.sortPivotColumns(vS.bind(this,p,g)),this.columnModel.refreshCols();const b=(this.columnModel.getAutoCols()||[]).slice();return f.forEach(R=>{const E=this.columnModel.getAutoCol(R.colId);xt(b,E),this.syncColumnWithStateItem(E,R,e.defaultState,null,null,!0,t,s)}),b.forEach(y),this.orderLiveColsLikeState(e),this.visibleColsService.refresh(t),this.eventDispatcher.everythingChanged(t),c(),{unmatchedAndAutoStates:m,unmatchedCount:w}};this.columnAnimationService.start();let{unmatchedAndAutoStates:r,unmatchedCount:o}=n(e.state||[],i,l=>this.columnModel.getColDefCol(l));if(r.length>0||A(e.defaultState)){const l=this.pivotResultColsService.getPivotResultCols(),a=l==null?void 0:l.list;o=n(r,a||[],u=>this.pivotResultColsService.getPivotResultCol(u)).unmatchedCount}return this.columnAnimationService.finish(),o===0}resetColumnState(e){const t=this.columnModel.getColDefCols();if(lt(t))return;const i=this.columnModel.getColDefColTree(),s=Hv(i),n=[];let r=1e3,o=1e3,l=[];const a=this.columnModel.getAutoCols();a&&(l=l.concat(a)),s&&(l=l.concat(s)),l.forEach(u=>{const c=this.getColumnStateFromColDef(u);X(c.rowGroupIndex)&&c.rowGroup&&(c.rowGroupIndex=r++),X(c.pivotIndex)&&c.pivot&&(c.pivotIndex=o++),n.push(c)}),this.applyColumnState({state:n,applyOrder:!0},e)}getColumnStateFromColDef(e){const t=(f,m)=>f??m??null,i=e.getColDef(),s=t(i.sort,i.initialSort),n=t(i.sortIndex,i.initialSortIndex),r=t(i.hide,i.initialHide),o=t(i.pinned,i.initialPinned),l=t(i.width,i.initialWidth),a=t(i.flex,i.initialFlex);let u=t(i.rowGroupIndex,i.initialRowGroupIndex),c=t(i.rowGroup,i.initialRowGroup);u==null&&(c==null||c==!1)&&(u=null,c=null);let d=t(i.pivotIndex,i.initialPivotIndex),h=t(i.pivot,i.initialPivot);d==null&&(h==null||h==!1)&&(d=null,h=null);const p=t(i.aggFunc,i.initialAggFunc);return{colId:e.getColId(),sort:s,sortIndex:n,hide:r,pinned:o,width:l,flex:a,rowGroup:c,rowGroupIndex:u,pivot:h,pivotIndex:d,aggFunc:p}}syncColumnWithStateItem(e,t,i,s,n,r,o,l){if(!e)return;const a=(S,b)=>{const R={value1:void 0,value2:void 0};let E=!1;return t&&(t[S]!==void 0&&(R.value1=t[S],E=!0),A(b)&&t[b]!==void 0&&(R.value2=t[b],E=!0)),!E&&i&&(i[S]!==void 0&&(R.value1=i[S]),A(b)&&i[b]!==void 0&&(R.value2=i[b])),R},u=a("hide").value1;u!==void 0&&e.setVisible(!u,o);const c=a("pinned").value1;c!==void 0&&e.setPinned(c);const d=e.getColDef().minWidth??tF,h=a("flex").value1;if(h!==void 0&&e.setFlex(h),h==null){const S=a("width").value1;S!=null&&d!=null&&S>=d&&e.setActualWidth(S,o)}const p=a("sort").value1;p!==void 0&&(p==="desc"||p==="asc"?e.setSort(p,o):e.setSort(void 0,o));const f=a("sortIndex").value1;if(f!==void 0&&e.setSortIndex(f),r||!e.isPrimary())return;const m=a("aggFunc").value1;m!==void 0&&(typeof m=="string"?(e.setAggFunc(m),e.isValueActive()||(e.setValueActive(!0,o),l.addValueCol(e))):(A(m)&&M("stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,o),l.removeValueCol(e))));const{value1:w,value2:v}=a("rowGroup","rowGroupIndex");(w!==void 0||v!==void 0)&&(typeof v=="number"||w?(e.isRowGroupActive()||(e.setRowGroupActive(!0,o),l.addGroupCol(e)),s&&typeof v=="number"&&(s[e.getId()]=v)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,o),l.removeGroupCol(e)));const{value1:g,value2:y}=a("pivot","pivotIndex");(g!==void 0||y!==void 0)&&(typeof y=="number"||g?(e.isPivotActive()||(e.setPivotActive(!0,o),l.addPivotCol(e)),n&&typeof y=="number"&&(n[e.getId()]=y)):e.isPivotActive()&&(e.setPivotActive(!1,o),l.removePivotCol(e)))}orderLiveColsLikeState(e){if(!e.applyOrder||!e.state)return;const t=[];e.state.forEach(i=>{i.colId!=null&&t.push(i.colId)}),this.columnModel.sortColsLikeKeys(t)}compareColumnStatesAndDispatchEvents(e){const t={rowGroupColumns:this.funcColsService.getRowGroupColumns().slice(),pivotColumns:this.funcColsService.getPivotColumns().slice(),valueColumns:this.funcColsService.getValueColumns().slice()},i=this.columnGetStateService.getColumnState(),s={};return i.forEach(n=>{s[n.colId]=n}),()=>{const n=this.columnModel.getAllCols(),r=(m,w,v,g)=>{const y=w.map(g),S=v.map(g);if(gr(y,S))return;const R=new Set(w);v.forEach(I=>{R.delete(I)||R.add(I)});const E=[...R],x={type:m,columns:E,column:E.length===1?E[0]:null,source:e};this.eventService.dispatchEvent(x)},o=m=>{const w=[];return n.forEach(v=>{const g=s[v.getColId()];g&&m(g,v)&&w.push(v)}),w},l=m=>m.getColId();r("columnRowGroupChanged",t.rowGroupColumns,this.funcColsService.getRowGroupColumns(),l),r("columnPivotChanged",t.pivotColumns,this.funcColsService.getPivotColumns(),l);const u=o((m,w)=>{const v=m.aggFunc!=null,g=v!=w.isValueActive(),y=v&&m.aggFunc!=w.getAggFunc();return g||y});u.length>0&&this.eventDispatcher.columnChanged("columnValueChanged",u,e);const c=(m,w)=>m.width!=w.getActualWidth();this.eventDispatcher.columnResized(o(c),!0,e);const d=(m,w)=>m.pinned!=w.getPinned();this.eventDispatcher.columnPinned(o(d),e);const h=(m,w)=>m.hide==w.isVisible();this.eventDispatcher.columnVisible(o(h),e);const f=o((m,w)=>m.sort!=w.getSort()||m.sortIndex!=w.getSortIndex());f.length>0&&this.sortController.dispatchSortChangedEvents(e,f),this.normaliseColumnMovedEventForColumnState(i,e)}}normaliseColumnMovedEventForColumnState(e,t){const i=this.columnGetStateService.getColumnState(),s={};i.forEach(a=>s[a.colId]=a);const n={};e.forEach(a=>{s[a.colId]&&(n[a.colId]=!0)});const r=e.filter(a=>n[a.colId]),o=i.filter(a=>n[a.colId]),l=[];o.forEach((a,u)=>{const c=r&&r[u];if(c&&c.colId!==a.colId){const d=this.columnModel.getCol(c.colId);d&&l.push(d)}}),l.length&&this.eventDispatcher.columnMoved({movedColumns:l,source:t,finished:!0})}},vS=(e,t,i,s)=>{const n=e[i.getId()],r=e[s.getId()],o=n!=null,l=r!=null;if(o&&l)return n-r;if(o)return-1;if(l)return 1;const a=t.indexOf(i),u=t.indexOf(s),c=a>=0,d=u>=0;return c&&d?a-u:c?-1:1},qG=class extends T{constructor(){super(...arguments),this.beanName="columnMoveService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher}moveColumnByIndex(e,t,i){const s=this.columnModel.getCols();if(!s)return;const n=s[e];this.moveColumns([n],t,i)}moveColumns(e,t,i,s=!0){const n=this.columnModel.getCols();if(!n)return;if(this.columnAnimationService.start(),t>n.length-e.length){M("tried to insert columns in invalid location, toIndex = ",t),M("remember that you should not count the moving columns when calculating the new index");return}const r=this.columnModel.getColsForKeys(e);this.doesMovePassRules(r,t)&&(this.columnModel.moveInCols(r,t,i),this.eventDispatcher.columnMoved({movedColumns:r,source:i,toIndex:t,finished:s}),this.columnAnimationService.finish())}doesMovePassRules(e,t){const i=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(i)}doesOrderPassRules(e){return!(!this.doesMovePassMarryChildren(e)||!this.doesMovePassLockedPositions(e))}getProposedColumnOrder(e,t){const s=this.columnModel.getCols().slice();return QP(s,e,t),s}doesMovePassLockedPositions(e){const t=r=>r?r==="left"||r===!0?-1:1:0,i=this.gos.get("enableRtl");let s=i?1:-1,n=!0;return e.forEach(r=>{const o=t(r.getColDef().lockPosition);i?o>s&&(n=!1):o<s&&(n=!1),s=o}),n}doesMovePassMarryChildren(e){let t=!0;const i=this.columnModel.getColTree();return xs(null,i,s=>{if(!Tt(s))return;const n=s,r=n.getColGroupDef();if(!(r&&r.marryChildren))return;const l=[];n.getLeafColumns().forEach(h=>{const p=e.indexOf(h);l.push(p)});const a=Math.max.apply(Math,l),u=Math.min.apply(Math,l),c=a-u,d=n.getLeafColumns().length-1;c>d&&(t=!1)}),t}placeLockedColumns(e){const t=[],i=[],s=[];return e.forEach(r=>{const o=r.getColDef().lockPosition;o==="right"?s.push(r):o==="left"||o===!0?t.push(r):i.push(r)}),this.gos.get("enableRtl")?[...s,...i,...t]:[...t,...i,...s]}},YG=/[&<>"']/g,QG={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Zi(e,t){if(e==null)return null;const i=e.toString().toString();return t?i:i.replace(YG,s=>QG[s])}function JG(e){if(!e||e==null)return null;const t=/([a-z])([A-Z])/g,i=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(i,"$1 $2$3").replace(/\./g," ").split(" ").map(n=>n.substring(0,1).toUpperCase()+(n.length>1?n.substring(1,n.length):"")).join(" ")}var XG=class extends T{constructor(){super(...arguments),this.beanName="columnNameService"}wireBeans(e){this.expressionService=e.expressionService,this.funcColsService=e.funcColsService,this.columnModel=e.columnModel}getDisplayNameForColumn(e,t,i=!1){if(!e)return null;const s=this.getHeaderName(e.getColDef(),e,null,null,t);return i?this.wrapHeaderNameWithAggFunc(e,s):s}getDisplayNameForProvidedColumnGroup(e,t,i){const s=t?t.getColGroupDef():null;return s?this.getHeaderName(s,null,e,t,i):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,i,s,n){const r=e.headerValueGetter;if(r){const o=this.gos.addGridCommonParams({colDef:e,column:t,columnGroup:i,providedColumnGroup:s,location:n});return typeof r=="function"?r(o):typeof r=="string"?this.expressionService.evaluate(r,o):(M("headerValueGetter must be a function or a string"),"")}else{if(e.headerName!=null)return e.headerName;if(e.field)return JG(e.field)}return""}wrapHeaderNameWithAggFunc(e,t){if(this.gos.get("suppressAggFuncInHeader"))return t;const i=e.getColDef().pivotValueColumn,s=A(i);let n=null,r;if(s){const o=this.funcColsService.getValueColumns(),l=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&o.length===1,a=e.getColDef().pivotTotalColumnIds!==void 0;if(l&&!a)return t;n=i?i.getAggFunc():null,r=!0}else{const o=e.isValueActive(),l=this.columnModel.isPivotMode()||!this.funcColsService.isRowGroupEmpty();o&&l?(n=e.getAggFunc(),r=!0):r=!1}if(r){const o=typeof n=="string"?n:"func";return`${this.localeService.getLocaleTextFunc()(o,o)}(${t})`}return t}},ZG=class extends T{constructor(){super(...arguments),this.beanName="pivotResultColsService"}wireBeans(e){this.context=e.context,this.columnModel=e.columnModel,this.columnFactory=e.columnFactory,this.visibleColsService=e.visibleColsService}destroy(){var e;Kr(this.context,(e=this.pivotResultCols)==null?void 0:e.tree),super.destroy()}isPivotResultColsPresent(){return this.pivotResultCols!=null}lookupPivotResultCol(e,t){if(this.pivotResultCols==null)return null;const i=this.columnModel.getColDefCol(t);let s=null;return this.pivotResultCols.list.forEach(n=>{const r=n.getColDef().pivotKeys,o=n.getColDef().pivotValueColumn;gr(r,e)&&o===i&&(s=n)}),s}getPivotResultCols(){return this.pivotResultCols}getPivotResultCol(e){return this.pivotResultCols?this.columnModel.getColFromCollection(e,this.pivotResultCols):null}setPivotResultCols(e,t){var i,s;if(this.columnModel.isReady()&&!(e==null&&this.pivotResultCols==null)){if(e){this.processPivotResultColDef(e);const n=this.columnFactory.createColumnTree(e,!1,((i=this.pivotResultCols)==null?void 0:i.tree)||this.previousPivotResultCols||void 0,t);Kr(this.context,(s=this.pivotResultCols)==null?void 0:s.tree,n.columnTree);const r=n.columnTree,o=n.treeDept,l=Hv(r),a={};this.pivotResultCols={tree:r,treeDepth:o,list:l,map:a},this.pivotResultCols.list.forEach(u=>this.pivotResultCols.map[u.getId()]=u),this.previousPivotResultCols=null}else this.previousPivotResultCols=this.pivotResultCols?this.pivotResultCols.tree:null,this.pivotResultCols=null;this.columnModel.refreshCols(),this.visibleColsService.refresh(t)}}processPivotResultColDef(e){const t=this.gos.get("processPivotResultColDef"),i=this.gos.get("processPivotResultColGroupDef");if(!t&&!i)return;const s=n=>{n.forEach(r=>{if(A(r.children)){const l=r;i&&i(l),s(l.children)}else t&&t(r)})};e&&s(e)}},eH=class extends T{constructor(){super(...arguments),this.beanName="columnSizeService"}wireBeans(e){this.columnModel=e.columnModel,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}setColumnWidths(e,t,i,s){const n=[];e.forEach(r=>{const o=this.columnModel.getColDefCol(r.key)||this.columnModel.getCol(r.key);if(!o)return;if(n.push({width:r.newWidth,ratios:[1],columns:[o]}),this.gos.get("colResizeDefault")==="shift"&&(t=!t),t){const a=this.visibleColsService.getColAfter(o);if(!a)return;const u=o.getActualWidth()-r.newWidth,c=a.getActualWidth()+u;n.push({width:c,ratios:[1],columns:[a]})}}),n.length!==0&&this.resizeColumnSets({resizeSets:n,finished:i,source:s})}resizeColumnSets(e){const{resizeSets:t,finished:i,source:s}=e;if(!(!t||t.every(c=>this.checkMinAndMaxWidthsForSet(c)))){if(i){const c=t&&t.length>0?t[0].columns:null;this.eventDispatcher.columnResized(c,i,s)}return}const r=[],o=[];t.forEach(c=>{const{width:d,columns:h,ratios:p}=c,f={},m={};h.forEach(g=>o.push(g));let w=!0,v=0;for(;w;){if(v++,v>1e3){oe("infinite loop in resizeColumnSets");break}w=!1;const g=[];let y=0,S=d;h.forEach((R,E)=>{if(m[R.getId()])S-=f[R.getId()];else{g.push(R);const I=p[E];y+=I}});const b=1/y;g.forEach((R,E)=>{const x=E===g.length-1;let I;x?I=S:(I=Math.round(p[E]*d*b),S-=I);const D=R.getMinWidth(),G=R.getMaxWidth();I<D?(I=D,m[R.getId()]=!0,w=!0):G>0&&I>G&&(I=G,m[R.getId()]=!0,w=!0),f[R.getId()]=I})}h.forEach(g=>{const y=f[g.getId()];g.getActualWidth()!==y&&(g.setActualWidth(y,s),r.push(g))})});const l=r.length>0;let a=[];l&&(a=this.refreshFlexedColumns({resizingCols:o,skipSetLeft:!0}),this.visibleColsService.setLeftValues(s),this.visibleColsService.updateBodyWidths(),this.columnViewportService.checkViewportColumns());const u=o.concat(a);(l||i)&&this.eventDispatcher.columnResized(u,i,s,a)}checkMinAndMaxWidthsForSet(e){const{columns:t,width:i}=e;let s=0,n=0,r=!0;t.forEach(a=>{const u=a.getMinWidth();s+=u||0;const c=a.getMaxWidth();c>0?n+=c:r=!1});const o=i>=s,l=!r||i<=n;return o&&l}refreshFlexedColumns(e={}){const t=e.source?e.source:"flex";if(e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];const i=this.visibleColsService.getCenterCols();let s=-1;if(e.resizingCols){const h=new Set(e.resizingCols);for(let p=i.length-1;p>=0;p--)if(h.has(i[p])){s=p;break}}let n=0,r=[],o=0,l=0;for(let h=0;h<i.length;h++)i[h].getFlex()&&h>s?(r.push(i[h]),l+=i[h].getFlex(),o+=i[h].getMinWidth()):n+=i[h].getActualWidth();if(!r.length)return[];let a=[];n+o>this.flexViewportWidth&&(r.forEach(h=>h.setActualWidth(h.getMinWidth(),t)),a=r,r=[]);const u=[];let c;e:for(;;){c=this.flexViewportWidth-n;const h=c/l;for(let p=0;p<r.length;p++){const f=r[p],m=h*f.getFlex();let w=0;const v=f.getMinWidth(),g=f.getMaxWidth();if(m<v?w=v:m>g&&(w=g),w){f.setActualWidth(w,t),YP(r,f),l-=f.getFlex(),a.push(f),n+=f.getActualWidth();continue e}u[p]=Math.round(m)}break}let d=c;return r.forEach((h,p)=>{h.setActualWidth(Math.min(u[p],d),t),a.push(h),d-=u[p]}),e.skipSetLeft||this.visibleColsService.setLeftValues(t),e.updateBodyWidths&&this.visibleColsService.updateBodyWidths(),e.fireResizedEvent&&this.eventDispatcher.columnResized(a,!0,t,r),r}sizeColumnsToFit(e,t="sizeColumnsToFit",i,s){var h;if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,i,s));return}const n={};s&&((h=s==null?void 0:s.columnLimits)==null||h.forEach(({key:p,...f})=>{n[typeof p=="string"?p:p.getColId()]=f}));const r=this.visibleColsService.getAllCols(),o=e===us(r);if(e<=0||!r.length||o)return;const l=[],a=[];r.forEach(p=>{p.getColDef().suppressSizeToFit===!0?a.push(p):l.push(p)});const u=l.slice(0);let c=!1;const d=p=>{xt(l,p),a.push(p)};for(l.forEach(p=>{p.resetActualWidth(t);const f=n==null?void 0:n[p.getId()],m=(f==null?void 0:f.minWidth)??(s==null?void 0:s.defaultMinWidth),w=(f==null?void 0:f.maxWidth)??(s==null?void 0:s.defaultMaxWidth),v=p.getActualWidth();typeof m=="number"&&v<m?p.setActualWidth(m,t,!0):typeof w=="number"&&v>w&&p.setActualWidth(w,t,!0)});!c;){c=!0;const p=e-us(a);if(p<=0)l.forEach(f=>{var w;const m=((w=n==null?void 0:n[f.getId()])==null?void 0:w.minWidth)??(s==null?void 0:s.defaultMinWidth);if(typeof m=="number"){f.setActualWidth(m,t,!0);return}f.setMinimum(t)});else{const f=p/us(l);let m=p;for(let w=l.length-1;w>=0;w--){const v=l[w],g=n==null?void 0:n[v.getId()],y=(g==null?void 0:g.minWidth)??(s==null?void 0:s.defaultMinWidth),S=(g==null?void 0:g.maxWidth)??(s==null?void 0:s.defaultMaxWidth),b=v.getMinWidth(),R=v.getMaxWidth(),E=typeof y=="number"&&y>b?y:b,x=typeof S=="number"&&S<R?S:R;let I=Math.round(v.getActualWidth()*f);I<E?(I=E,d(v),c=!1):I>x?(I=x,d(v),c=!1):w===0&&(I=m),v.setActualWidth(I,t,!0),m-=I}}}u.forEach(p=>{p.fireColumnWidthChangedEvent(t)}),this.visibleColsService.setLeftValues(t),this.visibleColsService.updateBodyWidths(),!i&&this.eventDispatcher.columnResized(u,!0,t)}applyAutosizeStrategy(){const e=this.gos.get("autoSizeStrategy");if(!e)return;const{type:t}=e;setTimeout(()=>{if(t==="fitGridWidth"){const{columnLimits:i,defaultMinWidth:s,defaultMaxWidth:n}=e,r=i==null?void 0:i.map(({colId:o,minWidth:l,maxWidth:a})=>({key:o,minWidth:l,maxWidth:a}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:s,defaultMaxWidth:n,columnLimits:r})}else t==="fitProvidedWidth"&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")})}};function sF(e,t){return e+"_"+t}function je(e){return e instanceof nF}var nF=class extends T{constructor(e,t,i,s){super(),this.isColumn=!1,this.displayedChildren=[],this.parent=null,this.groupId=t,this.partId=i,this.providedColumnGroup=e,this.pinned=s}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return sF(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{je(e)&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const t=se(this.displayedChildren).getLeft();this.setLeft(t)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach(t=>{e+=t.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(t=>{t.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(t=>{e+=t.getMinWidth()}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}addDisplayedLeafColumns(e){this.displayedChildren.forEach(t=>{yn(t)?e.push(t):je(t)&&t.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(t=>{yn(t)?e.push(t):je(t)&&t.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}this.children.forEach(i=>{if(je(i)&&(!i.displayedChildren||!i.displayedChildren.length))return;switch(i.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(i);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(i);break;default:this.displayedChildren.push(i);break}}),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},rF=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let i;return typeof t!="number"?i=0:i=t+1,this.existingIds[e]=i,i}},tH=class extends T{constructor(){super(...arguments),this.beanName="visibleColsService",this.colsAndGroupsMap={},this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher}refresh(e,t=!1){t||this.buildTrees(),this.updateOpenClosedVisibilityInColumnGroups(),this.columnsLeft=Op(this.treeLeft),this.columnsCenter=Op(this.treeCenter),this.columnsRight=Op(this.treeRight),this.joinColsAriaOrder(),this.joinCols(),this.setLeftValues(e),this.autoHeightCols=this.columns.filter(i=>i.isAutoHeight()),this.columnSizeService.refreshFlexedColumns(),this.updateBodyWidths(),this.columnViewportService.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(e),this.eventDispatcher.visibleCols()}updateBodyWidths(){const e=us(this.columnsCenter),t=us(this.columnsLeft),i=us(this.columnsRight);if(this.bodyWidthDirty=this.bodyWidth!==e,this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==i){this.bodyWidth=e,this.leftWidth=t,this.rightWidth=i;const n={type:"columnContainerWidthChanged"};this.eventService.dispatchEvent(n);const r={type:"displayedColumnsWidthChanged"};this.eventService.dispatchEvent(r)}}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e){let t,i;this.gos.get("enableRtl")?(t=this.columnsLeft?this.columnsLeft[0]:null,i=this.columnsRight?se(this.columnsRight):null):(t=this.columnsLeft?se(this.columnsLeft):null,i=this.columnsRight?this.columnsRight[0]:null),this.columnModel.getCols().forEach(s=>{s.setLastLeftPinned(s===t,e),s.setFirstRightPinned(s===i,e)})}buildTrees(){const e=this.columnModel.getColsToShow(),t=e.filter(r=>r.getPinned()=="left"),i=e.filter(r=>r.getPinned()=="right"),s=e.filter(r=>r.getPinned()!="left"&&r.getPinned()!="right"),n=new rF;this.treeLeft=this.createGroups({columns:t,idCreator:n,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=this.createGroups({columns:i,idCreator:n,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=this.createGroups({columns:s,idCreator:n,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.ariaOrderColumns=[]}joinColsAriaOrder(){const e=this.columnModel.getCols(),t=[],i=[],s=[];for(const n of e){const r=n.getPinned();r?r===!0||r==="left"?t.push(n):s.push(n):i.push(n)}this.ariaOrderColumns=t.concat(i).concat(s)}getAriaColIndex(e){let t;return je(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}getAllAutoHeightCols(){return this.autoHeightCols}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach(e=>{e.forEach(t=>{je(t)&&t.checkLeft()})})}setLeftValuesOfCols(e){if(!this.columnModel.getColDefCols())return;const i=this.columnModel.getCols().slice(0),s=this.gos.get("enableRtl");[this.columnsLeft,this.columnsRight,this.columnsCenter].forEach(n=>{if(s){let r=us(n);n.forEach(o=>{r-=o.getActualWidth(),o.setLeft(r,e)})}else{let r=0;n.forEach(o=>{o.setLeft(r,e),r+=o.getActualWidth()})}EG(i,n)}),i.forEach(n=>{n.setLeft(null,e)})}joinCols(){this.gos.get("enableRtl")?this.columns=this.columnsRight.concat(this.columnsCenter).concat(this.columnsLeft):this.columns=this.columnsLeft.concat(this.columnsCenter).concat(this.columnsRight)}getColsCenter(){return this.columnsCenter}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}getTreeLeft(){return this.treeLeft}getTreeRight(){return this.treeRight}getTreeCenter(){return this.treeCenter}getAllCols(){return this.columns}isColDisplayed(e){return this.getAllCols().indexOf(e)>=0}getLeftColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsLeft):this.columnsLeft}getRightColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsRight):this.columnsRight}getColsForRow(e,t,i,s){const n=[];let r=null;for(let o=0;o<t.length;o++){const l=t[o],a=t.length-o,u=Math.min(l.getColSpan(e),a),c=[l];if(u>1){const h=u-1;for(let p=1;p<=h;p++)c.push(t[o+p]);o+=h}let d;i?(d=!1,c.forEach(h=>{i(h)&&(d=!0)})):d=!0,d&&(n.length===0&&r&&(s&&s(l))&&n.push(r),n.push(l)),r=l}return n}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getCenterCols(){return this.columnsCenter}getLeftCols(){return this.columnsLeft}getRightCols(){return this.columnsRight}getColBefore(e){const t=this.getAllCols(),i=t.indexOf(e);return i>0?t[i-1]:null}getGroupAtDirection(e,t){const i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),s=e.getDisplayedLeafColumns(),n=t==="After"?se(s):s[0],r=`getCol${t}`;for(;;){const o=this[r](n);if(!o)return null;const l=this.getColGroupAtLevel(o,i);if(l!==e)return l}}getColGroupAtLevel(e,t){let i=e.getParent(),s,n;for(;s=i.getProvidedColumnGroup().getLevel(),n=i.getPaddingLevel(),!(s+n<=t);)i=i.getParent();return i}isPinningLeft(){return this.columnsLeft.length>0}isPinningRight(){return this.columnsRight.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};Ln(this.treeCenter,!1,e),Ln(this.treeLeft,!1,e),Ln(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}updateOpenClosedVisibilityInColumnGroups(){const e=this.getAllTrees();Ln(e,!1,t=>{je(t)&&t.calculateDisplayedColumns()})}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["getLeftCols","getCenterCols","getRightCols"];e&&t.reverse();for(let i=0;i<t.length;i++){const s=this[t[i]]();if(s.length)return e?se(s):s[0]}return null}getColumnGroup(e,t){if(!e)return null;if(je(e))return e;const i=this.getAllTrees(),s=typeof t=="number";let n=null;return Ln(i,!1,r=>{if(je(r)){const o=r;let l;s?l=e===o.getGroupId()&&t===o.getPartId():l=e===o.getGroupId(),l&&(n=o)}}),n}getColAfter(e){const t=this.getAllCols(),i=t.indexOf(e);return i<t.length-1?t[i+1]:null}isBodyWidthDirty(){return this.bodyWidthDirty}setBodyWidthDirty(){this.bodyWidthDirty=!0}getColsLeftWidth(){return us(this.columnsLeft)}getDisplayedColumnsRightWidth(){return us(this.columnsRight)}isColAtEdge(e,t){const i=this.getAllCols();if(!i.length)return!1;const s=t==="first";let n;if(je(e)){const r=e.getDisplayedLeafColumns();if(!r.length)return!1;n=s?r[0]:se(r)}else n=e;return(s?i[0]:se(i))===n}createGroups(e){const{columns:t,idCreator:i,pinned:s,oldDisplayedGroups:n,isStandaloneStructure:r}=e,o=this.mapOldGroupsById(n),l=[];let a=t;for(;a.length;){const u=a;a=[];let c=0;const d=h=>{const p=c;c=h;const f=u[p],w=(je(f)?f.getProvidedColumnGroup():f).getOriginalParent();if(w==null){for(let g=p;g<h;g++)l.push(u[g]);return}const v=this.createColGroup(w,i,o,s,r);for(let g=p;g<h;g++)v.addChild(u[g]);a.push(v)};for(let h=1;h<u.length;h++){const p=u[h],m=(je(p)?p.getProvidedColumnGroup():p).getOriginalParent(),w=u[c],g=(je(w)?w.getProvidedColumnGroup():w).getOriginalParent();m!==g&&d(h)}c<u.length&&d(u.length)}return r||this.setupParentsIntoCols(l,null),l}createColGroup(e,t,i,s,n){const r=e.getGroupId(),o=t.getInstanceIdForKey(r),l=sF(r,o);let a=i[l];return a&&a.getProvidedColumnGroup()!==e&&(a=null),A(a)?a.reset():(a=new nF(e,r,o,s),n||this.createBean(a)),a}mapOldGroupsById(e){const t={},i=s=>{s.forEach(n=>{if(je(n)){const r=n;t[n.getUniqueId()]=r,i(r.getChildren())}})};return e&&i(e),t}setupParentsIntoCols(e,t){e.forEach(i=>{if(i.setParent(t),je(i)){const s=i;this.setupParentsIntoCols(s.getChildren(),s)}})}};function Ln(e,t,i){if(e)for(let s=0;s<e.length;s++){const n=e[s];if(je(n)){const r=t?n.getDisplayedChildren():n.getChildren();Ln(r,t,i)}i(n)}}function Op(e){const t=[];return Ln(e,!0,i=>{yn(i)&&t.push(i)}),t}var oF=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","rangeSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterOpened","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd"],iH=["scrollbarWidthChanged","keyShortcutChangedCellStart","keyShortcutChangedCellEnd","pinnedHeightChanged","cellFocusCleared","fullWidthRowFocused","checkboxChanged","heightScaleChanged","suppressMovableColumns","suppressMenuHide","suppressFieldDotNotation","columnPanelItemDragStart","columnPanelItemDragEnd","bodyHeightChanged","columnContainerWidthChanged","displayedColumnsWidthChanged","scrollVisibilityChanged","columnHoverChanged","flashCells","paginationPixelOffsetChanged","displayedRowsChanged","leftPinnedWidthChanged","rightPinnedWidthChanged","rowContainerHeightChanged","headerHeightChanged","columnHeaderHeightChanged","gridStylesChanged","storeUpdated","filterDestroyed","rowDataUpdateStarted","rowCountReady","advancedFilterEnabledChanged","dataTypesInferred","fieldValueChanged","fieldPickerValueSelected","richSelectListRowSelected","sideBarUpdated","alignedGridScroll","alignedGridColumn","gridOptionsChanged","chartTitleEdit","recalculateRowBounds","stickyTopOffsetChanged"],sH=[...oF,...iH],nH={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,removePivotHeaderRowWhenSingleValueColumn:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0},wt=class{};wt.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"];wt.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy"];wt.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"];wt.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"];wt.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading"];wt.OTHER_PROPERTIES=["suppressStickyTotalRow"];wt.FUNCTION_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"];wt.ALL_PROPERTIES=[...wt.ARRAY_PROPERTIES,...wt.OBJECT_PROPERTIES,...wt.STRING_PROPERTIES,...wt.NUMBER_PROPERTIES,...wt.FUNCTION_PROPERTIES,...wt.BOOLEAN_PROPERTIES,...wt.OTHER_PROPERTIES];var ba=wt,gi=class{static getCallbackForEvent(t){return!t||t.length<2?t:"on"+t[0].toUpperCase()+t.substring(1)}};gi.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY";gi.PUBLIC_EVENTS=oF;gi.EVENT_CALLBACKS=sH.map(e=>gi.getCallbackForEvent(e));gi.BOOLEAN_PROPERTIES=ba.BOOLEAN_PROPERTIES;gi.ALL_PROPERTIES=ba.ALL_PROPERTIES;gi.ALL_PROPERTIES_AND_CALLBACKS=[...gi.ALL_PROPERTIES,...gi.EVENT_CALLBACKS];gi.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(gi.ALL_PROPERTIES_AND_CALLBACKS);var Ea=gi;function rH(e,t){typeof e!="object"&&(e={});const i={...e};return Ea.ALL_PROPERTIES_AND_CALLBACKS.forEach(n=>{const r=t[n];typeof r<"u"&&r!==Ea.VUE_OMITTED_PROPERTY&&(i[n]=r)}),i}function oH(e,t){if(!e)return;const i={};let s=!1;if(Object.keys(e).filter(o=>Ea.ALL_PROPERTIES_AND_CALLBACKS_SET.has(o)).forEach(o=>{i[o]=e[o],s=!0}),!s)return;const n={type:"gridOptionsChanged",options:i};t.dispatchEvent(n);const r={type:"componentStateChanged"};Ii(i,(o,l)=>{r[o]=l}),t.dispatchEvent(r)}var qa=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){const t=(e||"").split(" ");if(t.length>1){t.forEach(s=>this.addCssClass(s));return}if(this.cssClassStates[e]!==!0&&e.length){const s=this.getGui();s&&s.classList.add(e),this.cssClassStates[e]=!0}}removeCssClass(e){const t=(e||"").split(" ");if(t.length>1){t.forEach(s=>this.removeCssClass(s));return}if(this.cssClassStates[e]!==!1&&e.length){const s=this.getGui();s&&s.classList.remove(e),this.cssClassStates[e]=!1}}containsCssClass(e){const t=this.getGui();return t?t.classList.contains(e):!1}addOrRemoveCssClass(e,t){if(!e)return;if(e.indexOf(" ")>=0){const s=(e||"").split(" ");if(s.length>1){s.forEach(n=>this.addOrRemoveCssClass(n,t));return}}if(this.cssClassStates[e]!==t&&e.length){const s=this.getGui();s&&s.classList.toggle(e,t),this.cssClassStates[e]=t}}};function Ls(e,t,i){i==null||typeof i=="string"&&i==""?lF(e,t):ss(e,t,i)}function ss(e,t,i){e.setAttribute(aF(t),i.toString())}function lF(e,t){e.removeAttribute(aF(t))}function aF(e){return`aria-${e}`}function Hi(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function lH(e){let t;return e==="asc"?t="ascending":e==="desc"?t="descending":e==="mixed"?t="other":t="none",t}function aH(e){return e.getAttribute("aria-label")}function Io(e,t){Ls(e,"label",t)}function Pa(e,t){Ls(e,"labelledby",t)}function uF(e,t){Ls(e,"live",t)}function uH(e,t){Ls(e,"atomic",t)}function cH(e,t){Ls(e,"relevant",t)}function dH(e,t){Ls(e,"disabled",t)}function Vv(e,t){Ls(e,"hidden",t)}function pd(e,t){ss(e,"expanded",t)}function hH(e,t){ss(e,"setsize",t)}function pH(e,t){ss(e,"posinset",t)}function fH(e,t){ss(e,"rowcount",t)}function gH(e,t){ss(e,"rowindex",t)}function mH(e,t){ss(e,"colcount",t)}function cF(e,t){ss(e,"colindex",t)}function vH(e,t){ss(e,"colspan",t)}function CH(e,t){ss(e,"sort",t)}function wH(e){lF(e,"sort")}function fd(e,t){Ls(e,"selected",t)}function yH(e,t){Ls(e,"controls",t.id),Pa(t,e.id)}function Bv(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var Np,Tu,Gp,Hp,Vp,Bp,Tg,xg;function Is(){return Np===void 0&&(Np=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),Np}function dF(){if(Tu===void 0)if(Is()){const e=navigator.userAgent.match(/version\/(\d+)/i);e&&(Tu=e[1]!=null?parseFloat(e[1]):0)}else Tu=0;return Tu}function Wv(){if(Gp===void 0){const e=window;Gp=!!e.chrome&&(!!e.chrome.webstore||!!e.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return Gp}function hF(){return Hp===void 0&&(Hp=/(firefox)/i.test(navigator.userAgent)),Hp}function pF(){return Vp===void 0&&(Vp=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),Vp}function xn(){return Bp===void 0&&(Bp=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),Bp}function CS(){return!Is()||dF()>=15}function Ig(e){if(!e)return null;const t=e.tabIndex,i=e.getAttribute("tabIndex");return t===-1&&(i===null||i===""&&!hF())?null:t.toString()}function SH(){if(!document.body)return-1;let e=1e6;const t=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,i=document.createElement("div");for(document.body.appendChild(i);;){const s=e*2;if(i.style.height=s+"px",s>t||i.clientHeight!==s)break;e=s}return document.body.removeChild(i),e}function RH(){var e,t;return((e=document.body)==null?void 0:e.clientWidth)??(window.innerHeight||((t=document.documentElement)==null?void 0:t.clientWidth)||-1)}function bH(){var e,t;return((e=document.body)==null?void 0:e.clientHeight)??(window.innerHeight||((t=document.documentElement)==null?void 0:t.clientHeight)||-1)}function EH(){return xg==null&&fF(),xg}function fF(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let i=t.offsetWidth-t.clientWidth;i===0&&t.clientWidth===0&&(i=null),t.parentNode&&t.parentNode.removeChild(t),i!=null&&(xg=i,Tg=i===0)}function gF(){return Tg==null&&fF(),Tg}var xu,PH="[tabindex], input, select, button, textarea, [href]",mF="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function zv(e){const t=Element.prototype.matches||Element.prototype.msMatchesSelector,i="input, select, button, textarea",s=t.call(e,i),n=t.call(e,mF),r=is(e);return s&&!n&&r}function Me(e,t,i={}){const{skipAriaHidden:s}=i;e.classList.toggle("ag-hidden",!t),s||Vv(e,!t)}function FH(e,t,i={}){const{skipAriaHidden:s}=i;e.classList.toggle("ag-invisible",!t),s||Vv(e,!t)}function Fa(e,t){const i="disabled",s=t?n=>n.setAttribute(i,""):n=>n.removeAttribute(i);s(e),yF(e.querySelectorAll("input"),n=>s(n))}function co(e,t,i){let s=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof i=="number"){if(++s>i)break}else if(e===i)break}return!1}function mr(e){const{height:t,width:i,borderTopWidth:s,borderRightWidth:n,borderBottomWidth:r,borderLeftWidth:o,paddingTop:l,paddingRight:a,paddingBottom:u,paddingLeft:c,marginTop:d,marginRight:h,marginBottom:p,marginLeft:f,boxSizing:m}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(i||"0"),borderTopWidth:parseFloat(s||"0"),borderRightWidth:parseFloat(n||"0"),borderBottomWidth:parseFloat(r||"0"),borderLeftWidth:parseFloat(o||"0"),paddingTop:parseFloat(l||"0"),paddingRight:parseFloat(a||"0"),paddingBottom:parseFloat(u||"0"),paddingLeft:parseFloat(c||"0"),marginTop:parseFloat(d||"0"),marginRight:parseFloat(h||"0"),marginBottom:parseFloat(p||"0"),marginLeft:parseFloat(f||"0"),boxSizing:m}}function Uv(e){const t=mr(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom:t.height}function Ya(e){const t=mr(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight:t.width}function vF(e){const{height:t,marginBottom:i,marginTop:s}=mr(e);return Math.floor(t+i+s)}function gd(e){const{width:t,marginLeft:i,marginRight:s}=mr(e);return Math.floor(t+i+s)}function CF(e){const t=e.getBoundingClientRect(),{borderTopWidth:i,borderLeftWidth:s,borderRightWidth:n,borderBottomWidth:r}=mr(e);return{top:t.top+(i||0),left:t.left+(s||0),right:t.right+(n||0),bottom:t.bottom+(r||0)}}function md(){if(typeof xu=="boolean")return xu;const e=document.createElement("div");return e.style.direction="rtl",e.style.width="1px",e.style.height="1px",e.style.position="fixed",e.style.top="0px",e.style.overflow="hidden",e.dir="rtl",e.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(e),e.scrollLeft=1,xu=Math.floor(e.scrollLeft)===0,document.body.removeChild(e),xu}function vd(e,t){let i=e.scrollLeft;return t&&(i=Math.abs(i),Wv()&&!md()&&(i=e.scrollWidth-e.clientWidth-i)),i}function Cd(e,t,i){i&&(md()?t*=-1:(Is()||Wv())&&(t=e.scrollWidth-e.clientWidth-t)),e.scrollLeft=t}function si(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function ur(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function wF(e){return!!e.offsetParent}function is(e){const t=e;return t.checkVisibility?t.checkVisibility({checkVisibilityCSS:!0}):!(!wF(e)||window.getComputedStyle(e).visibility!=="visible")}function Do(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function TH(e){return e.clientWidth<e.scrollWidth}function xH(e){return e.clientHeight<e.scrollHeight}function wd(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):Oi(e,t)}function Oi(e,t){t=jv(t),e.style.width=t.toString(),e.style.maxWidth=t.toString(),e.style.minWidth=t.toString()}function Bl(e,t){t=jv(t),e.style.height=t.toString(),e.style.maxHeight=t.toString(),e.style.minHeight=t.toString()}function jv(e){return typeof e=="number"?`${e}px`:e}function $v(e){return e instanceof Node||e instanceof HTMLElement}function IH(e){if(e==null)return[];const t=[];return yF(e,i=>t.push(i)),t}function DH(e,t){if(e)for(let i=0;i<e.length;i++){const s=e[i];t(s.name,s.value)}}function ws(e,t,i){i==null?e.removeAttribute(t):e.setAttribute(t,i.toString())}function yF(e,t){if(e!=null)for(let i=0;i<e.length;i++)t(e[i])}var ko=class{constructor(e=0,t=1){this.nextValue=e,this.step=t}next(){const e=this.nextValue;return this.nextValue+=this.step,e}peek(){return this.nextValue}skip(e){this.nextValue+=e}},kH=1e3,MH=1e3,wS=100,SF=class _n extends T{constructor(t,i,s,n){super(),this.parentComp=t,this.tooltipShowDelayOverride=i,this.tooltipHideDelayOverride=s,this.shouldDisplayTooltip=n,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(t){this.popupService=t.popupService,this.userComponentFactory=t.userComponentFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const t=this.parentComp.getGui();this.tooltipTrigger===0&&this.addManagedListeners(t,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(t,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(t,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(t,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(t){const i=this.gos.get(t);return i<0&&M(`${t} should not be lower than 0`),Math.max(200,i)}getTooltipDelay(t){return t==="show"?this.tooltipShowDelayOverride??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipHideDelayOverride??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const t=this.gos.get("tooltipTrigger");return!t||t==="hover"?0:1}onMouseEnter(t){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!xn()&&(_n.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(t)},wS):this.prepareToShowTooltip(t))}onMouseMove(t){this.lastMouseEvent&&(this.lastMouseEvent=t),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(t){var r;const i=t.relatedTarget,s=this.parentComp.getGui(),n=(r=this.tooltipComp)==null?void 0:r.getGui();this.isInteractingWithTooltip||s.contains(i)||this.interactionEnabled&&(n!=null&&n.contains(i))||this.setToDoNothing()}onKeyDown(){this.setToDoNothing()}prepareToShowTooltip(t){if(this.state!=0||_n.isLocked)return;let i=0;t&&(i=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=t||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),i),this.state=1}isLastTooltipHiddenRecently(){const t=new Date().getTime(),i=_n.lastTooltipHideTime;return t-i<kH}setToDoNothing(){this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){const t={...this.parentComp.getTooltipParams()};if(!A(t.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip()){this.setToDoNothing();return}this.state=2,this.tooltipInstanceCount++;const i=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(t).newAgStackInstance().then(i)}hideTooltip(t){if(!t&&this.isInteractingWithTooltip)return;this.tooltipComp&&(this.destroyTooltipComp(),_n.lastTooltipHideTime=new Date().getTime());const i={type:"tooltipHide",parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(i),t&&(this.isInteractingWithTooltip=!1),this.state=0}newTooltipComponentCallback(t,i){if(this.state!==2||this.tooltipInstanceCount!==t){this.destroyBean(i);return}const n=i.getGui();this.tooltipComp=i,n.classList.contains("ag-tooltip")||n.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&n.classList.add("ag-tooltip-animate"),this.interactionEnabled&&n.classList.add("ag-tooltip-interactive");const r=this.localeService.getLocaleTextFunc(),o=this.popupService.addPopup({eChild:n,ariaLabel:r("ariaLabelTooltip","Tooltip")});if(o&&(this.tooltipPopupDestroyFunc=o.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){const a=this.setToDoNothing.bind(this);[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:a,columnMoved:a})}this.interactionEnabled&&(this.tooltipTrigger===0?[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(n,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}):[this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(n,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}));const l={type:"tooltipShow",tooltipGui:n,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(l),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isInteractingWithTooltip=!1,this.lockService()}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}onTooltipFocusOut(t){var r;const i=this.parentComp.getGui(),s=(r=this.tooltipComp)==null?void 0:r.getGui(),n=t.relatedTarget;s!=null&&s.contains(n)||(this.isInteractingWithTooltip=!1,i.contains(n)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const t={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent({...t,mouseEvent:this.lastMouseEvent}):this.popupService.positionPopupByComponent({...t,eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5})}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const t=this.tooltipPopupDestroyFunc,i=this.tooltipComp,s=this.tooltipTrigger===0?MH:0;window.setTimeout(()=>{t(),this.destroyBean(i)},s),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(t=>{t&&t()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){_n.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},wS)}unlockService(){_n.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};SF.isLocked=!1;var AH=SF,Ko=class extends T{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}wireBeans(e){this.beans=e}postConstruct(){this.refreshToolTip()}setBrowserTooltip(e){const t="title",i=this.ctrl.getGui();i&&(e!=null&&e!=""?i.setAttribute(t,e):i.removeAttribute(t))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){var t,i,s,n;if(this.tooltipManager!=null)return;const e={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new AH(e,(i=(t=this.ctrl).getTooltipShowDelayOverride)==null?void 0:i.call(t),(n=(s=this.ctrl).getTooltipHideDelayOverride)==null?void 0:n.call(s),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){const e=this.ctrl,t=e.getColumn?e.getColumn():void 0,i=e.getColDef?e.getColDef():void 0,s=e.getRowNode?e.getRowNode():void 0;return{location:e.getLocation(),colDef:i,column:t,rowIndex:e.getRowIndex?e.getRowIndex():void 0,node:s,data:s?s.data:void 0,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?e.getValueFormatted():void 0,hideTooltipCallback:()=>{var n;return(n=this.tooltipManager)==null?void 0:n.hideTooltip(!0)}}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}},_H=new ko,z=null,be=class RF extends T{constructor(t,i){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=_H.next(),this.cssClassManager=new qa(()=>this.eGui),this.componentSelectors=new Map((i??[]).map(s=>[s.selector,s])),t&&this.setTemplate(t)}preWireBeans(t){super.preWireBeans(t)}preConstruct(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips"),this.wireTemplate(this.getGui())}wireTemplate(t,i){t&&this.gos&&(this.applyElementsToComponent(t),this.createChildComponentsFromTags(t,i))}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(t){const{newTooltipText:i,showDelayOverride:s,hideDelayOverride:n,location:r,shouldDisplayTooltip:o}=t||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==i&&(this.tooltipText=i);const l=()=>this.tooltipText;i!=null&&(this.tooltipFeature=this.createBean(new Ko({getTooltipValue:l,getGui:()=>this.getGui(),getLocation:()=>r??"UNKNOWN",getColDef:t==null?void 0:t.getColDef,getColumn:t==null?void 0:t.getColumn,getTooltipShowDelayOverride:s!=null?()=>s:void 0,getTooltipHideDelayOverride:n!=null?()=>n:void 0,shouldDisplayTooltip:o})))}getDataRefAttribute(t){return t.getAttribute?t.getAttribute("data-ref"):null}applyElementsToComponent(t,i,s,n=null){if(i===void 0&&(i=this.getDataRefAttribute(t)),i){const r=this[i];if(r===z)this[i]=n??t;else{const o=s&&s[i];!this.suppressDataRefValidation&&!o&&M(`Issue with data-ref: ${i} on ${this.constructor.name} with ${r}`)}}}createChildComponentsFromTags(t,i){IH(t.childNodes).forEach(n=>{if(!(n instanceof HTMLElement))return;const r=this.createComponentFromElement(n,o=>{o.getGui()&&this.copyAttributesFromNode(n,o.getGui())},i);if(r){if(r.addItems&&n.children.length){this.createChildComponentsFromTags(n,i);const o=Array.prototype.slice.call(n.children);r.addItems(o)}this.swapComponentForNode(r,t,n)}else n.childNodes&&this.createChildComponentsFromTags(n,i)})}createComponentFromElement(t,i,s){const n=t.nodeName,r=this.getDataRefAttribute(t),o=n.indexOf("AG-")===0,l=o?this.componentSelectors.get(n):null;let a=null;if(l){RF.elementGettingCreated=t;const u=s&&r?s[r]:void 0;a=new l.component(u),a.setParentComponent(this),this.createBean(a,null,i)}else o&&M(`Missing selector: ${n}`);return this.applyElementsToComponent(t,r,s,a),a}copyAttributesFromNode(t,i){DH(t.attributes,(s,n)=>i.setAttribute(s,n))}swapComponentForNode(t,i,s){const n=t.getGui();i.replaceChild(n,s),i.insertBefore(document.createComment(s.nodeName),n),this.addDestroyFunc(this.destroyBean.bind(this,t))}activateTabIndex(t){const i=this.gos.get("tabIndex");t||(t=[]),t.length||t.push(this.getGui()),t.forEach(s=>s.setAttribute("tabindex",i.toString()))}setTemplate(t,i,s){const n=Do(t);this.setTemplateFromElement(n,i,s)}setTemplateFromElement(t,i,s,n=!1){if(this.eGui=t,this.suppressDataRefValidation=n,i)for(let r=0;r<i.length;r++){const o=i[r];this.componentSelectors.set(o.selector,o)}this.wireTemplate(t,s)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(t){this.parentComponent=t}getParentComponent(){return this.parentComponent}setGui(t){this.eGui=t}queryForHtmlElement(t){return this.eGui.querySelector(t)}getContainerAndElement(t,i){let s=i;return t==null?null:(s||(s=this.eGui),$v(t)?{element:t,parent:s}:{element:t.getGui(),parent:s})}prependChild(t,i){const{element:s,parent:n}=this.getContainerAndElement(t,i)||{};!s||!n||n.insertAdjacentElement("afterbegin",s)}appendChild(t,i){const{element:s,parent:n}=this.getContainerAndElement(t,i)||{};!s||!n||n.appendChild(s)}isDisplayed(){return this.displayed}setVisible(t,i={}){if(t!==this.visible){this.visible=t;const{skipAriaHidden:s}=i;FH(this.eGui,t,{skipAriaHidden:s})}}setDisplayed(t,i={}){if(t!==this.displayed){this.displayed=t;const{skipAriaHidden:s}=i;Me(this.eGui,t,{skipAriaHidden:s});const n={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(n)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}addGuiEventListener(t,i,s){this.eGui.addEventListener(t,i,s),this.addDestroyFunc(()=>this.eGui.removeEventListener(t,i))}addCssClass(t){this.cssClassManager.addCssClass(t)}removeCssClass(t){this.cssClassManager.removeCssClass(t)}containsCssClass(t){return this.cssClassManager.containsCssClass(t)}addOrRemoveCssClass(t,i){this.cssClassManager.addOrRemoveCssClass(t,i)}},LH={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus",checkboxChecked:"checkbox-checked",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off"};function rs(e,t,i){const s=Zt(e,t,i);if(s){const{className:r}=s;if(typeof r=="string"&&r.indexOf("ag-icon")>-1||typeof r=="object"&&r["ag-icon"])return s}const n=document.createElement("span");return n.appendChild(s),n}function Zt(e,t,i,s){let n=null;const r=i&&i.getColDef().icons;if(r&&(n=r[e]),t&&!n){const o=t.get("icons");o&&(n=o[e])}if(n){let o;if(typeof n=="function")o=n();else if(typeof n=="string")o=n;else throw new Error("icon from grid options needs to be a string or a function");if(typeof o=="string")return Do(o);if($v(o))return o;M("iconRenderer should return back a string or a dom object")}else{const o=document.createElement("span");let l=LH[e];return l||(s?l=e:(M(`Did not find icon ${e}`),l="")),o.setAttribute("class",`ag-icon ag-icon-${l}`),o.setAttribute("unselectable","on"),Hi(o,"presentation"),o}}function bF(e,t,i){if(i===0)return!1;const s=Math.abs(e.clientX-t.clientX),n=Math.abs(e.clientY-t.clientY);return Math.max(s,n)<=i}var gn=class{constructor(e,t=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new $o,this.eElement=e,this.preventMouseClick=t;const i=this.onTouchStart.bind(this),s=this.onTouchMove.bind(this),n=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",i,{passive:!0}),this.eElement.addEventListener("touchmove",s,{passive:!0}),this.eElement.addEventListener("touchend",n,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",i,{passive:!0}),this.eElement.removeEventListener("touchmove",s,{passive:!0}),this.eElement.removeEventListener("touchend",n,{passive:!1})})}getActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;const t=this.touchStart;window.setTimeout(()=>{const i=this.touchStart===t;if(this.touching&&i&&!this.moved){this.moved=!0;const s={type:"longTap",touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(s)}},500)}onTouchMove(e){if(!this.touching)return;const t=this.getActiveTouch(e.touches);if(!t)return;!bF(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){const t={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(t),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){const e=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){const i={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(i),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}},OH=`<span class="ag-sort-indicator-container">
        <span data-ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>
        <span data-ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>
        <span data-ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>
        <span data-ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>
        <span data-ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>
    </span>`,Kv=class extends be{constructor(e){super(),this.eSortOrder=z,this.eSortAsc=z,this.eSortDesc=z,this.eSortMixed=z,this.eSortNone=z,e||this.setTemplate(OH)}wireBeans(e){this.sortController=e.sortController}attachCustomElements(e,t,i,s,n){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=i,this.eSortMixed=s,this.eSortNone=n}setupSort(e,t=!1){this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!(!this.column.isSortable()&&!this.column.getColDef().showRowGroup)&&(this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addManagedPropertyListener("unSortIcon",()=>this.updateIcons()),this.addManagedEventListeners({newColumnsLoaded:this.updateIcons.bind(this),sortChanged:this.onSortChanged.bind(this),columnRowGroupChanged:this.onSortChanged.bind(this)}),this.onSortChanged())}addInIcon(e,t,i){if(t==null)return;const s=Zt(e,this.gos,i);s&&t.appendChild(s)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){const t=e==="asc";Me(this.eSortAsc,t,{skipAriaHidden:!0})}if(this.eSortDesc){const t=e==="desc";Me(this.eSortDesc,t,{skipAriaHidden:!0})}if(this.eSortNone){const t=!this.column.getColDef().unSortIcon&&!this.gos.get("unSortIcon"),i=e==null;Me(this.eSortNone,!t&&i,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);const e=this.column.getColDef().showRowGroup;this.gos.isColumnsSortingCoupledToGroup()&&e&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){const e=this.sortController.getDisplaySortForColumn(this.column)==="mixed";Me(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){if(!this.eSortOrder)return;const e=this.sortController.getColumnsWithSortingOrdered(),t=this.sortController.getDisplaySortIndexForColumn(this.column)??-1,i=e.some(n=>this.sortController.getDisplaySortIndexForColumn(n)??-1>=1),s=t>=0&&i;Me(this.eSortOrder,s,{skipAriaHidden:!0}),t>=0?this.eSortOrder.textContent=(t+1).toString():si(this.eSortOrder)}},NH={selector:"AG-SORT-INDICATOR",component:Kv},GH=`<div class="ag-cell-label-container" role="presentation">
        <span data-ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
        <span data-ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>
        <div data-ref="eLabel" class="ag-header-cell-label" role="presentation">
            <span data-ref="eText" class="ag-header-cell-text"></span>
            <span data-ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
            <ag-sort-indicator data-ref="eSortIndicator"></ag-sort-indicator>
        </div>
    </div>`,Dg=class extends be{constructor(){super(...arguments),this.eFilter=z,this.eFilterButton=z,this.eSortIndicator=z,this.eMenu=z,this.eLabel=z,this.eText=z,this.eSortOrder=z,this.eSortAsc=z,this.eSortDesc=z,this.eSortMixed=z,this.eSortNone=z,this.lastMovingChanged=0}wireBeans(e){this.sortController=e.sortController,this.menuService=e.menuService,this.funcColsService=e.funcColsService}destroy(){super.destroy()}refresh(e){const t=this.params;return this.params=e,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort||this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon?!1:(this.setDisplayName(e),!0)}workOutTemplate(){let e=this.params.template??GH;return e=e&&e.trim?e.trim():e,e}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate,[NH]),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;const t=Zi(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=t)}}addInIcon(e,t,i){if(t==null)return;const s=Zt(e,this.gos,i);s&&t.appendChild(s)}setupTap(){const{gos:e}=this;if(e.get("suppressTouch"))return;const t=new gn(this.getGui(),!0),i=this.shouldSuppressMenuHide(),s=i&&A(this.eMenu),n=s?new gn(this.eMenu,!0):t;if(this.params.enableMenu){const r=s?"tap":"longTap",o=l=>this.params.showColumnMenuAfterMouseClick(l.touchStart);this.addManagedListeners(n,{[r]:o})}if(this.params.enableSorting){const r=o=>{var a,u;const l=o.touchStart.target;i&&((a=this.eMenu)!=null&&a.contains(l)||(u=this.eFilterButton)!=null&&u.contains(l))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListeners(t,{tap:r})}if(this.params.enableFilterButton){const r=new gn(this.eFilterButton,!0);this.addManagedListeners(r,{tap:()=>this.params.showFilter(this.eFilterButton)}),this.addDestroyFunc(()=>r.destroy())}this.addDestroyFunc(()=>t.destroy()),s&&this.addDestroyFunc(()=>n.destroy())}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){ur(this.eMenu),this.eMenu=void 0;return}const e=this.menuService.isLegacyMenuEnabled();this.addInIcon(e?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!e),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedElementListeners(this.eMenu,{click:()=>this.params.showColumnMenu(this.eMenu)}),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(e){const t=this.params.column,i=this.menuService.isLegacyMenuEnabled();if(e&&!i){if(this.menuService.isFilterMenuInHeaderEnabled(t))return this.params.showFilter(this.eFilterButton??this.eMenu??this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu(this.eMenu??this.eFilterButton??this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.createBean(new Kv(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListeners(this.params.column,{movingChanged:()=>{this.lastMovingChanged=new Date().getTime()}}),this.eLabel&&this.addManagedElementListeners(this.eLabel,{click:t=>{const i=this.params.column.isMoving(),n=new Date().getTime()-this.lastMovingChanged<50;if(!(i||n)){const l=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.params.progressSort(l)}}});const e=()=>{const t=this.params.column.getSort();if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",t==="asc"),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",t==="desc"),this.addOrRemoveCssClass("ag-header-cell-sorted-none",!t),this.params.column.getColDef().showRowGroup){const i=this.funcColsService.getSourceColumnsForGroupColumn(this.params.column),n=!(i==null?void 0:i.every(r=>this.params.column.getSort()==r.getSort()));this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",n)}};this.addManagedEventListeners({sortChanged:e,columnRowGroupChanged:e})}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedElementListeners(this.eFilterButton,{click:()=>this.params.showFilter(this.eFilterButton)}):this.eFilterButton=void 0}configureFilter(e,t,i){if(!e)return ur(t),!1;const s=this.params.column;return this.addInIcon("filter",t,s),this.addManagedListeners(s,{filterChanged:i}),i(),!0}onFilterChangedIcon(){const e=this.params.column.isFilterActive();Me(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){return e?this.eFilterButton??this.eMenu??this.getGui():this.eMenu??this.eFilterButton??this.getGui()}},HH=class extends be{constructor(){super(`<div class="ag-header-group-cell-label" role="presentation">
            <span data-ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span data-ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span data-ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`),this.agOpened=z,this.agClosed=z,this.agLabel=z}wireBeans(e){this.columnModel=e.columnModel}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&M("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened",this.agOpened),this.addInIcon("columnGroupClosed",this.agClosed);const e=n=>{if(fn(n))return;const r=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),r,"uiColumnExpanded")};this.addTouchAndClickListeners(this.agClosed,e),this.addTouchAndClickListeners(this.agOpened,e);const t=n=>{xo(n)};this.addManagedElementListeners(this.agClosed,{dblclick:t}),this.addManagedElementListeners(this.agOpened,{dblclick:t}),this.addManagedElementListeners(this.getGui(),{dblclick:e}),this.updateIconVisibility();const i=this.params.columnGroup.getProvidedColumnGroup(),s=this.updateIconVisibility.bind(this);this.addManagedListeners(i,{expandedChanged:s,expandableChanged:s})}addTouchAndClickListeners(e,t){const i=new gn(e,!0);this.addManagedListeners(i,{tap:t}),this.addDestroyFunc(()=>i.destroy()),this.addManagedElementListeners(e,{click:t})}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){const t=this.params.columnGroup.isExpanded();Me(this.agOpened,t),Me(this.agClosed,!t)}else Me(this.agOpened,!1),Me(this.agClosed,!1)}addInIcon(e,t){const i=Zt(e,this.gos,null);i&&t.appendChild(i)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable()){Me(this.agOpened,!1),Me(this.agClosed,!1);return}}setupLabel(){var i;const{displayName:e,columnGroup:t}=this.params;if(A(e)){const s=Zi(e,!0);this.agLabel.textContent=s}this.addOrRemoveCssClass("ag-sticky-label",!((i=t.getColGroupDef())!=null&&i.suppressStickyLabel))}},EF=(e=>(e.CommunityCoreModule="@ag-grid-community/core",e.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",e.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",e.CsvExportModule="@ag-grid-community/csv-export",e.EnterpriseCoreModule="@ag-grid-enterprise/core",e.RowGroupingModule="@ag-grid-enterprise/row-grouping",e.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",e.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",e.MenuModule="@ag-grid-enterprise/menu",e.SetFilterModule="@ag-grid-enterprise/set-filter",e.MultiFilterModule="@ag-grid-enterprise/multi-filter",e.StatusBarModule="@ag-grid-enterprise/status-bar",e.SideBarModule="@ag-grid-enterprise/side-bar",e.RangeSelectionModule="@ag-grid-enterprise/range-selection",e.MasterDetailModule="@ag-grid-enterprise/master-detail",e.RichSelectModule="@ag-grid-enterprise/rich-select",e.GridChartsModule="@ag-grid-enterprise/charts",e.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",e.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",e.ExcelExportModule="@ag-grid-enterprise/excel-export",e.ClipboardModule="@ag-grid-enterprise/clipboard",e.SparklinesModule="@ag-grid-enterprise/sparklines",e.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",e.AngularModule="@ag-grid-community/angular",e.ReactModule="@ag-grid-community/react",e.VueModule="@ag-grid-community/vue",e))(EF||{}),rh=class ae{static register(t){ae.__register(t,!0,void 0)}static registerModules(t){ae.__registerModules(t,!0,void 0)}static __register(t,i,s){ae.runVersionChecks(t),s!==void 0?(ae.areGridScopedModules=!0,ae.gridModulesMap[s]===void 0&&(ae.gridModulesMap[s]={}),ae.gridModulesMap[s][t.moduleName]=t):ae.globalModulesMap[t.moduleName]=t,ae.setModuleBased(i)}static __unRegisterGridModules(t){delete ae.gridModulesMap[t]}static __registerModules(t,i,s){ae.setModuleBased(i),t&&t.forEach(n=>ae.__register(n,i,s))}static isValidModuleVersion(t){const[i,s]=t.version.split(".")||[],[n,r]=ae.currentModuleVersion.split(".")||[];return i===n&&s===r}static runVersionChecks(t){ae.currentModuleVersion||(ae.currentModuleVersion=t.version);const i=s=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${s} Please update all modules to the same version.`;if(t.version?ae.isValidModuleVersion(t)||oe(i(`'${t.moduleName}' is version ${t.version} but the other modules are version ${ae.currentModuleVersion}.`)):oe(i(`'${t.moduleName}' is incompatible.`)),t.validate){const s=t.validate();s.isValid||oe(`${s.message}`)}}static setModuleBased(t){ae.moduleBased===void 0?ae.moduleBased=t:ae.moduleBased!==t&&(oe("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),oe("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information."))}static __setIsBundled(){ae.isBundled=!0}static __assertRegistered(t,i,s){var r;if(this.__isRegistered(t,s))return!0;let n;if(ae.isBundled)n=`AG Grid: unable to use ${i} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(ae.moduleBased||ae.moduleBased===void 0){const o=(r=Object.entries(EF).find(([l,a])=>a===t))==null?void 0:r[0];n=`AG Grid: unable to use ${i} as the ${o} is not registered${ae.areGridScopedModules?` for gridId: ${s}`:""}. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { ${o} } from '${t}';
    
    ModuleRegistry.registerModules([ ${o} ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else n=`AG Grid: unable to use ${i} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';`;return oe(n),!1}static __isRegistered(t,i){var s;return!!ae.globalModulesMap[t]||!!((s=ae.gridModulesMap[i])!=null&&s[t])}static __getRegisteredModules(t){return[...ic(ae.globalModulesMap),...ic(ae.gridModulesMap[t]||{})]}static __getGridRegisteredModules(t){return ic(ae.gridModulesMap[t]??{})||[]}static __isPackageBased(){return!ae.moduleBased}};rh.globalModulesMap={};rh.gridModulesMap={};rh.areGridScopedModules=!1;var Rt=rh,VH="↑",BH="↓",WH=class extends be{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-change-delta");const i=document.createElement("span");i.setAttribute("class","ag-value-change-value"),e.appendChild(t),e.appendChild(i),this.setTemplateFromElement(e)}wireBeans(e){this.filterManager=e.filterManager}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e,!0)}showDelta(e,t){const i=Math.abs(t),s=e.formatValue(i),n=A(s)?s:i,r=t>=0;r?this.eDelta.textContent=VH+n:this.eDelta.textContent=BH+n,this.eDelta.classList.toggle("ag-value-change-delta-up",r),this.eDelta.classList.toggle("ag-value-change-delta-down",!r)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),si(this.eDelta)}refresh(e,t=!1){var s;const i=e.value;if(i===this.lastValue||(A(e.valueFormatted)?this.eValue.textContent=e.valueFormatted:A(e.value)?this.eValue.textContent=i:si(this.eValue),(s=this.filterManager)!=null&&s.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof i=="number"&&typeof this.lastValue=="number"){const n=i-this.lastValue;this.showDelta(e,n)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=i,!0}},zH=class extends be{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-slide-current"),e.appendChild(t),this.setTemplateFromElement(e),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}wireBeans(e){this.filterManager=e.filterManager}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const t=document.createElement("span");t.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=t,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(e,t=!1){var s;let i=e.value;return X(i)&&(i=""),i===this.lastValue||(s=this.filterManager)!=null&&s.isSuppressFlashingCellsBecauseFiltering()?!1:(t||this.addSlideAnimation(),this.lastValue=i,A(e.valueFormatted)?this.eCurrent.textContent=e.valueFormatted:A(e.value)?this.eCurrent.textContent=i:si(this.eCurrent),!0)}},F=class{};F.BACKSPACE="Backspace";F.TAB="Tab";F.ENTER="Enter";F.ESCAPE="Escape";F.SPACE=" ";F.LEFT="ArrowLeft";F.UP="ArrowUp";F.RIGHT="ArrowRight";F.DOWN="ArrowDown";F.DELETE="Delete";F.F2="F2";F.PAGE_UP="PageUp";F.PAGE_DOWN="PageDown";F.PAGE_HOME="Home";F.PAGE_END="End";F.A="KeyA";F.C="KeyC";F.D="KeyD";F.V="KeyV";F.X="KeyX";F.Y="KeyY";F.Z="KeyZ";var UH=class extends be{constructor(e,t,i){super(t,i),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:i,labelAlignment:s,disabled:n}=this.config;n!=null&&this.setDisabled(n),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),i!=null&&this.setLabelWidth(i),this.setLabelAlignment(s||this.labelAlignment),this.refreshLabel()}refreshLabel(){si(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(Me(this.eLabel,!1),Hi(this.eLabel,"presentation")):(Me(this.eLabel,!0),Hi(this.eLabel,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){const i=this.getGui().classList;return i.toggle("ag-label-align-left",e==="left"),i.toggle("ag-label-align-right",e==="right"),i.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(wd(this.eLabel,e),this)}setDisabled(e){e=!!e;const t=this.getGui();return Fa(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},PF=class extends UH{constructor(e,t,i,s){super(e,t,i),this.className=s}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:i}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),i!=null&&this.onValueChange(i),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),i=this.getLabel();i==null||i==""||aH(e)!==null?Pa(e,""):Pa(e,t??"")}setAriaLabel(e){return Io(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return Oi(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}},Wn=class extends PF{constructor(e,t,i="text",s="input"){super(e,(e==null?void 0:e.template)??`
            <div role="presentation">
                <div data-ref="eLabel" class="ag-input-field-label"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${s} data-ref="eInput" class="ag-input-field-input"></${s}>
                </div>
            </div>`,[],t),this.inputType=i,this.displayFieldTag=s,this.eLabel=z,this.eWrapper=z,this.eInput=z}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;const{inputName:e,inputWidth:t}=this.config;e!=null&&this.setInputName(e),t!=null&&this.setInputWidth(t),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return wd(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){const t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return ws(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return Io(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return Fa(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)ws(this.eInput,"autocomplete",null);else{const t=typeof e=="string"?e:"off";ws(this.eInput,"autocomplete",t)}return this}},qv=class extends Wn{constructor(e,t="ag-checkbox",i="checkbox"){super(e,t,i),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){const t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(e,t,i){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:i});const s=this.getInputElement(),n={type:"checkboxChanged",id:s.id,name:s.name,selected:e,previousValue:t};this.eventService.dispatchEvent(n)}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),i=this.selected=e.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,t,e)}refreshSelectedClass(e){this.eWrapper.classList.toggle("ag-checked",e===!0),this.eWrapper.classList.toggle("ag-indeterminate",e==null)}},Yv={selector:"AG-CHECKBOX",component:qv},jH=class extends be{constructor(){super(`
            <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[Yv]),this.eCheckbox=z}init(e){this.params=e,this.updateCheckbox(e);const t=this.eCheckbox.getInputElement();t.setAttribute("tabindex","-1"),uF(t,"polite"),this.addManagedListeners(t,{click:i=>{if(xo(i),this.eCheckbox.isDisabled())return;const s=this.eCheckbox.getValue();this.onCheckboxChanged(s)},dblclick:i=>{xo(i)}}),this.addManagedElementListeners(this.params.eGridCell,{keydown:i=>{if(i.key===F.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===this.gos.getActiveDomElement()&&this.eCheckbox.toggle();const s=this.eCheckbox.getValue();this.onCheckboxChanged(s),i.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){var l;let t,i=!0;if(e.node.group&&e.column){const a=e.column.getColId();a.startsWith(Ka)?t=e.value==null||e.value===""?void 0:e.value==="true":e.node.aggData&&e.node.aggData[a]!==void 0?t=e.value??void 0:i=!1}else t=e.value??void 0;if(!i){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(t);const s=e.disabled!=null?e.disabled:!((l=e.column)!=null&&l.isCellEditable(e.node));this.eCheckbox.setDisabled(s);const n=this.localeService.getLocaleTextFunc(),r=Bv(n,t),o=s?r:`${n("ariaToggleCellValue","Press SPACE to toggle cell value")} (${r})`;this.eCheckbox.setInputAriaLabel(o)}onCheckboxChanged(e){const{column:t,node:i,value:s}=this.params,n={type:"cellEditingStarted",column:t,colDef:t==null?void 0:t.getColDef(),data:i.data,node:i,rowIndex:i.rowIndex,rowPinned:i.rowPinned,value:s};this.eventService.dispatchEvent(n);const r=this.params.node.setDataValue(this.params.column,e,"edit"),o={type:"cellEditingStopped",column:t,colDef:t==null?void 0:t.getColDef(),data:i.data,node:i,rowIndex:i.rowIndex,rowPinned:i.rowPinned,value:s,oldValue:s,newValue:e,valueChanged:r};this.eventService.dispatchEvent(o)}},$H=class extends be{constructor(){super(`<div class="ag-loading">
            <span class="ag-loading-icon" data-ref="eLoadingIcon"></span>
            <span class="ag-loading-text" data-ref="eLoadingText"></span>
        </div>`),this.eLoadingIcon=z,this.eLoadingText=z}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){const e=Zt("groupLoading",this.gos,null);e&&this.eLoadingIcon.appendChild(e);const t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}},KH=class extends be{constructor(){super('<div class="ag-skeleton-container"></div>')}init(e){const t=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",t),this.addDestroyFunc(()=>Pa(e.eParentOfValue)),Pa(e.eParentOfValue,t),e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.getGui().innerText=e("loadingError","ERR");const t=e("ariaSkeletonCellLoadingFailed","Row failed to load");Io(this.getGui(),t)}setupLoading(e){const i=this.gos.getDocument().createElement("div");i.classList.add("ag-skeleton-effect");const s=e.node.rowIndex;if(s!=null){const o=75+25*(s%2===0?Math.sin(s):Math.cos(s));i.style.width=`${o}%`}this.getGui().appendChild(i);const r=this.localeService.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");Io(this.getGui(),r)}refresh(e){return!1}destroy(){super.destroy()}},FF=class extends be{constructor(){super()}destroy(){super.destroy()}},qH=class extends FF{init(){const e=this.gos.get("overlayLoadingTemplate");if(this.setTemplate(e??'<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>'),!e){const t=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=t("loadingOoo","Loading...")})}}},YH=class extends FF{init(){const e=this.gos.get("overlayNoRowsTemplate");if(this.setTemplate(e??'<span class="ag-overlay-no-rows-center"></span>'),!e){const t=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=t("noRowsToShow","No Rows To Show")})}}},qo=class extends be{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},QH=class extends qo{constructor(){super('<div class="ag-tooltip"></div>')}init(e){const{value:t}=e;this.getGui().textContent=Zi(t,!0)}};function JH(e,t,i){const s={},n=e.filter(r=>!t.some(o=>o===r));return n.length>0&&n.forEach(r=>s[r]=TF(r,i).values),s}function TF(e,t,i,s){let n=t.map((l,a)=>({value:l,relevance:XH(e.toLowerCase(),l.toLocaleLowerCase()),idx:a}));if(n.sort((l,a)=>a.relevance-l.relevance),i&&(n=n.filter(l=>l.relevance!==0)),n.length>0&&s&&s>0){const a=n[0].relevance*s;n=n.filter(u=>a-u.relevance<0)}const r=[],o=[];for(const l of n)r.push(l.value),o.push(l.idx);return{values:r,indices:o}}function XH(e,t){const i=e.replace(/\s/g,""),s=t.replace(/\s/g,"");let n=0,r=-1;for(let o=0;o<i.length;o++){const l=s.indexOf(i[o],r+1);l!==-1&&(r=l,n+=100-r*100/1e4*100)}return n}var ZH=class extends T{constructor(){super(...arguments),this.beanName="userComponentRegistry",this.agGridDefaults={agColumnHeader:Dg,agColumnGroupHeader:HH,agSortIndicator:Kv,agAnimateShowChangeCellRenderer:WH,agAnimateSlideCellRenderer:zH,agLoadingCellRenderer:$H,agSkeletonCellRenderer:KH,agCheckboxCellRenderer:jH,agLoadingOverlay:qH,agNoRowsOverlay:YH,agTooltipComponent:QH},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agGroupCellRenderer:"@ag-grid-enterprise/row-grouping",agGroupRowRenderer:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}postConstruct(){const e=this.gos.get("components");e!=null&&Ii(e,(t,i)=>this.registerJsComponent(t,i))}registerDefaultComponent(e,t){this.agGridDefaults[e]=t}registerJsComponent(e,t){this.jsComps[e]=t}retrieve(e,t){const i=(l,a)=>({componentFromFramework:a,component:l}),s=this.getFrameworkOverrides().frameworkComponent(t,this.gos.get("components"));if(s!=null)return i(s,!0);const n=this.jsComps[t];if(n){const l=this.getFrameworkOverrides().isFrameworkComponent(n);return i(n,l)}const r=this.agGridDefaults[t];if(r)return i(r,!1);const o=this.enterpriseAgDefaultCompsModule[t];return o?Rt.__assertRegistered(o,`AG Grid '${e}' component: ${t}`,this.gridId):Nv(()=>{this.warnAboutMissingComponent(e,t)},"MissingComp"+t),null}warnAboutMissingComponent(e,t){const i=[...Object.keys(this.agGridDefaults).filter(n=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(n)),...Object.keys(this.jsComps)],s=TF(t,i,!0,.8).values;M(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.`),s.length>0&&M(`         Did you mean: [${s.slice(0,3)}]?`),M(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}},Ve=class El{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(i=>this.onDone(i),i=>this.onReject(i))}static all(t){return t.length?new El(i=>{let s=t.length;const n=new Array(s);t.forEach((r,o)=>{r.then(l=>{n[o]=l,s--,s===0&&i(n)})})}):El.resolve()}static resolve(t=null){return new El(i=>i(t))}then(t){return new El(i=>{this.status===1?i(t(this.resolution)):this.waiters.push(s=>i(t(s)))})}onDone(t){this.status=1,this.resolution=t,this.waiters.forEach(i=>i(t))}onReject(t){}},eV={propertyName:"dateComponent",cellRenderer:!1},tV={propertyName:"headerComponent",cellRenderer:!1},iV={propertyName:"headerGroupComponent",cellRenderer:!1},yS={propertyName:"cellRenderer",cellRenderer:!0},sV={propertyName:"cellRenderer",cellRenderer:!1},nV={propertyName:"loadingCellRenderer",cellRenderer:!0},rV={propertyName:"cellEditor",cellRenderer:!1},SS={propertyName:"innerRenderer",cellRenderer:!0},oV={propertyName:"loadingOverlayComponent",cellRenderer:!1},lV={propertyName:"noRowsOverlayComponent",cellRenderer:!1},aV={propertyName:"tooltipComponent",cellRenderer:!1},Qv={propertyName:"filter",cellRenderer:!1},uV={propertyName:"floatingFilterComponent",cellRenderer:!1},cV={propertyName:"toolPanel",cellRenderer:!1},dV={propertyName:"statusPanel",cellRenderer:!1},hV={propertyName:"fullWidthCellRenderer",cellRenderer:!0},pV={propertyName:"loadingCellRenderer",cellRenderer:!0},fV={propertyName:"groupRowRenderer",cellRenderer:!0},gV={propertyName:"detailCellRenderer",cellRenderer:!0},mV={propertyName:"menuItem",cellRenderer:!1},xF=class IF extends T{constructor(){super(...arguments),this.beanName="userComponentFactory"}wireBeans(t){this.agComponentUtils=t.agComponentUtils,this.componentMetadataProvider=t.componentMetadataProvider,this.userComponentRegistry=t.userComponentRegistry,this.frameworkComponentWrapper=t.frameworkComponentWrapper,this.gridOptions=t.gridOptions}getHeaderCompDetails(t,i){return this.getCompDetails(t,tV,"agColumnHeader",i)}getHeaderGroupCompDetails(t){const i=t.columnGroup.getColGroupDef();return this.getCompDetails(i,iV,"agColumnGroupHeader",t)}getFullWidthCellRendererDetails(t){return this.getCompDetails(this.gridOptions,hV,null,t,!0)}getFullWidthLoadingCellRendererDetails(t){return this.getCompDetails(this.gridOptions,pV,"agLoadingCellRenderer",t,!0)}getFullWidthGroupCellRendererDetails(t){return this.getCompDetails(this.gridOptions,fV,"agGroupRowRenderer",t,!0)}getFullWidthDetailCellRendererDetails(t){return this.getCompDetails(this.gridOptions,gV,"agDetailCellRenderer",t,!0)}getInnerRendererDetails(t,i){return this.getCompDetails(t,SS,null,i)}getFullWidthGroupRowInnerCellRenderer(t,i){return this.getCompDetails(t,SS,null,i)}getCellRendererDetails(t,i){return this.getCompDetails(t,yS,null,i)}getEditorRendererDetails(t,i){return this.getCompDetails(t,sV,null,i)}getLoadingCellRendererDetails(t,i){return this.getCompDetails(t,nV,"agSkeletonCellRenderer",i,!0)}getCellEditorDetails(t,i){return this.getCompDetails(t,rV,"agCellEditor",i,!0)}getFilterDetails(t,i,s){return this.getCompDetails(t,Qv,s,i,!0)}getDateCompDetails(t){return this.getCompDetails(this.gridOptions,eV,"agDateInput",t,!0)}getLoadingOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,oV,"agLoadingOverlay",t,!0)}getNoRowsOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,lV,"agNoRowsOverlay",t,!0)}getTooltipCompDetails(t){return this.getCompDetails(t.colDef,aV,"agTooltipComponent",t,!0)}getSetFilterCellRendererDetails(t,i){return this.getCompDetails(t,yS,null,i)}getFloatingFilterCompDetails(t,i,s){return this.getCompDetails(t,uV,s,i)}getToolPanelCompDetails(t,i){return this.getCompDetails(t,cV,null,i,!0)}getStatusPanelCompDetails(t,i){return this.getCompDetails(t,dV,null,i,!0)}getMenuItemCompDetails(t,i){return this.getCompDetails(t,mV,"agMenuItem",i,!0)}getCompDetails(t,i,s,n,r=!1){const{propertyName:o,cellRenderer:l}=i;let{compName:a,jsComp:u,fwComp:c,paramsFromSelector:d,popupFromSelector:h,popupPositionFromSelector:p}=IF.getCompKeys(this.frameworkOverrides,t,i,n);const f=g=>{const y=this.userComponentRegistry.retrieve(o,g);y&&(u=y.componentFromFramework?void 0:y.component,c=y.componentFromFramework?y.component:void 0)};if(a!=null&&f(a),u==null&&c==null&&s!=null&&f(s),u&&l&&!this.agComponentUtils.doesImplementIComponent(u)&&(u=this.agComponentUtils.adaptFunction(o,u)),!u&&!c){r&&oe(`Could not find component ${a}, did you forget to configure this component?`);return}const m=this.mergeParamsWithApplicationProvidedParams(t,i,n,d),w=u==null,v=u||c;return{componentFromFramework:w,componentClass:v,params:m,type:i,popupFromSelector:h,popupPositionFromSelector:p,newAgStackInstance:()=>this.newAgStackInstance(v,w,m,i)}}static getCompKeys(t,i,s,n){const{propertyName:r}=s;let o,l,a,u,c,d;if(i){const h=i,p=h[r+"Selector"],f=p?p(n):null,m=w=>{typeof w=="string"?o=w:w!=null&&w!==!0&&(t.isFrameworkComponent(w)?a=w:l=w)};f?(m(f.component),u=f.params,c=f.popup,d=f.popupPosition):m(h[r])}return{compName:o,jsComp:l,fwComp:a,paramsFromSelector:u,popupFromSelector:c,popupPositionFromSelector:d}}newAgStackInstance(t,i,s,n){const r=n.propertyName,o=!i;let l;if(o)l=new t;else{const u=this.componentMetadataProvider.retrieve(r);l=this.frameworkComponentWrapper.wrap(t,u.mandatoryMethodList,u.optionalMethodList,n)}const a=this.initComponent(l,s);return a==null?Ve.resolve(l):a.then(()=>l)}mergeParamsWithApplicationProvidedParams(t,i,s,n=null){const r=this.gos.getGridCommonParams();hi(r,s);const o=t,l=o&&o[i.propertyName+"Params"];if(typeof l=="function"){const a=l(s);hi(r,a)}else typeof l=="object"&&hi(r,l);return hi(r,n),r}initComponent(t,i){if(this.createBean(t),t.init!=null)return t.init(i)}};function Wl(e){const t=e;return t!=null&&t.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}var vV=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,!(!e||!e.beanClasses)&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){var t;Object.entries(e.providedBeanInstances).forEach(([i,s])=>{this.beans[i]=s}),e.beanClasses.forEach(i=>{const s=new i;s.beanName?this.beans[s.beanName]=s:console.error(`Bean ${i.name} is missing beanName`),this.createdBeans.push(s)}),(t=e.derivedBeans)==null||t.forEach(i=>{const{beanName:s,bean:n}=i(this);this.beans[s]=n,this.createdBeans.push(n)}),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){if(!e)throw Error("Can't wire to bean since it is null");return this.initBeans([e],t),e}initBeans(e,t){e.forEach(i=>{var s,n;(s=i.preWireBeans)==null||s.call(i,this.beans),(n=i.wireBeans)==null||n.call(i,this.beans)}),e.forEach(i=>{var s;return(s=i.preConstruct)==null?void 0:s.call(i)}),t&&e.forEach(t),e.forEach(i=>{var s;return(s=i.postConstruct)==null?void 0:s.call(i)})}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){var t;(t=e==null?void 0:e.destroy)==null||t.call(e)}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},CV=class extends vV{init(e){this.gridId=e.gridId,this.beans.context=this,super.init(e)}destroy(){super.destroy(),Rt.__unRegisterGridModules(this.gridId)}getGridId(){return this.gridId}},DF=(e=>(e[e.Left=0]="Left",e[e.Right=1]="Right",e))(DF||{}),wV=`<div class="ag-dnd-ghost ag-unselectable">
<span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
<div class="ag-dnd-ghost-label"></div>
</div>`,yV=class extends T{constructor(){super(...arguments),this.beanName="dragAndDropService",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.dragService=e.dragService,this.mouseEventService=e.mouseEventService,this.environment=e.environment}postConstruct(){this.dropIconMap={pinned:rs("columnMovePin",this.gos,null),hide:rs("columnMoveHide",this.gos,null),move:rs("columnMoveMove",this.gos,null),left:rs("columnMoveLeft",this.gos,null),right:rs("columnMoveRight",this.gos,null),group:rs("columnMoveGroup",this.gos,null),aggregate:rs("columnMoveValue",this.gos,null),pivot:rs("columnMovePivot",this.gos,null),notAllowed:rs("dropNotAllowed",this.gos,null)}}addDragSource(e,t=!1){const i={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:i,dragSource:e}),this.dragService.addDragSource(i)}removeDragSource(e){const t=this.dragSourceAndParamsList.find(i=>i.dragSource===e);t&&(this.dragService.removeDragSource(t.params),xt(this.dragSourceAndParamsList,t))}destroy(){this.dragSourceAndParamsList.forEach(e=>this.dragService.removeDragSource(e.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0,super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=this.dragSource.getDragItem(),this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()}onDragStop(e){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){const t=this.createDropTargetEvent(this.lastDropTarget,e,null,null,!1);this.lastDropTarget.onDragStop(t)}this.lastDropTarget=void 0,this.dragItem=null,this.removeGhost()}onDragging(e,t){var o,l,a,u;const i=this.getHorizontalDirection(e),s=this.getVerticalDirection(e);this.eventLastTime=e,this.positionGhost(e);const n=this.dropTargets.filter(c=>this.isMouseOnDropTarget(e,c)),r=this.findCurrentDropTarget(e,n);if(r!==this.lastDropTarget)this.leaveLastTargetIfExists(e,i,s,t),this.lastDropTarget!==null&&r===null&&((l=(o=this.dragSource).onGridExit)==null||l.call(o,this.dragItem)),this.lastDropTarget===null&&r!==null&&((u=(a=this.dragSource).onGridEnter)==null||u.call(a,this.dragItem)),this.enterDragTargetIfExists(r,e,i,s,t),this.lastDropTarget=r;else if(r&&r.onDragging){const c=this.createDropTargetEvent(r,e,i,s,t);r.onDragging(c)}}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,i=[[e.getContainer()]];return t?i.concat(t):i}allContainersIntersect(e,t){for(const i of t){const s=i.getBoundingClientRect();if(s.width===0||s.height===0)return!1;const n=e.clientX>=s.left&&e.clientX<s.right,r=e.clientY>=s.top&&e.clientY<s.bottom;if(!n||!r)return!1}return!0}isMouseOnDropTarget(e,t){const i=this.getAllContainersFromDropTarget(t);let s=!1;for(const n of i)if(this.allContainersIntersect(e,n)){s=!0;break}return t.targetContainsSource&&!t.getContainer().contains(this.dragSource.eElement)?!1:s&&t.isInterestedIn(this.dragSource.type,this.dragSource.eElement)}findCurrentDropTarget(e,t){const i=t.length;if(i===0)return null;if(i===1)return t[0];const n=this.gos.getRootNode().elementsFromPoint(e.clientX,e.clientY);for(const r of n)for(const o of t)if(FG(this.getAllContainersFromDropTarget(o)).indexOf(r)!==-1)return o;return null}enterDragTargetIfExists(e,t,i,s,n){if(e){if(e.onDragEnter){const r=this.createDropTargetEvent(e,t,i,s,n);e.onDragEnter(r)}this.setGhostIcon(e.getIconName?e.getIconName():null)}}leaveLastTargetIfExists(e,t,i,s){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){const n=this.createDropTargetEvent(this.lastDropTarget,e,t,i,s);this.lastDropTarget.onDragLeave(n)}this.setGhostIcon(null)}}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(i=>i.external).find(i=>i.getContainer()===e.getContainer())||null}getHorizontalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientX,i=e.clientX;return t===i?null:t>i?0:1}getVerticalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientY,i=e.clientY;return t===i?null:t>i?0:1}createDropTargetEvent(e,t,i,s,n){const r=e.getContainer(),o=r.getBoundingClientRect(),{dragItem:l,dragSource:a}=this,u=t.clientX-o.left,c=t.clientY-o.top;return this.gos.addGridCommonParams({event:t,x:u,y:c,vDirection:s,hDirection:i,dragSource:a,fromNudge:n,dragItem:l,dropZoneTarget:r})}positionGhost(e){const t=this.eGhost;if(!t)return;const s=t.getBoundingClientRect().height,n=RH()-2,r=bH()-2,o=CF(t.offsetParent),{clientY:l,clientX:a}=e;let u=l-o.top-s/2,c=a-o.left-10;const d=this.gos.getDocument(),h=d.defaultView||window,p=h.pageYOffset||d.documentElement.scrollTop,f=h.pageXOffset||d.documentElement.scrollLeft;n>0&&c+t.clientWidth>n+f&&(c=n+f-t.clientWidth),c<0&&(c=0),r>0&&u+t.clientHeight>r+p&&(u=r+p-t.clientHeight),u<0&&(u=0),t.style.left=`${c}px`,t.style.top=`${u}px`}removeGhost(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null}createGhost(){this.eGhost=Do(wV),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost),this.environment.applyThemeClasses(this.eGhost),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);const e=this.eGhost.querySelector(".ag-dnd-ghost-label");let t=this.dragSource.dragItemName;Gv(t)&&(t=t()),e.innerHTML=Zi(t)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";const i=this.gos.getDocument();let s=null,n=null;try{s=i.fullscreenElement}catch{}finally{s||(s=this.gos.getRootNode());const r=s.querySelector("body");r?n=r:s instanceof ShadowRoot?n=s:s instanceof Document?n=s==null?void 0:s.documentElement:n=s}this.eGhostParent=n,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):M("Could not find document body, it is needed for dragging columns")}setGhostIcon(e,t=!1){si(this.eGhostIcon);let i=null;e||(e=this.dragSource.getDefaultIconName?this.dragSource.getDefaultIconName():"notAllowed"),i=this.dropIconMap[e],this.eGhostIcon.classList.toggle("ag-shake-left-to-right",t),!(i===this.dropIconMap.hide&&this.gos.get("suppressDragLeaveHidesColumns"))&&i&&this.eGhostIcon.appendChild(i)}},SV=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.indexOf("x")!==-1,this.scrollVertically=e.scrollAxis.indexOf("y")!==-1,this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){const i=t||this.shouldSkipVerticalScroll();if(i&&this.shouldSkipHorizontalScroll())return;const s=this.scrollContainer.getBoundingClientRect(),n=this.scrollByTick;this.tickLeft=e.clientX<s.left+n,this.tickRight=e.clientX>s.right-n,this.tickUp=e.clientY<s.top+n&&!i,this.tickDown=e.clientY>s.bottom-n&&!i,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},RV=class extends T{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.sortController=e.sortController,this.filterManager=e.filterManager,this.selectionService=e.selectionService,this.mouseEventService=e.mouseEventService,this.ctrlsService=e.ctrlsService,this.funcColsService=e.funcColsService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){this.gos.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(e=>{const t=e.gridBodyCtrl;this.autoScrollService=new SV({scrollContainer:t.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>t.getScrollFeature().getVScrollPosition().top,setVerticalPosition:i=>t.getScrollFeature().setVerticalScrollPosition(i),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){var s;return!!(this.funcColsService.getRowGroupColumns().length||((s=this.filterManager)==null?void 0:s.isAnyFilterPresent())||this.sortController.isSortActive())}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const s=[...this.selectionService.getSelectedNodes()].sort((n,r)=>n.rowIndex==null||r.rowIndex==null?0:this.getRowIndexNumber(n)-this.getRowIndexNumber(r));if(s.indexOf(t)!==-1)return s}return[t]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent("rowDragEnter",e),this.getRowNodes(e).forEach(t=>{t.setDragging(!0)}),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){const{dragSourceDomDataKey:t}=e.dragSource;return t===this.gos.getDomDataKey()}isDropZoneWithinThisGrid(e){const i=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:s}=e;return!i.contains(s)}onEnterOrDragging(e){this.dispatchGridEvent("rowDragMove",e),this.lastDraggingEvent=e;const t=this.mouseEventService.getNormalisedPosition(e).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){const i=this.isFromThisGrid(e),s=this.gos.get("rowDragManaged"),n=e.dragItem.rowNodes;s&&this.shouldPreventRowMove()||(this.gos.get("suppressMoveWhenRowDragging")||!i?this.isDropZoneWithinThisGrid(e)||this.clientSideRowModel.highlightRowAtPixel(n[0],t):this.moveRows(n,t))}getRowIndexNumber(e){const t=e.getRowIndexString();return parseInt(se(t.split("-")),10)}moveRowAndClearHighlight(e){const t=this.clientSideRowModel.getLastHighlightedRowNode(),i=t&&t.highlighted===1,s=this.mouseEventService.getNormalisedPosition(e).y,n=e.dragItem.rowNodes;let r=i?1:0;if(this.isFromThisGrid(e))n.forEach(o=>{o.rowTop<s&&(r-=1)}),this.moveRows(n,s,r);else{const o=this.gos.getRowIdCallback();let l=this.clientSideRowModel.getRowIndexAtPixel(s)+1;this.clientSideRowModel.getHighlightPosition(s)===0&&l--,this.clientSideRowModel.updateRowData({add:n.filter(a=>!this.clientSideRowModel.getRowNode((o==null?void 0:o({data:a.data,level:0,rowPinned:a.rowPinned}))??a.data.id)).map(a=>a.data),addIndex:l})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t,i=0){var n;this.clientSideRowModel.ensureRowsAtPixel(e,t,i)&&(this.focusService.clearFocusedCell(),(n=this.rangeService)==null||n.removeAllCellRanges())}addRowDropZone(e){if(!e.getContainer()){M("addRowDropZone - A container target needs to be provided");return}if(this.dragAndDropService.findExternalZone(e)){M("addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}let t={getContainer:e.getContainer};e.fromGrid?t=e:(e.onDragEnter&&(t.onDragEnter=i=>{e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",i))}),e.onDragLeave&&(t.onDragLeave=i=>{e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",i))}),e.onDragging&&(t.onDragging=i=>{e.onDragging(this.draggingToRowDragEvent("rowDragMove",i))}),e.onDragStop&&(t.onDragStop=i=>{e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",i))})),this.dragAndDropService.addDropTarget({isInterestedIn:i=>i===2,getIconName:()=>"move",external:!0,...t})}getRowDropZone(e){const t=this.getContainer.bind(this),i=this.onDragEnter.bind(this),s=this.onDragLeave.bind(this),n=this.onDragging.bind(this),r=this.onDragStop.bind(this);return e?{getContainer:t,onDragEnter:e.onDragEnter?o=>{i(o),e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",o))}:i,onDragLeave:e.onDragLeave?o=>{s(o),e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",o))}:s,onDragging:e.onDragging?o=>{n(o),e.onDragging(this.draggingToRowDragEvent("rowDragMove",o))}:n,onDragStop:e.onDragStop?o=>{r(o),e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",o))}:r,fromGrid:!0}:{getContainer:t,onDragEnter:i,onDragLeave:s,onDragging:n,onDragStop:r,fromGrid:!0}}draggingToRowDragEvent(e,t){const i=this.mouseEventService.getNormalisedPosition(t).y,s=i>this.pageBoundsService.getCurrentPageHeight();let n=-1,r;s||(n=this.rowModel.getRowIndexAtPixel(i),r=this.rowModel.getRow(n));let o;switch(t.vDirection){case 1:o="down";break;case 0:o="up";break;default:o=null;break}return this.gos.addGridCommonParams({type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:n,overNode:r,y:i,vDirection:o})}dispatchGridEvent(e,t){const i=this.draggingToRowDragEvent(e,t);this.eventService.dispatchEvent(i)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(e){this.dispatchGridEvent("rowDragEnd",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&!this.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(t=>{t.setDragging(!1)})}},bV=class extends T{constructor(){super(...arguments),this.beanName="dragService",this.dragEndFunctions=[],this.dragSources=[]}wireBeans(e){this.mouseEventService=e.mouseEventService}destroy(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0,super.destroy()}removeListener(e){const t=e.dragSource.eElement,i=e.mouseDownListener;if(t.removeEventListener("mousedown",i),e.touchEnabled){const s=e.touchStartListener;t.removeEventListener("touchstart",s,{passive:!0})}}removeDragSource(e){const t=this.dragSources.find(i=>i.dragSource===e);t&&(this.removeListener(t),xt(this.dragSources,t))}isDragging(){return this.dragging}addDragSource(e){const t=this.onMouseDown.bind(this,e),{eElement:i,includeTouch:s,stopPropagationForTouch:n}=e;i.addEventListener("mousedown",t);let r=null;const o=this.gos.get("suppressTouch");s&&!o&&(r=l=>{zv(l.target)||(l.cancelable&&(l.preventDefault(),n&&l.stopPropagation()),this.onTouchStart(e,l))},i.addEventListener("touchstart",r,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:r,touchEnabled:!!s})}getStartTarget(){return this.startTarget}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;const i=t.touches[0];this.touchLastTime=i,this.touchStart=i;const s=a=>this.onTouchMove(a,e.eElement),n=a=>this.onTouchUp(a,e.eElement),r=a=>{a.cancelable&&a.preventDefault()},o=t.target,l=[{target:this.gos.getRootNode(),type:"touchmove",listener:r,options:{passive:!1}},{target:o,type:"touchmove",listener:s,options:{passive:!0}},{target:o,type:"touchend",listener:n,options:{passive:!0}},{target:o,type:"touchcancel",listener:n,options:{passive:!0}}];this.addTemporaryEvents(l),e.dragStartPixels===0&&this.onCommonMove(i,this.touchStart,e.eElement)}onMouseDown(e,t){const i=t;if(e.skipMouseEvent&&e.skipMouseEvent(t)||i._alreadyProcessedByDragService||(i._alreadyProcessedByDragService=!0,t.button!==0))return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;const s=a=>this.onMouseMove(a,e.eElement),n=a=>this.onMouseUp(a,e.eElement),r=a=>a.preventDefault(),o=this.gos.getRootNode(),l=[{target:o,type:"mousemove",listener:s},{target:o,type:"mouseup",listener:n},{target:o,type:"contextmenu",listener:r}];this.addTemporaryEvents(l),e.dragStartPixels===0&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach(t=>{const{target:i,type:s,listener:n,options:r}=t;i.addEventListener(s,n,r)}),this.dragEndFunctions.push(()=>{e.forEach(t=>{const{target:i,type:s,listener:n,options:r}=t;i.removeEventListener(s,n,r)})})}isEventNearStartEvent(e,t){const{dragStartPixels:i}=this.currentDragParams,s=A(i)?i:4;return bF(e,t,s)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,i){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(e,t))return;this.dragging=!0;const s={type:"dragStarted",target:i};this.eventService.dispatchEvent(s),this.currentDragParams.onDragStart(t),this.currentDragParams.onDragging(t)}this.currentDragParams.onDragging(e)}onTouchMove(e,t){const i=this.getFirstActiveTouch(e.touches);i&&this.onCommonMove(i,this.touchStart,t)}onMouseMove(e,t){var i;Is()&&((i=this.gos.getDocument().getSelection())==null||i.removeAllRanges()),this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){const t=this.gos.get("enableCellTextSelection"),i=e.type==="mousemove";return t&&i&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)}isOverFormFieldElement(e){const t=e.target,i=t==null?void 0:t.tagName.toLocaleLowerCase();return!!(i!=null&&i.match("^a$|textarea|input|select|button"))}onTouchUp(e,t){let i=this.getFirstActiveTouch(e.changedTouches);i||(i=this.touchLastTime),this.onUpCommon(i,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(e);const i={type:"dragStopped",target:t};this.eventService.dispatchEvent(i)}this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(i=>i()),this.dragEndFunctions.length=0}},kg=class extends be{constructor(e,t,i,s,n,r){super(),this.cellValueFn=e,this.rowNode=t,this.column=i,this.customGui=s,this.dragStartPixels=n,this.suppressVisibilityChange=r,this.dragSource=null}wireBeans(e){this.beans=e}isCustomGui(){return this.customGui!=null}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(Zt("rowDrag",this.gos,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){const e=this.gos.get("rowDragManaged")?new PV(this,this.beans,this.rowNode,this.column):new EV(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e),this.addDragSource(t)}getSelectedNodes(){if(!this.gos.get("rowDragMultiRow"))return[this.rowNode];const t=this.beans.selectionService.getSelectedNodes();return t.indexOf(this.rowNode)!==-1?t:[this.rowNode]}checkCompatibility(){const e=this.gos.get("rowDragManaged");this.gos.get("treeData")&&e&&M("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){this.dragSource&&this.removeDragSource();const t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:s=>{s==null||s.preventDefault()}})[0]);const i=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:()=>{var o;const s=this.getDragItem(),n=((o=s.rowNodes)==null?void 0:o.length)||1,r=this.getRowDragText(this.column);return r?r(s,n):n===1?this.cellValueFn():`${n} ${i("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},kF=class extends T{constructor(e,t,i){super(),this.parent=e,this.rowNode=t,this.column=i}setDisplayedOrVisible(e){const t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let i=!0,s=!1;this.column&&(i=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),s=Gv(this.column.getColDef().rowDrag)),s?(this.parent.setDisplayed(!0,t),this.parent.setVisible(i,t)):(this.parent.setDisplayed(i,t),this.parent.setVisible(!0,t))}}},EV=class extends kF{constructor(e,t,i,s){super(e,i,s),this.beans=t}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:e}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}},PV=class extends kF{constructor(e,t,i,s){super(e,i,s),this.beans=t}postConstruct(){const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventService,{sortChanged:e,filterChanged:e,columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const t=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),i=t&&t.shouldPreventRowMove(),s=this.gos.get("suppressRowDrag"),n=this.beans.dragAndDropService.hasExternalDropZones(),r=i&&!n||s;this.setDisplayedOrVisible(r)}},Qa=class Mr{constructor(t){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=Mr.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=t}setData(t){this.setDataCommon(t,!1)}updateData(t){this.setDataCommon(t,!0)}setDataCommon(t,i){var r;const s=this.data;this.data=t,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();const n=this.createDataChangedEvent(t,s,i);(r=this.localEventService)==null||r.dispatchEvent(n)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(t,i,s){return{type:"dataChanged",node:this,oldData:i,newData:t,update:s}}getRowIndexString(){return this.rowIndex==null?(oe("Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid."),null):this.rowPinned==="top"?"t-"+this.rowIndex:this.rowPinned==="bottom"?"b-"+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){const t=new Mr(this.beans);return t.id=this.id,t.data=this.data,t.__daemon=!0,t.selected=this.selected,t.level=this.level,t}setDataAndId(t,i){var o;const s=A(this.id)?this.createDaemonNode():null,n=this.data;this.data=t,this.updateDataOnDetailNode(),this.setId(i),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,s);const r=this.createDataChangedEvent(t,n,!1);(o=this.localEventService)==null||o.dispatchEvent(r)}checkRowSelectable(){const t=this.beans.gos.get("isRowSelectable");this.setRowSelectable(t?t(this):!0)}setRowSelectable(t,i){if(this.selectable!==t){if(this.selectable=t,this.dispatchRowEvent("selectableChanged"),i)return;if(this.beans.gos.get("groupSelectsChildren")){const n=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:n??!1,source:"selectableChanged"});return}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(t){const i=this.beans.gos.getRowIdCallback();if(i)if(this.data){const s=this.getGroupKeys(!0);this.id=i({data:this.data,parentKeys:s.length>0?s:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(Mr.ID_PREFIX_ROW_GROUP)&&oe(`Row IDs cannot start with ${Mr.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`)}else this.id=void 0;else this.id=t}getGroupKeys(t=!1){const i=[];let s=this;for(t&&(s=s.parent);s&&s.level>=0;)i.push(s.key),s=s.parent;return i.reverse(),i}isPixelInRange(t){return!A(this.rowTop)||!A(this.rowHeight)?!1:t>=this.rowTop&&t<this.rowTop+this.rowHeight}updateIfDifferent(t,i,s){this[t]!==i&&(this[t]=i,this.dispatchRowEvent(s))}setFirstChild(t){this.updateIfDifferent("firstChild",t,"firstChildChanged")}setLastChild(t){this.updateIfDifferent("lastChild",t,"lastChildChanged")}setChildIndex(t){this.updateIfDifferent("childIndex",t,"childIndexChanged")}setRowTop(t){this.oldRowTop=this.rowTop,this.rowTop!==t&&(this.rowTop=t,this.dispatchRowEvent("topChanged"),this.setDisplayed(t!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setDisplayed(t){this.updateIfDifferent("displayed",t,"displayedChanged")}setDragging(t){this.updateIfDifferent("dragging",t,"draggingChanged")}setHighlighted(t){this.updateIfDifferent("highlighted",t,"rowHighlightChanged")}setHovered(t){this.hovered!==t&&(this.hovered=t)}isHovered(){return this.hovered}setAllChildrenCount(t){this.updateIfDifferent("allChildrenCount",t,"allChildrenCountChanged")}setMaster(t){this.master!==t&&(this.master&&!t&&(this.expanded=!1),this.master=t,this.dispatchRowEvent("masterChanged"))}setGroup(t){this.group!==t&&(this.group&&!t&&(this.expanded=!1),this.group=t,this.updateHasChildren(),this.checkRowSelectable(),this.dispatchRowEvent("groupChanged"))}setRowHeight(t,i=!1){this.rowHeight=t,this.rowHeightEstimated=i,this.dispatchRowEvent("heightChanged")}setRowAutoHeight(t,i){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[i.getId()]=t,t!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=It(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let t=!1,i=!0,s=0;const n=this.__autoHeights;if(n==null||(this.beans.visibleColsService.getAllAutoHeightCols().forEach(l=>{let a=n[l.getId()];if(a==null)if(this.beans.columnModel.isColSpanActive()){let u=[];switch(l.getPinned()){case"left":u=this.beans.visibleColsService.getLeftColsForRow(this);break;case"right":u=this.beans.visibleColsService.getRightColsForRow(this);break;case null:u=this.beans.columnViewportService.getColsWithinViewport(this);break}if(u.includes(l)){t=!0;return}a=-1}else{t=!0;return}else i=!1;a>s&&(s=a)}),t)||((i||s<10)&&(s=this.beans.gos.getRowHeightForNode(this).height),s==this.rowHeight))return;this.setRowHeight(s);const o=this.beans.rowModel;o.onRowHeightChangedDebounced&&o.onRowHeightChangedDebounced()}setRowIndex(t){this.updateIfDifferent("rowIndex",t,"rowIndexChanged")}setUiLevel(t){this.updateIfDifferent("uiLevel",t,"uiLevelChanged")}setExpanded(t,i,s){if(this.expanded===t)return;this.expanded=t,this.dispatchRowEvent("expandedChanged");const n={...this.createGlobalRowEvent("rowGroupOpened"),expanded:t,event:i||null};this.beans.rowNodeEventThrottle.dispatchExpanded(n,s),this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(t){return this.beans.gos.addGridCommonParams({type:t,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}setDataValue(t,i,s){const r=(()=>typeof t!="string"?t:this.beans.columnModel.getCol(t)??this.beans.columnModel.getColDefCol(t))(),o=this.getValueFromValueService(r);if(this.beans.gos.get("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(r,o,i,s),!1;const l=this.beans.valueService.setValue(this,r,i,s);return this.dispatchCellChangedEvent(r,i,o),this.checkRowSelectable(),l}getValueFromValueService(t){const i=this.leafGroup&&this.beans.columnModel.isPivotMode(),s=this.group&&this.expanded&&!this.footer&&!i;let n=!1;const r=this.beans.gos.get("groupTotalRow")??this.beans.gos.get("groupIncludeFooter");typeof r!="function"?n=!!r:n=!!(this.beans.gos.getCallback("groupTotalRow")??this.beans.gos.getCallback("groupIncludeFooter"))({node:this});const o=this.beans.gos.get("groupSuppressBlankHeader"),l=s&&n&&!o;return this.beans.valueService.getValue(t,this,!1,l)}dispatchEventForSaveValueReadOnly(t,i,s,n){const r=this.beans.gos.addGridCommonParams({type:"cellEditRequest",event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:t,colDef:t.getColDef(),data:this.data,node:this,oldValue:i,newValue:s,value:s,source:n});this.beans.eventService.dispatchEvent(r)}setGroupValue(t,i){const s=this.beans.columnModel.getCol(t);X(this.groupData)&&(this.groupData={});const n=s.getColId(),r=this.groupData[n];r!==i&&(this.groupData[n]=i,this.dispatchCellChangedEvent(s,i,r))}setAggData(t){const i=this.aggData;if(this.aggData=t,this.localEventService){const s=n=>{const r=this.aggData?this.aggData[n]:void 0,o=i?i[n]:void 0;if(r===o)return;const l=this.beans.columnModel.getCol(n);l&&this.dispatchCellChangedEvent(l,r,o)};for(const n in this.aggData)s(n);for(const n in t)n in this.aggData||s(n)}}updateHasChildren(){let t=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(this.beans.gos.isRowModelType("serverSide")){const s=this.beans.gos.get("treeData"),n=this.beans.gos.get("isServerSideGroup");t=!this.stub&&!this.footer&&(s?!!n&&n(this.data):!!this.group)}t!==this.__hasChildren&&(this.__hasChildren=!!t,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}isEmptyRowGroupNode(){return(this.group&&lt(this.childrenAfterGroup))??!1}dispatchCellChangedEvent(t,i,s){var r;const n={type:"cellChanged",node:this,column:t,newValue:i,oldValue:s};(r=this.localEventService)==null||r.dispatchEvent(n)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.footer?!1:this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(t){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(i=>i.depthFirstSearch(t)),t(this)}calculateSelectedFromChildren(){var n;let t=!1,i=!1,s=!1;if(!((n=this.childrenAfterGroup)!=null&&n.length))return this.selectable?this.selected:null;for(let r=0;r<this.childrenAfterGroup.length;r++){const o=this.childrenAfterGroup[r];let l=o.isSelected();if(!o.selectable){const a=o.calculateSelectedFromChildren();if(a===null)continue;l=a}switch(l){case!0:t=!0;break;case!1:i=!0;break;default:s=!0;break}}if(!(s||t&&i))return t?!0:i?!1:this.selectable?this.selected:null}setSelectedInitialValue(t){this.selected=t}dispatchRowEvent(t){var s;const i={type:t,node:this};(s=this.localEventService)==null||s.dispatchEvent(i)}selectThisNode(t,i,s="api"){const n=!this.selectable&&t,r=this.selected===t;if(n||r)return!1;this.selected=t,this.dispatchRowEvent("rowSelected");const o=this.sibling;o&&o.footer&&o.localEventService&&o.dispatchRowEvent("rowSelected");const l={...this.createGlobalRowEvent("rowSelected"),event:i||null,source:s};return this.beans.eventService.dispatchEvent(l),!0}setSelected(t,i=!1,s="api"){if(typeof s=="boolean"){M("since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:t,clearSelection:i,rangeSelect:!1,source:s})}setSelectedParams(t){return this.rowPinned?(M("cannot select pinned rows"),0):this.id===void 0?(M("cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected({...t,nodes:[this.footer?this.sibling:this]})}isRowPinned(){return this.rowPinned==="top"||this.rowPinned==="bottom"}isParentOfNode(t){let i=this.parent;for(;i;){if(i===t)return!0;i=i.parent}return!1}addEventListener(t,i){var n;this.localEventService||(this.localEventService=new $o),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.localEventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new Lv(this.beans.frameworkOverrides));const s=((n=this.frameworkEventListenerService)==null?void 0:n.wrap(i))??i;this.localEventService.addEventListener(t,s)}removeEventListener(t,i){var n;if(!this.localEventService)return;const s=((n=this.frameworkEventListenerService)==null?void 0:n.unwrap(i))??i;this.localEventService.removeEventListener(t,s),this.localEventService.noRegisteredListenersExist()&&(this.localEventService=null)}onMouseEnter(){this.dispatchRowEvent("mouseEnter")}onMouseLeave(){this.dispatchRowEvent("mouseLeave")}getFirstChildOfFirstChild(t){let i=this,s=!0,n=!1,r=null;for(;s&&!n;){const o=i.parent;A(o)&&i.firstChild?o.rowGroupColumn===t&&(n=!0,r=o):s=!1,i=o}return n?r:null}isFullWidthCell(){if(this.detail)return!0;const t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this}):!1}getRoute(){if(this.key==null)return;const t=[];let i=this;for(;i&&i.key!=null;)t.push(i.key),i=i.parent;return t.reverse()}createFooter(){if(this.sibling)return;const t=new Set(["eventService","__objectId","sticky"]),i=new Mr(this.beans);Object.keys(this).forEach(s=>{t.has(s)||(i[s]=this[s])}),i.footer=!0,i.setRowTop(null),i.setRowIndex(null),i.oldRowTop=null,i.id="rowGroupFooter_"+this.id,i.sibling=this,this.sibling=i}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}};Qa.ID_PREFIX_ROW_GROUP="row-group-";Qa.ID_PREFIX_TOP_PINNED="t-";Qa.ID_PREFIX_BOTTOM_PINNED="b-";Qa.OBJECT_ID_SEQUENCE=0;var ys=Qa,FV=class extends T{constructor(){super(...arguments),this.beanName="filterManager",this.advancedFilterModelUpdateQueue=[]}wireBeans(e){this.columnModel=e.columnModel,this.dataTypeService=e.dataTypeService,this.quickFilterService=e.quickFilterService,this.advancedFilterService=e.advancedFilterService,this.columnFilterService=e.columnFilterService}postConstruct(){this.addManagedEventListeners({columnValueChanged:this.refreshFiltersForAggregations.bind(this),columnPivotChanged:this.refreshFiltersForAggregations.bind(this),columnPivotModeChanged:this.refreshFiltersForAggregations.bind(this),newColumnsLoaded:this.updateAdvancedFilterColumns.bind(this),columnVisible:this.updateAdvancedFilterColumns.bind(this),advancedFilterEnabledChanged:({enabled:e})=>this.onAdvancedFilterEnabledChanged(e),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",e=>this.setAdvancedFilterModel(e.currentValue)),this.quickFilterService&&this.addManagedListeners(this.quickFilterService,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})})}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"?e({}):!1}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return typeof t=="function"?t(e):!1}setFilterModel(e,t="api"){var i;if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}(i=this.columnFilterService)==null||i.setFilterModel(e,t)}getFilterModel(){var e;return((e=this.columnFilterService)==null?void 0:e.getFilterModel())??{}}isColumnFilterPresent(){var e;return!!((e=this.columnFilterService)!=null&&e.isColumnFilterPresent())}isAggregateFilterPresent(){var e;return!!((e=this.columnFilterService)!=null&&e.isAggregateFilterPresent())}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(e){var t,i;e?(t=this.columnFilterService)!=null&&t.disableColumnFilters()&&this.onFilterChanged({source:"advancedFilter"}):(i=this.advancedFilterService)!=null&&i.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){var e;return!!((e=this.advancedFilterService)!=null&&e.isEnabled())}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}resetQuickFilterCache(){var e;(e=this.quickFilterService)==null||e.resetQuickFilterCache()}refreshFiltersForAggregations(){this.gos.getGroupAggFiltering()&&this.onFilterChanged()}onFilterChanged(e={}){const{source:t,additionalEventAttributes:i,columns:s=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.columnFilterService?this.columnFilterService.updateBeforeFilterChanged(e):Ve.resolve()).then(()=>{var r;const n={source:t,type:"filterChanged",columns:s};i&&hi(n,i),this.eventService.dispatchEvent(n),(r=this.columnFilterService)==null||r.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){var e;return!!((e=this.columnFilterService)!=null&&e.isSuppressFlashingCellsBecauseFiltering())}isQuickFilterPresent(){var e;return!!((e=this.quickFilterService)!=null&&e.isQuickFilterPresent())}updateAggFiltering(){this.aggFiltering=!!this.gos.getGroupAggFiltering()}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.columnModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isAggregateFilterPresent()&&!this.columnFilterService.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))}doesRowPassFilter(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode)||this.isColumnFilterPresent()&&!this.columnFilterService.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))}isFilterActive(e){var t;return!!((t=this.columnFilterService)!=null&&t.isFilterActive(e))}getOrCreateFilterWrapper(e){var t;return((t=this.columnFilterService)==null?void 0:t.getOrCreateFilterWrapper(e))??null}getDefaultFloatingFilter(e){return this.columnFilterService.getDefaultFloatingFilter(e)}createFilterParams(e,t){return this.columnFilterService.createFilterParams(e,t)}isFilterAllowed(e){var t;return this.isAdvancedFilterEnabled()?!1:!!((t=this.columnFilterService)!=null&&t.isFilterAllowed(e))}getFloatingFilterCompDetails(e,t){var i;return(i=this.columnFilterService)==null?void 0:i.getFloatingFilterCompDetails(e,t)}getCurrentFloatingFilterParentModel(e){var t;return(t=this.columnFilterService)==null?void 0:t.getCurrentFloatingFilterParentModel(e)}destroyFilter(e,t="api"){var i;(i=this.columnFilterService)==null||i.destroyFilter(e,t)}areFilterCompsDifferent(e,t){var i;return!!((i=this.columnFilterService)!=null&&i.areFilterCompsDifferent(e,t))}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(e){var t;if(this.isAdvancedFilterEnabled()){if((t=this.dataTypeService)!=null&&t.isPendingInference()){this.advancedFilterModelUpdateQueue.push(e);return}this.advancedFilterService.setModel(e??null),this.onFilterChanged({source:"advancedFilter"})}}toggleAdvancedFilterBuilder(e,t){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder(t,e)}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){var e;return this.isAdvancedFilterEnabled()?!1:!!((e=this.columnFilterService)!=null&&e.hasFloatingFilters())}getFilterInstance(e,t){var i;if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}return(i=this.columnFilterService)==null?void 0:i.getFilterInstance(e,t)}getColumnFilterInstance(e){var t;return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve(void 0)):((t=this.columnFilterService)==null?void 0:t.getColumnFilterInstance(e))??Promise.resolve(void 0)}warnAdvancedFilters(){M("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(e){var t;(t=this.advancedFilterService)==null||t.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advancedFilterModelUpdateQueue.forEach(e=>this.setAdvancedFilterModel(e)),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(e){var t;return(t=this.columnFilterService)==null?void 0:t.getColumnFilterModel(e)}setColumnFilterModel(e,t){var i;return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve()):((i=this.columnFilterService)==null?void 0:i.setColumnFilterModel(e,t))??Promise.resolve()}},TV=class extends be{constructor(e,t){super('<div class="ag-filter"></div>'),this.column=e,this.source=t,this.filterWrapper=null}wireBeans(e){this.filterManager=e.filterManager,this.columnModel=e.columnModel}postConstruct(){this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return!!this.filterWrapper}getFilter(){var e;return((e=this.filterWrapper)==null?void 0:e.filterPromise)??null}afterInit(){var e,t;return((t=(e=this.filterWrapper)==null?void 0:e.filterPromise)==null?void 0:t.then(()=>{}))??Ve.resolve()}afterGuiAttached(e){var t,i;(i=(t=this.filterWrapper)==null?void 0:t.filterPromise)==null||i.then(s=>{var n;(n=s==null?void 0:s.afterGuiAttached)==null||n.call(s,e)})}afterGuiDetached(){var e,t;(t=(e=this.filterWrapper)==null?void 0:e.filterPromise)==null||t.then(i=>{var s;(s=i==null?void 0:i.afterGuiDetached)==null||s.call(i)})}createFilter(e){var s,n;const{column:t,source:i}=this;this.filterWrapper=((s=this.filterManager)==null?void 0:s.getOrCreateFilterWrapper(t))??null,(n=this.filterWrapper)!=null&&n.filterPromise&&this.filterWrapper.filterPromise.then(r=>{const o=r.getGui();if(A(o)||M(`getGui method from filter returned ${o}; it should be a DOM element.`),this.appendChild(o),e){const l={type:"filterOpened",column:t,source:i,eGui:this.getGui()};this.eventService.dispatchEvent(l)}})}onFilterDestroyed(e){(e.source==="api"||e.source==="paramsUpdated")&&e.column.getId()===this.column.getId()&&this.columnModel.getColDefCol(this.column)&&(si(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}},MF="ag-resizer-wrapper",xV=`<div class="${MF}">
        <div data-ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>
        <div data-ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>
        <div data-ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>
        <div data-ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>
        <div data-ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>
        <div data-ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>
        <div data-ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>
        <div data-ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>
    </div>`,IV=class extends T{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupService=e.popupService,this.resizeObserverService=e.resizeObserverService,this.dragService=e.dragService}center(){const{clientHeight:e,clientWidth:t}=this.offsetParent,i=t/2-this.getWidth()/2,s=e/2-this.getHeight()/2;this.offsetElement(i,s)}initialisePosition(){if(this.positioned)return;const{centered:e,forcePopupParentAsOffsetParent:t,minWidth:i,width:s,minHeight:n,height:r,x:o,y:l}=this.config;this.offsetParent||this.setOffsetParent();let a=0,u=0;const c=is(this.element);if(c){const d=this.findBoundaryElement(),h=window.getComputedStyle(d);if(h.minWidth!=null){const p=d.offsetWidth-this.element.offsetWidth;u=parseInt(h.minWidth,10)-p}if(h.minHeight!=null){const p=d.offsetHeight-this.element.offsetHeight;a=parseInt(h.minHeight,10)-p}}if(this.minHeight=n||a,this.minWidth=i||u,s&&this.setWidth(s),r&&this.setHeight(r),(!s||!r)&&this.refreshSize(),e)this.center();else if(o||l)this.offsetElement(o,l);else if(c&&t){let d=this.boundaryEl,h=!0;if(d||(d=this.findBoundaryElement(),h=!1),d){const p=parseFloat(d.style.top),f=parseFloat(d.style.left);h?this.offsetElement(isNaN(f)?0:f,isNaN(p)?0:p):this.setPosition(f,p)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;const i=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(i),this.moveElementDragListener=i):(this.dragService.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{const s=!!e[t],n=this.getResizerElement(t),r={dragStartPixels:0,eElement:n,onDragStart:o=>this.onResizeStart(o,t),onDragging:this.onResize.bind(this),onDragStop:o=>this.onResizeEnd(o,t)};(s||!this.isAlive()&&!s)&&(s?(this.dragService.addDragSource(r),this.resizeListeners.push(r),n.style.pointerEvents="all"):n.style.pointerEvents="none",this.resizable[t]=s)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,i=this.element;let s=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Bl(i,e),e=vF(i),s=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const n=this.getAvailableHeight();n&&e>n&&(e=n)}this.getHeight()!==e&&(s?(i.style.maxHeight="unset",i.style.minHeight="unset"):t?Bl(i,e):(i.style.height=`${e}px`,i.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:i}=this.offsetParent;if(!i)return null;const s=this.element.getBoundingClientRect(),n=this.offsetParent.getBoundingClientRect(),r=e?this.position.y:s.top,o=e?0:n.top;let l=0;if(t){const u=this.element.parentElement;if(u){const{bottom:c}=u.getBoundingClientRect();l=c-s.bottom}}return i+o-r-l}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:i}=this.config;let s=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Oi(t,e),e=gd(t),s=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:n}=this.offsetParent,r=i?this.position.x:this.element.getBoundingClientRect().left;n&&e+r>n&&(e=n-r)}this.getWidth()!==e&&(s?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?Oi(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))}offsetElement(e=0,t=0){const{forcePopupParentAsOffsetParent:i}=this.config,s=i?this.boundaryEl:this.element;s&&(this.popupService.positionPopup({ePopup:s,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(s.style.left),parseFloat(s.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const i=this.getAvailableHeight();this.element.style.setProperty("max-height",`${i}px`)};e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:i,isTop:s,anywhereWithin:n,topBuffer:r}=e,o=t.clientX-this.dragStartPosition.x,l=t.clientY-this.dragStartPosition.y,a=this.shouldSkipX(t,!!i,!!n,o)?0:o,u=this.shouldSkipY(t,!!s,r,l)?0:l;return{movementX:a,movementY:u}}shouldSkipX(e,t,i,s){const n=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),o=this.boundaryEl.getBoundingClientRect(),l=this.config.popup?this.position.x:n.left;let a=l<=0&&r.left>=e.clientX||r.right<=e.clientX&&r.right<=o.right;return a?!0:(t?a=s<0&&e.clientX>l+r.left||s>0&&e.clientX<l+r.left:i?a=s<0&&e.clientX>o.right||s>0&&e.clientX<l+r.left:a=s<0&&e.clientX>o.right||s>0&&e.clientX<o.right,a)}shouldSkipY(e,t,i=0,s){const n=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),o=this.boundaryEl.getBoundingClientRect(),l=this.config.popup?this.position.y:n.top;let a=l<=0&&r.top>=e.clientY||r.bottom<=e.clientY&&r.bottom<=o.bottom;return a?!0:(t?a=s<0&&e.clientY>l+r.top+i||s>0&&e.clientY<l+r.top:a=s<0&&e.clientY>o.bottom||s>0&&e.clientY<o.bottom,a)}createResizeMap(){const e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[data-ref=eTopLeftResizer]")},top:{element:e.querySelector("[data-ref=eTopResizer]")},topRight:{element:e.querySelector("[data-ref=eTopRightResizer]")},right:{element:e.querySelector("[data-ref=eRightResizer]")},bottomRight:{element:e.querySelector("[data-ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[data-ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[data-ref=eBottomLeftResizer]")},left:{element:e.querySelector("[data-ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;const e=this.element;if(!e)return;const i=new DOMParser().parseFromString(xV,"text/html").body;e.appendChild(i.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(`.${MF}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:i,forcePopupParentAsOffsetParent:s}=this.config;!i&&!s&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(i=>!i.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,i=0;for(let s=0;s<e.length;s++){const n=e[s],r=!!n.style.flex&&n.style.flex!=="0 0 auto";if(n===this.element)continue;let o=this.minHeight||0,l=this.minWidth||0;if(r){const a=window.getComputedStyle(n);a.minHeight&&(o=parseInt(a.minHeight,10)),a.minWidth&&(l=parseInt(a.minWidth,10))}else o=n.offsetHeight,l=n.offsetWidth;t+=o,i+=l}return{height:t,width:i}}applySizeToSiblings(e){let t=null;const i=this.getSiblings();if(i){for(let s=0;s<i.length;s++){const n=i[s];n!==t&&(e?n.style.height=`${n.offsetHeight}px`:n.style.width=`${n.offsetWidth}px`,n.style.flex="0 0 auto",n===this.element&&(t=i[s+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:i}=this.config,{isTop:s,isRight:n,isBottom:r,isLeft:o}=this.currentResizer,l=n||o,a=r||s,{movementX:u,movementY:c}=this.calculateMouseMovement({e,isLeft:o,isTop:s}),d=this.position.x,h=this.position.y;let p=0,f=0;if(l&&u){const m=o?-1:1,w=this.getWidth(),v=w+u*m;let g=!1;o&&(p=w-v,(d+p<=0||v<=this.minWidth)&&(g=!0,p=0)),g||this.setWidth(v)}if(a&&c){const m=s?-1:1,w=this.getHeight(),v=w+c*m;let g=!1;s?(f=w-v,(h+f<=0||v<=this.minHeight)&&(g=!0,f=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&w<v&&this.getMinSizeOfSiblings().height+v>this.element.parentElement.offsetHeight&&(g=!0),g||this.setHeight(v)}this.updateDragStartPosition(e.clientX,e.clientY),((t||i)&&p||f)&&this.offsetElement(d+p,h+f)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:i}=this.position;let s;this.config.calculateTopBuffer&&(s=this.config.calculateTopBuffer());const{movementX:n,movementY:r}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:s});this.offsetElement(t+n,i+r),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},AF=class _F extends T{constructor(t,i={}){super(),this.eFocusableElement=t,this.callbacks=i,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:s=>{if(s.defaultPrevented)return;const n=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,s.shiftKey);n&&(n.focus(),s.preventDefault())},...i}}wireBeans(t){this.focusService=t.focusService}postConstruct(){this.eFocusableElement.classList.add(_F.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedElementListeners(this.eFocusableElement,{focusin:this.callbacks.onFocusIn}),this.callbacks.onFocusOut&&this.addManagedElementListeners(this.eFocusableElement,{focusout:this.callbacks.onFocusOut})}addKeyDownListeners(t){this.addManagedElementListeners(t,{keydown:i=>{if(!(i.defaultPrevented||fn(i))){if(this.callbacks.shouldStopEventPropagation(i)){xo(i);return}i.key===F.TAB?this.callbacks.onTabKeyDown(i):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(i)}}})}};AF.FOCUS_MANAGED_CLASS="ag-focus-managed";var vr=AF,LF={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};function Jv(e,t){return yd(e)?(e.debounceMs!=null&&M("debounceMs is ignored when apply button is present"),0):e.debounceMs!=null?e.debounceMs:t}function yd(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}var DV=class extends be{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.eFilterBody=z,this.buttonListeners=[]}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.resetTemplate(),this.createManagedBean(new vr(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new IV(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);const i=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" data-ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(i,this.getAgComponents(),e),t=this.getGui(),t&&t.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.providedFilterParams=e,this.applyActive=yd(e),this.resetButtonsPanel()}updateParams(e){this.providedFilterParams=e,this.applyActive=yd(e),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(){const{buttons:e}=this.providedFilterParams,t=e&&e.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(si(this.eButtonsPanel),this.buttonListeners.forEach(n=>n()),this.buttonListeners=[]):t&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!t){this.eButtonsPanel&&ur(this.eButtonsPanel);return}const i=document.createDocumentFragment(),s=n=>{let r,o;switch(n){case"apply":r=this.translate("applyFilter"),o=u=>this.onBtApply(!1,!1,u);break;case"clear":r=this.translate("clearFilter"),o=()=>this.onBtClear();break;case"reset":r=this.translate("resetFilter"),o=()=>this.onBtReset();break;case"cancel":r=this.translate("cancelFilter"),o=u=>{this.onBtCancel(u)};break;default:M("Unknown button type specified");return}const a=Do(`<button
                    type="${n==="apply"?"submit":"button"}"
                    data-ref="${n}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${r}
                </button>`);this.buttonListeners.push(...this.addManagedElementListeners(a,{click:o})),i.append(a)};e.forEach(n=>s(n)),this.eButtonsPanel.append(i),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){const e=Jv(this.providedFilterParams,this.getDefaultDebounceMs()),t=It(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(e!=null?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){const i=()=>{this.onUiChanged(!1,"prevent"),t==null||t()};e!=null?this.setModelIntoUi(e).then(i):this.resetUiToDefaults().then(i)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){const t=this.getModelFromUi();if(!this.isModelValid(t))return!1;const i=this.appliedModel;return this.appliedModel=t,!this.areModelsEqual(i,t)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,t=!1,i){if(i&&i.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")){const n="columnFilter";this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:n})}const{closeOnApply:s}=this.providedFilterParams;s&&this.applyActive&&!e&&!t&&this.close(i)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;const t=e,i=t&&t.key;let s;(i==="Enter"||i==="Space")&&(s={keyboardEvent:t}),this.hidePopup(s),this.hidePopup=null}onUiChanged(e=!1,t){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const i=this.isModelValid(this.getModelFromUi()),s=this.queryForHtmlElement('[data-ref="applyFilterButton"]');s&&Fa(s,!i)}e&&!t||t==="immediately"?this.onBtApply(e):(!this.applyActive&&!t||t==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e==null?void 0:e.container)}refreshFilterResizer(e){if(!this.positionableFeature||e==="toolPanel")return;const t=e==="floatingFilter"||e==="columnFilter",{positionableFeature:i,gos:s}=this;t?(i.restoreLastSize(),i.setResizable(s.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}refresh(e){return this.providedFilterParams=e,!0}destroy(){const e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,LF[e])}getCellValue(e){return this.providedFilterParams.getValue(e)}getPositionableElement(){return this.eFilterBody}},kV=class extends qv{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)}},MV=class extends be{constructor(e="default",t=!1){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.unFocusable=t,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){const e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),!this.unFocusable&&this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){const t=e.key;switch(t){case F.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{const i=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(i)}break;case F.DOWN:case F.UP:e.preventDefault(),this.navigate(t);break;case F.PAGE_DOWN:case F.PAGE_UP:case F.PAGE_HOME:case F.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}navigate(e){const t=e===F.DOWN;let i;if(!this.highlightedEl)i=this.itemEls[t?0:this.itemEls.length-1];else{let n=this.itemEls.indexOf(this.highlightedEl)+(t?1:-1);n=Math.min(Math.max(n,0),this.itemEls.length-1),i=this.itemEls[n]}this.highlightItem(i)}navigateToPage(e){if(!this.highlightedEl||this.itemEls.length===0)return;const t=this.itemEls.indexOf(this.highlightedEl),i=this.options.length-1,s=this.itemEls[0].clientHeight,n=Math.floor(this.getGui().clientHeight/s);let r=-1;e===F.PAGE_HOME?r=0:e===F.PAGE_END?r=i:e===F.PAGE_DOWN?r=Math.min(t+n,i):e===F.PAGE_UP&&(r=Math.max(t-n,0)),r!==-1&&this.highlightItem(this.itemEls[r])}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){const{value:t,text:i}=e,s=i||t;return this.options.push({value:t,text:s}),this.renderOption(t,s),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(e=>{ur(e)}),this.itemEls=[]}updateIndices(){const e=this.getGui().querySelectorAll(".ag-list-item");e.forEach((t,i)=>{pH(t,i+1),hH(t,e.length)})}renderOption(e,t){const i=this.gos.getDocument(),s=i.createElement("div");Hi(s,"option"),s.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);const n=i.createElement("span");s.appendChild(n),n.textContent=t,this.unFocusable||(s.tabIndex=-1),this.itemEls.push(s),this.addManagedListeners(s,{mouseover:()=>this.highlightItem(s),mousedown:r=>{r.preventDefault(),r.stopPropagation(),this.setValue(e)}}),this.createManagedBean(new Ko({getTooltipValue:()=>t,getGui:()=>s,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>n.scrollWidth>n.clientWidth})),this.getGui().appendChild(s)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;const i=this.options.findIndex(s=>s.value===e);if(i!==-1){const s=this.options[i];this.value=s.value,this.displayValue=s.text,this.highlightItem(this.itemEls[i]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!is(e))return;this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(this.activeClass),fd(this.highlightedEl,!0);const t=this.getGui(),{scrollTop:i,clientHeight:s}=t,{offsetTop:n,offsetHeight:r}=e;(n+r>i+s||n<i)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){!this.highlightedEl||!is(this.highlightedEl)||(this.highlightedEl.classList.remove(this.activeClass),fd(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},AV=class extends PF{constructor(e){if(super(e,(e==null?void 0:e.template)||`
            <div class="ag-picker-field" role="presentation">
                <div data-ref="eLabel"></div>
                    <div data-ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
                    <div data-ref="eDisplayField" class="ag-picker-field-display"></div>
                    <div data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
                </div>
            </div>`,(e==null?void 0:e.agComponents)||[],e==null?void 0:e.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=z,this.eWrapper=z,this.eDisplayField=z,this.eIcon=z,this.ariaRole=e==null?void 0:e.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:i,variableWidth:s,minPickerWidth:n,maxPickerWidth:r}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!s,i!=null&&this.setPickerMaxHeight(i),n!=null&&this.setPickerMinWidth(n),r!=null&&this.setPickerMaxWidth(r)}wireBeans(e){this.popupService=e.popupService}postConstruct(){super.postConstruct(),this.setupAria();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:i,inputWidth:s}=this.config;if(i){const n=Zt(i,this.gos);n&&this.eIcon.appendChild(n)}s!=null&&this.setInputWidth(s)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),pd(e,!1),this.ariaRole&&Hi(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&(e==null?void 0:e.target)===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case F.UP:case F.DOWN:case F.ENTER:case F.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case F.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.gos.getDocument(),t=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));const i=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:s,pickerAriaLabelValue:n,modalPicker:r=!0}=this.config,o={modal:r,eChild:t,closeOnEsc:!0,closedCallback:()=>{const p=this.gos.getActiveDomElement(),f=!p||p===e.body;this.beforeHidePicker(),f&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:i(s,n)},l=this.popupService.addPopup(o),{maxPickerHeight:a,minPickerWidth:u,maxPickerWidth:c,variableWidth:d}=this;d?(u&&(t.style.minWidth=u),t.style.width=jv(gd(this.eWrapper)),c&&(t.style.maxWidth=c)):wd(t,c??gd(this.eWrapper));const h=a??`${Uv(this.popupService.getPopupParent())}px`;return t.style.setProperty("max-height",h),t.style.position="absolute",this.alignPickerToComponent(),l.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerType:e}=this.config,{pickerGap:t}=this,i=this.gos.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:e,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:i,keepWithinBounds:!0,nudgeY:t})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;const t=this.getAriaElement();pd(t,e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){var t;(t=this.pickerComponent)!=null&&t.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(e){return wd(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},Xv=class extends AV{constructor(e){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox",...e})}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:t,placeholder:i}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),i&&t==null&&(this.eDisplayField.textContent=i),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new MV("select",!0)),this.listComponent.setParentComponent(this);const e=this.listComponent.getAriaElement(),t=`ag-select-list-${this.listComponent.getCompId()}`;e.setAttribute("id",t),yH(this.getAriaElement(),e),this.listComponent.addManagedListeners(this.listComponent,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})}}),this.listComponent.addManagedListeners(this.listComponent,{fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){var i;const{key:t}=e;switch(t===F.TAB&&this.hidePicker(),t){case F.ENTER:case F.UP:case F.DOWN:case F.PAGE_UP:case F.PAGE_DOWN:case F.PAGE_HOME:case F.PAGE_END:e.preventDefault(),this.isPickerDisplayed?(i=this.listComponent)==null||i.handleKeyDown(e):super.onKeyDown(e);break;case F.ESCAPE:super.onKeyDown(e);break}}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){var e;return(e=this.listComponent)==null||e.clearOptions(),this}setValue(e,t,i){if(this.value===e||!this.listComponent)return this;if(i||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue())return this;let n=this.listComponent.getDisplayValue();return n==null&&this.config.placeholder&&(n=this.config.placeholder),this.eDisplayField.textContent=n,this.setTooltip({newTooltipText:n??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(e,t)}destroy(){this.listComponent&&(this.listComponent=this.destroyBean(this.listComponent)),super.destroy()}},_V={selector:"AG-SELECT",component:Xv},OF=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(e=>{if(typeof e=="string")return;const t=[["displayKey"],["displayName"],["predicate","test"]],i=s=>s.some(n=>e[n]!=null)?!0:(M(`ignoring FilterOptionDef as it doesn't contain one of '${s}'`),!1);if(!t.every(i)){this.filterOptions=this.filterOptions.filter(s=>s===e)||[];return}this.customFilterOptions[e.displayKey]=e})}selectDefaultItem(e){if(e.defaultOption)this.defaultOption=e.defaultOption;else if(this.filterOptions.length>=1){const t=this.filterOptions[0];typeof t=="string"?this.defaultOption=t:t.displayKey?this.defaultOption=t.displayKey:M("invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else M("no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(e){return this.customFilterOptions[e]}},NF=class extends DV{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){const t=this.optionsFactory.getCustomOption(e);if(t){const{numberOfInputs:s}=t;return s??1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:e==="inRange"?2:1}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,i)=>{i===0?t.setValue(e,!0):t.setValue(this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){const e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;const i=!e.operator,s=!t.operator;if(!i&&s||i&&!s)return!1;let r;if(i){const o=e,l=t;r=this.areSimpleModelsEqual(o,l)}else{const o=e,l=t;r=o.operator===l.operator&&gr(o.conditions,l.conditions,(a,u)=>this.areSimpleModelsEqual(a,u))}return r}shouldRefresh(e){var r;const t=this.getModel(),i=t?t.conditions??[t]:null,s=((r=e.filterOptions)==null?void 0:r.map(o=>typeof o=="string"?o:o.displayKey))??this.getDefaultFilterOptions();return!(!(!i||i.every(o=>s.find(l=>l===o.type)!==void 0))||typeof e.maxNumConditions=="number"&&i&&i.length>e.maxNumConditions)}refresh(e){return!this.shouldRefresh(e)||!super.refresh(e)?!1:(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){const i=e;let s=i.conditions;s==null&&(s=[],M("Filter model is missing 'conditions'"));const n=this.validateAndUpdateConditions(s),r=this.getNumConditions();if(n<r)this.removeConditionsAndOperators(n);else if(n>r)for(let l=r;l<n;l++)this.createJoinOperatorPanel(),this.createOption();const o=i.operator==="OR";this.eJoinOperatorsAnd.forEach(l=>l.setValue(!o,!0)),this.eJoinOperatorsOr.forEach(l=>l.setValue(o,!0)),s.forEach((l,a)=>{this.eTypes[a].setValue(l.type,!0),this.setConditionIntoUi(l,a)})}else{const i=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(i.type,!0),this.setConditionIntoUi(i,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),Ve.resolve()}validateAndUpdateConditions(e){let t=e.length;return t>this.maxNumConditions&&(e.splice(this.maxNumConditions),M('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),t=this.maxNumConditions),t}doesFilterPass(e){const t=this.getModel();if(t==null)return!0;const{operator:i}=t,s=[];if(i){const r=t;s.push(...r.conditions??[])}else s.push(t);return s[i&&i==="OR"?"some":"every"](r=>this.individualConditionPasses(e,r))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new OF,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){this.maxNumConditions=e.maxNumConditions??2,this.maxNumConditions<1&&(M('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=e.numAlwaysVisibleConditions??1,this.numAlwaysVisibleConditions<1&&(M('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(M('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){const e=this.createManagedBean(new Xv);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());const t=this.createValueElement();this.eConditionBodies.push(t),this.eFilterBody.appendChild(t),this.putOptionsIntoDropdown(e),this.resetType(e);const i=this.getNumConditions()-1;this.forEachPositionInput(i,s=>this.resetInput(s)),this.addChangedListeners(e,i)}createJoinOperatorPanel(){const e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");const t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),i=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);const s=this.eJoinOperatorPanels.length-1,n=this.joinOperatorId++;this.resetJoinOperatorAnd(t,s,n),this.resetJoinOperatorOr(i,s,n),this.isReadOnly()||(t.onValueChange(this.listener),i.onValueChange(this.listener))}createJoinOperator(e,t,i){const s=this.createManagedBean(new kV);return e.push(s),s.addCssClass("ag-filter-condition-operator"),s.addCssClass(`ag-filter-condition-operator-${i}`),t.appendChild(s.getGui()),s}getDefaultJoinOperator(e){return e==="AND"||e==="OR"?e:"AND"}createFilterListOptions(){const e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map(t=>typeof t=="string"?this.createBoilerplateListOption(t):this.createCustomListOption(t))}putOptionsIntoDropdown(e){this.filterListOptions.forEach(t=>{e.addOption(t)}),e.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,i=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:i?this.localeService.getLocaleTextFunc()(i.displayKey,i.displayName):this.translate(t)}}createBodyTemplate(){return""}getAgComponents(){return[]}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)?e=i:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{const i=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<i){this.removeConditionsAndOperators(i+1);const s=e+1,n=i-s;n>0&&this.removeConditionsAndOperators(s,n),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((s,n)=>{const r=this.isConditionDisabled(n,e);s.setDisabled(r||this.filterListOptions.length<=1),n===1&&(Fa(this.eJoinOperatorPanels[0],r),this.eJoinOperatorsAnd[0].setDisabled(r),this.eJoinOperatorsOr[0].setDisabled(r))}),this.eConditionBodies.forEach((s,n)=>{Me(s,this.isConditionBodyVisible(n))});const i=(t??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach(s=>{s.setValue(!i,!0)}),this.eJoinOperatorsOr.forEach(s=>{s.setValue(i,!0)}),this.forEachInput((s,n,r,o)=>{this.setElementDisplayed(s,n<o),this.setElementDisabled(s,this.isConditionDisabled(r,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;this.removeComponents(this.eTypes,e,t),this.removeElements(this.eConditionBodies,e,t),this.removeValueElements(e,t);const i=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,i,t),this.removeComponents(this.eJoinOperatorsAnd,i,t),this.removeComponents(this.eJoinOperatorsOr,i,t)}removeElements(e,t,i){this.removeItems(e,t,i).forEach(n=>ur(n))}removeComponents(e,t,i){this.removeItems(e,t,i).forEach(n=>{ur(n.getGui()),this.destroyBean(n)})}removeItems(e,t,i){return i==null?e.splice(t):e.splice(t,i)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!(e!=null&&e.suppressFocus))if(this.isReadOnly())this.eFilterBody.focus();else{const t=this.getInputs(0)[0];if(!t)return;t instanceof Wn&&t.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();const e=this.getModel();this.resetUiToActiveModel(e);let t=-1,i=-1,s=!1;const n=this.getJoinOperator();for(let o=this.getNumConditions()-1;o>=0;o--)if(this.isConditionUiComplete(o))t===-1&&(t=o,i=o);else{const l=o>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(o-1),a=o<t;(l||a)&&(this.removeConditionsAndOperators(o,1),s=!0,a&&i--)}let r=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),r=!0),this.shouldAddNewConditionAtEnd(i===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),r=!0),r&&this.updateConditionStatusesAndValues(i,n),s&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=i}getPlaceholderText(e,t){let i=this.translate(e);if(Gv(this.filterPlaceholder)){const s=this.filterPlaceholder,n=this.eTypes[t].getValue(),r=this.translate(n);i=s({filterOptionKey:n,filterOption:r,placeholder:i})}else typeof this.filterPlaceholder=="string"&&(i=this.filterPlaceholder);return i}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc();this.forEachInput((t,i,s,n)=>{if(!(t instanceof Wn))return;const r=i===0&&n>1?"inRangeStart":i===0?"filterOoo":"inRangeEnd",o=i===0&&n>1?e("ariaFilterFromValue","Filter from value"):i===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(r,s)),t.setInputAriaLabel(o)})}setElementValue(e,t,i){e instanceof Wn&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){e instanceof be&&Me(e.getGui(),t)}setElementDisabled(e,t){e instanceof be&&Fa(e.getGui(),t)}attachElementOnChange(e,t){e instanceof Wn&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,i)=>{this.forEachPositionTypeInput(i,t,e)})}forEachPositionInput(e,t){const i=this.getConditionType(e);this.forEachPositionTypeInput(e,i,t)}forEachPositionTypeInput(e,t,i){const s=this.getNumberOfInputs(t),n=this.getInputs(e);for(let r=0;r<n.length;r++){const o=n[r];o!=null&&i(o,r,e,s)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return this.getNumberOfInputs(t)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)==="empty"||this.getValues(e).some(i=>i==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinOperatorsAnd.forEach((t,i)=>this.resetJoinOperatorAnd(t,i,this.joinOperatorId+i)),this.eJoinOperatorsOr.forEach((t,i)=>this.resetJoinOperatorOr(t,i,this.joinOperatorId+i)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),Ve.resolve()}resetType(e){const i=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(i).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,i){this.resetJoinOperator(e,t,this.isDefaultOperator("AND"),this.translate("andCondition"),i)}resetJoinOperatorOr(e,t,i){this.resetJoinOperator(e,t,this.isDefaultOperator("OR"),this.translate("orCondition"),i)}resetJoinOperator(e,t,i,s,n){this.updateJoinOperatorDisabled(e.setValue(i,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${n}`).setLabel(s),t)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t)),this.eJoinOperatorsOr.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t))}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const i=this.mapValuesFromModel(e);this.forEachInput((s,n,r)=>{r===t&&this.setElementValue(s,i[n]!=null?i[n]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,i,s)=>{this.setElementValue(t,i===0&&s===0?e:null,!0)})}isDefaultOperator(e){return e===this.defaultJoinOperator}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,i=>{this.attachElementOnChange(i,this.listener)}))}individualConditionPasses(e,t){const i=this.getCellValue(e.node),s=this.mapValuesFromModel(t),n=this.optionsFactory.getCustomOption(t.type),r=this.evaluateCustomFilter(n,s,i);return r??(i==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(s,i,t,e))}evaluateCustomFilter(e,t,i){if(e==null)return;const{predicate:s}=e;if(s!=null&&!t.some(n=>n==null))return s(t,i)}isBlank(e){return e==null||typeof e=="string"&&e.trim().length===0}hasInvalidInputs(){return!1}},GF=class extends NF{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case"equals":case"notEqual":if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case"lessThan":case"lessThanOrEqual":if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case"inRange":if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,i){const s=this.comparator(),n=e[0]!=null?s(e[0],t):0;switch(i.type){case"equals":return n===0;case"notEqual":return n!==0;case"greaterThan":return n>0;case"greaterThanOrEqual":return n>=0;case"lessThan":return n<0;case"lessThanOrEqual":return n<=0;case"inRange":{const r=s(e[1],t);return this.scalarFilterParams.inRangeInclusive?n>=0&&r<=0:n>0&&r<0}case"blank":return this.isBlank(t);case"notBlank":return!this.isBlank(t);default:return M('Unexpected type of filter "'+i.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}},LV=65,OV=67,NV=86,GV=68,HV=90,VV=89;function HF(e){return e.altKey||e.ctrlKey||e.metaKey?!1:e.key.length===1}function Mg(e,t,i,s,n){const r=s?s.getColDef().suppressKeyboardEvent:void 0;if(!r)return!1;const o=e.addGridCommonParams({event:t,editing:n,column:s,node:i,data:i.data,colDef:s.getColDef()});return!!(r&&r(o))}function BV(e,t,i,s){const n=s.getDefinition(),r=n&&n.suppressHeaderKeyboardEvent;if(!A(r))return!1;const o=e.addGridCommonParams({colDef:n,column:s,headerRowIndex:i,event:t});return!!r(o)}function WV(e){const{keyCode:t}=e;let i;switch(t){case LV:i=F.A;break;case OV:i=F.C;break;case NV:i=F.V;break;case GV:i=F.D;break;case HV:i=F.Z;break;case VV:i=F.Y;break;default:i=e.code}return i}function zV(e,t=!1){return e===F.DELETE?!0:!t&&e===F.BACKSPACE?pF():!1}var Cr=class extends Wn{constructor(e,t="ag-text-field",i="text"){super(e,t,i)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){return this.eInput.value!==e&&(this.eInput.value=A(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`),t=i=>{HF(i)&&i.key&&!e.test(i.key)&&i.preventDefault()};this.addManagedListeners(this.eInput,{keydown:t,paste:i=>{var n;const s=(n=i.clipboardData)==null?void 0:n.getData("text");s&&s.split("").some(r=>!e.test(r))&&i.preventDefault()}})}},oh={selector:"AG-INPUT-TEXT-FIELD",component:Cr},Zv=class extends Cr{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListeners(this.eInput,{blur:()=>{const n=parseFloat(this.eInput.value),r=isNaN(n)?"":this.normalizeValue(n.toString());this.value!==r&&this.setValue(r)},wheel:this.onWheel.bind(this)}),this.eInput.step="any";const{precision:e,min:t,max:i,step:s}=this.config;typeof e=="number"&&this.setPrecision(e),typeof t=="number"&&this.setMin(t),typeof i=="number"&&this.setMax(i),typeof s=="number"&&this.setStep(s)}onWheel(e){this.gos.getActiveDomElement()===this.eInput&&e.preventDefault()}normalizeValue(e){if(e==="")return"";this.precision!=null&&(e=this.adjustPrecision(e));const t=parseFloat(e);return this.min!=null&&t<this.min?e=this.min.toString():this.max!=null&&t>this.max&&(e=this.max.toString()),e}adjustPrecision(e,t){if(this.precision==null)return e;if(t){const s=parseFloat(e).toFixed(this.precision);return parseFloat(s).toString()}const i=String(e).split(".");if(i.length>1){if(i[1].length<=this.precision)return e;if(this.precision>0)return`${i[0]}.${i[1].slice(0,this.precision)}`}return i[0]}setMin(e){return this.min===e?this:(this.min=e,ws(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,ws(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,ws(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(i=>super.setValue(i,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,i){if(A(i)){let s=this.isScientificNotation(i);if(s&&this.eInput.validity.valid)return e(i);if(!s){i=this.adjustPrecision(i);const n=this.normalizeValue(i);s=i!=n}if(s)return t(i)}return e(i)}getValue(){if(!this.eInput.validity.valid)return;const e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},UV={selector:"AG-INPUT-NUMBER-FIELD",component:Zv},VF=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"],eC=class{constructor(e,t,i){this.localeService=e,this.optionsFactory=t,this.valueFormatter=i}getModelAsString(e){if(!e)return null;const t=e.operator!=null,i=this.localeService.getLocaleTextFunc();if(t){const s=e,r=(s.conditions??[]).map(l=>this.getModelAsString(l)),o=s.operator==="AND"?"andCondition":"orCondition";return r.join(` ${i(o,LF[o])} `)}else{if(e.type==="blank"||e.type==="notBlank")return i(e.type,e.type);{const s=e,n=this.optionsFactory.getCustomOption(s.type),{displayKey:r,displayName:o,numberOfInputs:l}=n||{};return r&&o&&l===0?(i(r,o),o):this.conditionToString(s,n)}}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){return this.valueFormatter?this.valueFormatter(e??null)??"":String(e)}},BF=class extends eC{conditionToString(e,t){const{numberOfInputs:i}=t||{};return e.type=="inRange"||i===2?`${this.formatValue(e.filter)}-${this.formatValue(e.filterTo)}`:e.filter!=null?this.formatValue(e.filter):`${e.type}`}};function Ag(e){const{allowedCharPattern:t}=e??{};return t??null}var jV=class extends GF{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(e){return this.numberFilterParams.allowedCharPattern!==e.allowedCharPattern?!1:super.refresh(e)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:s}=e||{};return[this.processValue(t),this.processValue(i)].slice(0,this.getNumberOfInputs(s))}getDefaultDebounceMs(){return 500}comparator(){return(e,t)=>e===t?0:e<t?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new BF(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return VF}setElementValue(e,t,i){const s=!i&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(t??null):t;super.setElementValue(e,s)}createValueElement(){const e=Ag(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),Hi(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,i,s){const n=this.createManagedBean(s?new Cr({allowedCharPattern:s}):new Zv);n.addCssClass(`ag-filter-${i}`),n.addCssClass("ag-filter-filter"),t.push(n),e.appendChild(n.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}getValues(e){const t=[];return this.forEachPositionInput(e,(i,s,n,r)=>{s<r&&t.push(this.processValue(this.stringToFloat(i.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getFilterType(){return"number"}processValue(e){return e==null||isNaN(e)?null:e}stringToFloat(e){if(typeof e=="number")return e;let t=Kn(e);return t!=null&&t.trim()===""&&(t=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(t):t==null||t.trim()==="-"?null:parseFloat(t)}createCondition(e){const t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},s=this.getValues(e);return s.length>0&&(i.filter=s[0]),s.length>1&&(i.filterTo=s[1]),i}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{if(!t.getInputElement().validity.valid){e=!0;return}}),e}},WF=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],zF=class extends eC{conditionToString(e,t){const{numberOfInputs:i}=t||{};return e.type=="inRange"||i===2?`${e.filter}-${e.filterTo}`:e.filter!=null?`${e.filter}`:`${e.type}`}};function UF(e){const t=e&&e.trim();return t===""?e:t}var $V=class extends NF{constructor(){super("textFilter"),this.defaultFormatter=e=>e,this.defaultLowercaseFormatter=e=>e==null?null:e.toString().toLowerCase(),this.defaultMatcher=({filterOption:e,value:t,filterText:i})=>{if(i==null)return!1;switch(e){case"contains":return t.indexOf(i)>=0;case"notContains":return t.indexOf(i)<0;case"equals":return t===i;case"notEqual":return t!=i;case"startsWith":return t.indexOf(i)===0;case"endsWith":{const s=t.lastIndexOf(i);return s>=0&&s===t.length-i.length}default:return!1}},this.eValuesFrom=[],this.eValuesTo=[]}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?this.defaultFormatter:this.defaultLowercaseFormatter),this.filterModelFormatter=new zF(this.localeService,this.optionsFactory)}getTextMatcher(){const e=this.textFilterParams.textCustomComparator;return e?(M("textCustomComparator is deprecated, use textMatcher instead."),({filterOption:t,value:i,filterText:s})=>e(t,i,s)):this.textFilterParams.textMatcher||this.defaultMatcher}createCondition(e){const t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},s=this.getValuesWithSideEffects(e,!0);return s.length>0&&(i.filter=s[0]),s.length>1&&(i.filterTo=s[1]),i}getFilterType(){return"text"}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){const i=[];return this.forEachPositionInput(e,(s,n,r,o)=>{if(n<o){let l=Kn(s.getValue());t&&this.textFilterParams.trimInput&&(l=UF(l)??null,s.setValue(l,!0)),i.push(l)}}),i}getDefaultFilterOptions(){return WF}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),Hi(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,i){const s=this.createManagedBean(new Cr);s.addCssClass(`ag-filter-${i}`),s.addCssClass("ag-filter-filter"),t.push(s),e.appendChild(s.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:s}=e||{};return[t||null,i||null].slice(0,this.getNumberOfInputs(s))}evaluateNullValue(e){return e?["notEqual","notContains","blank"].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,i,s){const n=e.map(h=>this.formatter(h))||[],r=this.formatter(t),{api:o,colDef:l,column:a,context:u,textFormatter:c}=this.textFilterParams;if(i.type==="blank")return this.isBlank(t);if(i.type==="notBlank")return!this.isBlank(t);const d={api:o,colDef:l,column:a,context:u,node:s.node,data:s.data,filterOption:i.type,value:r,textFormatter:c};return n.some(h=>this.matcher({...d,filterText:h}))}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}};function jF(e){if(typeof e=="number")return e;if(typeof e=="string"){const t=parseInt(e);return isNaN(t)?void 0:t}}function Wi(e,t=Number.MAX_VALUE){return i=>{const s=jF(i);if(!(s==null||s<e||s>t))return s}}function zl(e,t){return e.toString().padStart(t,"0")}function KV(e,t){const i=[];for(let s=e;s<=t;s++)i.push(s);return i}function qV(e,t,i){return typeof e!="number"?"":e.toString().replace(".",i).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${t}`)}function mi(e,t=!0,i="-"){if(!e)return null;let s=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(n=>zl(n,2)).join(i);return t&&(s+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map(n=>zl(n,2)).join(":")),s}var Wp=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function Ul(e,t="YYYY-MM-DD"){const i=zl(e.getFullYear(),4),s=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r={YYYY:()=>i.slice(i.length-4,i.length),YY:()=>i.slice(i.length-2,i.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>s[e.getMonth()],MMM:()=>s[e.getMonth()].slice(0,3),MM:()=>zl(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${Wp(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${Wp(e.getDate())}`,DD:()=>zl(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>n[e.getDay()],ddd:()=>n[e.getDay()].slice(0,3),dd:()=>n[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${Wp(e.getDay())}`,d:()=>`${e.getDay()}`},o=new RegExp(Object.keys(r).join("|"),"g");return t.replace(o,l=>l in r?r[l]():l)}function Ht(e){if(!e)return null;const[t,i]=e.split(" ");if(!t)return null;const s=t.split("-").map(d=>parseInt(d,10));if(s.filter(d=>!isNaN(d)).length!==3)return null;const[n,r,o]=s,l=new Date(n,r-1,o);if(l.getFullYear()!==n||l.getMonth()!==r-1||l.getDate()!==o)return null;if(!i||i==="00:00:00")return l;const[a,u,c]=i.split(":").map(d=>parseInt(d,10));return a>=0&&a<24&&l.setHours(a),u>=0&&u<60&&l.setMinutes(u),c>=0&&c<60&&l.setSeconds(c),l}var $F=class{constructor(e,t,i,s,n){this.alive=!0,this.context=e,this.eParent=s,t.getDateCompDetails(i).newAgStackInstance().then(l=>{if(!this.alive){e.destroyBean(l);return}this.dateComp=l,l&&(s.appendChild(l.getGui()),l.afterGuiAttached&&l.afterGuiAttached(),this.tempValue&&l.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled),n==null||n(this))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){this.dateComp?this.dateComp.setDate(e):this.tempValue=e}setDisabled(e){this.dateComp?this.setDateCompDisabled(e):this.disabled=e}setDisplayed(e){Me(this.eParent,e)}setInputPlaceholder(e){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(e)}setInputAriaLabel(e){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(e)}afterGuiAttached(e){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(e)}updateParams(e){var i,s;let t=!1;(i=this.dateComp)!=null&&i.refresh&&typeof this.dateComp.refresh=="function"&&this.dateComp.refresh(e)!==null&&(t=!0),!t&&((s=this.dateComp)!=null&&s.onParamsUpdated)&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(e)!==null&&M("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(e){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(e)}},KF=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"],qF=class extends eC{constructor(e,t,i){super(t,i),this.dateFilterParams=e}conditionToString(e,t){const{type:i}=e,{numberOfInputs:s}=t||{},n=i=="inRange"||s===2,r=Ht(e.dateFrom),o=Ht(e.dateTo),l=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(n){const a=r!==null?Ul(r,l):"null",u=o!==null?Ul(o,l):"null";return`${a}-${u}`}return r!=null?Ul(r,l):`${i}`}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}},RS=1e3,bS=1/0,YV=class extends GF{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=RS,this.maxValidYear=bS,this.minValidDate=null,this.maxValidDate=null}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){const{dateFrom:t,dateTo:i,type:s}=e||{};return[t&&Ht(t)||null,i&&Ht(i)||null].slice(0,this.getNumberOfInputs(s))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,t){const i=t;return t==null||i<e?-1:i>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);const t=(i,s)=>{if(e[i]!=null)if(isNaN(e[i]))M(`DateFilter ${i} is not a number`);else return e[i]==null?s:Number(e[i]);return s};this.minValidYear=t("minValidYear",RS),this.maxValidYear=t("maxValidYear",bS),this.minValidYear>this.maxValidYear&&M("DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:Ht(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:Ht(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&M("DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new qF(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){const t=new $F(this.context,this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc(()=>t.destroy()),t}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return KF}createValueElement(){const t=this.gos.getDocument().createElement("div");return t.classList.add("ag-filter-body"),this.createFromToElement(t,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(t,this.eConditionPanelsTo,this.dateConditionToComps,"to"),t}createFromToElement(e,t,i,s){const r=this.gos.getDocument().createElement("div");r.classList.add(`ag-filter-${s}`),r.classList.add(`ag-filter-date-${s}`),t.push(r),e.appendChild(r),i.push(this.createDateCompWrapper(r))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),this.removeItems(this.eConditionPanelsFrom,e,t),this.removeItems(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,i){this.removeItems(e,t,i).forEach(n=>n.destroy())}isValidDateValue(e){if(e===null)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((i,s,n,r)=>{n!==e||!t||s>=r||(t=t&&this.isValidDateValue(i.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}getFilterType(){return"date"}createCondition(e){const t=this.getConditionType(e),i={},s=this.getValues(e);return s.length>0&&(i.dateFrom=mi(s[0])),s.length>1&&(i.dateTo=mi(s[1])),{dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:t,...i}}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),i=e("ariaFilterValue","Filter Value");this.forEachInput(s=>{s.setInputPlaceholder(t),s.setInputAriaLabel(i)})}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(i,s,n,r)=>{s<r&&t.push(i.getDate())}),t}translate(e){return e==="lessThan"?super.translate("before"):e==="greaterThan"?super.translate("after"):super.translate(e)}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}},tC=class extends T{constructor(e,t,i,s){super(),this.columnOrGroup=e,this.columnOrGroup=e,this.eCell=t,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=s,this.beans=i}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gos.get("enableRtl")&&this.colsSpanning?se(this.colsSpanning):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const e=this.beans.gos.get("suppressColumnMoveAnimation"),t=A(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&t&&!e?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=e.getLeft(),i=e.getOldLeft(),s=this.modifyLeftForPrintLayout(e,i),n=this.modifyLeftForPrintLayout(e,t);this.setLeft(s),this.actualLeft=n,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===n&&this.setLeft(n)})}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){if(!this.beans.gos.isDomLayout("print")||e.getPinned()==="left")return t;const s=this.beans.visibleColsService.getColsLeftWidth();if(e.getPinned()==="right"){const n=this.beans.visibleColsService.getBodyContainerWidth();return s+n+t}return s+t}setLeft(e){if(A(e)&&(this.eCell.style.left=`${e}px`),je(this.columnOrGroup)){const t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&vH(this.ariaEl,t.length)}}},QV="ag-column-first",JV="ag-column-last";function YF(e,t,i,s){return X(e)?[]:ZV(e.headerClass,e,t,i,s)}function QF(e,t,i){e.addOrRemoveCssClass(QV,i.isColAtEdge(t,"first")),e.addOrRemoveCssClass(JV,i.isColAtEdge(t,"last"))}function XV(e,t,i,s){return t.addGridCommonParams({colDef:e,column:i,columnGroup:s})}function ZV(e,t,i,s,n){if(X(e))return[];let r;if(typeof e=="function"){const o=XV(t,i,s,n);r=e(o)}else r=e;return typeof r=="string"?[r]:Array.isArray(r)?[...r]:[]}var eB=0,JF=class XF extends T{constructor(t,i,s){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=t,this.parentRowCtrl=s,this.beans=i,this.instanceId=t.getUniqueId()+"-"+eB++}wireBeans(t){this.pinnedWidthService=t.pinnedWidthService,this.focusService=t.focusService,this.userComponentFactory=t.userComponentFactory,this.ctrlsService=t.ctrlsService,this.dragAndDropService=t.dragAndDropService,this.menuService=t.menuService}postConstruct(){this.addManagedPropertyListeners(["suppressHeaderFocus"],()=>this.refreshTabIndex())}shouldStopEventPropagation(t){const{headerRowIndex:i,column:s}=this.focusService.getFocusedHeader();return BV(this.gos,t,i,s)}getWrapperHasFocus(){return this.gos.getActiveDomElement()===this.eGui}setGui(t){this.eGui=t,this.addDomData(),this.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),this.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onGuiFocus(){const t={type:"headerFocused",column:this.column};this.eventService.dispatchEvent(t)}onDisplayedColumnsChanged(){!this.comp||!this.column||(this.refreshFirstAndLastStyles(),this.refreshAriaColIndex())}refreshFirstAndLastStyles(){const{comp:t,column:i,beans:s}=this;QF(t,i,s.visibleColsService)}refreshAriaColIndex(){const{beans:t,column:i}=this,s=t.visibleColsService.getAriaColIndex(i);cF(this.eGui,s)}addResizeAndMoveKeyboardListeners(){this.resizeFeature&&this.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){this.gos.get("suppressHeaderFocus")?this.eGui.removeAttribute("tabindex"):this.eGui.setAttribute("tabindex","-1")}onGuiKeyDown(t){var o;const i=this.gos.getActiveDomElement(),s=t.key===F.LEFT||t.key===F.RIGHT;if(this.isResizing&&(t.preventDefault(),t.stopImmediatePropagation()),i!==this.eGui||!t.shiftKey&&!t.altKey||((this.isResizing||s)&&(t.preventDefault(),t.stopImmediatePropagation()),!s))return;const n=t.key===F.LEFT!==this.gos.get("enableRtl"),r=DF[n?"Left":"Right"];if(t.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const l=this.getViewportAdjustedResizeDiff(t);this.resizeHeader(l,t.shiftKey),(o=this.resizeFeature)==null||o.toggleColumnResizing(!0)}else this.moveHeader(r)}getViewportAdjustedResizeDiff(t){let i=this.getResizeDiff(t);if(this.column.getPinned()){const n=this.pinnedWidthService.getPinnedLeftWidth(),r=this.pinnedWidthService.getPinnedRightWidth(),o=Ya(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(n+r+i>o)if(o>n+r)i=o-n-r;else return 0}return i}getResizeDiff(t){let i=t.key===F.LEFT!==this.gos.get("enableRtl");const s=this.column.getPinned(),n=this.gos.get("enableRtl");return s&&n!==(s==="right")&&(i=!i),(i?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{var t;(t=this.resizeFeature)==null||t.toggleColumnResizing(!1)},150))}handleKeyDown(t){const i=this.getWrapperHasFocus();switch(t.key){case F.PAGE_DOWN:case F.PAGE_UP:case F.PAGE_HOME:case F.PAGE_END:i&&t.preventDefault()}}addDomData(){const t=XF.DOM_DATA_KEY_HEADER_CTRL;this.gos.setDomData(this.eGui,t,this),this.addDestroyFunc(()=>this.gos.setDomData(this.eGui,t,null))}getGui(){return this.eGui}focus(t){return this.eGui?(this.lastFocusEvent=t||null,this.eGui.focus(),!0):!1}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getInstanceId(){return this.instanceId}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(t,i,s){const n=t??i;this.gos.get("preventDefaultOnContextMenu")&&n.preventDefault();const r=yn(s)?s:void 0;this.menuService.isHeaderContextMenuEnabled(r)&&this.menuService.showHeaderContextMenu(r,t,i),this.dispatchColumnMouseEvent("columnHeaderContextMenu",s)}dispatchColumnMouseEvent(t,i){const s={type:t,column:i};this.eventService.dispatchEvent(s)}destroy(){super.destroy(),this.removeDragSource(),this.comp=null,this.column=null,this.resizeFeature=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null,this.eGui=null}};JF.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";var lh=JF,iC=class extends T{wireBeans(e){this.columnHoverService=e.columnHoverService}constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){this.gos.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListeners(this.element,{mouseout:this.onMouseOut.bind(this),mouseover:this.onMouseOver.bind(this)})}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}},tB=class extends lh{constructor(e,t,i){super(e,t,i),this.iconCreated=!1,this.column=e}setComp(e,t,i,s){this.comp=e,this.eButtonShowMainFilter=i,this.eFloatingFilterBody=s,this.setGui(t),this.setupActive(),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(),this.addManagedListeners(this.column,{colDefChanged:this.onColDefChanged.bind(this)})}resizeHeader(){}moveHeader(){}setupActive(){const e=this.column.getColDef(),t=!!e.filter,i=!!e.floatingFilter;this.active=t&&i}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=Zt("filter",this.gos,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(){this.createManagedBean(new vr(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.localeService.getLocaleTextFunc();Io(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){if(this.gos.getActiveDomElement()===this.eGui)return;const s=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(s){this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),s.focus();return}const n=this.findNextColumnWithFloatingFilter(e.shiftKey);n&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:n},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.visibleColsService;let i=this.column;do if(i=e?t.getColBefore(i):t.getColAfter(i),!i)break;while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case F.UP:case F.DOWN:t||e.preventDefault();case F.LEFT:case F.RIGHT:if(t)return;e.stopPropagation();case F.ENTER:t&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case F.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const i=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),s=!!e.relatedTarget&&co(e.relatedTarget,"ag-floating-filter");if(i&&s&&e.target===this.eGui){const r=this.lastFocusEvent,o=!!(r&&r.key===F.TAB);if(r&&o){const l=r.shiftKey;this.focusService.focusInto(this.eGui,l)}}const n=this.getRowIndex();this.beans.focusService.setFocusedHeader(n,this.column)}setupHover(){this.createManagedBean(new iC([this.column],this.eGui));const e=()=>{if(!this.gos.get("columnHoverHighlight"))return;const t=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",t)};this.addManagedEventListeners({columnHoverChanged:e}),e()}setupLeft(){const e=new tC(this.column,this.eGui,this.beans);this.createManagedBean(e)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){var t;if(!this.active)return;const e=(t=this.beans.filterManager)==null?void 0:t.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(){if(!this.active)return;const{filterManager:e}=this.beans,t=i=>{if((i==null?void 0:i.source)==="filterDestroyed"&&!this.isAlive())return;const s=this.comp.getFloatingFilterComp();s&&s.then(n=>{if(n){const r=e==null?void 0:e.getCurrentFloatingFilterParentModel(this.column),o=i?{...i,columns:i.columns??[],source:i.source==="api"?"api":"columnFilter"}:null;n.onParentModelChanged(r,o)}})};[this.destroySyncListener]=this.addManagedListeners(this.column,{filterChanged:t}),e!=null&&e.isFilterActive(this.column)&&t(null)}setupWidth(){const e=()=>{const t=`${this.column.getActualWidth()}px`;this.comp.setWidth(t)};this.addManagedListeners(this.column,{widthChanged:e}),e()}setupFilterChangedListener(){this.active&&([this.destroyFilterChangedListener]=this.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){var e;if(!this.suppressFilterButton&&this.comp){const t=!!((e=this.beans.filterManager)!=null&&e.isFilterAllowed(this.column));this.comp.setButtonWrapperDisplayed(t),this.highlightFilterButtonWhenActive&&t&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(){var n;const e=this.active;this.setupActive();const t=!e&&this.active;e&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const i=this.active?(n=this.beans.filterManager)==null?void 0:n.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,s=this.comp.getFloatingFilterComp();!s||!i?this.updateCompDetails(i,t):s.then(r=>{var o;!r||(o=this.beans.filterManager)!=null&&o.areFilterCompsDifferent(this.userCompDetails??null,i)?this.updateCompDetails(i,t):this.updateFloatingFilterParams(i)})}updateCompDetails(e,t){this.isAlive()&&(this.setCompDetails(e),this.setupFilterButton(),this.setupUi(),t&&(this.setupSyncWithFilter(),this.setupFilterChangedListener()))}updateFloatingFilterParams(e){var i;if(!e)return;const t=e.params;(i=this.comp.getFloatingFilterComp())==null||i.then(s=>{let n=!1;s!=null&&s.refresh&&typeof s.refresh=="function"&&s.refresh(t)!==null&&(n=!0),!n&&(s!=null&&s.onParamsUpdated)&&typeof s.onParamsUpdated=="function"&&s.onParamsUpdated(t)!==null&&M("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")})}destroy(){super.destroy(),this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.destroySyncListener=null,this.destroyFilterChangedListener=null}},$="32.0.2";function iB(e){var t,i;return!!((t=e.filterManager)!=null&&t.isColumnFilterPresent())||!!((i=e.filterManager)!=null&&i.isAggregateFilterPresent())}function sB(e,t,i){var s;return(s=e.filterManager)==null?void 0:s.getFilterInstance(t,i)}function nB(e,t){var i;return((i=e.filterManager)==null?void 0:i.getColumnFilterInstance(t))??Promise.resolve(void 0)}function rB(e,t){var s;const i=e.columnModel.getColDefCol(t);if(i)return(s=e.filterManager)==null?void 0:s.destroyFilter(i,"api")}function oB(e,t){e.frameworkOverrides.wrapIncoming(()=>{var i;return(i=e.filterManager)==null?void 0:i.setFilterModel(t)})}function lB(e){var t;return((t=e.filterManager)==null?void 0:t.getFilterModel())??{}}function aB(e,t){var i;return((i=e.filterManager)==null?void 0:i.getColumnFilterModel(t))??null}function uB(e,t,i){var s;return((s=e.filterManager)==null?void 0:s.setColumnFilterModel(t,i))??Promise.resolve()}function cB(e,t){const i=e.columnModel.getCol(t);if(!i){oe(`column '${t}' not found`);return}e.menuService.showFilterMenu({column:i,containerType:"columnFilter",positionBy:"auto"})}function dB(e,t,i){if(t==null)return null;let s=null;const{compName:n,jsComp:r,fwComp:o}=xF.getCompKeys(e,t,Qv);return n?s={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[n]:r==null&&o==null&&t.filter===!0&&(s=i()),s}var hB=class extends T{constructor(){super(...arguments),this.beanName="columnFilterService",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[]}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.userComponentFactory=e.userComponentFactory,this.rowRenderer=e.rowRenderer,this.dataTypeService=e.dataTypeService,this.filterManager=e.filterManager}postConstruct(){var e,t;this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),rowDataUpdated:()=>this.onNewRowsLoaded("rowDataUpdated"),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.initialFilterModel={...((t=(e=this.gos.get("initialState"))==null?void 0:e.filter)==null?void 0:t.filterModel)??{}}}setFilterModel(e,t="api"){var n;if((n=this.dataTypeService)!=null&&n.isPendingInference()){this.filterModelUpdateQueue.push({model:e,source:t});return}const i=[],s=this.getFilterModel();if(e){const r=new Set(Object.keys(e));this.allColumnFilters.forEach((o,l)=>{const a=e[l];i.push(this.setModelOnFilterWrapper(o.filterPromise,a)),r.delete(l)}),r.forEach(o=>{const l=this.columnModel.getColDefCol(o)||this.columnModel.getCol(o);if(!l){M("setFilterModel() - no column found for colId: "+o);return}if(!l.isFilterAllowed()){M("setFilterModel() - unable to fully apply model, filtering disabled for colId: "+o);return}const a=this.getOrCreateFilterWrapper(l);if(!a){M("setFilterModel() - unable to fully apply model, unable to create filter for colId: "+o);return}i.push(this.setModelOnFilterWrapper(a.filterPromise,e[o]))})}else this.allColumnFilters.forEach(r=>{i.push(this.setModelOnFilterWrapper(r.filterPromise,null))});Ve.all(i).then(()=>{var l;const r=this.getFilterModel(),o=[];this.allColumnFilters.forEach((a,u)=>{const c=s?s[u]:null,d=r?r[u]:null;hd(c,d)||o.push(a.column)}),o.length>0&&((l=this.filterManager)==null||l.onFilterChanged({columns:o,source:t}))})}setModelOnFilterWrapper(e,t){return new Ve(i=>{e.then(s=>{typeof s.setModel!="function"&&(M("filter missing setModel method, which is needed for setFilterModel"),i()),(s.setModel(t)||Ve.resolve()).then(()=>i())})})}getFilterModel(){const e={};return this.allColumnFilters.forEach((t,i)=>{const s=this.getModelFromFilterWrapper(t);A(s)&&(e[i]=s)}),e}getModelFromFilterWrapper(e){const{filter:t}=e;return t?typeof t.getModel!="function"?(M("filter API missing getModel method, which is needed for getFilterModel"),null):t.getModel():this.getModelFromInitialState(e.column)}getModelFromInitialState(e){return this.initialFilterModel[e.getColId()]??null}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}disableColumnFilters(){return this.allColumnFilters.size?(this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"advancedFilterEnabled")),!0):!1}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){const e=r=>r?r.isFilterActive?r.isFilterActive():(M("Filter is missing isFilterActive() method"),!1):!1,t=!!this.gos.getGroupAggFiltering(),i=r=>{if(!r.isPrimary())return!0;const l=!this.columnModel.isPivotActive();return!r.isValueActive()||!l?!1:this.columnModel.isPivotMode()?!0:t},s=[],n=[];return this.forEachColumnFilter((r,o)=>{e(r)&&(i(o.column)?s.push(r):n.push(r))}).then(()=>{this.activeAggregateFilters=s,this.activeColumnFilters=n})}updateFilterFlagInColumns(e,t){return this.forEachColumnFilter((i,s)=>s.column.setFilterActive(i.isFilterActive(),e,t))}forEachColumnFilter(e){return Ve.all(Array.from(this.allColumnFilters.values()).map(t=>t.filterPromise.then(i=>e(i,t))))}doColumnFiltersPass(e,t,i){const{data:s,aggData:n}=e,r=i?this.activeAggregateFilters:this.activeColumnFilters,o=i?n:s;for(let l=0;l<r.length;l++){const a=r[l];if(!(a==null||a===t)){if(typeof a.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!a.doesFilterPass({node:e,data:o}))return!1}}return!0}callOnFilterChangedOutsideRenderCycle(e){const t=()=>{var i;return(i=this.filterManager)==null?void 0:i.onFilterChanged(e)};this.rowRenderer.isRefreshInProgress()?setTimeout(t,0):t()}updateBeforeFilterChanged(e={}){const{filterInstance:t,additionalEventAttributes:i}=e;return this.updateDependentFilters(),this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",i).then(()=>{this.allColumnFilters.forEach(s=>{s.filterPromise&&s.filterPromise.then(n=>{n&&n!==t&&n.onAnyFilterChanged&&n.onAnyFilterChanged()})}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){this.forEachColumnFilter(t=>{t.onNewRowsLoaded&&t.onNewRowsLoaded()}).then(()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0})).then(()=>this.updateActiveFilters())}createValueGetter(e){return({node:t})=>this.valueService.getValue(e,t,!0)}createGetValue(e){return(t,i)=>{const s=i?this.columnModel.getCol(i):e;return s?this.valueService.getValue(s,t,!0):void 0}}isFilterActive(e){const{filter:t}=this.cachedFilter(e)??{};return t?t.isFilterActive():this.getModelFromInitialState(e)!=null}getOrCreateFilterWrapper(e){if(!e.isFilterAllowed())return null;let t=this.cachedFilter(e);return t||(t=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,t)),t}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){var i;let t;if(Rt.__isRegistered("@ag-grid-enterprise/set-filter",this.gridId))t="agSetColumnFilter";else{const s=(i=this.dataTypeService)==null?void 0:i.getBaseDataType(e);s==="number"?t="agNumberColumnFilter":s==="date"||s==="dateString"?t="agDateColumnFilter":t="agTextColumnFilter"}return t}getDefaultFloatingFilter(e){var i;let t;if(Rt.__isRegistered("@ag-grid-enterprise/set-filter",this.gridId))t="agSetColumnFloatingFilter";else{const s=(i=this.dataTypeService)==null?void 0:i.getBaseDataType(e);s==="number"?t="agNumberColumnFloatingFilter":s==="date"||s==="dateString"?t="agDateColumnFloatingFilter":t="agTextColumnFloatingFilter"}return t}createFilterInstance(e,t){const i=this.getDefaultFilter(e),s=e.getColDef();let n;const r={...this.createFilterParams(e,s),filterModifiedCallback:()=>this.filterModifiedCallbackFactory(n,e)(),filterChangedCallback:l=>this.filterChangedCallbackFactory(n,e)(l),doesRowPassOtherFilter:l=>this.filterManager?this.filterManager.doesRowPassOtherFilters(n,l):!0},o=this.userComponentFactory.getFilterDetails(s,r,i);return o?{filterPromise:()=>{const l=o.newAgStackInstance();return l!=null&&l.then(a=>{n=a,t&&(t.filter=a)}),l},compDetails:o}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return this.gos.addGridCommonParams({column:e,colDef:ZP(t),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(e),getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e){const t={column:e,filterPromise:null,compiledElement:null,compDetails:null},{filterPromise:i,compDetails:s}=this.createFilterInstance(e,t);return t.filterPromise=(i==null?void 0:i())??null,t.compDetails=s,t}onColumnsChanged(){var t;const e=[];this.allColumnFilters.forEach((i,s)=>{let n;i.column.isPrimary()?n=this.columnModel.getColDefCol(s):n=this.columnModel.getCol(s),!(n&&n===i.column)&&(e.push(i.column),this.disposeFilterWrapper(i,"columnChanged"),this.disposeColumnListener(s))}),e.length>0?(t=this.filterManager)==null||t.onFilterChanged({columns:e,source:"api"}):this.updateDependentFilters()}updateDependentFilters(){const e=this.columnModel.getAutoCols();e==null||e.forEach(t=>{t.getColDef().filter==="agGroupColumnFilter"&&this.getOrCreateFilterWrapper(t)})}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;const{filter:i}=this.allColumnFilters.get(e.getColId())??{};return i&&typeof(i==null?void 0:i.isFilterAllowed)=="function"?i.isFilterAllowed():!0}getFloatingFilterCompDetails(e,t){const i=a=>{var c;const u=(c=this.getOrCreateFilterWrapper(e))==null?void 0:c.filterPromise;u!=null&&u.then(d=>{a(Wl(d))})},s=e.getColDef(),n={...this.createFilterParams(e,s),filterChangedCallback:()=>i(a=>this.filterChangedCallbackFactory(a,e)())},r=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(s,Qv,n);let o=dB(this.frameworkOverrides,s,()=>this.getDefaultFloatingFilter(e));o==null&&(o="agReadOnlyFloatingFilter");const l={column:e,filterParams:r,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:i,showParentFilter:t,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(s,l,o)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilter(e,t="api"){var n;const i=e.getColId(),s=this.allColumnFilters.get(i);this.disposeColumnListener(i),delete this.initialFilterModel[i],s&&(this.disposeFilterWrapper(s,t),(n=this.filterManager)==null||n.onFilterChanged({columns:[e],source:"api"}))}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){e.filterPromise.then(i=>{this.destroyBean(i),e.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId());const s={type:"filterDestroyed",source:t,column:e.column};this.eventService.dispatchEvent(s)})}filterModifiedCallbackFactory(e,t){return()=>{const i={type:"filterModified",column:t,filterInstance:e};this.eventService.dispatchEvent(i)}}filterChangedCallbackFactory(e,t){return i=>{const s=(i==null?void 0:i.source)??"columnFilter",n={filter:e,additionalEventAttributes:i,columns:[t],source:s};this.callOnFilterChangedOutsideRenderCycle(n)}}checkDestroyFilter(e){const t=this.allColumnFilters.get(e);if(!t)return;const i=t.column,{compDetails:s}=i.isFilterAllowed()?this.createFilterInstance(i):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,s)){this.destroyFilter(i,"paramsUpdated");return}const n=i.getColDef().filterParams;if(!t.filterPromise){this.destroyFilter(i,"paramsUpdated");return}t.filterPromise.then(r=>{(r!=null&&r.refresh?r.refresh({...this.createFilterParams(i,i.getColDef()),filterModifiedCallback:this.filterModifiedCallbackFactory(r,i),filterChangedCallback:this.filterChangedCallbackFactory(r,i),doesRowPassOtherFilter:l=>this.filterManager?this.filterManager.doesRowPassOtherFilters(r,l):!0,...n}):!0)===!1&&this.destroyFilter(i,"paramsUpdated")})}setColumnFilterWrapper(e,t){const i=e.getColId();this.allColumnFilters.set(i,t),this.allColumnListeners.set(i,this.addManagedListeners(e,{colDefChanged:()=>this.checkDestroyFilter(i)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:i}=e,{componentClass:s}=t;return!(i===s||(i==null?void 0:i.render)&&(s==null?void 0:s.render)&&i.render===s.render)}hasFloatingFilters(){return this.columnModel.getCols().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e,t){t&&this.getFilterInstanceImpl(e).then(i=>{const s=Wl(i);t(s)})}getColumnFilterInstance(e){return new Promise(t=>{this.getFilterInstanceImpl(e).then(i=>{t(Wl(i))})})}getFilterInstanceImpl(e){var s;const t=this.columnModel.getColDefCol(e);return t?((s=this.getOrCreateFilterWrapper(t))==null?void 0:s.filterPromise)??Ve.resolve(null):Ve.resolve(void 0)}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:e,source:t})=>this.setFilterModel(e,t)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:e,model:t,resolve:i})=>{this.setColumnFilterModel(e,t).then(()=>i())}),this.columnFilterModelUpdateQueue=[]}getColumnFilterModel(e){const t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){var r;if((r=this.dataTypeService)!=null&&r.isPendingInference()){let o=()=>{};const l=new Promise(a=>{o=a});return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:o}),l}const i=this.columnModel.getColDefCol(e),s=i?this.getOrCreateFilterWrapper(i):null;return s?(o=>new Promise(l=>{o.then(a=>l(a))}))(this.setModelOnFilterWrapper(s.filterPromise,t)):Promise.resolve()}getFilterWrapper(e){const t=this.columnModel.getColDefCol(e);return t?this.cachedFilter(t)??null:null}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear()}};function pB(e){var t;return!!((t=e.filterManager)!=null&&t.isAnyFilterPresent())}function fB(e,t="api"){var i;(i=e.filterManager)==null||i.onFilterChanged({source:t})}var gB=class extends be{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eFloatingFilterText"></ag-input-text-field>
            </div>`,[oh]),this.eFloatingFilterText=z}wireBeans(e){this.columnNameService=e.columnNameService}destroy(){super.destroy()}init(e){this.params=e;const t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${i("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){const i=t.getModelAsString(e);this.eFloatingFilterText.setValue(i)}})}onParamsUpdated(e){this.refresh(e)}refresh(e){this.init(e)}},ZF=class extends be{wireBeans(e){this.columnNameService=e.columnNameService}getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(e){return e&&e.afterFloatingFilter}isEventFromDataChange(e){return e==null?void 0:e.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.getDefaultOption();return}const t=e.operator;let i;t?i=e.conditions[0]:i=e,this.lastType=i.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const i=e;return this.isTypeEditable(i.type)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){this.optionsFactory=new OF,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),t||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!e.filterParams.readOnly;const i=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(i)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.setSimpleParams(e)}doesFilterHaveSingleInput(e){const t=this.optionsFactory.getCustomOption(e),{numberOfInputs:i}=t||{};return i==null||i==1}isTypeEditable(e){const t=["inRange","empty","blank","notBlank"];return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){const t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();return`${t} ${i("ariaFilterInput","Filter Input")}`}},mB=class extends ZF{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eReadOnlyText"></ag-input-text-field>
                <div data-ref="eDateWrapper" style="display: flex;"></div>
            </div>`,[oh]),this.eReadOnlyText=z,this.eDateWrapper=z}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}getDefaultFilterOptions(){return KF}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new qF(this.filterParams,this.localeService,this.optionsFactory);const t=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){if(e){const i=e;this.dateComp.setDate(Ht(i.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){Me(this.eDateWrapper,e),Me(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){const e=this.dateComp.getDate(),t=mi(e);this.params.parentFilterInstance(i=>{if(i){const s=Ht(t);i.onFloatingFilterChanged(this.getLastType()||null,s)}})}getDateComponentParams(){const e=Jv(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:It(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new $F(this.context,this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper,e=>{e.setInputAriaLabel(this.getAriaLabel(this.params))}),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){const e=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(e)}getFilterModelFormatter(){return this.filterModelFormatter}},vB=class extends be{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" data-ref="eDateInput"></ag-input-text-field>
            </div>`,[oh]),this.eDateInput=z}destroy(){super.destroy()}init(e){this.params=e,this.setParams(e);const t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus()},input:i=>{i.target===this.gos.getActiveDomElement()&&(this.eDateInput.isDisabled()||this.params.onDateChanged())}})}setParams(e){const t=this.eDateInput.getInputElement(),i=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=i&&Is(),t.type=i?"date":"text";const{minValidYear:s,maxValidYear:n,minValidDate:r,maxValidDate:o}=e.filterParams||{};if(r&&s&&M("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),o&&n&&M("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),r&&o){const[l,a]=[r,o].map(u=>u instanceof Date?u:Ht(u));l&&a&&l.getTime()>a.getTime()&&M("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}r?r instanceof Date?t.min=Ul(r):t.min=r:s&&(t.min=`${s}-01-01`),o?o instanceof Date?t.max=Ul(o):t.max=o:n&&(t.max=`${n}-12-31`)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.params=e,this.setParams(e)}getDate(){return Ht(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(mi(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(e){return e.filterParams&&e.filterParams.browserDatePicker!=null?e.filterParams.browserDatePicker:Wv()||hF()||Is()&&dF()>=14.1}},eT=class extends T{constructor(e){super(),this.params=e,this.eFloatingFilterTextInput=z,this.valueChangedListener=()=>{}}setupGui(e){var s;this.eFloatingFilterTextInput=this.createManagedBean(new Cr((s=this.params)==null?void 0:s.config));const t=this.eFloatingFilterTextInput.getGui();e.appendChild(t);const i=n=>this.valueChangedListener(n);this.addManagedListeners(t,{input:i,keydown:i})}setEditable(e){this.eFloatingFilterTextInput.setDisabled(!e)}setAutoComplete(e){this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(e,t){this.eFloatingFilterTextInput.setValue(e,t)}setValueChangedListener(e){this.valueChangedListener=e}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)}},tT=class extends ZF{constructor(){super(...arguments),this.eFloatingFilterInputContainer=z}postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" data-ref="eFloatingFilterInputContainer"></div>
        `)}getDefaultDebounceMs(){return 500}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){this.params=e;const t=e.browserAutoComplete??!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=yd(this.params.filterParams),!this.isReadOnly()){const i=Jv(this.params.filterParams,this.getDefaultDebounceMs()),s=It(this.syncUpWithParentFilter.bind(this),i);this.floatingFilterInputService.setValueChangedListener(s)}}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const t=this.floatingFilterInputService.getValue();si(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(t,!0)}syncUpWithParentFilter(e){const t=e.key===F.ENTER;if(this.applyActive&&!t)return;let i=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(i=UF(i),this.floatingFilterInputService.setValue(i,!0)),this.params.parentFilterInstance(s=>{s&&s.onFloatingFilterChanged(this.getLastType()||null,i||null)})}setEditable(e){this.floatingFilterInputService.setEditable(e)}},CB=class extends T{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(e){this.eFloatingFilterNumberInput=this.createManagedBean(new Zv),this.eFloatingFilterTextInput=this.createManagedBean(new Cr),this.eFloatingFilterTextInput.setDisabled(!0);const t=this.eFloatingFilterNumberInput.getGui(),i=this.eFloatingFilterTextInput.getGui();e.appendChild(t),e.appendChild(i),this.setupListeners(t,s=>this.valueChangedListener(s)),this.setupListeners(i,s=>this.valueChangedListener(s))}setEditable(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(e){this.valueChangedListener=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)}},wB=class extends tT{init(e){var t;super.init(e),this.filterModelFormatter=new BF(this.localeService,this.optionsFactory,(t=e.filterParams)==null?void 0:t.numberFormatter)}onParamsUpdated(e){this.refresh(e)}refresh(e){Ag(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return VF}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(e){return this.allowedCharPattern=Ag(e.filterParams),this.allowedCharPattern?this.createManagedBean(new eT({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new CB)}},yB=class extends tT{init(e){super.init(e),this.filterModelFormatter=new zF(this.localeService,this.optionsFactory)}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return WF}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new eT)}};function SB(e){var t;return!!((t=e.filterManager)!=null&&t.isQuickFilterPresent())}function RB(e){return e.gos.get("quickFilterText")}function bB(e){var t;(t=e.filterManager)==null||t.resetQuickFilterCache()}var EB=class extends T{constructor(){super(...arguments),this.beanName="quickFilterService",this.quickFilter=null,this.quickFilterParts=null}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.pivotResultColsService=e.pivotResultColsService}postConstruct(){const e=this.resetQuickFilterCache.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{this.gos.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}}),this.addManagedPropertyListener("quickFilterText",t=>this.setQuickFilter(t.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onQuickFilterColumnConfigChanged()),this.quickFilter=this.parseQuickFilter(this.gos.get("quickFilterText")),this.parser=this.gos.get("quickFilterParser"),this.matcher=this.gos.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setQuickFilterParserAndMatcher())}refreshQuickFilterCols(){var n;const e=this.columnModel.isPivotMode(),t=this.columnModel.getAutoCols(),i=this.columnModel.getColDefCols();let s=(e&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?(n=this.pivotResultColsService.getPivotResultCols())==null?void 0:n.list:i)??[];t&&(s=s.concat(t)),this.colsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?s:s.filter(r=>r.isVisible()||r.isRowGroupActive())}isQuickFilterPresent(){return this.quickFilter!==null}doesRowPassQuickFilter(e){const t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(t,e):this.quickFilterParts.every(i=>t?this.doesRowPassQuickFilterCache(e,i):this.doesRowPassQuickFilterNoCache(e,i))}resetQuickFilterCache(){this.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}setQuickFilterParts(){const{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseQuickFilter(e){return A(e)?this.gos.isRowModelType("clientSide")?e.toUpperCase():(M("Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(e){if(e!=null&&typeof e!="string"){M(`Grid option quickFilterText only supports string inputs, received: ${typeof e}`);return}const t=this.parseQuickFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setQuickFilterParserAndMatcher(){const e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),i=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,i&&(this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onQuickFilterColumnConfigChanged(){this.refreshQuickFilterCols(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassQuickFilterNoCache(e,t){return this.colsForQuickFilter.some(i=>{const s=this.getQuickFilterTextForColumn(i,e);return A(s)&&s.indexOf(t)>=0})}doesRowPassQuickFilterCache(e,t){return this.checkGenerateQuickFilterAggregateText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassQuickFilterMatcher(e,t){let i;e?(this.checkGenerateQuickFilterAggregateText(t),i=t.quickFilterAggregateText):i=this.getQuickFilterAggregateText(t);const{quickFilterParts:s,matcher:n}=this;return n(s,i)}checkGenerateQuickFilterAggregateText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getQuickFilterAggregateText(e))}getQuickFilterTextForColumn(e,t){let i=this.valueService.getValue(e,t,!0);const s=e.getColDef();if(s.getQuickFilterText){const n=this.gos.addGridCommonParams({value:i,node:t,data:t.data,column:e,colDef:s});i=s.getQuickFilterText(n)}return A(i)?i.toString().toUpperCase():null}getQuickFilterAggregateText(e){const t=[];return this.colsForQuickFilter.forEach(i=>{const s=this.getQuickFilterTextForColumn(i,e);A(s)&&t.push(s)}),t.join(`
`)}},sC={version:$,moduleName:"@ag-grid-community/filter-core",beans:[FV]},PB={version:$,moduleName:"@ag-grid-community/filter-api",apiFunctions:{isAnyFilterPresent:pB,onFilterChanged:fB},dependantModules:[sC]},nC={version:$,moduleName:"@ag-grid-community/column-filter",beans:[hB],dependantModules:[sC]},FB={version:$,moduleName:"@ag-grid-community/column-filter-api",apiFunctions:{isColumnFilterPresent:iB,getFilterInstance:sB,getColumnFilterInstance:nB,destroyFilter:rB,setFilterModel:oB,getFilterModel:lB,getColumnFilterModel:aB,setColumnFilterModel:uB,showColumnFilter:cB},dependantModules:[nC,PB]},iT={version:$,moduleName:"@ag-grid-community/floating-filter-core",controllers:[{name:"headerFilterCell",classImp:tB}],dependantModules:[nC]},TB={version:$,moduleName:"@ag-grid-community/read-only-floating-filter",userComponents:[{name:"agReadOnlyFloatingFilter",classImp:gB}],dependantModules:[iT]},xB={version:$,moduleName:"@ag-grid-community/simple-filter",dependantModules:[nC],userComponents:[{name:"agTextColumnFilter",classImp:$V},{name:"agNumberColumnFilter",classImp:jV},{name:"agDateColumnFilter",classImp:YV},{name:"agDateInput",classImp:vB}]},IB={version:$,moduleName:"@ag-grid-community/simple-floating-filter",dependantModules:[xB,iT],userComponents:[{name:"agTextColumnFloatingFilter",classImp:yB},{name:"agNumberColumnFloatingFilter",classImp:wB},{name:"agDateColumnFloatingFilter",classImp:mB}]},sT={version:$,moduleName:"@ag-grid-community/quick-filter-core",beans:[EB],dependantModules:[sC]},DB={version:$,moduleName:"@ag-grid-community/quick-filter-api",apiFunctions:{isQuickFilterPresent:SB,getQuickFilter:RB,resetQuickFilter:bB},dependantModules:[sT]},kB={version:$,moduleName:"@ag-grid-community/quick-filter",dependantModules:[sT,DB]},MB={version:$,moduleName:"@ag-grid-community/filter",dependantModules:[IB,TB,kB,FB]},_g=(e=>(e.COLUMN_GROUP="group",e.COLUMN="column",e.FLOATING_FILTER="filter",e))(_g||{}),AB=class extends T{constructor(){super(...arguments),this.beanName="headerNavigationService",this.currentHeaderRowWithoutSpan=-1}wireBeans(e){this.focusService=e.focusService,this.headerPositionUtils=e.headerPositionUtils,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.visibleColService=e.visibleColsService}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridBodyCon=t.gridBodyCtrl});const e=this.gos.getDocument();this.addManagedElementListeners(e,{mousedown:()=>this.setCurrentHeaderRowWithoutSpan(-1)})}getHeaderRowCount(){const e=this.ctrlsService.getHeaderRowContainerCtrl();return e?e.getRowCount():0}getHeaderPositionForColumn(e,t){let i;if(typeof e=="string"?(i=this.columnModel.getCol(e),i||(i=this.visibleColService.getColumnGroup(e))):i=e,!i)return null;const n=this.ctrlsService.getHeaderRowContainerCtrl().getAllCtrls(),r=se(n).getType()==="filter",o=this.getHeaderRowCount()-1;let l=-1,a=i;for(;a;)l++,a=a.getParent();let u=l;return t&&r&&u===o-1&&u++,u===-1?null:{headerRowIndex:u,column:i}}navigateVertically(e,t,i){if(t||(t=this.focusService.getFocusedHeader()),!t)return!1;const{headerRowIndex:s}=t,n=t.column,r=this.getHeaderRowCount(),o=e===0;let{headerRowIndex:l,column:a,headerRowIndexWithoutSpan:u}=o?this.headerPositionUtils.getColumnVisibleParent(n,s):this.headerPositionUtils.getColumnVisibleChild(n,s),c=!1;return l<0&&(l=0,a=n,c=!0),l>=r?(l=-1,this.setCurrentHeaderRowWithoutSpan(-1)):u!==void 0&&(this.currentHeaderRowWithoutSpan=u),!c&&!a?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l,column:a},allowUserOverride:!0,event:i})}setCurrentHeaderRowWithoutSpan(e){this.currentHeaderRowWithoutSpan=e}navigateHorizontally(e,t=!1,i){const s=this.focusService.getFocusedHeader(),n=e===2,r=this.gos.get("enableRtl");let o,l;if(this.currentHeaderRowWithoutSpan!==-1?s.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=s.headerRowIndex,n!==r?(l="Before",o=this.headerPositionUtils.findHeader(s,l)):(l="After",o=this.headerPositionUtils.findHeader(s,l)),o||!t)return this.focusService.focusHeaderPosition({headerPosition:o,direction:l,fromTab:t,allowUserOverride:!0,event:i});if(t){const a=this.gos.getCallback("tabToNextHeader");if(a)return this.focusService.focusHeaderPositionFromUserFunc({userFunc:a,headerPosition:o,direction:l})}return this.focusNextHeaderRow(s,l,i)}focusNextHeaderRow(e,t,i){const s=e.headerRowIndex;let n=null,r;if(t==="Before"?s>0&&(r=s-1,this.currentHeaderRowWithoutSpan-=1,n=this.headerPositionUtils.findColAtEdgeForHeaderRow(r,"end")):(r=s+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),n=this.headerPositionUtils.findColAtEdgeForHeaderRow(r,"start")),!n)return!1;const{column:o,headerRowIndex:l}=this.headerPositionUtils.getHeaderIndexToFocus(n.column,n==null?void 0:n.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:o,headerRowIndex:l},direction:t,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(e,t="After"){if(e.getPinned())return;let i;if(je(e)){const s=e.getDisplayedLeafColumns();i=t==="Before"?se(s):s[0]}else i=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(i)}},_B=class extends T{wireBeans(e){this.headerNavigationService=e.headerNavigationService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService,this.filterManager=e.filterManager,this.menuService=e.menuService}setComp(e,t,i){this.comp=e,this.eGui=t,this.createManagedBean(new vr(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),this.onPivotModeChanged(),this.setupHeaderHeight();const s=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:s}),this.mockContextMenuForIPad(s),this.ctrlsService.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListener("headerHeight",e),this.addManagedPropertyListener("pivotHeaderHeight",e),this.addManagedPropertyListener("groupHeaderHeight",e),this.addManagedPropertyListener("pivotGroupHeaderHeight",e),this.addManagedPropertyListener("floatingFiltersHeight",e),this.addManagedEventListeners({displayedColumnsChanged:e,columnHeaderHeightChanged:e,gridStylesChanged:e,advancedFilterEnabledChanged:e})}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){var c;const{columnModel:e}=this;let t=0,i=e.getHeaderRowCount(),s;((c=this.filterManager)==null?void 0:c.hasFloatingFilters())&&(i++,t=1);const r=this.columnModel.getColumnGroupHeaderRowHeight(),o=this.columnModel.getColumnHeaderRowHeight(),l=1+t,a=i-l;if(s=t*e.getFloatingFiltersHeight(),s+=a*r,s+=o,this.headerHeight===s)return;this.headerHeight=s;const u=`${s+1}px`;this.comp.setHeightAndMinHeight(u),this.eventService.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(){const e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)}onDisplayedColumnsChanged(){const t=this.visibleColsService.getAllCols().some(i=>i.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",t)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),i=e.shiftKey!==t?2:3;(this.headerNavigationService.navigateHorizontally(i,!0,e)||this.focusService.focusNextGridCoreContainer(e.shiftKey))&&e.preventDefault()}handleKeyDown(e){let t=null;switch(e.key){case F.LEFT:t=2;case F.RIGHT:{A(t)||(t=3),this.headerNavigationService.navigateHorizontally(t,!1,e);break}case F.UP:t=0;case F.DOWN:{A(t)||(t=1),this.headerNavigationService.navigateVertically(t,null,e)&&e.preventDefault();break}default:return}}onFocusOut(e){const{relatedTarget:t}=e;!t&&this.eGui.contains(this.gos.getActiveDomElement())||this.eGui.contains(t)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(e,t,i){if(!e&&!i||!this.menuService.isHeaderContextMenuEnabled())return;const{target:s}=e??t;(s===this.eGui||s===this.ctrlsService.getHeaderRowContainerCtrl().getViewport())&&this.menuService.showHeaderContextMenu(void 0,e,i)}mockContextMenuForIPad(e){if(!xn())return;const t=new gn(this.eGui),i=s=>{e(void 0,s.touchStart,s.touchEvent)};this.addManagedListeners(t,{longTap:i}),this.addDestroyFunc(()=>t.destroy())}},rC=class extends T{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}wireBeans(e){this.visibleColsService=e.visibleColsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=this.gos.isDomLayout("print"),t=this.visibleColsService.getBodyContainerWidth(),i=this.visibleColsService.getColsLeftWidth(),s=this.visibleColsService.getDisplayedColumnsRightWidth();let n;e?n=t+i+s:(n=t,this.addSpacer&&(this.gos.get("enableRtl")?i:s)===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(n+=this.gos.getScrollbarWidth())),this.callback(n)}},LB=class extends T{constructor(e){super(),this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=e}wireBeans(e){this.funcColsService=e.funcColsService}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;t&&t.forEach(i=>{i.isPrimary()&&(i.isAnyFunctionActive()||(i.isAllowValue()?this.columnsToAggregate.push(i):i.isAllowRowGroup()?this.columnsToGroup.push(i):i.isAllowPivot()&&this.columnsToPivot.push(i)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){this.columnsToAggregate.length>0&&this.funcColsService.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.funcColsService.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.funcColsService.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}};function oC(e){const{isFromHeader:t,hDirection:i,xPosition:s,fromEnter:n,fakeEvent:r,pinned:o,gos:l,columnModel:a,columnMoveService:u,presentedColsService:c}=e,d=i===0,h=i===1;let{allMovingColumns:p}=e;if(t){const R=[];p.forEach(E=>{var D;let x=null,I=E.getParent();for(;I!=null&&I.getDisplayedLeafColumns().length===1;)x=I,I=I.getParent();x!=null?(!!((D=x.getColGroupDef())!=null&&D.marryChildren)?x.getProvidedColumnGroup().getLeafColumns():x.getLeafColumns()).forEach(J=>{R.includes(J)||R.push(J)}):R.includes(E)||R.push(E)}),p=R}const f=p.slice();a.sortColsLikeCols(f);const m=HB({movingCols:f,draggingRight:h,xPosition:s,pinned:o,gos:l,columnModel:a,presentedColsService:c}),w=OB(f,a);if(m.length===0)return;const v=m[0];let g=w!==null&&!n;if(t&&(g=w!==null),g&&!r&&(d&&v>=w||h&&v<=w))return;const y=c.getAllCols(),S=[];let b=null;for(let R=0;R<m.length;R++){const E=m[R],x=u.getProposedColumnOrder(f,E);if(!u.doesOrderPassRules(x))continue;const I=x.filter(G=>y.includes(G));if(b===null)b=I;else if(!gr(I,b))break;const D=NB(x);S.push({move:E,fragCount:D})}if(S.length!==0)return S.sort((R,E)=>R.fragCount-E.fragCount),nT(p,S[0].move,"uiColumnMoved",!1,u)}function nT(e,t,i,s,n){return n.moveColumns(e,t,i,s),s?null:{columns:e,toIndex:t}}function OB(e,t){const i=t.getCols(),s=bG(e.map(a=>i.indexOf(a))),n=s[0];return se(s)-n!==s.length-1?null:n}function NB(e){function t(s){const n=[];let r=s.getOriginalParent();for(;r!=null;)n.push(r),r=r.getOriginalParent();return n}let i=0;for(let s=0;s<e.length-1;s++){let n=t(e[s]),r=t(e[s+1]);[n,r]=n.length>r.length?[n,r]:[r,n],n.forEach(o=>{r.indexOf(o)===-1&&i++})}return i}function GB(e,t){switch(t){case"left":return e.getLeftCols();case"right":return e.getRightCols();default:return e.getCenterCols()}}function HB(e){const{movingCols:t,draggingRight:i,xPosition:s,pinned:n,gos:r,columnModel:o,presentedColsService:l}=e;if(r.get("suppressMovableColumns")||t.some(y=>y.getColDef().suppressMovable))return[];const u=GB(l,n),c=o.getCols(),d=u.filter(y=>$n(t,y)),h=u.filter(y=>!$n(t,y)),p=c.filter(y=>!$n(t,y));let f=0,m=s;if(i){let y=0;d.forEach(S=>y+=S.getActualWidth()),m-=y}if(m>0){for(let y=0;y<h.length;y++){const S=h[y];if(m-=S.getActualWidth(),m<0)break;f++}i&&f++}let w;if(f>0){const y=h[f-1];w=p.indexOf(y)+1}else w=p.indexOf(h[0]),w===-1&&(w=0);const v=[w],g=(y,S)=>y-S;if(i){let y=w+1;const S=c.length-1;for(;y<=S;)v.push(y),y++;v.sort(g)}else{let y=w;const S=c.length-1;let b=c[y];for(;y<=S&&u.indexOf(b)<0;)y++,v.push(y),b=c[y];y=w-1;const R=0;for(;y>=R;)v.push(y),y--;v.sort(g).reverse()}return v}function lC(e,t,i,s,n){const r=n.getHeaderRowContainerCtrl(t).getViewport();return i&&(e-=r.getBoundingClientRect().left),s.get("enableRtl")&&(e=r.clientWidth-e),t==null&&(e+=n.get("center").getCenterViewportScrollLeft()),e}var VB=class extends T{constructor(e){super(),this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=e,this.isCenterContainer=!A(e)}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnMoveService=e.columnMoveService,this.dragAndDropService=e.dragAndDropService,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){return this.pinned?"pinned":"move"}onDragEnter(e){const t=e.dragItem.columns;if(e.dragSource.type===0)this.setColumnsVisible(t,!0,"uiColumnDragged");else{const s=e.dragItem.visibleState,n=(t||[]).filter(r=>s[r.getId()]);this.setColumnsVisible(n,!0,"uiColumnDragged")}this.setColumnsPinned(t,this.pinned,"uiColumnDragged"),this.onDragging(e,!0,!0)}onDragLeave(){this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,i){if(e){const s=e.filter(n=>!n.getColDef().lockVisible);this.columnModel.setColsVisible(s,t,i)}}setColumnsPinned(e,t,i){if(e){const s=e.filter(n=>!n.getColDef().lockPinned);this.columnModel.setColsPinned(s,t,i)}}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}checkCenterForScrolling(e){if(this.isCenterContainer){const t=this.ctrlsService.get("center"),i=t.getCenterViewportScrollLeft(),s=i+t.getCenterWidth();this.gos.get("enableRtl")?(this.needToMoveRight=e<i+50,this.needToMoveLeft=e>s-50):(this.needToMoveLeft=e<i+50,this.needToMoveRight=e>s-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}}onDragging(e=this.lastDraggingEvent,t=!1,i=!1,s=!1){var u;if(s){if(this.lastMovedInfo){const{columns:c,toIndex:d}=this.lastMovedInfo;nT(c,d,"uiColumnMoved",!0,this.columnMoveService)}return}if(this.lastDraggingEvent=e,X(e.hDirection))return;const n=lC(e.x,this.pinned,!1,this.gos,this.ctrlsService);t||this.checkCenterForScrolling(n);const r=this.normaliseDirection(e.hDirection),o=e.dragSource.type,l=((u=e.dragSource.getDragItem().columns)==null?void 0:u.filter(c=>c.getColDef().lockPinned?c.getPinned()==this.pinned:!0))||[],a=oC({allMovingColumns:l,isFromHeader:o===1,hDirection:r,xPosition:n,pinned:this.pinned,fromEnter:t,fakeEvent:i,gos:this.gos,columnModel:this.columnModel,columnMoveService:this.columnMoveService,presentedColsService:this.visibleColsService});a&&(this.lastMovedInfo=a)}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case 0:return 1;case 1:return 0;default:oe(`Unknown direction ${e}`)}else return e}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.dragAndDropService.setGhostIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon("move"))}moveInterval(){let e;this.intervalCount++,e=10+this.intervalCount*5,e>100&&(e=100);let t=null;const i=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?t=i.scrollHorizontally(-e):this.needToMoveRight&&(t=i.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const n=this.lastDraggingEvent.dragItem.columns.filter(r=>!r.getColDef().lockPinned);if(n.length>0&&(this.dragAndDropService.setGhostIcon("pinned"),this.failedMoveAttempts>7)){const r=this.needToMoveLeft?"left":"right";this.setColumnsPinned(n,r,"uiColumnDragged"),this.dragAndDropService.nudge()}}}},BB=class extends T{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){this.ctrlsService.whenReady(e=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.left.getContainerElement()],[e.bottomLeft.getContainerElement()],[e.topLeft.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.right.getContainerElement()],[e.bottomRight.getContainerElement()],[e.topRight.getContainerElement()]];break;default:this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.center.getViewportElement()],[e.bottomCenter.getViewportElement()],[e.topCenter.getViewportElement()]];break}}),this.moveColumnFeature=this.createManagedBean(new VB(this.pinned)),this.bodyDropPivotTarget=this.createManagedBean(new LB(this.pinned)),this.dragAndDropService.addDropTarget(this)}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.columnModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}},WB=class extends T{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.pinnedWidthService=e.pinnedWidthService,this.ctrlsService=e.ctrlsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,i,s,n){super(),this.pinned=e,this.column=t,this.eResize=i,this.comp=s,this.ctrl=n}postConstruct(){const e=[];let t,i;const s=()=>{if(Me(this.eResize,t),!t)return;const o=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(e.push(o),i){const l=this.gos.get("skipHeaderOnAutoSize"),a=()=>{this.columnAutosizeService.autoSizeColumn(this.column,"uiColumnResized",l)};this.eResize.addEventListener("dblclick",a);const u=new gn(this.eResize);u.addEventListener("doubleTap",a),e.push(()=>{this.eResize.removeEventListener("dblclick",a),u.removeEventListener("doubleTap",a),u.destroy()})}},n=()=>{e.forEach(o=>o()),e.length=0},r=()=>{const o=this.column.isResizable(),l=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(o!==t||l!==i)&&(t=o,i=l,n(),s())};r(),this.addDestroyFunc(n),this.ctrl.addRefreshFunction(r)}onResizing(e,t){const{column:i,lastResizeAmount:s,resizeStartWidth:n}=this,r=this.normaliseResizeAmount(t),o=n+r,l=[{key:i,newWidth:o}];if(this.column.getPinned()){const a=this.pinnedWidthService.getPinnedLeftWidth(),u=this.pinnedWidthService.getPinnedRightWidth(),c=Ya(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(a+u+(r-s)>c)return}this.lastResizeAmount=r,this.columnSizeService.setColumnWidths(l,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const i=this.pinned!=="left",s=this.pinned==="right";return this.gos.get("enableRtl")?i&&(t*=-1):s&&(t*=-1),t}},zB=class extends T{constructor(e){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=e}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}onSpaceKeyDown(e){const t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(this.gos.getActiveDomElement())&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new qv),this.cbSelectAll.addCssClass("ag-header-select-all"),Hi(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedEventListeners({newColumnsLoaded:this.onNewColumnsLoaded.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:this.onSelectionChanged.bind(this),paginationChanged:this.onSelectionChanged.bind(this),modelUpdated:this.onModelChanged.bind(this)}),this.addManagedListeners(this.cbSelectAll,{fieldValueChanged:this.onCbSelectAll.bind(this)}),Vv(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(e);const t=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!t),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){const e=this.localeService.getLocaleTextFunc(),i=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),s=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${s} (${i})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(`${s} (${i})`),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(e){return this.gos.get("rowSelection")==="multiple"?!0:(M(`${e} is only available if using 'multiple' rowSelection.`),!1)}checkRightRowModelType(e){const t=this.rowModel.getType();return t==="clientSide"||t==="serverSide"?!0:(M(`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.isFilteredOnly(),i=this.isCurrentPageOnly();let s="uiSelectAll";i?s="uiSelectAllCurrentPage":t&&(s="uiSelectAllFiltered");const n={source:s,justFiltered:t,justCurrentPage:i};e?this.selectionService.selectAllRowNodes(n):this.selectionService.deselectAllRowNodes(n)}isCheckboxSelection(){let e=this.column.getColDef().headerCheckboxSelection;if(typeof e=="function"){const t=e,i=this.gos.addGridCommonParams({column:this.column,colDef:this.column.getColDef()});e=t(i)}return e?this.checkRightRowModelType("headerCheckboxSelection")&&this.checkSelectionType("headerCheckboxSelection"):!1}isFilteredOnly(){return!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){return!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}},UB=class extends lh{constructor(e,t,i){super(e,t,i),this.refreshFunctions=[],this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=e}setComp(e,t,i,s){this.comp=e,this.setGui(t),this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight(s),this.addColumnHoverListener(),this.setupFilterClass(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.resizeFeature=this.createManagedBean(new WB(this.getPinned(),this.column,i,e,this)),this.createManagedBean(new iC([this.column],t)),this.createManagedBean(new tC(this.column,t,this.beans)),this.createManagedBean(new vr(t,{shouldStopEventPropagation:n=>this.shouldStopEventPropagation(n),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(),this.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],this.refresh.bind(this)),this.addManagedListeners(this.column,{colDefChanged:this.refresh.bind(this)}),this.addManagedEventListeners({columnValueChanged:this.onColumnValueChanged.bind(this),columnRowGroupChanged:this.onColumnRowGroupChanged.bind(this),columnPivotChanged:this.onColumnPivotChanged.bind(this),headerHeightChanged:this.onHeaderHeightChanged.bind(this)})}resizeHeader(e,t){if(!this.column.isResizable())return;const i=this.column.getActualWidth(),s=this.column.getMinWidth(),n=this.column.getMaxWidth(),r=Math.min(Math.max(i+e,s),n);this.beans.columnSizeService.setColumnWidths([{key:this.column,newWidth:r}],t,!0,"uiColumnResized")}moveHeader(e){const{eGui:t,column:i,gos:s,ctrlsService:n}=this,r=this.getPinned(),o=t.getBoundingClientRect().left,l=i.getActualWidth(),a=s.get("enableRtl"),c=lC(e===0!==a?o-20:o+l+20,r,!0,s,n);oC({allMovingColumns:[i],isFromHeader:!0,hDirection:e,xPosition:c,pinned:r,fromEnter:!1,fakeEvent:!1,gos:s,columnModel:this.beans.columnModel,columnMoveService:this.beans.columnMoveService,presentedColsService:this.beans.visibleColsService}),n.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(i,"auto")}setupUserComp(){const e=this.lookupUserCompDetails();this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){const e=this.createParams(),t=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(t,e)}createParams(){return this.gos.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:t=>{this.menuService.showColumnMenu({column:this.column,buttonElement:t,positionBy:"button"})},showColumnMenuAfterMouseClick:t=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:t,positionBy:"mouse"})},showFilter:t=>{this.menuService.showFilterMenu({column:this.column,buttonElement:t,containerType:"columnFilter",positionBy:"button"})},progressSort:t=>{this.beans.sortController.progressSort(this.column,!!t,"uiColumnSorted")},setSort:(t,i)=>{this.beans.sortController.setSortForColumn(this.column,t,!!i,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(t,i)=>{this.setupTooltip(t,i)}})}setupSelectAll(){this.selectAllFeature=this.createManagedBean(new zB(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===F.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===F.ENTER&&this.onEnterKeyDown(e),e.key===F.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){if(e.ctrlKey||e.metaKey)this.showMenuOnKeyPress(e,!0);else if(this.sortable){const t=e.shiftKey;this.beans.sortController.progressSort(this.column,t,"uiColumnSorted")}}showMenuOnKeyPress(e,t){const i=this.comp.getUserCompInstance();!i||!(i instanceof Dg)||i.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){if(!this.getGui().contains(e.relatedTarget)){const t=this.getRowIndex();this.focusService.setFocusedHeader(t,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const i=this.gos.get("tooltipShowMode")==="whenTruncated",s=this.eGui,n=this.column.getColDef();!t&&i&&!n.headerComponent&&(t=()=>{const l=s.querySelector(".ag-header-cell-text");return l?l.scrollWidth>l.clientWidth:!0});const r={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>s,getLocation:()=>"header",getTooltipValue:()=>e??this.column.getColDef().headerTooltip,shouldDisplayTooltip:t},o=this.createManagedBean(new Ko(r));this.refreshFunctions.push(()=>o.refreshToolTip())}setupClassesFromColDef(){const e=()=>{const t=this.column.getColDef(),i=YF(t,this.gos,this.column,null),s=this.userHeaderClasses;this.userHeaderClasses=new Set(i),i.forEach(n=>{s.has(n)?s.delete(n):this.comp.addOrRemoveCssClass(n,!0)}),s.forEach(n=>this.comp.addOrRemoveCssClass(n,!1))};this.refreshFunctions.push(e),e()}setDragSource(e){if(this.dragSourceElement=e,this.removeDragSource(),!e||!this.draggable)return;const{column:t,beans:i,displayName:s,dragAndDropService:n,gos:r}=this,{columnModel:o}=i;let l=!this.gos.get("suppressDragLeaveHidesColumns");const a=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>l?"hide":"notAllowed",getDragItem:()=>this.createDragItem(t),dragItemName:s,onDragStarted:()=>{l=!r.get("suppressDragLeaveHidesColumns"),t.setMoving(!0,"uiColumnMoved")},onDragStopped:()=>t.setMoving(!1,"uiColumnMoved"),onGridEnter:u=>{var c;if(l){const d=((c=u==null?void 0:u.columns)==null?void 0:c.filter(h=>!h.getColDef().lockVisible))||[];o.setColsVisible(d,!0,"uiColumnMoved")}},onGridExit:u=>{var c;if(l){const d=((c=u==null?void 0:u.columns)==null?void 0:c.filter(h=>!h.getColDef().lockVisible))||[];o.setColsVisible(d,!1,"uiColumnMoved")}}};n.addDragSource(a,!0)}createDragItem(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}addRefreshFunction(e){this.refreshFunctions.push(e)}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach(e=>e())}refreshHeaderComp(){const e=this.lookupUserCompDetails();(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==e.componentClass?this.attemptHeaderCompRefresh(e.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.columnNameService.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}onColumnRowGroupChanged(){this.checkDisplayName()}onColumnPivotChanged(){this.checkDisplayName()}onColumnValueChanged(){this.checkDisplayName()}setupWidth(){const e=()=>{const t=this.column.getActualWidth();this.comp.setWidth(`${t}px`)};this.addManagedListeners(this.column,{widthChanged:e}),e()}setupMovingCss(){const e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};this.addManagedListeners(this.column,{movingChanged:e}),e()}setupMenuClass(){const e=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};this.addManagedListeners(this.column,{menuVisibleChanged:e}),e()}setupSortableClass(){const e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};e(),this.addRefreshFunction(e),this.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(){const e=()=>{const t=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",t),this.refreshAria()};this.addManagedListeners(this.column,{filterActiveChanged:e}),e()}setupWrapTextClass(){const e=()=>{const t=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",t)};e(),this.addRefreshFunction(e)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:t,comp:i,beans:s}=this;if(!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),i.addOrRemoveCssClass("ag-header-span-height",!1),i.addOrRemoveCssClass("ag-header-span-total",!1);return}const{numberOfParents:n,isSpanningTotal:r}=this.column.getColumnGroupPaddingInfo();i.addOrRemoveCssClass("ag-header-span-height",n>0);const{columnModel:o}=s,l=o.getColumnHeaderRowHeight();if(n===0){i.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${l}px`);return}i.addOrRemoveCssClass("ag-header-span-total",r);const u=o.isPivotMode()?o.getPivotGroupHeaderHeight():o.getGroupHeaderHeight(),c=n*u;e.style.setProperty("top",`${-c}px`),e.style.setProperty("height",`${l+c}px`)}setupAutoHeight(e){const{columnModel:t,resizeObserverService:i}=this.beans,s=u=>{if(!this.isAlive())return;const{paddingTop:c,paddingBottom:d,borderBottomWidth:h,borderTopWidth:p}=mr(this.getGui()),f=c+d+h+p,w=e.offsetHeight+f;if(u<5){const v=this.beans.gos.getDocument(),g=!v||!v.contains(e),y=w==0;if(g||y){window.setTimeout(()=>s(u+1),0);return}}t.setColHeaderHeight(this.column,w)};let n=!1,r;const o=()=>{const u=this.column.isAutoHeaderHeight();u&&!n&&l(),!u&&n&&a()},l=()=>{n=!0,s(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),r=i.observeResize(e,()=>s(0))},a=()=>{n=!1,r&&r(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),r=void 0};o(),this.addDestroyFunc(()=>a()),this.addManagedListeners(this.column,{widthChanged:()=>n&&s(0)}),this.addManagedEventListeners({sortChanged:()=>{n&&window.setTimeout(()=>s(0))}}),this.addRefreshFunction(o)}refreshAriaSort(){if(this.sortable){const e=this.localeService.getLocaleTextFunc(),t=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(lH(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains(this.beans.gos.getActiveDomElement()))return;const e=Array.from(this.ariaDescriptionProperties.keys()).sort((t,i)=>t==="filter"?-1:i.charCodeAt(0)-t.charCodeAt(0)).map(t=>this.ariaDescriptionProperties.get(t)).join(". ");this.beans.ariaAnnouncementService.announceValue(e)}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(){const e=()=>{if(!this.gos.get("columnHoverHighlight"))return;const t=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",t)};this.addManagedEventListeners({columnHoverChanged:e}),e()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(){const e=s=>this.handleMouseOverChange(s.type==="mouseenter"),t=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column),i=s=>this.handleContextMenuMouseEvent(s,void 0,this.column);this.addManagedListeners(this.getGui(),{mouseenter:e,mouseleave:e,click:t,contextmenu:i})}handleMouseOverChange(e){this.setActiveHeader(e);const i={type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column};this.eventService.dispatchEvent(i)}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return t instanceof Dg?t.getAnchorElementForMenu(e):this.getGui()}destroy(){super.destroy(),this.refreshFunctions=null,this.selectAllFeature=null,this.dragSourceElement=null,this.userCompDetails=null,this.userHeaderClasses=null,this.ariaDescriptionProperties=null}},jB=class extends T{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.autoWidthCalculator=e.autoWidthCalculator,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,i,s){super(),this.eResize=t,this.comp=e,this.pinned=i,this.columnGroup=s}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gos.get("suppressAutoSize")){const t=this.gos.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{const i=[];this.columnGroup.getDisplayedLeafColumns().forEach(n=>{n.getColDef().suppressAutoSize||i.push(n.getColId())}),i.length>0&&this.columnAutosizeService.autoSizeCols({colKeys:i,skipHeader:t,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(e){const t=this.getInitialValues(e);this.storeLocalValues(t),this.toggleColumnResizing(!0)}onResizing(e,t,i="uiColumnResized"){const s=this.normaliseDragChange(t),n=this.resizeStartWidth+s;this.resizeColumnsFromLocalValues(n,i,e)}getInitialValues(e){const t=this.getColumnsToResize(),i=this.getInitialSizeOfColumns(t),s=this.getSizeRatiosOfColumns(t,i),n={columnsToResize:t,resizeStartWidth:i,resizeRatios:s};let r=null;if(e&&(r=this.visibleColsService.getGroupAtDirection(this.columnGroup,"After")),r){const o=r.getDisplayedLeafColumns(),l=n.groupAfterColumns=o.filter(u=>u.isResizable()),a=n.groupAfterStartWidth=this.getInitialSizeOfColumns(l);n.groupAfterRatios=this.getSizeRatiosOfColumns(l,a)}else n.groupAfterColumns=void 0,n.groupAfterStartWidth=void 0,n.groupAfterRatios=void 0;return n}storeLocalValues(e){const{columnsToResize:t,resizeStartWidth:i,resizeRatios:s,groupAfterColumns:n,groupAfterStartWidth:r,groupAfterRatios:o}=e;this.resizeCols=t,this.resizeStartWidth=i,this.resizeRatios=s,this.resizeTakeFromCols=n,this.resizeTakeFromStartWidth=r,this.resizeTakeFromRatios=o}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(e){const t=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),i=this.getInitialValues();t>i.resizeStartWidth&&this.resizeColumns(i,t,e,!0)}resizeColumnsFromLocalValues(e,t,i=!0){if(!this.resizeCols||!this.resizeRatios)return;const s={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols??void 0,groupAfterStartWidth:this.resizeTakeFromStartWidth??void 0,groupAfterRatios:this.resizeTakeFromRatios??void 0};this.resizeColumns(s,e,t,i)}resizeColumns(e,t,i,s=!0){const{columnsToResize:n,resizeStartWidth:r,resizeRatios:o,groupAfterColumns:l,groupAfterStartWidth:a,groupAfterRatios:u}=e,c=[];if(c.push({columns:n,ratios:o,width:t}),l){const d=t-r;c.push({columns:l,ratios:u,width:a-d})}this.columnSizeService.resizeColumnSets({resizeSets:c,finished:s,source:i}),s&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}getInitialSizeOfColumns(e){return e.reduce((t,i)=>t+i.getActualWidth(),0)}getSizeRatiosOfColumns(e,t){return e.map(i=>i.getActualWidth()/t)}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.clearLocalValues()}},$B=class extends T{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.addEventListener("widthChanged",e),t.addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.removeEventListener("widthChanged",e),t.removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",e===0)}},KB=class extends lh{constructor(e,t,i){super(e,t,i),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){const s=this.getGui();this.setDragSource(s)}},this.column=e}setComp(e,t,i){this.comp=e,this.setGui(t),this.displayName=this.beans.columnNameService.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.addDestroyFunc(()=>{this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature))}),this.setupUserComp(),this.addHeaderMouseListeners();const s=this.getParentRowCtrl().getPinned(),n=this.column.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new iC(n,t)),this.createManagedBean(new tC(this.column,t,this.beans)),this.createManagedBean(new $B(e,this.column)),this.resizeFeature=this.createManagedBean(new jB(e,i,s,this.column)),this.createManagedBean(new vr(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners()}resizeHeader(e,t){if(!this.resizeFeature)return;const i=this.resizeFeature.getInitialValues(t);this.resizeFeature.resizeColumns(i,i.resizeStartWidth+e,"uiColumnResized",!0)}moveHeader(e){const{beans:t,eGui:i,column:s,gos:n,ctrlsService:r}=this,o=n.get("enableRtl"),l=e===0,a=this.getPinned(),u=i.getBoundingClientRect(),c=u.left,d=u.width,h=lC(l!==o?c-20:c+d+20,a,!0,n,r),p=s.getGroupId(),f=this.focusService.getFocusedHeader();oC({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,hDirection:e,xPosition:h,pinned:a,fromEnter:!1,fakeEvent:!1,gos:n,columnModel:t.columnModel,columnMoveService:t.columnMoveService,presentedColsService:t.visibleColsService});const m=s.getDisplayedLeafColumns(),w=l?m[0]:se(m);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(w,"auto"),!this.isAlive()&&f&&this.restoreFocus(p,s,f)}restoreFocus(e,t,i){const s=t.getLeafColumns();if(!s.length)return;const n=s[0].getParent();if(!n)return;const r=this.findGroupWidthId(n,e);r&&this.focusService.focusHeaderPosition({headerPosition:{...i,column:r}})}findGroupWidthId(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return null}resizeLeafColumnsToFit(e){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(e)}setupUserComp(){const e=this.gos.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:i=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),i,"gridInitializing")},setTooltip:(i,s)=>{this.setupTooltip(i,s)}}),t=this.userComponentFactory.getHeaderGroupCompDetails(e);this.comp.setUserCompDetails(t)}addHeaderMouseListeners(){const e=s=>this.handleMouseOverChange(s.type==="mouseenter"),t=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),i=s=>this.handleContextMenuMouseEvent(s,void 0,this.column.getProvidedColumnGroup());this.addManagedListeners(this.getGui(),{mouseenter:e,mouseleave:e,click:t,contextmenu:i})}handleMouseOverChange(e){const i={type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()};this.eventService.dispatchEvent(i)}setupTooltip(e,t){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const i=this.column.getColGroupDef(),s=this.gos.get("tooltipShowMode")==="whenTruncated",n=this.eGui;!t&&s&&!(i!=null&&i.headerGroupComponent)&&(t=()=>{const o=n.querySelector(".ag-header-group-text");return o?o.scrollWidth>o.clientWidth:!0});const r={getColumn:()=>this.column,getGui:()=>n,getLocation:()=>"headerGroup",getTooltipValue:()=>e??(i&&i.headerTooltip),shouldDisplayTooltip:t};i&&(r.getColDef=()=>i),this.createManagedBean(new Ko(r))}setupExpandable(){const e=this.column.getProvidedColumnGroup();this.refreshExpanded();const t=this.refreshExpanded.bind(this);this.addManagedListeners(e,{expandedChanged:t,expandableChanged:t})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){const e=this.column.getColGroupDef(),t=YF(e,this.gos,null,this.column);this.column.isPadding()?(t.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every(s=>s.isSpanHeaderHeight())&&t.push("ag-header-span-height")):t.push("ag-header-group-cell-with-group"),t.forEach(i=>this.comp.addOrRemoveCssClass(i,!0))}setupMovingCss(){const t=this.column.getProvidedColumnGroup().getLeafColumns(),i=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());t.forEach(s=>{this.addManagedListeners(s,{movingChanged:i})}),i()}onFocusIn(e){if(!this.eGui.contains(e.relatedTarget)){const t=this.getRowIndex();this.beans.focusService.setFocusedHeader(t,this.column)}}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===F.ENTER){const i=this.column,s=!i.isExpanded();this.beans.columnModel.setColumnGroupOpened(i.getProvidedColumnGroup(),s,"uiColumnExpanded")}}setDragSource(e){if(!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),!e))return;const{beans:t,column:i,displayName:s,gos:n,dragAndDropService:r}=this,{columnModel:o}=t,l=i.getProvidedColumnGroup().getLeafColumns();let a=!n.get("suppressDragLeaveHidesColumns");const u=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",dragItemName:s,getDragItem:()=>this.getDragItemForGroup(i),onDragStarted:()=>{a=!n.get("suppressDragLeaveHidesColumns"),l.forEach(c=>c.setMoving(!0,"uiColumnDragged"))},onDragStopped:()=>l.forEach(c=>c.setMoving(!1,"uiColumnDragged")),onGridEnter:c=>{var d;if(a){const h=((d=c==null?void 0:c.columns)==null?void 0:d.filter(p=>!p.getColDef().lockVisible))||[];o.setColsVisible(h,!0,"uiColumnMoved")}},onGridExit:c=>{var d;if(a){const h=((d=c==null?void 0:c.columns)==null?void 0:d.filter(p=>!p.getColDef().lockVisible))||[];o.setColsVisible(h,!1,"uiColumnMoved")}}};r.addDragSource(u,!0)}getDragItemForGroup(e){const t=e.getProvidedColumnGroup().getLeafColumns(),i={};t.forEach(n=>i[n.getId()]=n.isVisible());const s=[];return this.beans.visibleColsService.getAllCols().forEach(n=>{t.indexOf(n)>=0&&(s.push(n),xt(t,n))}),t.forEach(n=>s.push(n)),{columns:s,visibleState:i}}isSuppressMoving(){let e=!1;return this.column.getLeafColumns().forEach(i=>{(i.getColDef().suppressMovable||i.getColDef().lockPosition)&&(e=!0)}),e||this.gos.get("suppressMovableColumns")}},qB=0,zp=class extends T{constructor(e,t,i){super(),this.instanceId=qB++,this.rowIndex=e,this.pinned=t,this.type=i;const s=i=="group"?"ag-header-row-column-group":i=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${s}`}wireBeans(e){this.beans=e}postConstruct(){this.isPrintLayout=this.gos.isDomLayout("print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}getInstanceId(){return this.instanceId}areCellsRendered(){return this.comp?this.getHeaderCellCtrls().every(e=>e.getGui()!=null):!1}setComp(e,t=!0){this.comp=e,t&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners()}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(){const e=this.onRowHeightChanged.bind(this);this.addManagedEventListeners({columnResized:this.onColumnResized.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:t=>this.onVirtualColumnsChanged(t.afterScroll),columnHeaderHeightChanged:e,gridStylesChanged:e,advancedFilterEnabledChanged:e}),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("ensureDomOrder",t=>this.isEnsureDomOrder=t.currentValue),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e)}getHeaderCellCtrl(e){if(this.headerCellCtrls)return ic(this.headerCellCtrls).find(t=>t.getColumnGroupChild()===e)}onDisplayedColumnsChanged(){this.isPrintLayout=this.gos.isDomLayout("print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{visibleColsService:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){const{columnModel:e,filterManager:t}=this.beans;let i=e.getHeaderRowCount();const s=[];let n=0;t!=null&&t.hasFloatingFilters()&&(i++,n=1);const r=e.getColumnGroupHeaderRowHeight(),o=e.getColumnHeaderRowHeight(),l=1+n,a=i-l;for(let d=0;d<a;d++)s.push(r);s.push(o);for(let d=0;d<n;d++)s.push(e.getFloatingFiltersHeight());let u=0;for(let d=0;d<this.rowIndex;d++)u+=s[d];const c=s[this.rowIndex];return{topOffset:u,rowHeight:c}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(e=!1){const t=this.getHeaderCtrls(),i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,i,e)}getHeaderCtrls(){const e=this.headerCellCtrls;this.headerCellCtrls=new Map;const t=this.getColumnsInViewport();for(const s of t)this.recycleAndCreateHeaderCtrls(s,e);const i=s=>{const{focusService:n,visibleColsService:r}=this.beans;return n.isHeaderWrapperFocused(s)?r.isVisible(s.getColumnGroupChild()):!1};if(e)for(const[s,n]of e)i(n)?this.headerCellCtrls.set(s,n):this.destroyBean(n);return this.getHeaderCellCtrls()}getHeaderCellCtrls(){var e;return Array.from(((e=this.headerCellCtrls)==null?void 0:e.values())??[])}recycleAndCreateHeaderCtrls(e,t){if(!this.headerCellCtrls||e.isEmptyGroup())return;const i=e.getUniqueId();let s;if(t&&(s=t.get(i),t.delete(i)),s&&s.getColumnGroupChild()!=e&&(this.destroyBean(s),s=void 0),s==null)switch(this.type){case"filter":{s=this.createBean(this.beans.ctrlsFactory.getInstance("headerFilterCell",e,this.beans,this));break}case"group":s=this.createBean(new KB(e,this.beans,this));break;default:s=this.createBean(new UB(e,this.beans,this));break}this.headerCellCtrls.set(i,s)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let e=[];const t=this.getActualDepth(),{columnViewportService:i}=this.beans;return["left",null,"right"].forEach(s=>{const n=i.getHeadersToRender(s,t);e=e.concat(n)}),e}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnViewportService.getHeadersToRender(this.pinned,this.getActualDepth())}findHeaderCellCtrl(e){return this.headerCellCtrls?this.getHeaderCellCtrls().find(s=>s.getColumnGroupChild()==e):void 0}focusHeader(e,t){const i=this.findHeaderCellCtrl(e);return i?i.focus(t):!1}destroy(){this.headerCellCtrls&&this.headerCellCtrls.forEach(e=>{this.destroyBean(e)}),this.headerCellCtrls=void 0,super.destroy()}},YB=class extends T{constructor(e){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=e}wireBeans(e){this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.focusService=e.focusService,this.filterManager=e.filterManager}setComp(e,t){this.comp=e,this.eViewport=t,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport);const i=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:i,advancedFilterEnabledChanged:i}),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){const t=new ko,i=this.focusService.getFocusHeaderToUseAfterRefresh(),s=()=>{const l=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let a=0;a<l;a++){const u=this.createBean(new zp(t.next(),this.pinned,"group"));this.groupsRowCtrls.push(u)}},n=()=>{const l=t.next(),a=!this.hidden&&(this.columnsRowCtrl==null||!e||this.columnsRowCtrl.getRowIndex()!==l);(a||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),a&&(this.columnsRowCtrl=this.createBean(new zp(l,this.pinned,"column")))},r=()=>{var u;this.includeFloatingFilter=!!((u=this.filterManager)!=null&&u.hasFloatingFilters())&&!this.hidden;const l=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){l();return}const a=t.next();if(this.filtersRowCtrl){const c=this.filtersRowCtrl.getRowIndex()!==a;(!e||c)&&l()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new zp(a,this.pinned,"filter")))};s(),n(),r();const o=this.getAllCtrls();this.comp.setCtrls(o),this.restoreFocusOnHeader(i)}getHeaderCtrlForColumn(e){if(yn(e))return this.columnsRowCtrl?this.columnsRowCtrl.getHeaderCellCtrl(e):void 0;if(this.groupsRowCtrls.length!==0)for(let t=0;t<this.groupsRowCtrls.length;t++){const i=this.groupsRowCtrls[t].getHeaderCellCtrl(e);if(i)return i}}getHtmlElementForColumnHeader(e){const t=this.getHeaderCtrlForColumn(e);return t?t.getGui():null}getRowType(e){const i=this.getAllCtrls()[e];return i?i.getType():void 0}focusHeader(e,t,i){const n=this.getAllCtrls()[e];return n?n.focusHeader(t,i):!1}getViewport(){return this.eViewport}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}setupDragAndDrop(e){const t=new BB(this.pinned,e);this.createManagedBean(t)}restoreFocusOnHeader(e){if(!e)return;const{column:t}=e;t.getPinned()==this.pinned&&this.focusService.focusHeaderPosition({headerPosition:e})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){var t;const e=((t=this.filterManager)==null?void 0:t.hasFloatingFilters())&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new rC(e=>this.comp.setCenterWidth(`${e}px`),!0))}setupPinnedWidth(){if(this.pinned==null)return;const e=this.pinned==="left",t=this.pinned==="right";this.hidden=!0;const i=()=>{const s=e?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(s==null)return;const n=s==0,r=this.hidden!==n,o=this.gos.get("enableRtl"),l=this.gos.getScrollbarWidth(),u=this.scrollVisibleService.isVerticalScrollShowing()&&(o&&e||!o&&t)?s+l:s;this.comp.setPinnedContainerWidth(`${u}px`),this.comp.setDisplayed(!n),r&&(this.hidden=n,this.refresh())};this.addManagedEventListeners({leftPinnedWidthChanged:i,rightPinnedWidthChanged:i,scrollVisibilityChanged:i,scrollbarWidthChanged:i})}},aC=class extends T{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.getDomLayout(),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},i=t.autoHeight?"ag-layout-auto-height":t.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(i,t)}getDomLayout(){const e=this.gos.get("domLayout")??"normal";return["normal","print","autoHeight"].indexOf(e)===-1?(M(`${e} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):e}},QB=class extends be{constructor(){super(`
            <div class="ag-overlay" role="presentation">
                <div class="ag-overlay-panel" role="presentation">
                    <div class="ag-overlay-wrapper" data-ref="eOverlayWrapper" role="presentation"></div>
                </div>
            </div>`),this.eOverlayWrapper=z,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeOverlayWrapperCssClass=null}wireBeans(e){this.overlayService=e.overlayService}updateLayoutClasses(e,t){const i=this.eOverlayWrapper.classList;i.toggle("ag-layout-auto-height",t.autoHeight),i.toggle("ag-layout-normal",t.normal),i.toggle("ag-layout-print",t.print)}postConstruct(){this.createManagedBean(new aC(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.registerOverlayWrapperComp(this)}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&t.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=e,t.toggle(e,!0)}showOverlay(e,t,i){this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.activePromise=e,e==null||e.then(s=>{if(this.activePromise!==e){this.activeOverlay!==s&&(this.destroyBean(s),s=null);return}if(this.activePromise=null,!!s&&this.activeOverlay!=s&&(this.eOverlayWrapper.appendChild(s.getGui()),this.activeOverlay=s,i)){const n=s;this.updateListenerDestroyFunc=this.addManagedPropertyListener(i,({currentValue:r})=>{var o;(o=n.refresh)==null||o.call(n,this.gos.addGridCommonParams({...r??{}}))})}}),this.setDisplayed(!0,{skipAriaHidden:!0})}destroyActiveOverlay(){this.activePromise=null;const e=this.activeOverlay;if(!e)return;this.activeOverlay=null;const t=this.updateListenerDestroyFunc;t&&(t(),this.updateListenerDestroyFunc=null),this.destroyBean(e),si(this.eOverlayWrapper)}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.destroyActiveOverlay(),super.destroy()}},rT=class extends be{constructor(e,t){super(),this.direction=t,this.eViewport=z,this.eContainer=z,this.hideTimeout=null,this.setTemplate(e)}wireBeans(e){this.animationFrameService=e.animationFrameService}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",pF()||xn())}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=gF(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0),i=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:i,touchend:i})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout!==null&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)}})}attemptSettingScrollPosition(e){const t=this.getViewport();GG(()=>is(t),()=>this.setScrollPosition(e),100)}getViewport(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(e){this.addManagedElementListeners(this.getViewport(),{scroll:e})}},JB=class extends rT{constructor(){super(`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" data-ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" data-ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" data-ref="eRightSpacer"></div>
        </div>`,"horizontal"),this.eLeftSpacer=z,this.eRightSpacer=z}wireBeans(e){super.wireBeans(e),this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.register("fakeHScrollComp",this),this.createManagedBean(new rC(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;const e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleService.isVerticalScrollShowing();let t=this.visibleColsService.getDisplayedColumnsRightWidth();const i=!this.enableRtl&&e,s=this.gos.getScrollbarWidth();i&&(t+=s),Oi(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=s);let n=this.visibleColsService.getColsLeftWidth();this.enableRtl&&e&&(n+=s),Oi(this.eLeftSpacer,n),this.eLeftSpacer.classList.toggle("ag-scroller-corner",n<=s)}setScrollVisible(){const e=this.scrollVisibleService.isHorizontalScrollShowing(),t=this.invisibleScrollbar,i=this.gos.get("suppressHorizontalScroll"),s=e&&this.gos.getScrollbarWidth()||0,r=i?0:s===0&&t?16:s;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),Bl(this.getGui(),r),Bl(this.eViewport,r),Bl(this.eContainer,r),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return vd(this.getViewport(),this.enableRtl)}setScrollPosition(e){is(this.getViewport())||this.attemptSettingScrollPosition(e),Cd(this.getViewport(),e,this.enableRtl)}},oT=class extends T{wireBeans(e){this.maxDivHeightScaler=e.rowContainerHeightService}constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this)})}onHeightChanged(){const e=this.maxDivHeightScaler.getUiContainerHeight(),t=e!=null?`${e}px`:"";this.eContainer.style.height=t,this.eViewport&&(this.eViewport.style.height=t)}},XB=class extends rT{wireBeans(e){super.wireBeans(e),this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}constructor(){super(`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-vertical-scroll-container" data-ref="eContainer"></div>
            </div>
        </div>`,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new oT(this.eContainer)),this.ctrlsService.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this)})}setScrollVisible(){const e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.invisibleScrollbar,i=e&&this.gos.getScrollbarWidth()||0,s=i===0&&t?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),Oi(this.getGui(),s),Oi(this.eViewport,s),Oi(this.eContainer,s),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){const{ctrlsService:e}=this,i=e.getGridBodyCtrl().getBodyViewportElement(),s=this.getScrollPosition(),n=i.scrollTop;s!=n&&this.setScrollPosition(n,!0)}getScrollPosition(){return this.getViewport().scrollTop}setScrollPosition(e,t){!t&&!is(this.getViewport())&&this.attemptSettingScrollPosition(e),this.getViewport().scrollTop=e}},ZB=class extends T{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=e,this.resetLastHScrollDebounced=It(()=>this.lastScrollSource[1]=null,500),this.resetLastVScrollDebounced=It(()=>this.lastScrollSource[0]=null,500)}wireBeans(e){this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.rowModel=e.rowModel,this.heightScaler=e.rowContainerHeightService,this.rowRenderer=e.rowRenderer,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)}),this.ctrlsService.whenReady(e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){const{fakeHScrollComp:e,fakeVScrollComp:t}=this.ctrlsService.getParams();this.addManagedElementListeners(this.centerRowsCtrl.getViewportElement(),{scroll:this.onHScroll.bind(this)}),e.onScrollCallback(this.onFakeHScroll.bind(this));const i=this.gos.get("debounceVerticalScrollbar"),s=i?It(this.onVScroll.bind(this),100):this.onVScroll.bind(this),n=i?It(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedElementListeners(this.eBodyViewport,{scroll:s}),t.onScrollCallback(n)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){if(this.centerRowsCtrl==null)return;e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft());const i=this.enableRtl?e:-e,{topCenter:s,stickyTopCenter:n,stickyBottomCenter:r,centerHeader:o,bottomCenter:l,fakeHScrollComp:a}=this.ctrlsService.getParams();o.setHorizontalScroll(-i),l.setContainerTranslateX(i),s.setContainerTranslateX(i),n.setContainerTranslateX(i),r.setContainerTranslateX(i);const u=this.centerRowsCtrl.getViewportElement(),c=this.lastScrollSource[1]===0;e=Math.abs(e),c?a.setScrollPosition(e):Cd(u,e,this.enableRtl)}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(this.lastScrollSource[t]=e,!0):this.lastScrollSource[t]===e}onFakeHScroll(){this.isControllingScroll(1,1)&&this.onHScrollCommon(1)}onHScroll(){this.isControllingScroll(0,1)&&this.onHScrollCommon(0)}onHScrollCommon(e){const t=this.centerRowsCtrl.getViewportElement(),{scrollLeft:i}=t;if(this.shouldBlockScrollUpdate(1,i,!0))return;let s;e===0?s=vd(t,this.enableRtl):s=this.ctrlsService.get("fakeHScrollComp").getScrollPosition(),this.doHorizontalScroll(Math.round(s)),this.resetLastHScrollDebounced()}onFakeVScroll(){this.isControllingScroll(1,0)&&this.onVScrollCommon(1)}onVScroll(){this.isControllingScroll(0,0)&&this.onVScrollCommon(0)}onVScrollCommon(e){let t;e===0?t=this.eBodyViewport.scrollTop:t=this.ctrlsService.get("fakeVScrollComp").getScrollPosition(),!this.shouldBlockScrollUpdate(0,t,!0)&&(this.animationFrameService.setScrollTop(t),this.nextScrollTop=t,e===0?this.ctrlsService.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(e){const t=this.ctrlsService.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){const t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{const i={...t,type:"bodyScrollEnd"};this.eventService.dispatchEvent(i)},100)}shouldBlockScrollUpdate(e,t,i=!1){return i&&!xn()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){const t=Uv(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return e<0||e+t>i}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowsCtrl.getViewportElement();if(this.enableRtl&&md()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>i}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(0)}scrollGridIfNeeded(){const e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(e,t=!1){const s=this.centerRowsCtrl.getViewportElement().scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl&&md()?e=e>0?0:s:e=Math.min(Math.max(e,0),s)),Cd(this.centerRowsCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.eBodyViewport.scrollTop=e}getVScrollPosition(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){const t=this.centerRowsCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.getViewportElement().scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){const i=this.rowModel.getRowCount();let s=-1;for(let n=0;n<i;n++){const r=this.rowModel.getRow(n);if(typeof e=="function"){if(r&&e(r)){s=n;break}}else if(e===r||e===r.data){s=n;break}}s>=0&&this.ensureIndexVisible(s,t)}ensureIndexVisible(e,t){if(this.gos.isDomLayout("print"))return;const i=this.rowModel.getRowCount();if(typeof e!="number"||e<0||e>=i){M("Invalid row index for ensureIndexVisible: "+e);return}const n=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(()=>{var c;n||(c=this.paginationService)==null||c.goToPageWithIndex(e);const r=this.ctrlsService.getGridBodyCtrl(),o=r.getStickyTopHeight(),l=r.getStickyBottomHeight(),a=this.rowModel.getRow(e);let u;do{const d=a.rowTop,h=a.rowHeight,p=this.pageBoundsService.getPixelOffset(),f=a.rowTop-p,m=f+a.rowHeight,w=this.getVScrollPosition(),v=this.heightScaler.getDivStretchOffset(),g=w.top+v,y=w.bottom+v,S=y-g,b=this.heightScaler.getScrollPositionForPixel(f),R=this.heightScaler.getScrollPositionForPixel(m-S),E=Math.min((b+R)/2,f),x=g+o>f,I=y-l<m;let D=null;t==="top"?D=b:t==="bottom"?D=R:t==="middle"?D=E:x?D=b-o:I&&(D=R+l),D!==null&&(this.setVerticalScrollPosition(D),this.rowRenderer.redraw({afterScroll:!0})),u=d!==a.rowTop||h!==a.rowHeight}while(u);this.animationFrameService.flushAllFrames()})}ensureColumnVisible(e,t="auto"){const i=this.columnModel.getCol(e);if(!i||i.isPinned()||!this.visibleColsService.isColDisplayed(i))return;const s=this.getPositionedHorizontalScroll(i,t);this.getFrameworkOverrides().wrapIncoming(()=>{s!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(s),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()})}setScrollPosition(e,t){this.getFrameworkOverrides().wrapIncoming(()=>{this.centerRowsCtrl.setCenterViewportScrollLeft(t),this.setVerticalScrollPosition(e),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()})}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:i,columnAfterEnd:s}=this.isColumnOutsideViewport(e),n=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),r=this.centerRowsCtrl.getCenterWidth(),o=this.enableRtl;let l=(o?i:s)||n,a=o?s:i;t!=="auto"&&(l=t==="start",a=t==="end");const u=t==="middle";if(l||a||u){const{colLeft:c,colMiddle:d,colRight:h}=this.getColumnBounds(e);return u?d-r/2:l?o?h:c:o?c-r:h-r}return null}isColumnOutsideViewport(e){const{start:t,end:i}=this.getViewportBounds(),{colLeft:s,colRight:n}=this.getColumnBounds(e),r=this.enableRtl,o=r?t>n:i<n,l=r?i<s:t>s;return{columnBeforeStart:o,columnAfterEnd:l}}getColumnBounds(e){const t=this.enableRtl,i=this.visibleColsService.getBodyContainerWidth(),s=e.getActualWidth(),n=e.getLeft(),r=t?-1:1,o=t?i-n:n,l=o+s*r,a=o+s/2*r;return{colLeft:o,colMiddle:a,colRight:l}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),i=t,s=e+t;return{start:i,end:s,width:e}}},eW="ag-force-vertical-scroll",tW="ag-selectable",iW="ag-column-moving",sW=class extends T{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.menuService=e.menuService,this.headerNavigationService=e.headerNavigationService,this.dragAndDropService=e.dragAndDropService,this.pinnedRowModel=e.pinnedRowModel,this.rowRenderer=e.rowRenderer,this.popupService=e.popupService,this.mouseEventService=e.mouseEventService,this.rowModel=e.rowModel,this.filterManager=e.filterManager,this.environment=e.environment}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(e,t,i,s,n,r,o){var l;this.comp=e,this.eGridBody=t,this.eBodyViewport=i,this.eTop=s,this.eBottom=n,this.eStickyTop=r,this.eStickyBottom=o,this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",a=>this.setCellTextSelection(a.currentValue)),this.createManagedBean(new aC(this.comp)),this.bodyScrollFeature=this.createManagedBean(new ZB(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([s,i,n,r,o]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),(l=this.filterManager)==null||l.setupAdvancedFilterHeaderComp(s),this.ctrlsService.register("gridBodyCtrl",this)}getComp(){return this.comp}addEventListeners(){this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),pinnedRowDataChanged:this.setFloatingHeights.bind(this),pinnedHeightChanged:this.setFloatingHeights.bind(this),headerHeightChanged:this.onHeaderHeightChanged.bind(this)})}addFocusListeners(e){e.forEach(t=>{this.addManagedElementListeners(t,{focusin:i=>{const{target:s}=i,n=co(s,"ag-root",t);t.classList.toggle("ag-has-focus",!n)},focusout:i=>{const{target:s,relatedTarget:n}=i,r=t.contains(n),o=co(n,"ag-root",t);co(s,"ag-root",t)||(!r||o)&&t.classList.remove("ag-has-focus")}})})}setColumnMovingCss(e){this.comp.setColumnMovingCss(iW,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(tW,e)}onScrollVisibilityChanged(){const e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyWidth(e),this.setStickyBottomOffsetBottom();const t=e&&this.gos.getScrollbarWidth()||0,i=gF()?16:0,s=`calc(100% + ${t+i}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(s))}onGridColumnsChanged(){const e=this.columnModel.getCols();this.comp.setColumnCount(e.length)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;const e=i=>{const s=i.relatedTarget;if(Ig(s)===null){this.rowRenderer.stopEditing();return}let n=t.some(r=>r.contains(s))&&this.mouseEventService.isElementInThisGrid(s);if(!n){const r=this.popupService;n=r.getActivePopups().some(o=>o.contains(s))||r.isElementWithinCustomPopup(s)}n||this.rowRenderer.stopEditing()},t=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom];t.forEach(i=>this.addManagedElementListeners(i,{focusout:e}))}updateRowCount(){var s;const e=this.headerNavigationService.getHeaderRowCount()+(((s=this.filterManager)==null?void 0:s.getHeaderRowCount())??0),t=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,i=t===-1?-1:e+t;this.comp.setRowCount(i)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),t=e?eW:null,i=this.gos.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||i&&xH(this.eBodyViewport)}setupRowAnimationCssClass(){let e=this.environment.hasMeasuredSizes();const t=()=>{const i=e&&this.gos.isAnimateRows()&&!this.rowContainerHeightService.isStretching(),s=i?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(s,i)};t(),this.addManagedEventListeners({heightScaleChanged:t}),this.addManagedPropertyListener("animateRows",t),this.addManagedEventListeners({gridStylesChanged:()=>{!e&&this.environment.hasMeasuredSizes()&&(e=!0,t())}})}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){const e=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(this.eBodyViewport,{contextmenu:e}),this.mockContextMenuForIPad(e),this.addManagedElementListeners(this.eBodyViewport,{wheel:this.onBodyViewportWheel.bind(this)}),this.addManagedElementListeners(this.eStickyTop,{wheel:this.onStickyWheel.bind(this)}),this.addManagedElementListeners(this.eStickyBottom,{wheel:this.onStickyWheel.bind(this)}),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){const e=this.eBodyViewport.querySelector(".ag-full-width-container"),t=this.eBodyViewport.querySelector(".ag-center-cols-viewport");e&&t&&this.addManagedElementListeners(e,{wheel:i=>this.onFullWidthContainerWheel(i,t)})}onFullWidthContainerWheel(e,t){!e.deltaX||Math.abs(e.deltaY)>Math.abs(e.deltaX)||!this.mouseEventService.isEventFromThisGrid(e)||(e.preventDefault(),t.scrollBy({left:e.deltaX}))}onBodyViewportContextMenu(e,t,i){if(!e&&!i)return;this.gos.get("preventDefaultOnContextMenu")&&(e||i).preventDefault();const{target:s}=e||t;(s===this.eBodyViewport||s===this.ctrlsService.get("center").getViewportElement())&&this.menuService.showContextMenu({mouseEvent:e,touchEvent:i,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(e){if(!xn())return;const t=new gn(this.eBodyViewport),i=s=>{e(void 0,s.touchStart,s.touchEvent)};this.addManagedListeners(t,{longTap:i}),this.addDestroyFunc(()=>t.destroy())}onBodyViewportWheel(e){this.gos.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()}onStickyWheel(e){e.preventDefault(),e.offsetY&&this.scrollVertically(e.deltaY)}getGui(){return this.eGridBody}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new RV(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)}getRowDragFeature(){return this.rowDragFeature}setFloatingHeights(){const{pinnedRowModel:e}=this,t=e.getPinnedTopTotalHeight(),i=e.getPinnedBottomTotalHeight();this.comp.setTopHeight(t),this.comp.setBottomHeight(i),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(i?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}getStickyTopHeight(){return this.stickyTopHeight}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}getStickyBottomHeight(){return this.stickyBottomHeight}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{const t=this.gos.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){var n;const t=this.ctrlsService.get("gridHeaderCtrl").getHeaderHeight()+(((n=this.filterManager)==null?void 0:n.getHeaderHeight())??0),i=this.pinnedRowModel.getPinnedTopTotalHeight();let s=0;t>0&&(s+=t),i>0&&(s+=i),s>0&&(s+=1),this.comp.setStickyTopTop(`${s}px`)}setStickyBottomOffsetBottom(){const e=this.pinnedRowModel.getPinnedBottomTotalHeight(),i=this.scrollVisibleService.isHorizontalScrollShowing()&&this.gos.getScrollbarWidth()||0,s=e+i;this.comp.setStickyBottomBottom(`${s}px`)}sizeColumnsToFit(e,t){const s=this.isVerticalScrollShowing()?this.gos.getScrollbarWidth():0,r=Ya(this.eGridBody)-s;if(r>0){this.columnSizeService.sizeColumnsToFit(r,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFit(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFit(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFit(e,-1)},500):M("tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})}removeScrollEventListener(e){this.eBodyViewport.removeEventListener("scroll",e)}},nW=class extends T{wireBeans(e){this.ctrlsService=e.ctrlsService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.columnViewportService=e.columnViewportService}constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const e=()=>this.onCenterViewportResized();this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnSizeService.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){const e=this.gridBodyCtrl.getBodyViewportElement(),t=Ya(e);if(t<=50)return;let i=this.getPinnedColumnsOverflowingViewport(t-50);const s=this.gos.getCallback("processUnpinnedColumns");i.length&&(s&&(i=s({columns:i,viewportWidth:t})),this.columnModel.setColsPinned(i,null,"viewportSizeFeature"))}getPinnedColumnsOverflowingViewport(e){const t=this.pinnedWidthService.getPinnedRightWidth(),i=this.pinnedWidthService.getPinnedLeftWidth(),s=t+i;if(s<e)return[];const n=[...this.visibleColsService.getLeftCols()],r=[...this.visibleColsService.getRightCols()];let o=0,l=0;const a=0,u=[];let c=s-a-e;for(;(l<n.length||o<r.length)&&c>0;){if(o<r.length){const d=r[o++];c-=d.getActualWidth(),u.push(d)}if(l<n.length&&c>0){const d=n[l++];c-=d.getActualWidth(),u.push(d)}}return u}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=this.gridBodyCtrl.getBodyViewportElement(),t=Uv(e);if(this.bodyHeight!==t){this.bodyHeight=t;const i={type:"bodyHeightChanged"};this.eventService.dispatchEvent(i)}}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.columnViewportService.setScrollPosition(e,t)}},rW=class extends T{wireBeans(e){this.dragService=e.dragService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){if(!this.rangeService)return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListener("enableRangeSelection",t=>{if(t.currentValue){this.enableFeature();return}this.disableFeature()}),this.addDestroyFunc(()=>this.disableFeature()),this.gos.get("enableRangeSelection")&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}},oW=class extends be{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[Yv]),this.eCheckbox=z}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.localeService.getLocaleTextFunc(),t=this.rowNode.isSelected(),i=Bv(e,t),[s,n]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],r=e(s,n);this.eCheckbox.setValue(t,!0),this.eCheckbox.setInputAriaLabel(`${r} (${i})`)}onClicked(e,t,i){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:i.shiftKey,groupSelectsFiltered:t,event:i,source:"checkboxSelected"})}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:s=>xo(s),click:s=>{xo(s);const n=this.gos.get("groupSelectsFiltered"),r=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(r,n)?this.onClicked(!0,n,s||{})===0&&this.onClicked(!1,n,s):r?this.onClicked(!1,n,s):this.onClicked(!0,n,s||{})}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),this.gos.get("isRowSelectable")||typeof this.getIsVisible()=="function"){const s=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:s}),this.addManagedListeners(this.rowNode,{dataChanged:s,cellChanged:s}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(e,t){return t&&(this.eCheckbox.getPreviousValue()===void 0||e===void 0)&&this.gos.isRowModelType("clientSide")}showOrHideSelect(){var s,n,r;let e=this.rowNode.selectable;const t=this.getIsVisible();if(e)if(typeof t=="function"){const o=(s=this.overrides)==null?void 0:s.callbackParams;if(!this.column)e=t({...o,node:this.rowNode,data:this.rowNode.data});else{const l=this.column.createColumnFunctionCallbackParams(this.rowNode);e=t({...o,...l})}}else e=t??!1;if((n=this.column)==null?void 0:n.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!e),this.setVisible(!0),this.setDisplayed(!0);return}if((r=this.overrides)!=null&&r.removeHidden){this.setDisplayed(e);return}this.setVisible(e)}getIsVisible(){var e,t;return this.overrides?this.overrides.isVisible:(t=(e=this.column)==null?void 0:e.getColDef())==null?void 0:t.checkboxSelection}},lW=class extends be{constructor(e,t,i){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=i}postConstruct(){this.getGui().appendChild(Zt("rowDrag",this.gos,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const t=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0);const i=()=>{try{const s=JSON.stringify(this.rowNode.data);e.dataTransfer.setData("application/json",s),e.dataTransfer.setData("text/plain",s)}catch{}};if(t){const s=this.gos.addGridCommonParams({rowNode:this.rowNode,dragEvent:e});t(s)}else i()}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}},aW=class extends T{constructor(e,t){super(),this.staticClasses=[],this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const e=this.column.getColDef(),{cellClassRules:t}=e,i=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(t===this.cellClassRules?void 0:this.cellClassRules,t,i,s=>this.cellComp.addOrRemoveCssClass(s,!0),s=>this.cellComp.addOrRemoveCssClass(s,!1)),this.cellClassRules=t}applyUserStyles(){const e=this.column.getColDef();if(!e.cellStyle)return;let t;if(typeof e.cellStyle=="function"){const i=this.beans.gos.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex}),s=e.cellStyle;t=s(i)}else t=e.cellStyle;t&&this.cellComp.setUserStyles(t)}applyClassesFromColDef(){const e=this.column.getColDef(),t=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,t),this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!0))}destroy(){super.destroy()}},uW=class extends T{constructor(e,t,i,s,n){super(),this.cellCtrl=e,this.beans=t,this.rowNode=s,this.rowCtrl=n}setComp(e){this.eGui=e}onKeyDown(e){const t=e.key;switch(t){case F.ENTER:this.onEnterKeyDown(e);break;case F.F2:this.onF2KeyDown(e);break;case F.ESCAPE:this.onEscapeKeyDown(e);break;case F.TAB:this.onTabKeyDown(e);break;case F.BACKSPACE:case F.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case F.DOWN:case F.UP:case F.RIGHT:case F.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,t,this.cellCtrl.getCellPosition(),!0),e.preventDefault())}onShiftRangeSelect(e){if(!this.beans.rangeService)return;const t=this.beans.rangeService.extendLatestRangeInDirection(e);t&&this.beans.navigationService.ensureCellVisible(t)}onTabKeyDown(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){const{cellCtrl:i,beans:s,rowNode:n}=this,{gos:r,rangeService:o,eventService:l}=s;if(!i.isEditing()){if(l.dispatchEvent({type:"keyShortcutChangedCellStart"}),zV(e,r.get("enableCellEditingOnBackspace"))){if(o&&r.get("enableRangeSelection"))o.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(i.isCellEditable()){const a=i.getColumn(),u=this.beans.valueService.parseValue(a,n,"",n.getValueFromValueService(a))??null;n.setDataValue(a,u,"cellClear")}}else i.startRowOrCellEdit(e,t);l.dispatchEvent({type:"keyShortcutChangedCellEnd"})}}onEnterKeyDown(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gos.get("enterNavigatesVertically")){const t=e.shiftKey?F.UP:F.DOWN;this.beans.navigationService.navigateToNextCell(null,t,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(F.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()}onF2KeyDown(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(F.F2,e)}onEscapeKeyDown(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.isEditing())return;const s=e.key;s===" "?this.onSpaceKeyDown(e):(this.cellCtrl.startRowOrCellEdit(s,e),e.preventDefault())}onSpaceKeyDown(e){const{gos:t}=this.beans;if(!this.cellCtrl.isEditing()&&t.isRowSelection()){const i=this.rowNode.isSelected(),s=!i;if(s||!t.get("suppressRowDeselection")){const n=this.beans.gos.get("groupSelectsFiltered"),r=this.rowNode.setSelectedParams({newValue:s,rangeSelect:e.shiftKey,groupSelectsFiltered:n,event:e,source:"spaceKey"});i===void 0&&r===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:n,event:e,source:"spaceKey"})}}e.preventDefault()}destroy(){super.destroy()}},cW=class extends T{constructor(e,t,i){super(),this.cellCtrl=e,this.beans=t,this.column=i}onMouseEvent(e,t){if(!fn(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(e),e.preventDefault();return}const{eventService:t,rangeService:i,gos:s}=this.beans,n=e.ctrlKey||e.metaKey;i&&n&&i.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&i.intersectLastRange(!0);const r=this.cellCtrl.createEvent(e,"cellClicked");t.dispatchEvent(r);const o=this.column.getColDef();o.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{o.onCellClicked(r)})},0),(s.get("singleClickEdit")||o.singleClickEdit)&&!s.get("suppressClickEdit")&&!(e.shiftKey&&(i==null?void 0:i.getCellRanges().length)!=0)&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!xn()||XP("dblclick"))return!1;const e=new Date().getTime(),t=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,t}onCellDoubleClicked(e){const{column:t,beans:i,cellCtrl:s}=this,{eventService:n,frameworkOverrides:r,gos:o}=i,l=t.getColDef(),a=s.createEvent(e,"cellDoubleClicked");n.dispatchEvent(a),typeof l.onCellDoubleClicked=="function"&&window.setTimeout(()=>{r.wrapOutgoing(()=>{l.onCellDoubleClicked(a)})},0),!o.get("singleClickEdit")&&!o.get("suppressClickEdit")&&s.startRowOrCellEdit(null,e)}onMouseDown(e){const{ctrlKey:t,metaKey:i,shiftKey:s}=e,n=e.target,{cellCtrl:r,beans:o}=this,{eventService:l,rangeService:a,focusService:u,gos:c}=o;if(this.isRightClickInExistingRange(e))return;const d=a&&a.getCellRanges().length!=0;if(!s||!d){const p=c.get("enableCellTextSelection")&&e.defaultPrevented,f=(Is()||p)&&!r.isEditing()&&!zv(n);r.focusCell(f)}if(s&&d&&!u.isCellFocused(r.getCellPosition())){e.preventDefault();const h=u.getFocusedCell();if(h){const{column:p,rowIndex:f,rowPinned:m}=h,w=o.rowRenderer.getRowByPosition({rowIndex:f,rowPinned:m}),v=w==null?void 0:w.getCellCtrl(p);v!=null&&v.isEditing()&&v.stopEditing(),u.setFocusedCell({column:p,rowIndex:f,rowPinned:m,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(n)){if(a){const h=this.cellCtrl.getCellPosition();if(s)a.extendLatestRangeToCell(h);else{const p=t||i;a.setRangeToCell(h,p)}}l.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseDown"))}}isRightClickInExistingRange(e){const{rangeService:t}=this.beans;if(t){const i=t.isCellInAnyRange(this.cellCtrl.getCellPosition()),s=e.button===2||e.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(i&&s)return!0}return!1}containsWidget(e){return co(e,"ag-selection-checkbox",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;const t=this.cellCtrl.createEvent(e,"cellMouseOut");this.beans.eventService.dispatchEvent(t),this.beans.columnHoverService.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;const t=this.cellCtrl.createEvent(e,"cellMouseOver");this.beans.eventService.dispatchEvent(t),this.beans.columnHoverService.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.getGui(),i=t.contains(e.target),s=t.contains(e.relatedTarget);return i&&s}destroy(){super.destroy()}},dW=class extends T{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}setComp(e){this.eGui=e,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this.applyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();gr(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eGui)return;const e=this.getCellWidth();this.eGui.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const e=this.column.getColSpan(this.rowNode),t=[];if(e===1)t.push(this.column);else{let i=this.column;const s=this.column.getPinned();for(let n=0;i&&n<e&&(t.push(i),i=this.beans.visibleColsService.getColAfter(i),!(!i||X(i)||s!==i.getPinned()));n++);}return t}onLeftChanged(){if(!this.eGui)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=se(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return e;const t=this.beans.visibleColsService.getColsLeftWidth();if(this.column.getPinned()==="right"){const i=this.beans.visibleColsService.getBodyContainerWidth();return t+i+(e||0)}return t+(e||0)}applyRowSpan(e){if(this.rowSpan===1&&!e)return;const i=this.beans.gos.getRowHeightAsNumber()*this.rowSpan;this.eGui.style.height=`${i}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}},pl="ag-cell-range-selected",hW="ag-cell-range-chart",pW="ag-cell-range-single-cell",fW="ag-cell-range-chart-category",gW="ag-cell-range-handle",mW="ag-cell-range-top",vW="ag-cell-range-right",CW="ag-cell-range-bottom",wW="ag-cell-range-left",yW=class{constructor(e,t){this.beans=e,this.rangeService=e.rangeService,this.selectionHandleFactory=e.selectionHandleFactory,this.cellCtrl=t}setComp(e,t){this.cellComp=e,this.eGui=t,this.onRangeSelectionChanged()}onRangeSelectionChanged(){this.cellComp&&(this.rangeCount=this.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(pl,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(`${pl}-1`,this.rangeCount===1),this.cellComp.addOrRemoveCssClass(`${pl}-2`,this.rangeCount===2),this.cellComp.addOrRemoveCssClass(`${pl}-3`,this.rangeCount===3),this.cellComp.addOrRemoveCssClass(`${pl}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(hW,this.hasChartRange),fd(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(pW,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){const e=this.getRangeBorders(),t=this.isSingleCell(),i=!t&&e.top,s=!t&&e.right,n=!t&&e.bottom,r=!t&&e.left;this.cellComp.addOrRemoveCssClass(mW,i),this.cellComp.addOrRemoveCssClass(vW,s),this.cellComp.addOrRemoveCssClass(CW,n),this.cellComp.addOrRemoveCssClass(wW,r)}isSingleCell(){const{rangeService:e}=this.beans;return this.rangeCount===1&&!!e&&!e.isMoreThanOneCell()}getHasChartRange(){const{rangeService:e}=this.beans;if(!this.rangeCount||!e)return!1;const t=e.getCellRanges();return t.length>0&&t.every(i=>$n([1,0],i.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){const e=this.beans.gos.get("enableRtl");let t=!1,i=!1,s=!1,n=!1;const r=this.cellCtrl.getCellPosition().column,o=this.beans.visibleColsService;let l,a;e?(l=o.getColAfter(r),a=o.getColBefore(r)):(l=o.getColBefore(r),a=o.getColAfter(r));const u=this.rangeService.getCellRanges().filter(c=>this.rangeService.isCellInSpecificRange(this.cellCtrl.getCellPosition(),c));l||(n=!0),a||(i=!0);for(let c=0;c<u.length&&!(t&&i&&s&&n);c++){const d=u[c],h=this.rangeService.getRangeStartRow(d),p=this.rangeService.getRangeEndRow(d);!t&&this.beans.rowPositionUtils.sameRow(h,this.cellCtrl.getCellPosition())&&(t=!0),!s&&this.beans.rowPositionUtils.sameRow(p,this.cellCtrl.getCellPosition())&&(s=!0),!n&&l&&d.columns.indexOf(l)<0&&(n=!0),!i&&a&&d.columns.indexOf(a)<0&&(i=!0)}return{top:t,right:i,bottom:s,left:n}}refreshHandle(){if(this.beans.context.isDestroyed())return;const e=this.shouldHaveSelectionHandle();this.selectionHandle&&!e&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),e&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(gW,!!this.selectionHandle)}shouldHaveSelectionHandle(){const e=this.beans.gos,t=this.rangeService.getCellRanges(),i=t.length;if(this.rangeCount<1||i<1)return!1;const s=se(t),n=this.cellCtrl.getCellPosition(),r=e.get("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),o=e.get("enableRangeHandle");let l=i===1&&!this.cellCtrl.isEditing()&&(r||o);if(this.hasChartRange){const u=t[0].type===1&&this.rangeService.isCellInSpecificRange(n,t[0]);this.cellComp.addOrRemoveCssClass(fW,u),l=s.type===0}return l&&s.endRow!=null&&this.rangeService.isContiguousRange(s)&&this.rangeService.isBottomRightCell(s,n)}addSelectionHandle(){const e=this.beans.gos,t=se(this.rangeService.getCellRanges()).type,s=e.get("enableFillHandle")&&X(t)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==s&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.selectionHandleFactory.createSelectionHandle(s)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},SW="ag-cell",RW="ag-cell-auto-height",bW="ag-cell-normal-height",EW="ag-cell-focus",PW="ag-cell-first-right-pinned",FW="ag-cell-last-left-pinned",TW="ag-cell-not-inline-editing",xW="ag-column-hover",IW="ag-cell-wrap-text",DW=0,lT=class Lg extends T{constructor(t,i,s,n){super(),this.column=t,this.rowNode=i,this.beans=s,this.rowCtrl=n,this.cellRangeFeature=null,this.cellPositionFeature=null,this.cellCustomStyleFeature=null,this.tooltipFeature=null,this.cellMouseListenerFeature=null,this.cellKeyboardListenerFeature=null,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.instanceId=t.getId()+"-"+DW++,this.colIdSanitised=Zi(this.column.getId()),s.gos.get("suppressCellFocus")||(this.tabIndex=-1),this.createCellPosition(),this.addFeatures(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}addFeatures(){this.cellPositionFeature=new dW(this,this.beans),this.addDestroyFunc(()=>{var i;(i=this.cellPositionFeature)==null||i.destroy(),this.cellPositionFeature=null}),this.cellCustomStyleFeature=new aW(this,this.beans),this.addDestroyFunc(()=>{var i;(i=this.cellCustomStyleFeature)==null||i.destroy(),this.cellCustomStyleFeature=null}),this.cellMouseListenerFeature=new cW(this,this.beans,this.column),this.addDestroyFunc(()=>{var i;(i=this.cellMouseListenerFeature)==null||i.destroy(),this.cellMouseListenerFeature=null}),this.cellKeyboardListenerFeature=new uW(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc(()=>{var i;(i=this.cellKeyboardListenerFeature)==null||i.destroy(),this.cellKeyboardListenerFeature=null}),this.column.isTooltipEnabled()&&(this.enableTooltipFeature(),this.addDestroyFunc(()=>{this.disableTooltipFeature()})),this.beans.rangeService&&this.beans.gos.get("enableRangeSelection")&&(this.cellRangeFeature=new yW(this.beans,this),this.addDestroyFunc(()=>{var i;(i=this.cellRangeFeature)==null||i.destroy(),this.cellRangeFeature=null}))}enableTooltipFeature(t,i){const s=()=>{const o=this.column.getColDef(),l=this.rowNode.data;if(o.tooltipField&&A(l))return Vl(l,o.tooltipField,this.column.isTooltipFieldContainsDots());const a=o.tooltipValueGetter;return a?a(this.beans.gos.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},n=this.beans.gos.get("tooltipShowMode")==="whenTruncated";!i&&n&&!this.isCellRenderer()&&(i=()=>{const o=this.getGui(),l=o.children.length===0?o:o.querySelector(".ag-cell-value");return l?l.scrollWidth>l.clientWidth:!0});const r={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:t!=null?()=>t:s,getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:i};this.tooltipFeature=new Ko(r,this.beans)}disableTooltipFeature(){this.tooltipFeature&&(this.tooltipFeature.destroy(),this.tooltipFeature=null)}setComp(t,i,s,n,r){var o,l,a,u;this.cellComp=t,this.eGui=i,this.printLayout=n,this.addDomData(),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(s),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),(o=this.cellPositionFeature)==null||o.setComp(i),(l=this.cellCustomStyleFeature)==null||l.setComp(t),(a=this.tooltipFeature)==null||a.refreshToolTip(),(u=this.cellKeyboardListenerFeature)==null||u.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(t,i),r&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(c=>c()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(t){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!t)return;const i=t.parentElement,s=this.beans.gos.getRowHeightForNode(this.rowNode).height,n=l=>{if(this.editing||!this.isAlive())return;const{paddingTop:a,paddingBottom:u,borderBottomWidth:c,borderTopWidth:d}=mr(i),h=a+u+c+d,f=t.offsetHeight+h;if(l<5){const w=this.beans.gos.getDocument(),v=!w||!w.contains(t),g=f==0;if(v||g){window.setTimeout(()=>n(l+1),0);return}}const m=Math.max(f,s);this.rowNode.setRowAutoHeight(m,this.column)},r=()=>n(0);r();const o=this.beans.resizeObserverService.observeResize(t,r);this.addDestroyFunc(()=>{o(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}getInstanceId(){return this.instanceId}getColumnIdSanitised(){return this.colIdSanitised}getTabIndex(){return this.tabIndex}isCellRenderer(){const t=this.column.getColDef();return t.cellRenderer!=null||t.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}showValue(t=!1){var n;const i=this.getValueToDisplay();let s;if(this.rowNode.stub){const r=this.createCellRendererParams();s=this.beans.userComponentFactory.getLoadingCellRendererDetails(this.column.getColDef(),r)}else if(this.isCellRenderer()){const r=this.createCellRendererParams();s=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),r)}this.cellComp.setRenderDetails(s,i,t),(n=this.cellRangeFeature)==null||n.refreshHandle()}setupControlComps(){const t=this.column.getColDef();this.includeSelection=this.isIncludeControl(t.checkboxSelection),this.includeRowDrag=this.isIncludeControl(t.rowDrag),this.includeDndSource=this.isIncludeControl(t.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(t){return this.rowNode.rowPinned!=null?!1:typeof t=="function"||t===!0}refreshShouldDestroy(){const t=this.column.getColDef(),i=this.includeSelection!=this.isIncludeControl(t.checkboxSelection),s=this.includeRowDrag!=this.isIncludeControl(t.rowDrag),n=this.includeDndSource!=this.isIncludeControl(t.dndSource),r=this.isAutoHeight!=this.column.isAutoHeight();return i||s||n||r}startEditing(t=null,i=!1,s=null){const{editService:n}=this.beans;if(!(!this.isCellEditable()||this.editing||!n)){if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startEditing(t,i,s)});return}n.startEditing(this,t,i,s)}}setEditing(t,i){var s;this.editCompDetails=i,this.editing!==t&&(this.editing=t,(s=this.cellRangeFeature)==null||s.refreshHandle())}stopRowOrCellEdit(t=!1){this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.stopEditing(t):this.stopEditing(t)}onPopupEditorClosed(){this.editing&&this.stopEditingAndFocus()}stopEditing(t=!1){const{editService:i}=this.beans;return!this.editing||!i?!1:i.stopEditing(this,t)}createCellRendererParams(){return this.beans.gos.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.rowNode.getValueFromValueService(this.column),setValue:i=>this.beans.valueService.setValue(this.rowNode,this.column,i),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(i,s,n,r)=>this.registerRowDragger(i,s,r),setTooltip:(i,s)=>{var n;this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(i,s),(n=this.tooltipFeature)==null||n.refreshToolTip()}})}setFocusOutOnEditor(){var t;this.editing&&((t=this.beans.editService)==null||t.setFocusOutOnEditor(this))}setFocusInOnEditor(){var t;this.editing&&((t=this.beans.editService)==null||t.setFocusInOnEditor(this))}onCellChanged(t){t.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(t){var i;this.refreshShouldDestroy()?(i=this.rowCtrl)==null||i.recreateCell(this):this.refreshCell(t)}refreshCell(t){var c,d,h,p,f;if(this.suppressRefreshCell||this.editing)return;const i=this.column.getColDef(),s=t!=null&&!!t.newData,n=t!=null&&!!t.suppressFlash||!!i.suppressCellFlash,r=i.field==null&&i.valueGetter==null&&i.showRowGroup==null,o=t&&t.forceRefresh||r||s,l=!!this.cellComp,a=this.updateAndFormatValue(l),u=o||a;if(l){if(u){this.showValue(s);const m=(c=this.beans.filterManager)==null?void 0:c.isSuppressFlashingCellsBecauseFiltering();!n&&!m&&(this.beans.gos.get("enableCellChangeFlash")||i.enableCellChangeFlash)&&this.flashCell(),(d=this.cellCustomStyleFeature)==null||d.applyUserStyles(),(h=this.cellCustomStyleFeature)==null||h.applyClassesFromColDef()}(p=this.tooltipFeature)==null||p.refreshToolTip(),(f=this.cellCustomStyleFeature)==null||f.applyCellClassRules()}}stopEditingAndFocus(t=!1,i=!1){var s;(s=this.beans.editService)==null||s.stopEditingAndFocus(this,t,i)}flashCell(t){const i=(t==null?void 0:t.flashDuration)??(t==null?void 0:t.flashDelay),s=(t==null?void 0:t.fadeDuration)??(t==null?void 0:t.fadeDelay);this.animateCell("data-changed",i,s)}animateCell(t,i,s){if(!this.cellComp)return;const n=`ag-cell-${t}`,r=`ag-cell-${t}-animation`,{gos:o}=this.beans;i||(i=o.get("cellFlashDuration")),A(s)||(s=o.get("cellFadeDuration")),this.cellComp.addOrRemoveCssClass(n,!0),this.cellComp.addOrRemoveCssClass(r,!1),this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(n,!1),this.cellComp.addOrRemoveCssClass(r,!0),this.eGui.style.transition=`background-color ${s}ms`,window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(r,!1),this.eGui.style.transition="")},s))},i)})}onFlashCells(t){if(!this.cellComp)return;const i=this.beans.cellPositionUtils.createId(this.getCellPosition());t.cells[i]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(t){return this.callValueFormatter(t)??t}callValueFormatter(t){return this.beans.valueService.formatValue(this.column,this.rowNode,t)}updateAndFormatValue(t){const i=this.value,s=this.valueFormatted;return this.value=this.rowNode.getValueFromValueService(this.column),this.valueFormatted=this.callValueFormatter(this.value),t?!this.valuesAreEqual(i,this.value)||this.valueFormatted!=s:!0}valuesAreEqual(t,i){const s=this.column.getColDef();return s.equals?s.equals(t,i):t===i}getComp(){return this.cellComp}getValue(){return this.value}addDomData(){const t=this.getGui();this.beans.gos.setDomData(t,Lg.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(()=>this.beans.gos.setDomData(t,Lg.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(t,i){return this.beans.gos.addGridCommonParams({type:i,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:t,rowIndex:this.rowNode.rowIndex})}processCharacter(t){var i;(i=this.cellKeyboardListenerFeature)==null||i.processCharacter(t)}onKeyDown(t){var i;(i=this.cellKeyboardListenerFeature)==null||i.onKeyDown(t)}onMouseEvent(t,i){var s;(s=this.cellMouseListenerFeature)==null||s.onMouseEvent(t,i)}getGui(){return this.eGui}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){var t;this.cellComp&&((t=this.cellPositionFeature)==null||t.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{cellComp:t,column:i,beans:s}=this;QF(t,i,s.visibleColsService)}refreshAriaColIndex(){const t=this.beans.visibleColsService.getAriaColIndex(this.column);cF(this.getGui(),t)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){var t;return(t=this.cellPositionFeature)==null?void 0:t.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}isPrintLayout(){return this.printLayout}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(t,i=null){if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(t,i)});return}this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(t,this):this.startEditing(t,!0,i)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onRangeSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}isRangeSelectionEnabled(){return this.cellRangeFeature!=null}focusCell(t=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:t})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}onFirstRightPinnedChanged(){if(!this.cellComp)return;const t=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(PW,t)}onLastLeftPinnedChanged(){if(!this.cellComp)return;const t=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(FW,t)}onCellFocused(t){if(this.beans.gos.get("suppressCellFocus"))return;const i=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){i&&(t!=null&&t.forceBrowserFocus)&&(this.focusEventToRestore=t);return}if(this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(EW,i),i&&t&&t.forceBrowserFocus){let n=this.cellComp.getFocusableElement();if(this.editing){const r=this.beans.focusService.findFocusableElements(n,null,!0);r.length&&(n=r[0])}n.focus({preventScroll:!!t.preventScrollOnBrowserFocus})}const s=this.beans.gos.get("editType")==="fullRow";!i&&!s&&this.editing&&this.stopRowOrCellEdit(),i&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:Kn(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass(SW,!0),this.cellComp.addOrRemoveCssClass(TW,!0);const t=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(RW,t),this.cellComp.addOrRemoveCssClass(bW,!t)}onColumnHover(){if(!this.cellComp||!this.beans.gos.get("columnHoverHighlight"))return;const t=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(xW,t)}onColDefChanged(){var i;if(!this.cellComp)return;this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing?(i=this.beans.editService)==null||i.handleColDefChanged(this):this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0})}setWrapText(){const t=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(IW,t)}dispatchCellContextMenuEvent(t){const i=this.column.getColDef(),s=this.createEvent(t,"cellContextMenu");this.beans.eventService.dispatchEvent(s),i.onCellContextMenu&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{i.onCellContextMenu(s)})},0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){const t=new oW;return this.beans.context.createBean(t),t.init({rowNode:this.rowNode,column:this.column}),t}createDndSource(){const t=new lW(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(t),t}registerRowDragger(t,i,s){if(this.customRowDragComp){this.customRowDragComp.setDragElement(t,i);return}const n=this.createRowDragComp(t,i,s);n&&(this.customRowDragComp=n,this.addDestroyFunc(()=>{this.beans.context.destroyBean(n),this.customRowDragComp=null}))}createRowDragComp(t,i,s){const n=this.beans.gos.get("pagination"),r=this.beans.gos.get("rowDragManaged"),o=this.beans.gos.isRowModelType("clientSide");if(r){if(!o){M("managed row dragging is only allowed in the Client Side Row Model");return}if(n){M("managed row dragging is not possible when doing pagination");return}}const l=new kg(()=>this.value,this.rowNode,this.column,t,i,s);return this.beans.context.createBean(l),l}setSuppressRefreshCell(t){this.suppressRefreshCell=t}getEditCompDetails(){return this.editCompDetails}};lT.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var Yn=lT,kW=0,aT=class Og extends T{constructor(t,i,s,n,r){var o;super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=i,this.gos=i.gos,this.rowNode=t,this.paginationPage=((o=i.paginationService)==null?void 0:o.getCurrentPage())??0,this.useAnimationFrameForCreate=n,this.printLayout=r,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=t.id+"-"+kW++,this.rowId=Zi(t.id),this.initRowBusinessKey(),this.rowFocused=i.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=i.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(s),this.rowStyles=this.processStylesFromGridOptions(),this.isFullWidth()&&!this.gos.get("suppressCellFocus")&&(this.tabIndex=-1),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const t=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=Zi(t)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}getTabIndex(){return this.tabIndex}isSticky(){return this.rowNode.sticky}getInstanceId(){return this.instanceId}updateGui(t,i){t==="left"?this.leftGui=i:t==="right"?this.rightGui=i:t==="fullWidth"?this.fullWidthGui=i:this.centerGui=i}setComp(t,i,s){const n={rowComp:t,element:i,containerType:s};this.allRowGuis.push(n),this.updateGui(s,n),this.initialiseRowComp(n),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(t){this.allRowGuis=this.allRowGuis.filter(i=>i.containerType!==t),this.updateGui(t,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(t){const i=t?"none":"";this.allRowGuis.forEach(s=>s.element.style.display=i)}initialiseRowComp(t){const i=this.gos;this.listenOnDomOrder(t),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(t),this.updateRowIndexes(t),this.setFocusedClasses(t),this.setStylesFromGridOptions(!1,t),i.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(t),this.updateColumnLists(!this.useAnimationFrameForCreate);const s=t.rowComp;this.getInitialRowClasses(t.containerType).forEach(r=>s.addOrRemoveCssClass(r,!0)),this.executeSlideAndFadeAnimations(t),this.rowNode.group&&pd(t.element,this.rowNode.expanded==!0),this.setRowCompRowId(s),this.setRowCompRowBusinessKey(s),i.setDomData(t.element,Og.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc(()=>i.setDomData(t.element,Og.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,t.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(t.element),this.isFullWidth()&&this.setupFullWidth(t),i.get("rowDragEntireRow")&&this.addRowDraggerToRow(t),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{this.isAlive()&&t.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(t){this.businessKeySanitised!=null&&t.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(t){this.rowId=Zi(this.rowNode.id),this.rowId!=null&&t.setRowId(this.rowId)}executeSlideAndFadeAnimations(t){const{containerType:i}=t;this.slideInAnimation[i]&&(pS(()=>{this.onTopChanged()}),this.slideInAnimation[i]=!1),this.fadeInAnimation[i]&&(pS(()=>{t.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[i]=!1)}addRowDraggerToRow(t){if(this.gos.get("enableRangeSelection")){M("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`");return}const i=this.beans.localeService.getLocaleTextFunc(),s=new kg(()=>`1 ${i("rowDragRow","row")}`,this.rowNode,void 0,t.element,void 0,!0),n=this.createBean(s,this.beans.context);this.rowDragComps.push(n)}setupFullWidth(t){const i=this.getPinnedForContainer(t.containerType);if(this.rowType=="FullWidthDetail"&&!Rt.__assertRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)",this.beans.context.getGridId()))return;const s=this.createFullWidthCompDetails(t.element,i);t.rowComp.showFullWidth(s)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){var t,i;return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(s=>{var n;return(n=s==null?void 0:s.rowComp)==null?void 0:n.getFullWidthCellRenderer()}):[(i=(t=this.fullWidthGui)==null?void 0:t.rowComp)==null?void 0:i.getFullWidthCellRenderer()]}getCellElement(t){const i=this.getCellCtrl(t);return i?i.getGui():null}executeProcessRowPostCreateFunc(){const t=this.gos.getCallback("processRowPostCreate");if(!t||!this.areAllContainersReady())return;const i={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};t(i)}areAllContainersReady(){const t=!!this.leftGui||!this.beans.visibleColsService.isPinningLeft(),i=!!this.centerGui,s=!!this.rightGui||!this.beans.visibleColsService.isPinningRight();return t&&i&&s}setRowType(){const t=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow"),i=this.rowNode.isFullWidthCell(),s=this.gos.get("masterDetail")&&this.rowNode.detail,n=this.beans.columnModel.isPivotMode(),o=!!this.rowNode.group&&!this.rowNode.footer&&this.gos.isGroupUseEntireRow(n);t?this.rowType="FullWidthLoading":s?this.rowType="FullWidthDetail":i?this.rowType="FullWidth":o?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(t=!1,i=!1){if(this.isFullWidth())return;if(t||this.gos.get("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(i);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(t,i,s=null){const n={list:[],map:{}},r=(o,l)=>{n.list.push(l),n.map[o]=l};return i.forEach(o=>{const l=o.getInstanceId();let a=t.map[l];a||(a=new Yn(o,this.rowNode,this.beans,this)),r(l,a)}),t.list.forEach(o=>{if(n.map[o.getColumn().getInstanceId()]!=null)return;if(!this.isCellEligibleToBeRemoved(o,s)){r(o.getColumn().getInstanceId(),o);return}o.destroy()}),n}updateColumnListsImpl(t){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(t)}setCellCtrls(t){this.allRowGuis.forEach(i=>{const s=this.getCellCtrlsForContainer(i.containerType);i.rowComp.setCellCtrls(s,t)})}getCellCtrlsForContainer(t){switch(t){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const t=this.beans.columnViewportService,i=this.beans.visibleColsService;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i.getAllCols()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const s=t.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,s);const n=i.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,n,"left");const r=i.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,r,"right")}}isCellEligibleToBeRemoved(t,i){if(t.getColumn().getPinned()!=i)return!0;const o=t.isEditing(),l=this.beans.focusService.isCellFocused(t.getCellPosition());if(o||l){const u=t.getColumn();return!(this.beans.visibleColsService.getAllCols().indexOf(u)>=0)}return!0}getDomOrder(){return this.gos.get("ensureDomOrder")||this.gos.isDomLayout("print")}listenOnDomOrder(t){const i=()=>{t.rowComp.setDomOrder(this.getDomOrder())};this.addManagedPropertyListener("domLayout",i),this.addManagedPropertyListener("ensureDomOrder",i)}setAnimateFlags(t){if(this.isSticky()||!t)return;const i=A(this.rowNode.oldRowTop),s=this.beans.visibleColsService.isPinningLeft(),n=this.beans.visibleColsService.isPinningRight();if(i){if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=s,this.slideInAnimation.right=n}else{if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=s,this.fadeInAnimation.right=n}}isEditing(){return this.editingRow}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){const t=(l,a)=>l?l.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(l.element,a).params):!0,i=t(this.fullWidthGui,null),s=t(this.centerGui,null),n=t(this.leftGui,"left"),r=t(this.rightGui,"right");return i&&s&&n&&r}addListeners(){this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),expandedChanged:this.updateExpandedCss.bind(this),hasChildrenChanged:this.updateExpandedCss.bind(this)}),this.rowNode.detail&&this.addManagedListeners(this.rowNode.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(this.rowNode,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this)}),this.addManagedListeners(this.beans.eventService,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),this.addDestroyFunc(()=>{this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))}),this.addManagedPropertyListeners(["rowDragEntireRow"],()=>{if(this.gos.get("rowDragEntireRow")){this.allRowGuis.forEach(i=>{this.addRowDraggerToRow(i)});return}this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{this.getAllCellCtrls().forEach(t=>t.onRowIndexChanged())},cellChanged:t=>{this.getAllCellCtrls().forEach(i=>i.onCellChanged(t))}})}onRowNodeDataChanged(t){if(this.isFullWidth()!==!!this.rowNode.isFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(s=>s.refreshCell({suppressFlash:!t.update,newData:!t.update})),this.allRowGuis.forEach(s=>{this.setRowCompRowId(s.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(s.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const t=this.rowNode.highlighted;this.allRowGuis.forEach(i=>{const s=t===0,n=t===1;i.rowComp.addOrRemoveCssClass("ag-row-highlight-above",s),i.rowComp.addOrRemoveCssClass("ag-row-highlight-below",n)})}postProcessRowDragging(){const t=this.rowNode.dragging;this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-dragging",t))}updateExpandedCss(){const t=this.rowNode.isExpandable(),i=this.rowNode.expanded==!0;this.allRowGuis.forEach(s=>{s.rowComp.addOrRemoveCssClass("ag-row-group",t),s.rowComp.addOrRemoveCssClass("ag-row-group-expanded",t&&i),s.rowComp.addOrRemoveCssClass("ag-row-group-contracted",t&&!i),pd(s.element,t&&i)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:Kn(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(t){const i=this.allRowGuis.find(a=>a.element.contains(t.target));if(!((i?i.element:null)===t.target))return;const r=this.rowNode,o=this.beans.focusService.getFocusedCell(),l={rowIndex:r.rowIndex,rowPinned:r.rowPinned,column:o&&o.column};this.beans.navigationService.navigateToNextCell(t,t.key,l,!0),t.preventDefault()}onTabKeyDown(t){if(t.defaultPrevented||fn(t))return;const i=this.allRowGuis.find(o=>o.element.contains(t.target)),s=i?i.element:null,n=s===t.target;let r=null;n||(r=this.beans.focusService.findNextFocusableElement(s,!1,t.shiftKey)),(this.isFullWidth()&&n||!r)&&this.beans.navigationService.onTabKeyDown(this,t)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){var i;const t=(i=this.allRowGuis.find(s=>is(s.element)))==null?void 0:i.element;return t?t.getBoundingClientRect().top:0}onFullWidthRowFocused(t){var r;const i=this.rowNode,s=t?this.isFullWidth()&&t.rowIndex===i.rowIndex&&t.rowPinned==i.rowPinned:!1,n=this.fullWidthGui?this.fullWidthGui.element:(r=this.centerGui)==null?void 0:r.element;n&&(n.classList.toggle("ag-full-width-focus",s),s&&(t!=null&&t.forceBrowserFocus)&&n.focus({preventScroll:!0}))}recreateCell(t){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,t),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,t),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,t),t.destroy(),this.updateColumnLists()}removeCellCtrl(t,i){const s={list:[],map:{}};return t.list.forEach(n=>{n!==i&&(s.list.push(n),s.map[n.getColumn().getInstanceId()]=n)}),s}onMouseEvent(t,i){switch(t){case"dblclick":this.onRowDblClick(i);break;case"click":this.onRowClick(i);break;case"touchstart":case"mousedown":this.onRowMouseDown(i);break}}createRowEvent(t,i){return this.gos.addGridCommonParams({type:t,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:i})}createRowEventWithSource(t,i){const s=this.createRowEvent(t,i);return s.source=this,s}onRowDblClick(t){if(fn(t))return;const i=this.createRowEventWithSource("rowDoubleClicked",t);this.beans.eventService.dispatchEvent(i)}onRowMouseDown(t){if(this.lastMouseDownOnDragger=co(t.target,"ag-row-drag",3),!this.isFullWidth())return;const i=this.rowNode,s=this.beans.visibleColsService;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges();const n=this.getFullWidthElement(),r=t.target;let o=!0;n&&n.contains(r)&&zv(r)&&(o=!1),this.beans.focusService.setFocusedCell({rowIndex:i.rowIndex,column:s.getAllCols()[0],rowPinned:i.rowPinned,forceBrowserFocus:o})}onRowClick(t){if(fn(t)||this.lastMouseDownOnDragger)return;const s=this.createRowEventWithSource("rowClicked",t);this.beans.eventService.dispatchEvent(s);const n=t.ctrlKey||t.metaKey,r=t.shiftKey;if(this.gos.get("groupSelectsChildren")&&this.rowNode.group||this.isRowSelectionBlocked()||this.gos.get("suppressRowClickSelection"))return;const l=this.gos.get("rowMultiSelectWithClick"),a=!this.gos.get("suppressRowDeselection"),u="rowClicked";if(this.rowNode.isSelected())l?this.rowNode.setSelectedParams({newValue:!1,event:t,source:u}):n?a&&this.rowNode.setSelectedParams({newValue:!1,event:t,source:u}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!r,rangeSelect:r,event:t,source:u});else{const c=l?!1:!n;this.rowNode.setSelectedParams({newValue:!0,clearSelection:c,rangeSelect:r,event:t,source:u})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!this.gos.isRowSelection()}setupDetailRowAutoHeight(t){if(this.rowType!=="FullWidthDetail"||!this.gos.get("detailRowAutoHeight"))return;const i=()=>{const n=t.clientHeight;if(n!=null&&n>0){const r=()=>{this.rowNode.setRowHeight(n),this.beans.rowModel.getType()==="clientSide"?this.beans.rowModel.onRowHeightChanged():this.beans.rowModel.getType()==="serverSide"&&this.beans.rowModel.onRowHeightChanged()};window.setTimeout(r,0)}},s=this.beans.resizeObserverService.observeResize(t,i);this.addDestroyFunc(s),i()}createFullWidthCompDetails(t,i){const{gos:s,rowNode:n}=this,r=s.addGridCommonParams({fullWidth:!0,data:n.data,node:n,value:n.key,valueFormatted:n.key,eGridCell:t,eParentOfValue:t,pinned:i,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(l,a,u,c)=>this.addFullWidthRowDragging(l,a,u,c),setTooltip:(l,a)=>this.refreshRowTooltip(l,a)}),o=this.beans.userComponentFactory;switch(this.rowType){case"FullWidthDetail":return o.getFullWidthDetailCellRendererDetails(r);case"FullWidthGroup":return o.getFullWidthGroupCellRendererDetails(r);case"FullWidthLoading":return o.getFullWidthLoadingCellRendererDetails(r);default:return o.getFullWidthCellRendererDetails(r)}}refreshRowTooltip(t,i){if(!this.fullWidthGui)return;const s={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>t,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:i};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new Ko(s,this.beans))}addFullWidthRowDragging(t,i,s="",n){if(!this.isFullWidth())return;const r=new kg(()=>s,this.rowNode,void 0,t,i,n);this.createBean(r,this.beans.context),this.addDestroyFunc(()=>{this.destroyBean(r,this.beans.context)})}onUiLevelChanged(){const t=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=t){const i="ag-row-level-"+t,s="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(n=>{n.rowComp.addOrRemoveCssClass(i,!0),n.rowComp.addOrRemoveCssClass(s,!1)})}this.rowLevel=t}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getLastRow()}refreshFirstAndLastRowStyles(){const t=this.isFirstRowOnPage(),i=this.isLastRowOnPage();this.firstRowOnPage!==t&&(this.firstRowOnPage=t,this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-row-first",t))),this.lastRowOnPage!==i&&(this.lastRowOnPage=i,this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-row-last",i)))}stopEditing(t=!1){var i;this.stoppingRowEdit||(i=this.beans.rowEditService)==null||i.stopEditing(this,t)}setInlineEditingCss(t){this.allRowGuis.forEach(i=>{i.rowComp.addOrRemoveCssClass("ag-row-inline-editing",t),i.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!t)})}setEditingRow(t){this.editingRow=t}startRowEditing(t=null,i=null,s=null){var n;this.editingRow||(n=this.beans.rowEditService)==null||n.startEditing(this,t,i,s)}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const t=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!t||!t.length||t.forEach(i=>{this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass(i,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,t=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(t,!0))},t=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(t,!1))})}setStylesFromGridOptions(t,i){t&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(i,s=>s.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(t){return t==="left"||t==="right"?t:null}getInitialRowClasses(t){const i=this.getPinnedForContainer(t),s={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[t],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:i};return this.beans.rowCssClassCalculator.getInitialRowClasses(s)}processStylesFromGridOptions(){const t=this.gos.get("rowStyle");if(t&&typeof t=="function"){M("rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}const i=this.gos.getCallback("getRowStyle");let s;if(i){const n={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};s=i(n)}return s||t?Object.assign({},t,s):this.emptyStyle}onRowSelected(t){const i=!!this.rowNode.isSelected();this.forEachGui(t,s=>{s.rowComp.addOrRemoveCssClass("ag-row-selected",i),fd(s.element,i),s.element.contains(this.gos.getActiveDomElement())&&(s===this.centerGui||s===this.fullWidthGui)&&this.announceDescription()})}announceDescription(){if(this.isRowSelectionBlocked())return;const t=this.rowNode.isSelected();if(t&&this.gos.get("suppressRowDeselection"))return;const s=this.beans.localeService.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(s)}addHoverFunctionality(t){if(!this.active)return;const{rowNode:i,beans:s,gos:n}=this;this.addManagedListeners(t,{mouseenter:()=>i.onMouseEnter(),mouseleave:()=>i.onMouseLeave()}),this.addManagedListeners(i,{mouseEnter:()=>{!s.dragService.isDragging()&&!n.get("suppressRowHoverHighlight")&&(t.classList.add("ag-row-hover"),i.setHovered(!0))},mouseLeave:()=>{t.classList.remove("ag-row-hover"),i.setHovered(!1)}})}roundRowTopToBounds(t){const i=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),s=this.applyPaginationOffset(i.top,!0)-100,n=this.applyPaginationOffset(i.bottom,!0)+100;return Math.min(Math.max(s,t),n)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(t,i){t?i(t):this.allRowGuis.forEach(i)}onRowHeightChanged(t){if(this.rowNode.rowHeight==null)return;const i=this.rowNode.rowHeight,s=this.beans.environment.getDefaultRowHeight(),r=this.gos.isGetRowHeightFunction()?this.gos.getRowHeightForNode(this.rowNode).height:void 0,o=r?`${Math.min(s,r)-2}px`:void 0;this.forEachGui(t,l=>{l.element.style.height=`${i}px`,o&&l.element.style.setProperty("--ag-line-height",o)})}addEventListener(t,i){super.addEventListener(t,i)}removeEventListener(t,i){super.removeEventListener(t,i)}destroyFirstPass(t=!1){if(this.active=!1,!t&&this.gos.isAnimateRows()&&!this.isSticky())if(this.rowNode.rowTop!=null){const n=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(n)}else this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));this.rowNode.setHovered(!1);const i=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(i),this.beans.eventService.dispatchEvent(i),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();const t=i=>(i.list.forEach(s=>s.destroy()),{list:[],map:{}});this.centerCellCtrls=t(this.centerCellCtrls),this.leftCellCtrls=t(this.leftCellCtrls),this.rightCellCtrls=t(this.rightCellCtrls)}setFocusedClasses(t){this.forEachGui(t,i=>{i.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),i.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const t=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses()),!t&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){var i;const t=((i=this.beans.paginationService)==null?void 0:i.getCurrentPage())??0;this.paginationPage!==t&&(this.paginationPage=t,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(t,i=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return t;const s=this.beans.pageBoundsService.getPixelOffset();return t+s*(i?1:-1)}setRowTop(t){if(!this.printLayout&&A(t)){const i=this.applyPaginationOffset(t),r=`${this.rowNode.isRowPinned()||this.rowNode.sticky?i:this.beans.rowContainerHeightService.getRealPixelPosition(i)}px`;this.setRowTopStyle(r)}}getInitialRowTop(t){return this.suppressRowTransform?this.getInitialRowTopShared(t):void 0}getInitialTransform(t){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(t)})`}getInitialRowTopShared(t){if(this.printLayout)return"";const i=this.rowNode;let s;if(this.isSticky())s=i.stickyRowTop;else{const n=this.slideInAnimation[t]?this.roundRowTopToBounds(i.oldRowTop):i.rowTop,r=this.applyPaginationOffset(n);s=i.isRowPinned()?r:this.beans.rowContainerHeightService.getRealPixelPosition(r)}return s+"px"}setRowTopStyle(t){this.allRowGuis.forEach(i=>this.suppressRowTransform?i.rowComp.setTop(t):i.rowComp.setTransform(`translateY(${t})`))}getRowNode(){return this.rowNode}getCellCtrl(t){let i=null;return this.getAllCellCtrls().forEach(s=>{s.getColumn()==t&&(i=s)}),i!=null||this.getAllCellCtrls().forEach(s=>{s.getColSpanningList().indexOf(t)>=0&&(i=s)}),i}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(t){var o;const i=this.rowNode.getRowIndexString();if(i===null)return;const s=this.beans.headerNavigationService.getHeaderRowCount()+(((o=this.beans.filterManager)==null?void 0:o.getHeaderRowCount())??0),n=this.rowNode.rowIndex%2===0,r=s+this.rowNode.rowIndex+1;this.forEachGui(t,l=>{l.rowComp.setRowIndex(i),l.rowComp.addOrRemoveCssClass("ag-row-even",n),l.rowComp.addOrRemoveCssClass("ag-row-odd",!n),gH(l.element,r)})}setStoppingRowEdit(t){this.stoppingRowEdit=t}};aT.DOM_DATA_KEY_ROW_CTRL="renderedRow";var Qn=aT,MW=class extends T{wireBeans(e){this.mouseEventService=e.mouseEventService,this.valueService=e.valueService,this.menuService=e.menuService,this.ctrlsService=e.ctrlsService,this.navigationService=e.navigationService,this.focusService=e.focusService,this.undoRedoService=e.undoRedoService,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.rangeService=e.rangeService,this.clipboardService=e.clipboardService}constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",XP("touchstart")?"touchstart":"mousedown"].forEach(i=>{const s=this.processMouseEvent.bind(this,i);this.addManagedElementListeners(this.element,{[i]:s})})}processMouseEvent(e,t){if(!this.mouseEventService.isEventFromThisGrid(t)||fn(t))return;const i=this.getRowForEvent(t),s=this.mouseEventService.getRenderedCellForEvent(t);e==="contextmenu"?this.handleContextMenuMouseEvent(t,void 0,i,s):(s&&s.onMouseEvent(e,t),i&&i.onMouseEvent(e,t))}mockContextMenuForIPad(){if(!xn())return;const e=new gn(this.element),t=i=>{const s=this.getRowForEvent(i.touchEvent),n=this.mouseEventService.getRenderedCellForEvent(i.touchEvent);this.handleContextMenuMouseEvent(void 0,i.touchEvent,s,n)};this.addManagedListeners(e,{longTap:t}),this.addDestroyFunc(()=>e.destroy())}getRowForEvent(e){let t=e.target;for(;t;){const i=this.gos.getDomData(t,Qn.DOM_DATA_KEY_ROW_CTRL);if(i)return i;t=t.parentElement}return null}handleContextMenuMouseEvent(e,t,i,s){const n=i?i.getRowNode():null,r=s?s.getColumn():null;let o=null;if(r){const u=e||t;s.dispatchCellContextMenuEvent(u??null),o=this.valueService.getValue(r,n)}const l=this.ctrlsService.getGridBodyCtrl(),a=s?s.getGui():l.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:n,column:r,value:o,anchorToElement:a})}getControlsForEventTarget(e){return{cellCtrl:yg(this.gos,e,Yn.DOM_DATA_KEY_CELL_CTRL),rowCtrl:yg(this.gos,e,Qn.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,t){const{cellCtrl:i,rowCtrl:s}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(i?this.processCellKeyboardEvent(i,e,t):s&&s.isFullWidth()&&this.processFullWidthRowKeyboardEvent(s,e,t))}processCellKeyboardEvent(e,t,i){const s=e.getRowNode(),n=e.getColumn(),r=e.isEditing();if(!Mg(this.gos,i,s,n,r)&&t==="keydown"&&(!r&&this.navigationService.handlePageScrollingKey(i)||e.onKeyDown(i),this.doGridOperations(i,e.isEditing()),HF(i)&&e.processCharacter(i)),t==="keydown"){const l=e.createEvent(i,"cellKeyDown");this.eventService.dispatchEvent(l)}}processFullWidthRowKeyboardEvent(e,t,i){const s=e.getRowNode(),n=this.focusService.getFocusedCell(),r=n&&n.column;if(!Mg(this.gos,i,s,r,!1)){const l=i.key;if(t==="keydown")switch(l){case F.PAGE_HOME:case F.PAGE_END:case F.PAGE_UP:case F.PAGE_DOWN:this.navigationService.handlePageScrollingKey(i,!0);break;case F.UP:case F.DOWN:e.onKeyboardNavigate(i);break;case F.TAB:e.onTabKeyDown(i);break}}if(t==="keydown"){const l=e.createRowEvent("cellKeyDown",i);this.eventService.dispatchEvent(l)}}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!this.mouseEventService.isEventFromThisGrid(e))return;const i=WV(e);if(i===F.A)return this.onCtrlAndA(e);if(i===F.C)return this.onCtrlAndC(e);if(i===F.D)return this.onCtrlAndD(e);if(i===F.V)return this.onCtrlAndV(e);if(i===F.X)return this.onCtrlAndX(e);if(i===F.Y)return this.onCtrlAndY();if(i===F.Z)return this.onCtrlAndZ(e)}onCtrlAndA(e){const{pinnedRowModel:t,rowModel:i,rangeService:s}=this;if(s&&i.isRowsToRender()){const[n,r]=[t.isEmpty("top"),t.isEmpty("bottom")],o=n?null:"top";let l,a;r?(l=null,a=i.getRowCount()-1):(l="bottom",a=t.getPinnedBottomRowNodes().length-1);const u=this.visibleColsService.getAllCols();if(lt(u))return;s.setCellRange({rowStartIndex:0,rowStartPinned:o,rowEndIndex:a,rowEndPinned:l,columnStart:u[0],columnEnd:se(u)})}e.preventDefault()}onCtrlAndC(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t!=null&&t.isEditing()||i!=null&&i.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t!=null&&t.isEditing()||i!=null&&i.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(e){const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t!=null&&t.isEditing()||i!=null&&i.isEditing()||this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(e){this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()}onCtrlAndZ(e){!this.gos.get("undoRedoCellEditing")||!this.undoRedoService||(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){var e;(e=this.undoRedoService)==null||e.redo("ui")}},AW=class extends T{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({leftPinnedWidthChanged:this.onPinnedLeftWidthChanged.bind(this)})}onPinnedLeftWidthChanged(){const e=this.pinnedWidthService.getPinnedLeftWidth(),t=e>0;Me(this.element,t),Oi(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}},_W=class extends T{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({rightPinnedWidthChanged:this.onPinnedRightWidthChanged.bind(this)})}onPinnedRightWidthChanged(){const e=this.pinnedWidthService.getPinnedRightWidth(),t=e>0;Me(this.element,t),Oi(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}},Iu=e=>e.getTopRowCtrls(),Du=e=>e.getStickyTopRowCtrls(),ku=e=>e.getStickyBottomRowCtrls(),Mu=e=>e.getBottomRowCtrls(),Au=e=>e.getCentreRowCtrls(),LW={center:{type:"center",container:"ag-center-cols-container",viewport:"ag-center-cols-viewport",getRowCtrls:Au},left:{type:"left",container:"ag-pinned-left-cols-container",pinnedType:"left",getRowCtrls:Au},right:{type:"right",container:"ag-pinned-right-cols-container",pinnedType:"right",getRowCtrls:Au},fullWidth:{type:"fullWidth",container:"ag-full-width-container",fullWidth:!0,getRowCtrls:Au},topCenter:{type:"center",container:"ag-floating-top-container",viewport:"ag-floating-top-viewport",getRowCtrls:Iu},topLeft:{type:"left",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:Iu},topRight:{type:"right",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:Iu},topFullWidth:{type:"fullWidth",container:"ag-floating-top-full-width-container",fullWidth:!0,getRowCtrls:Iu},stickyTopCenter:{type:"center",container:"ag-sticky-top-container",viewport:"ag-sticky-top-viewport",getRowCtrls:Du},stickyTopLeft:{type:"left",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:Du},stickyTopRight:{type:"right",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:Du},stickyTopFullWidth:{type:"fullWidth",container:"ag-sticky-top-full-width-container",fullWidth:!0,getRowCtrls:Du},stickyBottomCenter:{type:"center",container:"ag-sticky-bottom-container",viewport:"ag-sticky-bottom-viewport",getRowCtrls:ku},stickyBottomLeft:{type:"left",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:ku},stickyBottomRight:{type:"right",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:ku},stickyBottomFullWidth:{type:"fullWidth",container:"ag-sticky-bottom-full-width-container",fullWidth:!0,getRowCtrls:ku},bottomCenter:{type:"center",container:"ag-floating-bottom-container",viewport:"ag-floating-bottom-viewport",getRowCtrls:Mu},bottomLeft:{type:"left",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:Mu},bottomRight:{type:"right",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:Mu},bottomFullWidth:{type:"fullWidth",container:"ag-floating-bottom-full-width-container",fullWidth:!0,getRowCtrls:Mu}};function uT(e){return LW[e]}var OW=["topCenter","topLeft","topRight"],NW=["bottomCenter","bottomLeft","bottomRight"],GW=["center","left","right"],HW=["center","left","right","fullWidth"],VW=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],BW=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],WW=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],cT=["stickyTopCenter","stickyTopLeft","stickyTopRight"],dT=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],zW=[...cT,"stickyTopFullWidth",...dT,"stickyBottomFullWidth"],UW=[...OW,...NW,...GW,...cT,...dT],jW=class extends T{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.options=uT(e)}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService,this.columnViewportService=e.columnViewportService,this.resizeObserverService=e.resizeObserverService,this.rowRenderer=e.rowRenderer}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new nW(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.ctrlsService.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,t,i){this.comp=e,this.eContainer=t,this.eViewport=i,this.createManagedBean(new MW(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows(),this.forContainers(BW,()=>{this.pinnedWidthFeature=this.createManagedBean(new AW(this.eContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:()=>this.onPinnedWidthChanged()})}),this.forContainers(WW,()=>{this.pinnedWidthFeature=this.createManagedBean(new _W(this.eContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:()=>this.onPinnedWidthChanged()})}),this.forContainers(HW,()=>this.createManagedBean(new oT(this.eContainer,this.name==="center"?i:void 0))),this.forContainers(UW,()=>this.createManagedBean(new rW(this.eContainer))),this.forContainers(VW,()=>this.createManagedBean(new rC(s=>this.comp.setContainerWidth(`${s}px`)))),this.addListeners(),this.registerWithCtrlsService()}addListeners(){this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),displayedRowsChanged:e=>this.onDisplayedRowsChanged(e.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(zW.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const t=()=>{const i=this.gos.get("ensureDomOrder"),s=this.gos.isDomLayout("print");this.comp.setDomOrder(i||s)};this.addManagedPropertyListener("domLayout",t),t()}stopHScrollOnPinnedRows(){this.forContainers(["topCenter","stickyTopCenter","bottomCenter","stickyBottomCenter"],()=>{const e=()=>this.eViewport.scrollLeft=0;this.addManagedElementListeners(this.eViewport,{scroll:e})})}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const e=t=>{this.dragService.isDragging()&&t.cancelable&&t.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",e))}onHorizontalViewportChanged(e=!1){const t=this.getCenterWidth(),i=this.getCenterViewportScrollLeft();this.columnViewportService.setScrollPosition(t,i,e)}getCenterWidth(){return Ya(this.eViewport)}getCenterViewportScrollLeft(){return vd(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return wF(this.eViewport)}getViewportScrollLeft(){return vd(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||TH(this.eViewport)}getViewportElement(){return this.eViewport}setContainerTranslateX(e){this.eContainer.style.transform=`translateX(${e}px)`}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){Cd(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){const t=this.options.getRowCtrls(this.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const i=this.gos.isDomLayout("print"),n=this.gos.get("embedFullWidthRows")||i,r=t.filter(o=>{const l=o.isFullWidth();return this.options.fullWidth?!n&&l:n||!l});this.comp.setRowCtrls({rowCtrls:r,useFlushSync:e})}};function fl(e){return e.map(t=>`<ag-row-container name="${t}"></ag-row-container>`).join("")}`${fl(["topLeft","topCenter","topRight","topFullWidth"])}${fl(["left","center","right","fullWidth"])}${fl(["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"])}${fl(["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"])}${fl(["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"])}`;var $W=class extends T{constructor(){super(...arguments),this.beanName="scrollVisibleService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnAnimationService=e.columnAnimationService}postConstruct(){this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)})}onDisplayedColumnsChanged(){this.update()}onDisplayedColumnsWidthChanged(){this.update()}update(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(()=>{this.columnAnimationService.executeLaterVMTurn(()=>this.updateImpl())}):this.updateImpl()}updateImpl(){const e=this.ctrlsService.get("center");if(!e||this.columnAnimationService.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(t)}setScrollsVisible(e){if(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing){this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing;const i={type:"scrollVisibilityChanged"};this.eventService.dispatchEvent(i)}}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}},ES="__ag_grid_instance",hT=class pT extends T{constructor(){super(...arguments),this.beanName="mouseEventService",this.gridInstanceId=pT.gridInstanceSequence.next()}wireBeans(t){this.ctrlsService=t.ctrlsService}stampTopLevelGridCompWithGridInstance(t){t[ES]=this.gridInstanceId}getRenderedCellForEvent(t){return yg(this.gos,t.target,Yn.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(t){return this.isElementInThisGrid(t.target)}isElementInThisGrid(t){let i=t;for(;i;){const s=i[ES];if(A(s))return s===this.gridInstanceId;i=i.parentElement}return!1}getCellPositionForEvent(t){const i=this.getRenderedCellForEvent(t);return i?i.getCellPosition():null}getNormalisedPosition(t){const i=this.gos.isDomLayout("normal"),s=t;let n,r;if(s.clientX!=null||s.clientY!=null?(n=s.clientX,r=s.clientY):(n=s.x,r=s.y),i){const o=this.ctrlsService.getGridBodyCtrl(),l=o.getScrollFeature().getVScrollPosition(),a=o.getScrollFeature().getHScrollPosition();n+=a.left,r+=l.top}return{x:n,y:r}}};hT.gridInstanceSequence=new ko;var KW=hT,qW=class extends T{constructor(){super(),this.beanName="navigationService",this.onPageDown=fS(this.onPageDown,100),this.onPageUp=fS(this.onPageUp,100)}wireBeans(e){this.mouseEventService=e.mouseEventService,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.ctrlsService=e.ctrlsService,this.rowRenderer=e.rowRenderer,this.headerNavigationService=e.headerNavigationService,this.rowPositionUtils=e.rowPositionUtils,this.cellNavigationService=e.cellNavigationService,this.pinnedRowModel=e.pinnedRowModel,this.rangeService=e.rangeService}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){const i=e.key,s=e.altKey,n=e.ctrlKey||e.metaKey,r=!!this.rangeService&&e.shiftKey,o=this.mouseEventService.getCellPositionForEvent(e);let l=!1;switch(i){case F.PAGE_HOME:case F.PAGE_END:!n&&!s&&(this.onHomeOrEndKey(i),l=!0);break;case F.LEFT:case F.RIGHT:case F.UP:case F.DOWN:if(!o)return!1;n&&!s&&!r&&(this.onCtrlUpDownLeftRight(i,o),l=!0);break;case F.PAGE_DOWN:case F.PAGE_UP:!n&&!s&&(l=this.handlePageUpDown(i,o,t));break}return l&&e.preventDefault(),l}handlePageUpDown(e,t,i){return i&&(t=this.focusService.getFocusedCell()),t?(e===F.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo(e){var o;const{scrollIndex:t,scrollType:i,scrollColumn:s,focusIndex:n,focusColumn:r}=e;A(s)&&!s.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(s),A(t)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t,i),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(n),this.focusService.setFocusedCell({rowIndex:n,column:r,rowPinned:null,forceBrowserFocus:!0}),(o=this.rangeService)==null||o.setRangeToCell({rowIndex:n,rowPinned:null,column:r})}onPageDown(e){const i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),s=this.getViewportHeight(),n=this.pageBoundsService.getPixelOffset(),r=i.top+s,o=this.rowModel.getRowIndexAtPixel(r+n);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,o):this.navigateToNextPage(e,o)}onPageUp(e){const i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),s=this.pageBoundsService.getPixelOffset(),n=i.top,r=this.rowModel.getRowIndexAtPixel(n+s);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,r,!0):this.navigateToNextPage(e,r,!0)}navigateToNextPage(e,t,i=!1){const s=this.getViewportHeight(),n=this.pageBoundsService.getFirstRow(),r=this.pageBoundsService.getLastRow(),o=this.pageBoundsService.getPixelOffset(),l=this.rowModel.getRow(e.rowIndex),a=i?(l==null?void 0:l.rowHeight)-s-o:s-o,u=(l==null?void 0:l.rowTop)+a;let c=this.rowModel.getRowIndexAtPixel(u+o);if(c===e.rowIndex){const h=i?-1:1;t=c=e.rowIndex+h}let d;i?(d="bottom",c<n&&(c=n),t<n&&(t=n)):(d="top",c>r&&(c=r),t>r&&(t=r)),this.isRowTallerThanView(c)&&(t=c,d="top"),this.navigateTo({scrollIndex:t,scrollType:d,scrollColumn:null,focusIndex:c,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,i=!1){this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{const s=this.getNextFocusIndexForAutoHeight(e,i);this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:s,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){const i=t?-1:1,s=this.getViewportHeight(),n=this.pageBoundsService.getLastRow();let r=0,o=e.rowIndex;for(;o>=0&&o<=n;){const l=this.rowModel.getRow(o);if(l){const a=l.rowHeight??0;if(r+a>s)break;r+=a}o+=i}return Math.max(0,Math.min(o,n))}getViewportHeight(){const{gridBodyCtrl:e,center:t}=this.ctrlsService.getParams(),i=e.getScrollFeature().getVScrollPosition(),s=this.gos.getScrollbarWidth();let n=i.bottom-i.top;return t.isHorizontalScrollShowing()&&(n-=s),n}isRowTallerThanView(e){const t=this.rowModel.getRow(e);if(!t)return!1;const i=t.rowHeight;return typeof i!="number"?!1:i>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const i=this.cellNavigationService.getNextCellToFocus(e,t,!0),{rowIndex:s}=i,n=i.column;this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:n,focusIndex:s,focusColumn:n})}onHomeOrEndKey(e){const t=e===F.PAGE_HOME,i=this.visibleColsService.getAllCols(),s=t?i[0]:se(i),n=t?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow();this.navigateTo({scrollIndex:n,scrollType:null,scrollColumn:s,focusIndex:n,focusColumn:s})}onTabKeyDown(e,t){const i=t.shiftKey,s=this.tabToNextCellCommon(e,i,t);if(s!==!1){s&&t.preventDefault();return}if(i){const{rowIndex:n,rowPinned:r}=e.getRowPosition();(r?n===0:n===this.pageBoundsService.getFirstRow())&&(this.gos.get("headerHeight")===0||this.gos.get("suppressHeaderFocus")?this.focusService.focusNextGridCoreContainer(!0,!0):(t.preventDefault(),this.focusService.focusPreviousFromFirstCell(t)))}else e instanceof Yn&&e.focusCell(!0),this.focusService.focusNextGridCoreContainer(i)&&t.preventDefault()}tabToNextCell(e,t){const i=this.focusService.getFocusedCell();if(!i)return!1;let s=this.getCellByPosition(i);return!s&&(s=this.rowRenderer.getRowByPosition(i),!s||!s.isFullWidth())?!1:!!this.tabToNextCellCommon(s,e,t)}tabToNextCellCommon(e,t,i){let s=e.isEditing();if(!s&&e instanceof Yn){const o=e.getRowCtrl();o&&(s=o.isEditing())}let n;return s?this.gos.get("editType")==="fullRow"?n=this.moveToNextEditingRow(e,t,i):n=this.moveToNextEditingCell(e,t,i):n=this.moveToNextCellNotEditing(e,t),n===null?n:n||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(e,t,i=null){const s=e.getCellPosition();e.getGui().focus(),e.stopEditing();const n=this.findNextCellToFocusOn(s,t,!0);return n===!1?null:n==null?!1:(n.startEditing(null,!0,i),n.focusCell(!1),!0)}moveToNextEditingRow(e,t,i=null){const s=e.getCellPosition(),n=this.findNextCellToFocusOn(s,t,!0);if(n===!1)return null;if(n==null)return!1;const r=n.getCellPosition(),o=this.isCellEditable(s),l=this.isCellEditable(r),a=r&&s.rowIndex===r.rowIndex&&s.rowPinned===r.rowPinned;return o&&e.setFocusOutOnEditor(),a||(e.getRowCtrl().stopEditing(),n.getRowCtrl().startRowEditing(void 0,void 0,i)),l?(n.setFocusInOnEditor(),n.focusCell()):n.focusCell(!0),!0}moveToNextCellNotEditing(e,t){const i=this.visibleColsService.getAllCols();let s;e instanceof Qn?s={...e.getRowPosition(),column:t?i[0]:se(i)}:s=e.getCellPosition();const n=this.findNextCellToFocusOn(s,t,!1);if(n===!1)return null;if(n instanceof Yn)n.focusCell(!0);else if(n)return this.tryToFocusFullWidthRow(n.getRowPosition(),t);return A(n)}findNextCellToFocusOn(e,t,i){var n;let s=e;for(;;){e!==s&&(e=s),t||(s=this.getLastCellOfColSpan(s)),s=this.cellNavigationService.getNextTabbedCell(s,t);const r=this.gos.getCallback("tabToNextCell");if(A(r)){const u=r({backwards:t,editing:i,previousCellPosition:e,nextCellPosition:s||null});if(u===!0||u===null)u===null&&M("Returning `null` from tabToNextCell is deprecated. Return `true` to stay on the current cell, or `false` to let the browser handle the tab behaviour."),s=e;else{if(u===!1)return!1;s={rowIndex:u.rowIndex,column:u.column,rowPinned:u.rowPinned}}}if(!s)return null;if(s.rowIndex<0){const a=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a+s.rowIndex,column:s.column},fromCell:!0}),null}const o=this.gos.get("editType")==="fullRow";if(i&&!o&&!this.isCellEditable(s))continue;this.ensureCellVisible(s);const l=this.getCellByPosition(s);if(!l){const a=this.rowRenderer.getRowByPosition(s);if(!a||!a.isFullWidth()||i)continue;return a}if(!l.isSuppressNavigable())return(n=this.rangeService)==null||n.setRangeToCell(s),l}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}getCellByPosition(e){const t=this.rowRenderer.getRowByPosition(e);return t?t.getCellCtrl(e.column):null}lookupRowNodeForCell(e){return e.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):e.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.rowModel.getRow(e.rowIndex)}navigateToNextCell(e,t,i,s){let n=i,r=!1;for(;n&&(n===i||!this.isValidNavigateCell(n));)this.gos.get("enableRtl")?t===F.LEFT&&(n=this.getLastCellOfColSpan(n)):t===F.RIGHT&&(n=this.getLastCellOfColSpan(n)),n=this.cellNavigationService.getNextCellToFocus(t,n),r=X(n);if(r&&e&&e.key===F.UP&&(n={rowIndex:-1,rowPinned:null,column:i.column}),s){const l=this.gos.getCallback("navigateToNextCell");if(A(l)){const u=l({key:t,previousCellPosition:i,nextCellPosition:n||null,event:e});A(u)?n={rowPinned:u.rowPinned,rowIndex:u.rowIndex,column:u.column}:n=null}}if(!n)return;if(n.rowIndex<0){const l=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l+n.rowIndex,column:i.column},event:e||void 0,fromCell:!0});return}const o=this.getNormalisedPosition(n);o?this.focusPosition(o):this.tryToFocusFullWidthRow(n)}getNormalisedPosition(e){this.ensureCellVisible(e);const t=this.getCellByPosition(e);return t?(e=t.getCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t=!1){const i=this.visibleColsService.getAllCols(),s=this.rowRenderer.getRowByPosition(e);if(!s||!s.isFullWidth())return!1;const n=this.focusService.getFocusedCell(),r={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?se(i):i[0])};this.focusPosition(r);const o=n!=null?this.rowPositionUtils.before(r,n):!1,l={type:"fullWidthRowFocused",rowIndex:r.rowIndex,rowPinned:r.rowPinned,column:r.column,isFullWidthCell:!0,fromBelow:o};return this.eventService.dispatchEvent(l),!0}focusPosition(e){var t;this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),(t=this.rangeService)==null||t.setRangeToCell(e)}isValidNavigateCell(e){return!!this.rowPositionUtils.getRowNode(e)}getLastCellOfColSpan(e){const t=this.getCellByPosition(e);if(!t)return e;const i=t.getColSpanningList();return i.length===1?e:{rowIndex:e.rowIndex,column:se(i),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=this.gos.isGroupRowsSticky(),i=this.rowModel.getRow(e.rowIndex);!(t&&(i==null?void 0:i.sticky))&&X(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)}},YW=class extends T{constructor(){super(...arguments),this.beanName="horizontalResizeService"}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(t),()=>this.dragService.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const i=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(i)}setResizeIcons(){const e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e,t){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},QW=class extends T{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupService=e.popupService,this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.menuService=e.menuService}hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(e,t,i){this.showPopup(e,s=>{this.popupService.positionPopupUnderMouseEvent({column:e,type:i,mouseEvent:t,ePopup:s})},i,t.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(e,t,i){let s=-1,n="left";const r=this.menuService.isLegacyMenuEnabled();!r&&this.gos.get("enableRtl")&&(s=1,n="right");const o=r?void 0:4*s,l=r?void 0:4;this.showPopup(e,a=>{this.popupService.positionPopupByComponent({type:i,eventSource:t,ePopup:a,nudgeX:o,nudgeY:l,alignSide:n,keepWithinBounds:!0,position:"under",column:e})},i,t,r)}showPopup(e,t,i,s,n){const r=e?this.createBean(new TV(e,"COLUMN_MENU")):void 0;if(this.activeMenu=r,!(r!=null&&r.hasFilter())||!e)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");const o=document.createElement("div");Hi(o,"presentation"),o.classList.add("ag-menu"),n||o.classList.add("ag-filter-menu"),[this.tabListener]=this.addManagedElementListeners(o,{keydown:f=>this.trapFocusWithin(f,o)}),o.appendChild(r==null?void 0:r.getGui());let l;const a=()=>r==null?void 0:r.afterGuiDetached(),u=this.menuService.isColumnMenuAnchoringEnabled()?s??this.ctrlsService.getGridBodyCtrl().getGui():void 0,c=f=>{e.setMenuVisible(!1,"contextMenu");const m=f instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),m&&s&&is(s)){const w=this.focusService.findTabbableParent(s);w&&w.focus()}a(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,i,e)},d=this.localeService.getLocaleTextFunc(),h=n&&i!=="columnFilter"?d("ariaLabelColumnMenu","Column Menu"):d("ariaLabelColumnFilter","Column Filter"),p=this.popupService.addPopup({modal:!0,eChild:o,closeOnEsc:!0,closedCallback:c,positionCallback:()=>t(o),anchorToElement:u,ariaLabel:h});p&&(this.hidePopup=l=p.hideFunc),r.afterInit().then(()=>{t(o),r.afterGuiAttached({container:i,hidePopup:l})}),e.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,i,e)}trapFocusWithin(e,t){e.key!==F.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(t,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,i){const s={type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:i??null};this.eventService.dispatchEvent(s)}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},JW=50,XW=class extends T{constructor(){super(...arguments),this.beanName="resizeObserverService",this.polyfillFunctions=[]}observeResize(e,t){const i=this.gos.getWindow(),s=()=>{const l=new i.ResizeObserver(t);return l.observe(e),()=>l.disconnect()},n=()=>{let l=(e==null?void 0:e.clientWidth)??0,a=(e==null?void 0:e.clientHeight)??0,u=!0;const c=()=>{if(u){const d=(e==null?void 0:e.clientWidth)??0,h=(e==null?void 0:e.clientHeight)??0;(d!==l||h!==a)&&(l=d,a=h,t()),this.doNextPolyfillTurn(c)}};return c(),()=>u=!1},r=this.gos.get("suppressBrowserResizeObserver");return!!i.ResizeObserver&&!r?s():this.getFrameworkOverrides().wrapIncoming(()=>n(),"resize-observer")}doNextPolyfillTurn(e){this.polyfillFunctions.push(e),this.schedulePolyfill()}schedulePolyfill(){if(this.polyfillScheduled)return;const e=()=>{const t=this.polyfillFunctions;this.polyfillScheduled=!1,this.polyfillFunctions=[],t.forEach(i=>i())};this.polyfillScheduled=!0,window.setTimeout(e,JW)}},ZW=class extends T{constructor(){super(...arguments),this.beanName="animationFrameService",this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}setScrollTop(e){var i;const t=this.gos.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,t&&e===0){const s=((i=this.paginationService)==null?void 0:i.getCurrentPage())??0;s!==this.lastPage&&(this.lastPage=s,this.scrollGoingDown=!0)}this.lastScrollTop=e}postConstruct(){this.useAnimationFrame=!this.gos.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(e){this.useAnimationFrame===!1&&M(`AnimationFrameService.${e} called but animation frames are off`)}createTask(e,t,i){this.verifyAnimationFrameOn(i);const s={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[i],s),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort((i,s)=>i.index!==s.index?t*(s.index-i.index):s.createOrder-i.createOrder),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");const t=this.createTasksP1,i=t.list,s=this.createTasksP2,n=s.list,r=this.destroyTasks,o=new Date().getTime();let l=new Date().getTime()-o;const a=e<=0,u=this.ctrlsService.getGridBodyCtrl();for(;a||l<e;){if(!u.getScrollFeature().scrollGridIfNeeded()){let d;if(i.length)this.sortTaskList(t),d=i.pop().task;else if(n.length)this.sortTaskList(s),d=n.pop().task;else if(r.length)d=r.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(d)||d()}l=new Date().getTime()-o}i.length||n.length||r.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)}requestAnimationFrame(e){const t=this.gos.getWindow();t.requestAnimationFrame?t.requestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.setTimeout(e,0)}isQueueEmpty(){return!this.ticking}debounce(e){let t=!1;return()=>{if(!this.isOn()){window.setTimeout(e,0);return}t||(t=!0,this.addDestroyTask(()=>{t=!1,e()}))}}},ez=class extends T{constructor(){super(...arguments),this.beanName="expansionService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.isClientSideRowModel=this.rowModel.getType()==="clientSide"}expandRows(e){if(!this.isClientSideRowModel)return;const t=new Set(e);this.rowModel.forEachNode(i=>{i.id&&t.has(i.id)&&(i.expanded=!0)}),this.onGroupExpandedOrCollapsed()}getExpandedRows(){const e=[];return this.rowModel.forEachNode(({expanded:t,id:i})=>{t&&i&&e.push(i)}),e}expandAll(e){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(e)}setRowNodeExpanded(e,t,i,s){e&&(i&&e.parent&&e.parent.level!==-1&&this.setRowNodeExpanded(e.parent,t,i,s),e.setExpanded(t,void 0,s))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}},tz=class extends T{constructor(){super(...arguments),this.beanName="menuService"}wireBeans(e){this.filterMenuFactory=e.filterMenuFactory,this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.filterManager=e.filterManager,this.rowRenderer=e.rowRenderer,this.columnChooserFactory=e.columnChooserFactory,this.contextMenuFactory=e.contextMenuFactory,this.enterpriseMenuFactory=e.enterpriseMenuFactory}postConstruct(){this.activeMenuFactory=this.enterpriseMenuFactory??this.filterMenuFactory}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){const t=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(t,e,e.containerType,!0)}showHeaderContextMenu(e,t,i){this.activeMenuFactory.showMenuAfterContextMenuEvent(e,t,i)}getContextMenuPosition(e,t){const i=this.getRowCtrl(e),s=this.getCellGui(i,t);if(!s)return i?{x:0,y:i.getRowYPosition()}:{x:0,y:0};const n=s.getBoundingClientRect();return{x:n.x+n.width/2,y:n.y+n.height/2}}showContextMenu(e){var r;const{rowNode:t}=e,i=e.column;let{anchorToElement:s,value:n}=e;t&&i&&n==null&&(n=t.getValueFromValueService(i)),s==null&&(s=this.getContextMenuAnchorElement(t,i)),(r=this.contextMenuFactory)==null||r.onContextMenu(e.mouseEvent??null,e.touchEvent??null,t??null,i??null,n,s)}showColumnChooser(e){var t;(t=this.columnChooserFactory)==null||t.showColumnChooser(e)}hidePopupMenu(){var e;(e=this.contextMenuFactory)==null||e.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){var e;(e=this.columnChooserFactory)==null||e.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(e){const{suppressMenu:t,suppressHeaderMenuButton:i}=e.getColDef();return!(i??t)&&this.activeMenuFactory.isMenuEnabled(e)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){var t;return!e.getColDef().suppressHeaderFilterButton&&!!((t=this.filterManager)!=null&&t.isFilterAllowed(e))}isHeaderContextMenuEnabled(e){return!(e!=null&&e.getColDef().suppressHeaderContextMenu)&&this.getColumnMenuType()==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(xn()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){var t;return!!((t=this.filterManager)!=null&&t.isFilterAllowed(e))&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return this.getColumnMenuType()==="new"}isLegacyMenuEnabled(){return this.getColumnMenuType()==="legacy"}isFloatingFilterButtonEnabled(e){var s;const t=e.getColDef(),i=(s=t.floatingFilterComponentParams)==null?void 0:s.suppressFilterButton;return i!=null&&M("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),t.suppressFloatingFilterButton==null?!i:!t.suppressFloatingFilterButton}getColumnMenuType(){return this.gos.get("columnMenu")}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos.get("suppressMenuHide");return this.isLegacyMenuEnabled()?this.gos.exists("suppressMenuHide")?e:!1:e}showColumnMenuCommon(e,t,i,s){const{positionBy:n}=t,r=t.column;if(n==="button"){const{buttonElement:o}=t;e.showMenuAfterButtonClick(r,o,i,s)}else if(n==="mouse"){const{mouseEvent:o}=t;e.showMenuAfterMouseEvent(r,o,i,s)}else r&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(r,"auto"),this.animationFrameService.requestAnimationFrame(()=>{const o=this.ctrlsService.getHeaderRowContainerCtrl(r.getPinned()).getHeaderCtrlForColumn(r);e.showMenuAfterButtonClick(r,o.getAnchorElementForMenu(s),i,!0)}))}getRowCtrl(e){const{rowIndex:t,rowPinned:i}=e||{};if(t!=null)return this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i})||void 0}getCellGui(e,t){if(!e||!t)return;const i=e.getCellCtrl(t);return(i==null?void 0:i.getGui())||void 0}getContextMenuAnchorElement(e,t){const i=this.ctrlsService.getGridBodyCtrl().getGridBodyElement(),s=this.getRowCtrl(e);if(!s)return i;const n=this.getCellGui(s,t);return n||(s.isFullWidth()?s.getFullWidthElement():i)}},iz=class extends Wn{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const i=super.setValue(e,t);return this.eInput.value=e,i}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},sz={selector:"AG-INPUT-TEXT-AREA",component:iz},nz=class extends qo{constructor(){super(`<div class="ag-large-text">
        <ag-input-text-area data-ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`,[sz]),this.eTextArea=z}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),A(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){const t=e.key;(t===F.LEFT||t===F.UP||t===F.RIGHT||t===F.DOWN||e.shiftKey&&t===F.ENTER)&&e.stopPropagation()}afterGuiAttached(){const e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){const e=this.eTextArea.getValue();return!A(e)&&!A(this.params.value)?this.params.value:this.params.parseValue(e)}},rz=class extends qo{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){this.gos.setDomData(this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params,i=s=>{Mg(this.gos,s,t.node,t.column,!0)||t.onKeyDown(s)};this.addManagedElementListeners(e,{keydown:i})}},oz=class extends qo{constructor(){super(`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" data-ref="eSelect"></ag-select>
            </div>`,[_V]),this.eSelect=z,this.startedByEnter=!1}wireBeans(e){this.valueService=e.valueService}init(e){this.focusAfterAttached=e.cellStartedEdit;const{eSelect:t,valueService:i,gos:s}=this,{values:n,value:r,eventKey:o}=e;if(X(n)){M("no values found for select cellEditor");return}this.startedByEnter=o!=null?o===F.ENTER:!1;let l=!1;n.forEach(d=>{const h={value:d},p=i.formatValue(e.column,null,d),f=p!=null;h.text=f?p:d,t.addOption(h),l=l||r===d}),l?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:a,valueListMaxWidth:u,valueListMaxHeight:c}=e;a!=null&&t.setPickerGap(a),c!=null&&t.setPickerMaxHeight(c),u!=null&&t.setPickerMaxWidth(u),s.get("editType")!=="fullRow"&&this.addManagedListeners(this.eSelect,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}},ah=class extends qo{constructor(e){super(`
            <div class="ag-cell-edit-wrapper">
                ${e.getTemplate()}
            </div>`,e.getAgComponents()),this.cellEditorInput=e,this.eInput=z}init(e){this.params=e;const t=this.eInput;this.cellEditorInput.init(t,e);let i;if(e.cellStartedEdit){this.focusAfterAttached=!0;const s=e.eventKey;s===F.BACKSPACE||e.eventKey===F.DELETE?i="":s&&s.length===1?i=s:(i=this.cellEditorInput.getStartValue(),s!==F.F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,i=this.cellEditorInput.getStartValue();i!=null&&t.setStartValue(i),this.addManagedElementListeners(t.getGui(),{keydown:s=>{const{key:n}=s;(n===F.PAGE_UP||n===F.PAGE_DOWN)&&s.preventDefault()}})}afterGuiAttached(){var s,n;const e=this.localeService.getLocaleTextFunc(),t=this.eInput;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;Is()||t.getFocusableElement().focus();const i=t.getInputElement();this.highlightAllOnFocus?i.select():(n=(s=this.cellEditorInput).setCaret)==null||n.call(s)}focusIn(){const e=this.eInput,t=e.getFocusableElement(),i=e.getInputElement();t.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}},lz=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" data-ref="eInput"></ag-input-text-field>'}getAgComponents(){return[oh]}init(e,t){this.eInput=e,this.params=t,t.maxLength!=null&&e.setMaxLength(t.maxLength)}getValue(){const e=this.eInput.getValue();return!A(e)&&!A(this.params.value)?this.params.value:this.params.parseValue(e)}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){const e=this.eInput.getValue(),t=A(e)&&e.length||0;t&&this.eInput.getInputElement().setSelectionRange(t,t)}},fT=class extends ah{constructor(){super(new lz)}},az=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" data-ref="eInput"></ag-input-number-field>'}getAgComponents(){return[UV]}init(e,t){this.eInput=e,this.params=t,t.max!=null&&e.setMax(t.max),t.min!=null&&e.setMin(t.min),t.precision!=null&&e.setPrecision(t.precision),t.step!=null&&e.setStep(t.step);const i=e.getInputElement();t.preventStepping?e.addManagedElementListeners(i,{keydown:this.preventStepping}):t.showStepperButtons&&i.classList.add("ag-number-field-input-stepper")}preventStepping(e){(e.key===F.UP||e.key===F.DOWN)&&e.preventDefault()}getValue(){const e=this.eInput.getValue();if(!A(e)&&!A(this.params.value))return this.params.value;let t=this.params.parseValue(e);if(t==null)return t;if(typeof t=="string"){if(t==="")return null;t=Number(t)}return isNaN(t)?null:t}getStartValue(){return this.params.value}},uz=class extends ah{constructor(){super(new az)}},cz=class extends Cr{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();const e=Is();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){this.gos.getActiveDomElement()===this.eInput&&e.preventDefault()}setMin(e){const t=e instanceof Date?mi(e??null,!1)??void 0:e;return this.min===t?this:(this.min=t,ws(this.eInput,"min",t),this)}setMax(e){const t=e instanceof Date?mi(e??null,!1)??void 0:e;return this.max===t?this:(this.max=t,ws(this.eInput,"max",t),this)}setStep(e){return this.step===e?this:(this.step=e,ws(this.eInput,"step",e),this)}getDate(){if(this.eInput.validity.valid)return Ht(this.getValue())??void 0}setDate(e,t){this.setValue(mi(e??null,!1),t)}},gT={selector:"AG-INPUT-DATE-FIELD",component:cz},dz=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[gT]}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){const e=this.eInput.getDate();return!A(e)&&!A(this.params.value)?this.params.value:e??null}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return mi(e,!1)}},hz=class extends ah{constructor(){super(new dz)}},pz=class{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[gT]}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){const e=this.formatDate(this.eInput.getDate());return!A(e)&&!A(this.params.value)?this.params.value:this.params.parseValue(e??"")}getStartValue(){return mi(this.parseDate(this.params.value??void 0)??null,!1)}parseDate(e){const t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):Ht(e)??void 0}formatDate(e){const t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):mi(e??null,!1)??void 0}},fz=class extends ah{wireBeans(e){this.dataTypeService=e.dataTypeService}constructor(){super(new pz(()=>this.dataTypeService))}},gz=class extends qo{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[Yv]),this.eCheckbox=z}init(e){this.params=e;const t=e.value??void 0;this.eCheckbox.setValue(t),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(this.eCheckbox,{fieldValueChanged:s=>this.setAriaLabel(s.selected)})}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.localeService.getLocaleTextFunc(),i=Bv(t,e),s=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${s} (${i})`)}},Pl=class{constructor(e){this.cellValueChanges=e}},Up=class extends Pl{constructor(e,t,i,s){super(e),this.initialRange=t,this.finalRange=i,this.ranges=s}},mz=10,PS=class{constructor(e){this.actionStack=[],this.maxStackSize=e||mz,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},vz=class extends T{constructor(){super(...arguments),this.beanName="undoRedoService",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},i=this.activeCellEdit!==null&&this.cellPositionUtils.equals(this.activeCellEdit,t),s=this.activeRowEdit!==null&&this.rowPositionUtils.sameRow(this.activeRowEdit,t);if(!(i||s||this.isPasting||this.isRangeInAction))return;const{rowPinned:r,rowIndex:o,column:l,oldValue:a,value:u}=e,c={rowPinned:r,rowIndex:o,columnId:l.getColId(),newValue:u,oldValue:a};this.cellValueChanges.push(c)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}wireBeans(e){this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.cellPositionUtils=e.cellPositionUtils,this.rowPositionUtils=e.rowPositionUtils,this.columnModel=e.columnModel,this.rangeService=e.rangeService}postConstruct(){if(!this.gos.get("undoRedoCellEditing"))return;const e=this.gos.get("undoRedoCellEditingLimit");if(e<=0)return;this.undoStack=new PS(e),this.redoStack=new PS(e),this.addListeners();const t=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:i=>{i.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:t,newColumnsLoaded:t,columnGroupOpened:t,columnRowGroupChanged:t,columnMoved:t,columnPinned:t,columnVisible:t,rowDragEnd:t}),this.ctrlsService.whenReady(i=>{this.gridBodyCtrl=i.gridBodyCtrl})}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(e){const t={type:"undoStarted",source:e};this.eventService.dispatchEvent(t);const i=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo"),s={type:"undoEnded",source:e,operationPerformed:i};this.eventService.dispatchEvent(s)}redo(e){const t={type:"redoStarted",source:e};this.eventService.dispatchEvent(t);const i=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo"),s={type:"redoEnded",source:e,operationPerformed:i};this.eventService.dispatchEvent(s)}undoRedo(e,t,i,s,n){if(!e)return!1;const r=e.pop();return!r||!r.cellValueChanges?!1:(this.processAction(r,o=>o[s],n),r instanceof Up?this.processRange(this.rangeService,r.ranges||[r[i]]):this.processCell(r.cellValueChanges),t.push(r),!0)}processAction(e,t,i){e.cellValueChanges.forEach(s=>{const{rowIndex:n,rowPinned:r,columnId:o}=s,l={rowIndex:n,rowPinned:r},a=this.rowPositionUtils.getRowNode(l);a.displayed&&a.setDataValue(o,t(s),i)})}processRange(e,t){let i;e.removeAllCellRanges(!0),t.forEach((s,n)=>{if(!s)return;const r=s.startRow,o=s.endRow;n===t.length-1&&(i={rowPinned:r.rowPinned,rowIndex:r.rowIndex,columnId:s.startColumn.getColId()},this.setLastFocusedCell(i));const l={rowStartIndex:r.rowIndex,rowStartPinned:r.rowPinned,rowEndIndex:o.rowIndex,rowEndPinned:o.rowPinned,columnStart:s.startColumn,columns:s.columns};e.addCellRange(l)})}processCell(e){const t=e[0],{rowIndex:i,rowPinned:s}=t,n={rowIndex:i,rowPinned:s},r=this.rowPositionUtils.getRowNode(n),o={rowPinned:t.rowPinned,rowIndex:r.rowIndex,columnId:t.columnId};this.setLastFocusedCell(o,this.rangeService)}setLastFocusedCell(e,t){const{rowIndex:i,columnId:s,rowPinned:n}=e,r=this.gridBodyCtrl.getScrollFeature(),o=this.columnModel.getCol(s);if(!o)return;r.ensureIndexVisible(i),r.ensureColumnVisible(o);const l={rowIndex:i,column:o,rowPinned:n};this.focusService.setFocusedCell({...l,forceBrowserFocus:!0}),t==null||t.setRangeToCell(l)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{const e=new Pl(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const i=new Pl(this.cellValueChanges);this.pushActionsToUndoStack(i)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{const e=new Pl(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{const t=new Up(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;this.rangeService&&this.gos.get("enableRangeSelection")?e=new Up(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):e=new Pl(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1}})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}};function Cz(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition()}function wz(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getHScrollPosition()}function mT(e,t,i="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(t,i),"ensureVisible")}function vT(e,t,i){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureIndexVisible(t,i),"ensureVisible")}function yz(e,t,i=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureNodeVisible(t,i),"ensureVisible")}function Sz(e){var t;(t=e.undoRedoService)==null||t.undo("api")}function Rz(e){var t;(t=e.undoRedoService)==null||t.redo("api")}function bz(e,t={}){return e.rowRenderer.getCellEditorInstances(t).map(Wl)}function Ez(e){return e.rowRenderer.getEditingCells()}function Pz(e,t=!1){e.rowRenderer.stopEditing(t)}function Fz(e,t){const i=e.columnModel.getCol(t.colKey);if(!i){M(`no column found for ${t.colKey}`);return}const s={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:i};t.rowPinned==null&&vT(e,t.rowIndex),mT(e,t.colKey);const r=e.navigationService.getCellByPosition(s);r&&(e.focusService.isCellFocused(s)||e.focusService.setFocusedCell(s),r.startRowOrCellEdit(t.key))}function Tz(e){var t;return((t=e.undoRedoService)==null?void 0:t.getCurrentUndoStackSize())??0}function xz(e){var t;return((t=e.undoRedoService)==null?void 0:t.getCurrentRedoStackSize())??0}var Iz=class extends T{constructor(){super(...arguments),this.beanName="editService"}wireBeans(e){this.navigationService=e.navigationService,this.userComponentFactory=e.userComponentFactory,this.valueService=e.valueService}startEditing(e,t=null,i=!1,s=null){const n=this.createCellEditorParams(e,t,i),r=e.getColumn().getColDef(),o=this.userComponentFactory.getCellEditorDetails(r,n),l=(o==null?void 0:o.popupFromSelector)!=null?o.popupFromSelector:!!r.cellEditorPopup,a=(o==null?void 0:o.popupPositionFromSelector)!=null?o.popupPositionFromSelector:r.cellEditorPopupPosition;e.setEditing(!0,o),e.getComp().setEditDetails(o,l,a,this.gos.get("reactiveCustomComponents"));const u=e.createEvent(s,"cellEditingStarted");this.eventService.dispatchEvent(u)}stopEditing(e,t){const i=e.getComp(),{newValue:s,newValueExists:n}=this.takeValueFromCellEditor(t,i),r=e.getRowNode(),o=e.getColumn(),l=r.getValueFromValueService(o);let a=!1;n&&(a=this.saveNewValue(e,l,s,r,o)),e.setEditing(!1,void 0),i.setEditDetails(),e.updateAndFormatValue(!1),e.refreshCell({forceRefresh:!0,suppressFlash:!0});const u={...e.createEvent(null,"cellEditingStopped"),oldValue:l,newValue:s,valueChanged:a};return this.eventService.dispatchEvent(u),a}handleColDefChanged(e){const t=e.getCellEditor();if(t!=null&&t.refresh){const{eventKey:i,cellStartedEdit:s}=e.getEditCompDetails().params,n=this.createCellEditorParams(e,i,s),r=e.getColumn().getColDef(),o=this.userComponentFactory.getCellEditorDetails(r,n);t.refresh(o.params)}}setFocusOutOnEditor(e){const t=e.getComp().getCellEditor();t&&t.focusOut&&t.focusOut()}setFocusInOnEditor(e){const t=e.getComp().getCellEditor();t&&t.focusIn?t.focusIn():e.focusCell(!0)}stopEditingAndFocus(e,t=!1,i=!1){e.stopRowOrCellEdit(),e.focusCell(!0),t||this.navigateAfterEdit(i,e.getCellPosition())}createPopupEditorWrapper(e){return new rz(e)}takeValueFromCellEditor(e,t){const i={newValueExists:!1};if(e)return i;const s=t.getCellEditor();return!s||s.isCancelAfterEnd&&s.isCancelAfterEnd()?i:{newValue:s.getValue(),newValueExists:!0}}saveNewValue(e,t,i,s,n){if(i===t)return!1;e.setSuppressRefreshCell(!0);const r=s.setDataValue(n,i,"edit");return e.setSuppressRefreshCell(!1),r}createCellEditorParams(e,t,i){const s=e.getColumn(),n=e.getRowNode();return this.gos.addGridCommonParams({value:n.getValueFromValueService(s),eventKey:t,column:s,colDef:s.getColDef(),rowIndex:e.getCellPosition().rowIndex,node:n,data:n.data,cellStartedEdit:i,onKeyDown:e.onKeyDown.bind(e),stopEditing:e.stopEditingAndFocus.bind(e),eGridCell:e.getGui(),parseValue:r=>this.valueService.parseValue(s,n,r,e.getValue()),formatValue:e.formatValue.bind(e)})}navigateAfterEdit(e,t){if(this.gos.get("enterNavigatesVerticallyAfterEdit")){const s=e?F.UP:F.DOWN;this.navigationService.navigateToNextCell(null,s,t,!1)}}},Dz=class extends T{constructor(){super(...arguments),this.beanName="rowEditService"}startEditing(e,t=null,i=null,s=null){e.getAllCellCtrls().reduce((r,o)=>{const l=o===i;return l?o.startEditing(t,l,s):o.startEditing(null,l,s),r?!0:o.isEditing()},!1)&&this.setEditing(e,!0)}stopEditing(e,t=!1){const i=e.getAllCellCtrls(),s=e.isEditing();e.setStoppingRowEdit(!0);let n=!1;for(const r of i){const o=r.stopEditing(t);s&&!t&&!n&&o&&(n=!0)}if(n){const r=e.createRowEvent("rowValueChanged");this.eventService.dispatchEvent(r)}s&&this.setEditing(e,!1),e.setStoppingRowEdit(!1)}setEditing(e,t){e.setEditingRow(t),e.forEachGui(void 0,s=>s.rowComp.addOrRemoveCssClass("ag-row-editing",t));const i=t?e.createRowEvent("rowEditingStarted"):e.createRowEvent("rowEditingStopped");this.eventService.dispatchEvent(i)}},wr={version:$,moduleName:"@ag-grid-community/edit-core",beans:[Iz]},kz={version:$,moduleName:"@ag-grid-community/edit-api",apiFunctions:{undoCellEditing:Sz,redoCellEditing:Rz,getCellEditorInstances:bz,getEditingCells:Ez,stopEditing:Pz,startEditingCell:Fz,getCurrentUndoSize:Tz,getCurrentRedoSize:xz},dependantModules:[wr]},Mz={version:$,moduleName:"@ag-grid-community/undo-redo-edit",beans:[vz],dependantModules:[wr]},Az={version:$,moduleName:"@ag-grid-community/full-row-edit",beans:[Dz],dependantModules:[wr]},CT={version:$,moduleName:"@ag-grid-community/default-editor",userComponents:[{name:"agCellEditor",classImp:fT}],dependantModules:[wr]},_z={version:$,moduleName:"@ag-grid-community/data-type-editors",userComponents:[{name:"agTextCellEditor",classImp:fT},{name:"agNumberCellEditor",classImp:uz},{name:"agDateCellEditor",classImp:hz},{name:"agDateStringCellEditor",classImp:fz},{name:"agCheckboxCellEditor",classImp:gz}],dependantModules:[CT]},Lz={version:$,moduleName:"@ag-grid-community/select-editor",userComponents:[{name:"agSelectCellEditor",classImp:oz}],dependantModules:[wr]},Oz={version:$,moduleName:"@ag-grid-community/large-text-editor",userComponents:[{name:"agLargeTextCellEditor",classImp:nz}],dependantModules:[wr]},Nz={version:$,moduleName:"@ag-grid-community/all-editors",dependantModules:[CT,_z,Lz,Oz]},Gz={version:$,moduleName:"@ag-grid-community/editing",dependantModules:[wr,Mz,Az,Nz,kz]},Hz=class extends T{constructor(){super(...arguments),this.beanName="autoWidthCalculator"}wireBeans(e){this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){const i=this.getHeaderCellForColumn(e);if(!i)return-1;const s=this.rowRenderer.getAllCellsForColumn(e);return t||s.push(i),this.addElementsToContainerAndGetWidth(s)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.addElementsToContainerAndGetWidth([t]):-1}addElementsToContainerAndGetWidth(e){const t=document.createElement("form");t.style.position="fixed";const i=this.centerRowContainerCtrl.getContainerElement();e.forEach(r=>this.cloneItemIntoDummy(r,t)),i.appendChild(t);const s=t.offsetWidth;i.removeChild(t);const n=this.getAutoSizePadding();return s+n}getAutoSizePadding(){return this.gos.get("autoSizePadding")}getHeaderCellForColumn(e){let t=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(i=>{const s=i.getHtmlElementForColumnHeader(e);s!=null&&(t=s)}),t}cloneItemIntoDummy(e,t){const i=e.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";const s=document.createElement("div"),n=s.classList;["ag-header-cell","ag-header-group-cell"].some(l=>i.classList.contains(l))?(n.add("ag-header","ag-header-row"),s.style.position="static"):n.add("ag-row");let o=e.parentElement;for(;o;){if(["ag-header-row","ag-row"].some(a=>o.classList.contains(a))){for(let a=0;a<o.classList.length;a++){const u=o.classList[a];u!="ag-row-position-absolute"&&n.add(u)}break}o=o.parentElement}s.appendChild(i),t.appendChild(s)}},Vz=class extends T{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.topContainerHeight=0,this.bottomContainerHeight=0,this.extraTopHeight=0,this.extraBottomHeight=0}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.isClientSide=this.rowModel.getType()==="clientSide",this.ctrlsService.whenReady(e=>{this.gridBodyCtrl=e.gridBodyCtrl})}getStickyTopRowCtrls(){return this.stickyTopRowCtrls}getStickyBottomRowCtrls(){return this.stickyBottomRowCtrls}setOffsetTop(e){if(this.extraTopHeight===e)return;this.extraTopHeight=e;const t={type:"stickyTopOffsetChanged",offset:e};this.eventService.dispatchEvent(t)}setOffsetBottom(e){this.extraBottomHeight!==e&&(this.extraBottomHeight=e)}resetOffsets(){this.setOffsetBottom(0),this.setOffsetTop(0)}getExtraTopHeight(){return this.extraTopHeight}getExtraBottomHeight(){return this.extraBottomHeight}getLastPixelOfGroup(e){return this.isClientSide?this.getClientSideLastPixelOfGroup(e):this.getServerSideLastPixelOfGroup(e)}getFirstPixelOfGroup(e){return e.footer?e.sibling.rowTop+e.sibling.rowHeight-1:e.hasChildren()?e.rowTop-1:0}getServerSideLastPixelOfGroup(e){var t,i;if(this.isClientSide)throw new Error("This func should only be called in server side row model.");if(e.isExpandable()||e.footer){if(e.master)return e.detailNode.rowTop+e.detailNode.rowHeight;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let n=(t=e.childStore)==null?void 0:t.getStoreBounds();return e.footer&&(n=(i=e.sibling.childStore)==null?void 0:i.getStoreBounds()),((n==null?void 0:n.heightPx)??0)+((n==null?void 0:n.topPx)??0)}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}getClientSideLastPixelOfGroup(e){if(!this.isClientSide)throw new Error("This func should only be called in client side row model.");if(e.isExpandable()||e.footer){if(e.footer&&e.rowIndex===0)return Number.MAX_SAFE_INTEGER;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let s=e.footer?e.sibling:e;for(;s.isExpandable()&&s.expanded;)if(s.master)s=s.detailNode;else if(s.childrenAfterSort){if(s.childrenAfterSort.length===0)break;s=se(s.childrenAfterSort)}return s.rowTop+s.rowHeight}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}updateStickyRows(e){const t=e==="top";let i=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(e,new Set,i);const s=t?this.rowRenderer.getFirstVisibleVerticalPixel()-this.extraTopHeight:this.rowRenderer.getLastVisibleVerticalPixel()-this.extraTopHeight,n=new Set,r=u=>{if(n.add(u),t){const c=this.getLastPixelOfGroup(u),d=s+i+u.rowHeight;c<d?u.stickyRowTop=i+(c-d):u.stickyRowTop=i}else{const c=this.getFirstPixelOfGroup(u),d=s-(i+u.rowHeight);c>d?u.stickyRowTop=i-(c-d):u.stickyRowTop=i}i=0,n.forEach(c=>{const d=c.stickyRowTop+c.rowHeight;i<d&&(i=d)})},o=this.areFooterRowsStickySuppressed(),l=this.gos.get("suppressGroupRowsSticky"),a=u=>u.displayed?u.footer?o===!0||o==="grand"&&u.level===-1||o==="group"&&u.level>-1?!1:!n.has(u):u.isExpandable()?l===!0?!1:!n.has(u)&&u.expanded:!1:!1;for(let u=0;u<100;u++){let c=s+i;t||(c=s-i);const d=this.rowModel.getRowIndexAtPixel(c),h=this.rowModel.getRow(d);if(h==null)break;const f=this.getStickyAncestors(h).find(w=>(t?w.rowIndex<d:w.rowIndex>d)&&a(w));if(f){r(f);continue}if((t?h.rowTop<c:h.rowTop+h.rowHeight>c)&&a(h)){r(h);continue}break}return t||n.forEach(u=>{u.stickyRowTop=i-(u.stickyRowTop+u.rowHeight)}),this.refreshNodesAndContainerHeight(e,n,i)}areFooterRowsStickySuppressed(){const e=this.gos.get("suppressStickyTotalRow");if(e===!0)return!0;const t=!!this.gos.get("groupIncludeFooter")||e==="group",i=!!this.gos.get("groupIncludeTotalFooter")||e==="grand";return t&&i?!0:i?"grand":t?"group":!1}canRowsBeSticky(){const e=this.gos.isGroupRowsSticky(),t=this.areFooterRowsStickySuppressed(),i=this.gos.get("suppressGroupRowsSticky");return e&&(!t||!i)}getStickyAncestors(e){const t=[];let i=e.footer?e.sibling:e.parent;for(;i;)i.sibling&&t.push(i.sibling),t.push(i),i=i.parent;return t.reverse()}checkStickyRows(){const e=this.updateStickyRows("top"),t=this.updateStickyRows("bottom");return e||t}destroyStickyCtrls(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(e){const t=new Set;if(this.stickyTopRowCtrls.some(i=>i.getRowNode()===e)){for(let i=0;i<this.stickyTopRowCtrls.length;i++){const s=this.stickyTopRowCtrls[i].getRowNode();s!==e&&t.add(s)}this.refreshNodesAndContainerHeight("top",t,this.topContainerHeight)&&this.checkStickyRows();return}for(let i=0;i<this.stickyBottomRowCtrls.length;i++){const s=this.stickyBottomRowCtrls[i].getRowNode();s!==e&&t.add(s)}this.refreshNodesAndContainerHeight("bottom",t,this.bottomContainerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(e,t,i){const s=e==="top",n=s?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,r={},o=[];for(let h=0;h<n.length;h++){const p=n[h].getRowNode();if(!t.has(p)){r[p.id]=n[h],p.sticky=!1;continue}o.push(n[h])}const l=new Set;for(let h=0;h<o.length;h++)l.add(o[h].getRowNode());const a=[];t.forEach(h=>{l.has(h)||(h.sticky=!0,a.push(this.createRowCon(h,!1,!1)))});let u=!!a.length||o.length!==n.length;s?this.topContainerHeight!==i&&(this.topContainerHeight=i,this.gridBodyCtrl.setStickyTopHeight(i),u=!0):this.bottomContainerHeight!==i&&(this.bottomContainerHeight=i,this.gridBodyCtrl.setStickyBottomHeight(i),u=!0),this.destroyRowCtrls(r,!1);const c=[...o,...a];c.sort((h,p)=>p.getRowNode().rowIndex-h.getRowNode().rowIndex),s||c.reverse(),c.forEach(h=>h.setRowTop(h.getRowNode().stickyRowTop));let d=0;return s?(t.forEach(h=>{h.rowIndex<this.pageBoundsService.getFirstRow()&&(d+=h.rowHeight)}),d>this.topContainerHeight&&(d=this.topContainerHeight),this.setOffsetTop(d)):(t.forEach(h=>{h.rowIndex>this.pageBoundsService.getLastRow()&&(d+=h.rowHeight)}),d>this.bottomContainerHeight&&(d=this.bottomContainerHeight),this.setOffsetBottom(d)),u?(s?this.stickyTopRowCtrls=c:this.stickyBottomRowCtrls=c,!0):!1}ensureRowHeightsValid(){let e=!1;const t=i=>{const s=i.getRowNode();if(s.rowHeightEstimated){const n=this.gos.getRowHeightForNode(s);s.setRowHeight(n.height),e=!0}};return this.stickyTopRowCtrls.forEach(t),this.stickyBottomRowCtrls.forEach(t),e}},Bz=class extends T{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{this.getAllCellCtrls().forEach(r=>r.onRangeSelectionChanged())},t=()=>{this.getAllCellCtrls().forEach(r=>r.updateRangeBordersIfRangeCount())},i=()=>{this.eventService.addEventListener("rangeSelectionChanged",e),this.eventService.addEventListener("columnMoved",t),this.eventService.addEventListener("columnPinned",t),this.eventService.addEventListener("columnVisible",t)},s=()=>{this.eventService.removeEventListener("rangeSelectionChanged",e),this.eventService.removeEventListener("columnMoved",t),this.eventService.removeEventListener("columnPinned",t),this.eventService.removeEventListener("columnVisible",t)};this.addDestroyFunc(()=>s()),this.addManagedPropertyListener("enableRangeSelection",r=>{r.currentValue?i():s()}),this.gos.get("enableRangeSelection")&&i()}}wireBeans(e){this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusService=e.focusService,this.beans=e,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){if(this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this)}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListeners(["suppressCellFocus","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.gos.isGroupRowsSticky()){const e=this.rowModel.getType();(e==="clientSide"||e==="serverSide")&&(this.stickyRowFeature=this.createManagedBean(new Vz(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this))))}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gos.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new Wz(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyTopRowCtrls():[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyBottomRowCtrls():[]}updateAllRowCtrls(){const e=Pg(this.rowCtrlsByRowIndex),t=Pg(this.zombieRowCtrls),i=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];t.length>0||i.length>0?this.allRowCtrls=[...e,...t,...i]:this.allRowCtrls=e}onCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(e))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>{this.onCellFocusChanged(e)},cellFocusCleared:()=>this.onCellFocusChanged(),flashCells:e=>{this.getAllCellCtrls().forEach(t=>t.onFlashCells(e))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onColumnHover())},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onDisplayedColumnsChanged())},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach(e=>e.onLeftChanged())}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.columnModel.getCols().forEach(t=>{const i=a=>{this.getAllCellCtrls().forEach(u=>{u.getColumn()===t&&a(u)})},s=()=>{i(a=>a.onLeftChanged())},n=()=>{i(a=>a.onWidthChanged())},r=()=>{i(a=>a.onFirstRightPinnedChanged())},o=()=>{i(a=>a.onLastLeftPinnedChanged())},l=()=>{i(a=>a.onColDefChanged())};t.addEventListener("leftChanged",s),t.addEventListener("widthChanged",n),t.addEventListener("firstRightPinnedChanged",r),t.addEventListener("lastLeftPinnedChanged",o),t.addEventListener("colDefChanged",l),this.destroyFuncsForColumnListeners.push(()=>{t.removeEventListener("leftChanged",s),t.removeEventListener("widthChanged",n),t.removeEventListener("firstRightPinnedChanged",r),t.removeEventListener("lastLeftPinnedChanged",o),t.removeEventListener("colDefChanged",l)})})}onDomLayoutChanged(){const e=this.gos.isDomLayout("print"),t=e||this.gos.get("embedFullWidthRows"),i=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsForColumn(e){const t=[];return this.getAllRowCtrls().forEach(i=>{const s=i.getCellElement(e);s&&t.push(s)}),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowNodes()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowNodes())}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(e,t){const i=Object.fromEntries(t.map(n=>[n.id,n])),s=Object.fromEntries(e.map(n=>[n.getRowNode().id,n]));for(let n=0;n<t.length;n++){const r=t[n],o=e[n];o&&i[o.getRowNode().id]===void 0&&(o.destroyFirstPass(),o.destroySecondPass()),r.id in s?(e[n]=s[r.id],delete s[r.id]):e[n]=new Qn(r,this.beans,!1,!1,this.printLayout)}e.length=t.length}onPinnedRowDataChanged(){const e={recycleRows:!0};this.redrawAfterModelUpdate(e)}redrawRow(e,t=!1){var i;if(e.sticky)this.stickyRowFeature.refreshStickyNode(e);else if((i=this.cachedRowCtrls)!=null&&i.has(e)){this.cachedRowCtrls.removeRow(e);return}else{const s=n=>{const r=n[e.rowIndex];r&&r.getRowNode()===e&&(r.destroyFirstPass(),r.destroySecondPass(),n[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":s(this.topRowCtrls);break;case"bottom":s(this.bottomRowCtrls);break;default:s(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(e!=null){e==null||e.forEach(i=>this.redrawRow(i,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){const t=e!=null&&e.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(t==null)return null;const i=this.gos.getActiveDomElement(),s=this.gos.getDomData(i,Yn.DOM_DATA_KEY_CELL_CTRL),n=this.gos.getDomData(i,Qn.DOM_DATA_KEY_ROW_CTRL);return s||n?t:null}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();const t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);const i=!e.domLayoutChanged&&!!e.recycleRows,s=e.animate&&this.gos.isAnimateRows(),n=i?this.getRowsToRecycle():null;if(i||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature){this.stickyRowFeature.checkStickyRows();const r=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();r&&this.updateContainerHeights(r)}this.recycleRows(n,s),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){var s;const t=e.newData||e.newPage,i=this.gos.get("suppressScrollOnNewData");t&&!i&&(this.gridBodyCtrl.getScrollFeature().scrollToTop(),(s=this.stickyRowFeature)==null||s.resetOffsets())}updateContainerHeights(e=0){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}let t=this.pageBoundsService.getCurrentPageHeight();t===0&&(t=1),this.rowContainerHeightService.setModelHeight(t+e)}getLockOnRefresh(){var e,t,i,s;if(this.refreshInProgress){const n=((t=(e=this.frameworkOverrides).getLockOnRefreshError)==null?void 0:t.call(e))??"";throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace."+n)}this.refreshInProgress=!0,(s=(i=this.frameworkOverrides).getLockOnRefresh)==null||s.call(i)}releaseLockOnRefresh(){var e,t;this.refreshInProgress=!1,(t=(e=this.frameworkOverrides).releaseLockOnRefresh)==null||t.call(e)}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&setTimeout(()=>{this.focusService.setRestoreFocusedCell(e),this.onCellFocusChanged(this.gos.addGridCommonParams({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))})}stopEditing(e=!1){this.getAllRowCtrls().forEach(t=>{t.stopEditing(e)})}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),i=t.length;for(let s=0;s<i;s++){const n=t[s].getAllCellCtrls(),r=n.length;for(let o=0;o<r;o++)e.push(n[o])}return e}getAllRowCtrls(){const e=this.stickyRowFeature&&this.stickyRowFeature.getStickyTopRowCtrls()||[],t=this.stickyRowFeature&&this.stickyRowFeature.getStickyBottomRowCtrls()||[],i=[...this.topRowCtrls,...this.bottomRowCtrls,...e,...t];for(const s in this.rowCtrlsByRowIndex)i.push(this.rowCtrlsByRowIndex[s]);return i}addRenderedRowListener(e,t,i){const s=this.rowCtrlsByRowIndex[t];s&&s.addEventListener(e,i)}flashCells(e={}){this.getCellCtrls(e.rowNodes,e.columns).forEach(t=>t.flashCell(e))}refreshCells(e={}){const t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};for(const i of this.getCellCtrls(e.rowNodes,e.columns))i.refreshOrDestroyCell(t);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=null;this.stickyRowFeature&&CS()&&(t=this.getCellToRestoreFocusToAfterRefresh()||null);for(const i of this.getRowCtrls(e)){if(!i.isFullWidth())continue;i.refreshFullWidth()||this.redrawRow(i.getRowNode(),!0)}this.dispatchDisplayedRowsChanged(!1),t&&this.restoreFocusedCell(t)}getCellRendererInstances(e){var n;const t=this.getCellCtrls(e.rowNodes,e.columns).map(r=>r.getCellRenderer()).filter(r=>r!=null);if((n=e.columns)!=null&&n.length)return t;const i=[],s=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach(r=>{if(s&&!this.isRowInMap(r.getRowNode(),s)||!r.isFullWidth())return;const o=r.getFullWidthCellRenderers();for(let l=0;l<o.length;l++){const a=o[l];a!=null&&i.push(a)}}),[...i,...t]}getCellEditorInstances(e){const t=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(i=>{const s=i.getCellEditor();s&&t.push(s)}),t}getEditingCells(){const e=[];return this.getAllCellCtrls().forEach(t=>{if(t.isEditing()){const i=t.getCellPosition();e.push(i)}}),e}mapRowNodes(e){if(!e)return;const t={top:{},bottom:{},normal:{}};return e.forEach(i=>{const s=i.id;switch(i.rowPinned){case"top":t.top[s]=i;break;case"bottom":t.bottom[s]=i;break;default:t.normal[s]=i;break}}),t}isRowInMap(e,t){const i=e.id;switch(e.rowPinned){case"top":return t.top[i]!=null;case"bottom":return t.bottom[i]!=null;default:return t.normal[i]!=null}}getRowCtrls(e){const t=this.mapRowNodes(e),i=this.getAllRowCtrls();return!e||!t?i:i.filter(s=>{const n=s.getRowNode();return this.isRowInMap(n,t)})}getCellCtrls(e,t){let i;A(t)&&(i={},t.forEach(n=>{const r=this.columnModel.getCol(n);A(r)&&(i[r.getId()]=!0)}));const s=[];return this.getRowCtrls(e).forEach(n=>{n.getAllCellCtrls().forEach(r=>{const o=r.getColumn().getId();i&&!i[o]||s.push(r)})}),s}destroy(){this.removeAllRowComps(),super.destroy()}removeAllRowComps(){const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e),this.stickyRowFeature&&this.stickyRowFeature.destroyStickyCtrls()}getRowsToRecycle(){const e=[];Ii(this.rowCtrlsByRowIndex,(i,s)=>{s.getRowNode().id==null&&e.push(i)}),this.removeRowCtrls(e);const t={};return Ii(this.rowCtrlsByRowIndex,(i,s)=>{const n=s.getRowNode();t[n.id]=s}),this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){e.forEach(i=>{const s=this.rowCtrlsByRowIndex[i];s&&(s.destroyFirstPass(t),s.destroySecondPass()),delete this.rowCtrlsByRowIndex[i]})}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){const{afterScroll:t}=e;let i;this.stickyRowFeature&&CS()&&(i=this.getCellToRestoreFocusToAfterRefresh()||void 0);const s=this.firstRenderedRow,n=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let r=!1;if(this.stickyRowFeature){r=this.stickyRowFeature.checkStickyRows();const l=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();l&&this.updateContainerHeights(l)}const o=this.firstRenderedRow!==s||this.lastRenderedRow!==n;if(!(t&&!r&&!o)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!r),i!=null)){const l=this.getCellToRestoreFocusToAfterRefresh();i!=null&&l==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(i))}}removeRowCompsNotToDraw(e,t){const i={};e.forEach(r=>i[r]=!0);const n=Object.keys(this.rowCtrlsByRowIndex).filter(r=>!i[r]);this.removeRowCtrls(n,t)}calculateIndexesToDraw(e){const t=KV(this.firstRenderedRow,this.lastRenderedRow),i=(n,r)=>{const o=r.getRowNode().rowIndex;o!=null&&(o<this.firstRenderedRow||o>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(r)&&t.push(o)};Ii(this.rowCtrlsByRowIndex,i),Ii(e,i),t.sort((n,r)=>n-r);const s=[];for(let n=0;n<t.length;n++){const r=t[n],o=this.rowModel.getRow(r);o&&!o.sticky&&s.push(r)}return s}recycleRows(e,t=!1,i=!1){const s=this.calculateIndexesToDraw(e);(this.printLayout||i)&&(t=!1),this.removeRowCompsNotToDraw(s,!t),s.forEach(n=>{this.createOrUpdateRowCtrl(n,e,t,i)}),e&&(i&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){const t={type:"displayedRowsChanged",afterScroll:e};this.eventService.dispatchEvent(t)}onDisplayedColumnsChanged(){const e=this.visibleColsService.isPinningLeft(),t=this.visibleColsService.isPinningRight();(this.pinningLeft!==e||t!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=t,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];this.getFullWidthRowCtrls().forEach(t=>{const i=t.getRowNode().rowIndex;e.push(i.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=this.mapRowNodes(e);return this.getAllRowCtrls().filter(i=>{if(!i.isFullWidth())return!1;const s=i.getRowNode();return!(t!=null&&!this.isRowInMap(s,t))})}createOrUpdateRowCtrl(e,t,i,s){let n,r=this.rowCtrlsByRowIndex[e];if(r||(n=this.rowModel.getRow(e),A(n)&&A(t)&&t[n.id]&&n.alreadyRendered&&(r=t[n.id],t[n.id]=null)),!r)if(n||(n=this.rowModel.getRow(e)),A(n))r=this.createRowCon(n,i,s);else return;return n&&(n.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=r,r}destroyRowCtrls(e,t){const i=[];Ii(e,(s,n)=>{if(n){if(this.cachedRowCtrls&&n.isCacheable()){this.cachedRowCtrls.addRow(n);return}n.destroyFirstPass(!t),t?(this.zombieRowCtrls[n.getInstanceId()]=n,i.push(()=>{n.destroySecondPass(),delete this.zombieRowCtrls[n.getInstanceId()]})):n.destroySecondPass()}}),t&&(i.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),OG(i))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){const e=this.getRowBuffer(),t=this.gos.getRowHeightAsNumber();return e*t}workOutFirstAndLastRowsToRender(){this.rowContainerHeightService.updateOffset();let e,t;if(!this.rowModel.isRowsToRender())e=0,t=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),e=this.pageBoundsService.getFirstRow(),t=this.pageBoundsService.getLastRow();else{const l=this.getRowBufferInPixels(),a=this.ctrlsService.getGridBodyCtrl(),u=this.gos.get("suppressRowVirtualisation");let c=!1,d,h;do{const v=this.pageBoundsService.getPixelOffset(),{pageFirstPixel:g,pageLastPixel:y}=this.pageBoundsService.getCurrentPagePixelRange(),S=this.rowContainerHeightService.getDivStretchOffset(),b=a.getScrollFeature().getVScrollPosition(),R=b.top,E=b.bottom;u?(d=g+S,h=y+S):(d=Math.max(R+v-l,g)+S,h=Math.min(E+v+l,y)+S),this.firstVisibleVPixel=Math.max(R+v,g)+S,this.lastVisibleVPixel=Math.min(E+v,y)+S,c=this.ensureAllRowsInRangeHaveHeightsCalculated(d,h)}while(c);let p=this.rowModel.getRowIndexAtPixel(d),f=this.rowModel.getRowIndexAtPixel(h);const m=this.pageBoundsService.getFirstRow(),w=this.pageBoundsService.getLastRow();p<m&&(p=m),f>w&&(f=w),e=p,t=f}const i=this.gos.isDomLayout("normal"),s=this.gos.get("suppressMaxRenderedRowRestriction"),n=Math.max(this.getRowBuffer(),500);i&&!s&&t-e>n&&(t=e+n);const r=e!==this.firstRenderedRow,o=t!==this.lastRenderedRow;if(r||o){this.firstRenderedRow=e,this.lastRenderedRow=t;const l={type:"viewportChanged",firstRow:e,lastRow:t};this.eventService.dispatchEvent(l)}}dispatchFirstDataRenderedEvent(){if(this.dataFirstRenderedFired)return;this.dataFirstRenderedFired=!0;const e={type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent(e)})}ensureAllRowsInRangeHaveHeightsCalculated(e,t){var r,o;const i=(r=this.pinnedRowModel)==null?void 0:r.ensureRowHeightsValid(),s=(o=this.stickyRowFeature)==null?void 0:o.ensureRowHeightsValid(),n=this.rowModel.ensureRowHeightsValid(e,t,this.pageBoundsService.getFirstRow(),this.pageBoundsService.getLastRow());return(n||s)&&this.eventService.dispatchEvent({type:"recalculateRowBounds"}),s||n||i?(this.updateContainerHeights(),!0):!1}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getLastVisibleVerticalPixel(){return this.lastVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(e){const s=e.getRowNode(),n=this.focusService.isRowNodeFocused(s),r=e.isEditing(),o=s.detail;return n||r||o?!!this.isRowPresent(s):!1}isRowPresent(e){return this.rowModel.isRowPresent(e)?this.paginationService?this.paginationService.isRowPresent(e):!0:!1}createRowCon(e,t,i){const s=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(s)return s;const n=this.gos.get("suppressAnimationFrame"),r=i&&!n&&!this.printLayout;return new Qn(e,this.beans,t,r,this.printLayout)}getRenderedNodes(){const e=this.rowCtrlsByRowIndex;return Object.values(e).map(t=>t.getRowNode())}getRowByPosition(e){let t;const{rowIndex:i}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[i];break;case"bottom":t=this.bottomRowCtrls[i];break;default:t=this.rowCtrlsByRowIndex[i],t||(t=this.getStickyTopRowCtrls().find(s=>s.getRowNode().rowIndex===i)||null,t||(t=this.getStickyBottomRowCtrls().find(s=>s.getRowNode().rowIndex===i)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;const s=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!s}},Wz=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.getRowNode().id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e==null||e.id==null)return null;const t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.getRowNode()!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){const t=e.id,i=this.entriesMap[t];delete this.entriesMap[t],xt(this.entriesList,i)}removeFromCache(e){const t=e.getRowNode().id;delete this.entriesMap[t],xt(this.entriesList,e)}getEntries(){return this.entriesList}},zz=class extends T{constructor(){super(...arguments),this.beanName="pinnedRowModel",this.nextId=0}wireBeans(e){this.beans=e}postConstruct(){this.setPinnedTopRowData(),this.setPinnedBottomRowData(),this.addManagedPropertyListener("pinnedTopRowData",()=>this.setPinnedTopRowData()),this.addManagedPropertyListener("pinnedBottomRowData",()=>this.setPinnedBottomRowData()),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}isEmpty(e){const t=e==="top"?this.pinnedTopRows:this.pinnedBottomRows;return lt(t)}isRowsToRender(e){return!this.isEmpty(e)}getRowAtPixel(e,t){const i=t==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(lt(i))return 0;for(let s=0;s<i.length;s++){const n=i[s];if(n.rowTop+n.rowHeight-1>=e)return s}return i.length-1}onGridStylesChanges(e){if(e.rowHeightChanged){const t=i=>{i.setRowHeight(i.rowHeight,!0)};this.pinnedBottomRows.forEach(t),this.pinnedTopRows.forEach(t)}}ensureRowHeightsValid(){var n,r;let e=!1,t=0;const i=o=>{if(o.rowHeightEstimated){const l=this.gos.getRowHeightForNode(o);o.setRowTop(t),o.setRowHeight(l.height),t+=l.height,e=!0}};(n=this.pinnedBottomRows)==null||n.forEach(i),t=0,(r=this.pinnedTopRows)==null||r.forEach(i);const s={type:"pinnedHeightChanged"};return this.eventService.dispatchEvent(s),e}setPinnedTopRowData(){const e=this.gos.get("pinnedTopRowData");this.pinnedTopRows=this.createNodesFromData(e,!0);const t={type:"pinnedRowDataChanged"};this.eventService.dispatchEvent(t)}setPinnedBottomRowData(){const e=this.gos.get("pinnedBottomRowData");this.pinnedBottomRows=this.createNodesFromData(e,!1);const t={type:"pinnedRowDataChanged"};this.eventService.dispatchEvent(t)}createNodesFromData(e,t){const i=[];if(e){const s=this.gos.getRowIdCallback(),n=t?ys.ID_PREFIX_TOP_PINNED:ys.ID_PREFIX_BOTTOM_PINNED;let r=0;const o=t?"top":"bottom";e.forEach((l,a)=>{const u=new ys(this.beans);u.data=l,u.id=(s==null?void 0:s({data:l,level:0,rowPinned:o}))??n+this.nextId++,u.rowPinned=o,u.setRowTop(r),u.setRowHeight(this.gos.getRowHeightForNode(u).height),u.setRowIndex(a),r+=u.rowHeight,i.push(u)})}return i}getPinnedTopRowNodes(){return this.pinnedTopRows}getPinnedBottomRowNodes(){return this.pinnedBottomRows}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedTopRowCount(){return this.pinnedTopRows?this.pinnedTopRows.length:0}getPinnedBottomRowCount(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0}getPinnedTopRow(e){return this.pinnedTopRows[e]}getPinnedBottomRow(e){return this.pinnedBottomRows[e]}forEachPinnedTopRow(e){lt(this.pinnedTopRows)||this.pinnedTopRows.forEach(e)}forEachPinnedBottomRow(e){lt(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(e)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getTotalHeight(e){if(!e||e.length===0)return 0;const t=se(e);return t.rowTop+t.rowHeight}},Uz=class extends T{constructor(e){super(),this.state="needsLoading",this.version=0,this.id=e}getId(){return this.id}load(){this.state="loading",this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}getState(){return this.state}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed",this.processServerFail()),this.dispatchLoadCompleted(!1)}success(e,t){this.successCommon(e,t)}pageLoaded(e,t,i){this.successCommon(e,{rowData:t,rowCount:i})}isRequestMostRecentAndLive(e){const t=e===this.version,i=this.isAlive();return t&&i}successCommon(e,t){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}dispatchLoadCompleted(e=!0){const t={type:"loadComplete",success:e,block:this};this.dispatchLocalEvent(t)}},jz=class extends T{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=It(this.performCheckBlocksToLoad.bind(this),e))}getMaxConcurrentDatasourceRequests(){const e=this.gos.get("maxConcurrentDatasourceRequests");if(e==null)return 2;if(!(e<=0))return e}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){xt(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchLocalEvent({type:"blockLoaded"}),this.activeBlockLoadsCount==0&&this.dispatchLocalEvent({type:"blockLoaderFinished"})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.gos.get("debug")&&Mi("RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}const e=this.getAvailableLoadingCount(),t=this.blocks.filter(i=>i.getState()==="needsLoading").slice(0,e);this.registerLoads(t.length),t.forEach(i=>i.load()),this.printCacheStatus()}getBlockState(){if(this.gos.isRowModelType("serverSide"))return this.rowModel.getBlockStates();const e={};return this.blocks.forEach(t=>{const{id:i,state:s}=t.getBlockStateJson();e[i]=s}),e}printCacheStatus(){this.gos.get("debug")&&Mi(`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(e){this.activeBlockLoadsCount+=e}getAvailableLoadingCount(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}},$z={version:$,moduleName:"@ag-grid-community/row-node-block",beans:[jz]},Kz=class{constructor(){this.root=null,this.end=null,this.cachedRange=[]}init(e){this.rowModel=e}reset(){this.root=null,this.end=null,this.cachedRange.length=0}setRoot(e){this.root=e,this.end=null,this.cachedRange.length=0}setEndRange(e){this.end=e,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){const e=this.getRoot(),t=this.getEnd();if(e==null||t==null)return this.cachedRange;this.cachedRange=this.rowModel.getNodesInRangeForSelection(e,t)}return this.cachedRange}isInRange(e){return this.root===null?!1:this.getRange().some(t=>t.id===e.id)}getRoot(){var e;return this.root&&((e=this.root)==null?void 0:e.key)===null&&(this.root=this.rowModel.getRowNode(this.root.id)??null),this.root}getEnd(){var e;return this.end&&((e=this.end)==null?void 0:e.key)===null&&(this.end=this.rowModel.getRowNode(this.end.id)??null),this.end}truncate(e){const t=this.getRange();if(t.length===0)return{keep:[],discard:[]};const i=t[0].id===this.root.id,s=t.findIndex(n=>n.id===e.id);if(s>-1){const n=t.slice(0,s),r=t.slice(s+1);return this.setEndRange(e),i?{keep:n,discard:r}:{keep:r,discard:n}}else return{keep:t,discard:[]}}extend(e,t=!1){const i=this.getRoot();if(i==null){const n=this.getRange().slice();return t&&e.depthFirstSearch(r=>!r.group&&n.push(r)),n.push(e),this.setRoot(e),{keep:n,discard:[]}}if(this.rowModel.getNodesInRangeForSelection(i,e).find(n=>{var r;return n.id===((r=this.end)==null?void 0:r.id)}))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{const n=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:n}}}},qz=class extends T{constructor(){super(...arguments),this.beanName="stylingService"}wireBeans(e){this.expressionService=e.expressionService}processAllCellClasses(e,t,i,s){this.processClassRules(void 0,e.cellClassRules,t,i,s),this.processStaticCellClasses(e,t,i)}processClassRules(e,t,i,s,n){if(t==null&&e==null)return;const r={},o={},l=(a,u)=>{a.split(" ").forEach(c=>{c.trim()!=""&&u(c)})};if(t){const a=Object.keys(t);for(let u=0;u<a.length;u++){const c=a[u],d=t[c];let h;typeof d=="string"?h=this.expressionService.evaluate(d,i):typeof d=="function"&&(h=d(i)),l(c,p=>{h?r[p]=!0:o[p]=!0})}}e&&n&&Object.keys(e).forEach(a=>l(a,u=>{r[u]||(o[u]=!0)})),n&&Object.keys(o).forEach(n),Object.keys(r).forEach(s)}getStaticCellClasses(e,t){const{cellClass:i}=e;if(!i)return[];let s;return typeof i=="function"?s=i(t):s=i,typeof s=="string"&&(s=[s]),s||[]}processStaticCellClasses(e,t,i){this.getStaticCellClasses(e,t).forEach(n=>{i(n)})}},rc=(e=>(e.TAB_GUARD="ag-tab-guard",e.TAB_GUARD_TOP="ag-tab-guard-top",e.TAB_GUARD_BOTTOM="ag-tab-guard-bottom",e))(rc||{}),wT=class extends T{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:t,eTopGuard:i,eBottomGuard:s,focusTrapActive:n,forceFocusOutWhenTabGuardsAreEmpty:r,isFocusableContainer:o,focusInnerElement:l,onFocusIn:a,onFocusOut:u,shouldStopEventPropagation:c,onTabKeyDown:d,handleKeyDown:h,eFocusableElement:p}=e;this.comp=t,this.eTopGuard=i,this.eBottomGuard=s,this.providedFocusInnerElement=l,this.eFocusableElement=p,this.focusTrapActive=!!n,this.forceFocusOutWhenTabGuardsAreEmpty=!!r,this.isFocusableContainer=!!o,this.providedFocusIn=a,this.providedFocusOut=u,this.providedShouldStopEventPropagation=c,this.providedOnTabKeyDown=d,this.providedHandleKeyDown=h}wireBeans(e){this.focusService=e.focusService}postConstruct(){this.createManagedBean(new vr(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)}))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t)}findNextElementOutsideAndFocus(e){const t=this.gos.getDocument(),i=this.focusService.findFocusableElements(t.body,null,!0),s=i.indexOf(e?this.eTopGuard:this.eBottomGuard);if(s===-1)return;let n,r;e?(n=0,r=s):(n=s+1,r=i.length);const o=i.slice(n,r),l=this.gos.get("tabIndex");o.sort((a,u)=>{const c=parseInt(a.getAttribute("tabindex")||"0"),d=parseInt(u.getAttribute("tabindex")||"0");return d===l?1:c===l?-1:c===0?1:d===0?-1:c-d}),o[e?o.length-1:0].focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const i=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),i&&(i.focus(),e.preventDefault())}focusInnerElement(e=!1){const t=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length&&t[e?t.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},Yz=class extends T{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:t,eBottomGuard:i,eFocusableElement:s}=this,n=[t,i],r={setTabIndex:m=>{n.forEach(w=>m!=null?w.setAttribute("tabindex",m):w.removeAttribute("tabindex"))}};this.addTabGuards(t,i);const{focusTrapActive:o=!1,onFocusIn:l,onFocusOut:a,focusInnerElement:u,handleKeyDown:c,onTabKeyDown:d,shouldStopEventPropagation:h,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:f}=e;this.tabGuardCtrl=this.createManagedBean(new wT({comp:r,focusTrapActive:o,eTopGuard:t,eBottomGuard:i,eFocusableElement:s,onFocusIn:l,onFocusOut:a,focusInnerElement:u,handleKeyDown:c,onTabKeyDown:d,shouldStopEventPropagation:h,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:f}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const t=this.gos.getDocument().createElement("div"),i=e==="top"?"ag-tab-guard-top":"ag-tab-guard-bottom";return t.classList.add("ag-tab-guard",i),Hi(t,"presentation"),t}addTabGuards(e,t){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];si(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,i){$v(t)||(t=t.getGui());const{eBottomGuard:s}=this;s?s.insertAdjacentElement("beforebegin",t):e(t,i)}},Qz=class extends be{initialiseTabGuard(t){this.tabGuardFeature=this.createManagedBean(new Yz(this)),this.tabGuardFeature.initialiseTabGuard(t)}forceFocusOutOfContainer(t=!1){this.tabGuardFeature.forceFocusOutOfContainer(t)}appendChild(t,i){this.tabGuardFeature.appendChild(super.appendChild.bind(this),t,i)}},Jz=0,Xz=200,Zz=class extends T{constructor(){super(...arguments),this.beanName="popupService",this.popupList=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.resizeObserverService=e.resizeObserverService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridCtrl=e.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){const e=this.gos.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:i}=e,s=this.getPopupIndex(i);if(s!==-1){const p=this.popupList[s];p.alignedToElement=t}const n=t.getBoundingClientRect(),r=this.getParentRect(),o=this.keepXYWithinBounds(i,n.top-r.top,0),l=i.clientWidth>0?i.clientWidth:200;i.style.minWidth=`${l}px`;const u=r.right-r.left-l;let c;this.gos.get("enableRtl")?(c=h(),c<0&&(c=d(),this.setAlignedStyles(i,"left")),c>u&&(c=0,this.setAlignedStyles(i,"right"))):(c=d(),c>u&&(c=h(),this.setAlignedStyles(i,"right")),c<0&&(c=0,this.setAlignedStyles(i,"left"))),i.style.left=`${c}px`,i.style.top=`${o}px`;function d(){return n.right-r.left-2}function h(){return n.left-r.left-l}}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:i,nudgeY:s,skipObserver:n}=e;this.positionPopup({ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:!0,skipObserver:n,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:n,eventSource:r,alignSide:o="left",position:l="over",column:a,rowNode:u,type:c}=e,d=r.getBoundingClientRect(),h=this.getParentRect(),p=this.getPopupIndex(t);if(p!==-1){const m=this.popupList[p];m.alignedToElement=r}const f=()=>{let m=d.left-h.left;o==="right"&&(m-=t.offsetWidth-d.width);let w;return l==="over"?(w=d.top-h.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,d,h,e.nudgeY||0)==="under"?w=d.top-h.top+d.height:w=d.top-t.offsetHeight-(s||0)*2-h.top),{x:m,y:w}};this.positionPopup({ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:n,updatePosition:f,postProcessCallback:()=>this.callPostProcessPopup(c,t,r,null,a,u)})}shouldRenderUnderOrAbove(e,t,i,s){const n=i.bottom-t.bottom,r=t.top-i.top,o=e.offsetHeight+s;return n>o?"under":r>o||r>n?"above":"under"}setAlignedStyles(e,t){const i=this.getPopupIndex(e);if(i===-1)return;const s=this.popupList[i],{alignedToElement:n}=s;!n||(["right","left","over","above","under"].forEach(o=>{n.classList.remove(`ag-has-popup-positioned-${o}`),e.classList.remove(`ag-popup-positioned-${o}`)}),!t)||(n.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}callPostProcessPopup(e,t,i,s,n,r){const o=this.gos.getCallback("postProcessPopup");o&&o({column:n,rowNode:r,ePopup:t,type:e,eventSource:i,mouseEvent:s})}positionPopup(e){const{ePopup:t,keepWithinBounds:i,nudgeX:s,nudgeY:n,skipObserver:r,updatePosition:o}=e,l={width:0,height:0},a=(u=!1)=>{let{x:c,y:d}=o();u&&t.clientWidth===l.width&&t.clientHeight===l.height||(l.width=t.clientWidth,l.height=t.clientHeight,s&&(c+=s),n&&(d+=n),i&&(c=this.keepXYWithinBounds(t,c,1),d=this.keepXYWithinBounds(t,d,0)),t.style.left=`${c}px`,t.style.top=`${d}px`,e.postProcessCallback&&e.postProcessCallback())};if(a(),!r){const u=this.resizeObserverService.observeResize(t,()=>a(!0));setTimeout(()=>u(),Xz)}}getActivePopups(){return this.popupList.map(e=>e.element)}getPopupList(){return this.popupList}getParentRect(){const e=this.gos.getDocument();let t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),CF(t)}keepXYWithinBounds(e,t,i){const s=i===0,n=s?"clientHeight":"clientWidth",r=s?"top":"left",o=s?"height":"width",l=s?"scrollTop":"scrollLeft",a=this.gos.getDocument(),u=a.documentElement,c=this.getPopupParent(),d=e.getBoundingClientRect(),h=c.getBoundingClientRect(),p=a.documentElement.getBoundingClientRect(),f=c===a.body,m=Math.ceil(d[o]);let v=f?(s?vF:gd)(u)+u[l]:c[n];f&&(v-=Math.abs(p[r]-h[r]));const g=v-m;return Math.min(Math.max(t,0),Math.abs(g))}addPopup(e){const t=this.gos.getDocument(),{eChild:i,ariaLabel:s,alwaysOnTop:n,positionCallback:r,anchorToElement:o}=e;if(!t)return M("could not find the document, document is empty"),{hideFunc:()=>{}};const l=this.getPopupIndex(i);if(l!==-1)return{hideFunc:this.popupList[l].hideFunc};this.initialisePopupPosition(i);const a=this.createPopupWrapper(i,s,!!n),u=this.addEventListenersToPopup({...e,wrapperEl:a});return r&&r(),this.addPopupToPopupList(i,a,u,o),{hideFunc:u}}initialisePopupPosition(e){const i=this.getPopupParent().getBoundingClientRect();A(e.style.top)||(e.style.top=`${i.top*-1}px`),A(e.style.left)||(e.style.left=`${i.left*-1}px`)}createPopupWrapper(e,t,i){const s=this.getPopupParent(),n=document.createElement("div");return this.environment.applyThemeClasses(n),n.classList.add("ag-popup"),e.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||Hi(e,"dialog"),Io(e,t),n.appendChild(e),s.appendChild(n),i?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),n}handleThemeChange(e){if(e.themeChanged)for(const t of this.popupList)this.environment.applyThemeClasses(t.wrapper)}addEventListenersToPopup(e){const t=this.gos.getDocument(),i=this.getPopupParent(),{wrapperEl:s,eChild:n,closedCallback:r,afterGuiAttached:o,closeOnEsc:l,modal:a}=e;let u=!1;const c=f=>{if(!s.contains(this.gos.getActiveDomElement()))return;f.key===F.ESCAPE&&!fn(f)&&p({keyboardEvent:f})},d=f=>p({mouseEvent:f}),h=f=>p({touchEvent:f}),p=(f={})=>{const{mouseEvent:m,touchEvent:w,keyboardEvent:v,forceHide:g}=f;!g&&(this.isEventFromCurrentPopup({mouseEvent:m,touchEvent:w},n)||u)||(u=!0,i.removeChild(s),t.removeEventListener("keydown",c),t.removeEventListener("mousedown",d),t.removeEventListener("touchstart",h),t.removeEventListener("contextmenu",d),this.eventService.removeEventListener("dragStarted",d),r&&r(m||w||v),this.removePopupFromPopupList(n))};return o&&o({hidePopup:p}),window.setTimeout(()=>{l&&t.addEventListener("keydown",c),a&&(t.addEventListener("mousedown",d),this.eventService.addEventListener("dragStarted",d),t.addEventListener("touchstart",h),t.addEventListener("contextmenu",d))},0),p}addPopupToPopupList(e,t,i,s){this.popupList.push({element:e,wrapper:t,hideFunc:i,instanceId:Jz++,isAnchored:!!s}),s&&this.setPopupPositionRelatedToElement(e,s)}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){const i=this.getPopupIndex(e);if(i===-1)return;const s=this.popupList[i];if(s.stopAnchoringPromise&&s.stopAnchoringPromise.then(r=>r&&r()),s.stopAnchoringPromise=void 0,s.isAnchored=!1,!t)return;const n=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:s.hideFunc});return s.stopAnchoringPromise=n,s.isAnchored=!0,n}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter(t=>t.element!==e)}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),i=t.getBoundingClientRect(),{element:s,ePopup:n}=e,r=s.getBoundingClientRect(),o=i.top-r.top,l=i.left-r.left;let a=o,u=l;const c=n.style.top,d=parseInt(c.substring(0,c.length-1),10),h=n.style.left,p=parseInt(h.substring(0,h.length-1),10),f=this.getFrameworkOverrides();return new Ve(m=>{f.wrapIncoming(()=>{f.setInterval(()=>{const w=t.getBoundingClientRect(),v=s.getBoundingClientRect();if(v.top==0&&v.left==0&&v.height==0&&v.width==0){e.hidePopup();return}const y=w.top-v.top;if(y!=a){const b=this.keepXYWithinBounds(n,d+o-y,0);n.style.top=`${b}px`}a=y;const S=w.left-v.left;if(S!=u){const b=this.keepXYWithinBounds(n,p+l-S,1);n.style.left=`${b}px`}u=S},200).then(w=>{m(()=>{w!=null&&window.clearInterval(w)})})},"popupPositioning")})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,t){const{mouseEvent:i,touchEvent:s}=e,n=i||s;if(!n)return!1;const r=this.getPopupIndex(t);if(r===-1)return!1;for(let o=r;o<this.popupList.length;o++){const l=this.popupList[o];if(xG(l.element,n))return!0}return this.isElementWithinCustomPopup(n.target)}isElementWithinCustomPopup(e){const t=this.gos.getDocument();for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const i=this.getWrapper(e);i&&(i.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(i))}bringPopupToFront(e){const t=this.getPopupParent(),i=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),s=i.length,n=Array.prototype.slice.call(t.querySelectorAll(".ag-popup.ag-always-on-top")),r=n.length,o=this.getWrapper(e);if(!o||s<=1||!t.contains(e))return!1;const l=i.indexOf(o),a=o.querySelectorAll("div"),u=[];a.forEach(d=>{d.scrollTop!==0&&u.push([d,d.scrollTop])});let c=!1;for(r?o.classList.contains("ag-always-on-top")?l!==s-1&&(se(n).insertAdjacentElement("afterend",o),c=!0):l!==s-r-1&&(n[0].insertAdjacentElement("beforebegin",o),c=!0):l!==s-1&&(se(i).insertAdjacentElement("afterend",o),c=!0);u.length;){const d=u.pop();d[0].scrollTop=d[1]}return c}},eU=["touchstart","touchend","touchmove","touchcancel"],yT=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t()}setInterval(e,t){return new Ve(i=>{i(window.setInterval(e,t))})}addEventListener(e,t,i,s){const n=$n(eU,t);e.addEventListener(t,i,{capture:!!s,passive:n})}get shouldWrapOutgoing(){return!1}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`https://www.ag-grid.com/${this.frameworkName==="solid"?"react":this.frameworkName}-data-grid${e?`/${e}`:""}`}},tU=class extends T{constructor(){super(...arguments),this.beanName="cellNavigationService"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.pinnedRowModel=e.pinnedRowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}getNextCellToFocus(e,t,i=!1){return i?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const i=e===F.UP,s=e===F.DOWN,n=e===F.LEFT;let r,o;if(i||s)o=i?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow(),r=t.column;else{const l=this.visibleColsService.getAllCols(),a=this.gos.get("enableRtl");o=t.rowIndex,r=n!==a?l[0]:se(l)}return{rowIndex:o,rowPinned:null,column:r}}getNextCellToFocusWithoutCtrlPressed(e,t){let i=t,s=!1;for(;!s;){switch(e){case F.UP:i=this.getCellAbove(i);break;case F.DOWN:i=this.getCellBelow(i);break;case F.RIGHT:this.gos.get("enableRtl")?i=this.getCellToLeft(i):i=this.getCellToRight(i);break;case F.LEFT:this.gos.get("enableRtl")?i=this.getCellToRight(i):i=this.getCellToLeft(i);break;default:i=null,M("unknown key for navigation ",e);break}i?s=this.isCellGoodToFocusOn(i):s=!0}return i}isCellGoodToFocusOn(e){const t=e.column;let i;switch(e.rowPinned){case"top":i=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":i=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:i=this.rowModel.getRow(e.rowIndex);break}return i?!t.isSuppressNavigable(i):!1}getCellToLeft(e){if(!e)return null;const t=this.visibleColsService.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.visibleColsService.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){const t=e.rowIndex,i=e.rowPinned;if(this.isLastRowInContainer(e))switch(i){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.pageBoundsService.getFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}const s=this.rowModel.getRow(e.rowIndex),n=this.getNextStickyPosition(s);return n||{rowIndex:t+1,rowPinned:i}}getNextStickyPosition(e,t){if(!this.gos.isGroupRowsSticky()||!e||!e.sticky)return;const i=this.rowRenderer.getStickyTopRowCtrls().some(l=>l.getRowNode().rowIndex===e.rowIndex);let s=[];i?s=[...this.rowRenderer.getStickyTopRowCtrls()].sort((l,a)=>l.getRowNode().rowIndex-a.getRowNode().rowIndex):s=[...this.rowRenderer.getStickyBottomRowCtrls()].sort((l,a)=>a.getRowNode().rowIndex-l.getRowNode().rowIndex);const n=t?-1:1,r=s.findIndex(l=>l.getRowNode().rowIndex===e.rowIndex),o=s[r+n];if(o)return{rowIndex:o.getRowNode().rowIndex,rowPinned:null}}getCellBelow(e){if(!e)return null;const t=this.getRowBelow(e);return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}isLastRowInContainer(e){const t=e.rowPinned,i=e.rowIndex;return t==="top"?this.pinnedRowModel.getPinnedTopRowNodes().length-1<=i:t==="bottom"?this.pinnedRowModel.getPinnedBottomRowNodes().length-1<=i:this.pageBoundsService.getLastRow()<=i}getRowAbove(e){const t=e.rowIndex,i=e.rowPinned;if(i?t===0:t===this.pageBoundsService.getFirstRow())return i==="top"?null:i?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;const n=this.rowModel.getRow(e.rowIndex),r=this.getNextStickyPosition(n,!0);return r||{rowIndex:t-1,rowPinned:i}}getCellAbove(e){if(!e)return null;const t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.pageBoundsService.getLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowNodes().length-1,rowPinned:"top"}}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){var r;const t=this.visibleColsService.getAllCols();let i=e.rowIndex,s=e.rowPinned,n=this.visibleColsService.getColAfter(e.column);if(!n){n=t[0];const o=this.getRowBelow(e);if(X(o)||!o.rowPinned&&!(((r=this.paginationService)==null?void 0:r.isRowInPage(o))??!0))return null;i=o?o.rowIndex:null,s=o?o.rowPinned:null}return{rowIndex:i,column:n,rowPinned:s}}getNextTabbedCellBackwards(e){var r;const t=this.visibleColsService.getAllCols();let i=e.rowIndex,s=e.rowPinned,n=this.visibleColsService.getColBefore(e.column);if(!n){n=se(t);const o=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(X(o)||!o.rowPinned&&!(((r=this.paginationService)==null?void 0:r.isRowInPage(o))??!0))return null;i=o?o.rowIndex:null,s=o?o.rowPinned:null}return{rowIndex:i,column:n,rowPinned:s}}};function iU(e,t){e.eventService.dispatchEvent(t)}var sU=class extends T{constructor(){super(...arguments),this.beanName="apiFunctionService",this.functions={dispatchEvent:iU},this.isDestroyed=!1}wireBeans(e){this.beans=e}postConstruct(){this.preDestroyLink=this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}callFunction(e,t){var s;const i=this.functions[e];if(i)return i.apply(i,[this.beans,...t]);if(this.isDestroyed)return this.destroyedHandler(e);this.isFrameworkMethod(e)||(s=this.beans.validationService)==null||s.warnMissingApiFunction(e)}addFunction(e,t){const{validationService:i}=this.beans;i&&(t=i.validateApiFunction(e,t)),this.functions[e]=t}destroy(){this.functions={},this.isDestroyed=!0,super.destroy()}destroyedHandler(e){if(e==="isDestroyed")return!0;e!=="destroy"&&M(`Grid API function ${e}() cannot be called as the grid has been destroyed.
Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${this.preDestroyLink}`)}isFrameworkMethod(e){return["preWireBeans","wireBeans","preConstruct","postConstruct"].includes(e)}};function nU(e){const t=e.getBean("apiFunctionService");return new Proxy(t,{get(i,s){if(s!=="then")return(...n)=>i.callFunction(s,n)}})}function rU(e){return{beanName:"gridApi",bean:nU(e)}}var oU=class extends T{constructor(){super(...arguments),this.beanName="columnDefFactory"}buildColumnDefs(e,t,i){const s=[],n={};return e.forEach(r=>{const o=this.createDefFromColumn(r,t,i);let l=!0,a=o,u=r.getOriginalParent(),c=null;for(;u;){let d=null;if(u.isPadding()){u=u.getOriginalParent();continue}const h=n[u.getGroupId()];if(h){h.children.push(a),l=!1;break}if(d=this.createDefFromGroup(u),d&&(d.children=[a],n[d.groupId]=d,a=d,u=u.getOriginalParent()),u!=null&&c===u){l=!1;break}c=u}l&&s.push(a)}),s}createDefFromGroup(e){const t=Eg(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,i){const s=Eg(e.getColDef());return s.colId=e.getColId(),s.width=e.getActualWidth(),s.rowGroup=e.isRowGroupActive(),s.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,s.pivot=e.isPivotActive(),s.pivotIndex=e.isPivotActive()?i.indexOf(e):null,s.aggFunc=e.isValueActive()?e.getAggFunc():null,s.hide=e.isVisible()?void 0:!0,s.pinned=e.isPinned()?e.getPinned():null,s.sort=e.getSort()?e.getSort():null,s.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,s}},lU=class extends T{constructor(){super(...arguments),this.beanName="columnEventDispatcher"}visibleCols(){const e={type:"displayedColumnsChanged"};this.eventService.dispatchEvent(e)}gridColumns(){const e={type:"gridColumnsChanged"};this.eventService.dispatchEvent(e)}headerHeight(e){const t={type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"};this.eventService.dispatchEvent(t)}groupOpened(e){const t={type:"columnGroupOpened",columnGroup:e.length===1?e[0]:void 0,columnGroups:e};this.eventService.dispatchEvent(t)}rowGroupChanged(e,t){const i={type:"columnRowGroupChanged",columns:e,column:e.length===1?e[0]:null,source:t};this.eventService.dispatchEvent(i)}genericColumnEvent(e,t,i){const s={type:e,columns:t,column:t.length===1?t[0]:null,source:i};this.eventService.dispatchEvent(s)}pivotModeChanged(){const e={type:"columnPivotModeChanged"};this.eventService.dispatchEvent(e)}virtualColumnsChanged(e){const t={type:"virtualColumnsChanged",afterScroll:e};this.eventService.dispatchEvent(t)}newColumnsLoaded(e){const t={type:"newColumnsLoaded",source:e};this.eventService.dispatchEvent(t)}everythingChanged(e){const t={type:"columnEverythingChanged",source:e};this.eventService.dispatchEvent(t)}columnMoved(e){const{movedColumns:t,source:i,toIndex:s,finished:n}=e,r={type:"columnMoved",columns:t,column:t&&t.length===1?t[0]:null,toIndex:s,finished:n,source:i};this.eventService.dispatchEvent(r)}columnPinned(e,t){if(!e.length)return;const i=e.length===1?e[0]:null,s=this.getCommonValue(e,r=>r.getPinned()),n={type:"columnPinned",pinned:s??null,columns:e,column:i,source:t};this.eventService.dispatchEvent(n)}columnVisible(e,t){if(!e.length)return;const i=e.length===1?e[0]:null,n={type:"columnVisible",visible:this.getCommonValue(e,r=>r.isVisible()),columns:e,column:i,source:t};this.eventService.dispatchEvent(n)}getCommonValue(e,t){if(!e||e.length==0)return;const i=t(e[0]);for(let s=1;s<e.length;s++)if(i!==t(e[s]))return;return i}columnChanged(e,t,i){const s={type:e,columns:t,column:t&&t.length==1?t[0]:null,source:i};this.eventService.dispatchEvent(s)}columnResized(e,t,i,s=null){if(e&&e.length){const n={type:"columnResized",columns:e,column:e.length===1?e[0]:null,flexColumns:s,finished:t,source:i};this.eventService.dispatchEvent(n)}}},aU=class extends T{constructor(){super(...arguments),this.beanName="columnGetStateService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService}getColumnState(){const e=this.columnModel.getColDefCols();if(X(e)||!this.columnModel.isAlive())return[];const i=this.columnModel.getAllCols().map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(i),i}createStateItemFromColumn(e){const t=this.funcColsService.getRowGroupColumns(),i=this.funcColsService.getPivotColumns(),s=e.isRowGroupActive()?t.indexOf(e):null,n=e.isPivotActive()?i.indexOf(e):null,r=e.isValueActive()?e.getAggFunc():null,o=e.getSort()!=null?e.getSort():null,l=e.getSortIndex()!=null?e.getSortIndex():null,a=e.getFlex()!=null&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:o,sortIndex:l,aggFunc:r,rowGroup:e.isRowGroupActive(),rowGroupIndex:s,pivot:e.isPivotActive(),pivotIndex:n,flex:a}}orderColumnStateList(e){const t=this.columnModel.getCols(),i=new Map(t.map((s,n)=>[s.getColId(),n]));e.sort((s,n)=>{const r=i.has(s.colId)?i.get(s.colId):-1,o=i.has(n.colId)?i.get(n.colId):-1;return r-o})}},uU=class extends T{constructor(){super(...arguments),this.beanName="columnGroupStateService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService}getColumnGroupState(){const e=[],t=this.columnModel.getColTree();return xs(null,t,i=>{Tt(i)&&e.push({groupId:i.getGroupId(),open:i.isExpanded()})}),e}resetColumnGroupState(e){const t=this.columnModel.getColDefColTree();if(!t)return;const i=[];xs(null,t,s=>{if(Tt(s)){const n=s.getColGroupDef(),r={groupId:s.getGroupId(),open:n?n.openByDefault:void 0};i.push(r)}}),this.setColumnGroupState(i,e)}setColumnGroupState(e,t){if(!this.columnModel.getColTree())return;this.columnAnimationService.start();const s=[];e.forEach(n=>{const r=n.groupId,o=n.open,l=this.columnModel.getProvidedColGroup(r);l&&l.isExpanded()!==o&&(l.setExpanded(o),s.push(l))}),this.visibleColsService.refresh(t,!0),s.length&&this.eventDispatcher.groupOpened(s),this.columnAnimationService.finish()}},cU=class extends T{constructor(){super(...arguments),this.beanName="columnViewportService",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,i=!1){const s=this.visibleColsService.isBodyWidthDirty();if(!(e===this.scrollWidth&&t===this.scrollPosition&&!s)){if(this.scrollWidth=e,this.scrollPosition=t,this.visibleColsService.setBodyWidthDirty(),this.gos.get("enableRtl")){const r=this.visibleColsService.getBodyContainerWidth();this.viewportLeft=r-this.scrollPosition-this.scrollWidth,this.viewportRight=r-this.scrollPosition}else this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition;this.columnModel.isReady()&&this.checkViewportColumns(i)}}getHeadersToRender(e,t){let i;switch(e){case"left":i=this.rowsOfHeadersToRenderLeft[t];break;case"right":i=this.rowsOfHeadersToRenderRight[t];break;default:i=this.rowsOfHeadersToRenderCenter[t];break}return i||[]}extractViewportColumns(){const e=this.visibleColsService.getCenterCols();this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()?!0:this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,i=t+e.getActualWidth(),s=this.viewportLeft-200,n=this.viewportRight+200,r=t<s&&i<s,o=t>n&&i>n;return!r&&!o}getViewportColumns(){const e=this.visibleColsService.getLeftCols(),t=this.visibleColsService.getRightCols();return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.columnModel.isColSpanActive())return this.colsWithinViewport;const t=n=>{const r=n.getLeft();return A(r)&&r>this.viewportLeft},i=this.isColumnVirtualisationSuppressed()?null:this.isColumnInRowViewport.bind(this),s=this.visibleColsService.getColsCenter();return this.visibleColsService.getColsForRow(e,s,i,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventDispatcher.virtualColumnsChanged(e)}calculateHeaderRows(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={};const e={},t=this.visibleColsService.getLeftCols(),i=this.visibleColsService.getRightCols();this.headerColsWithinViewport.concat(t).concat(i).forEach(r=>e[r.getId()]=!0);const n=(r,o,l)=>{let a=!1;for(let u=0;u<r.length;u++){const c=r[u];let d=!1;if(yn(c))d=e[c.getId()]===!0;else{const p=c.getDisplayedChildren();p&&(d=n(p,o,l+1))}d&&(a=!0,o[l]||(o[l]=[]),o[l].push(c))}return a};n(this.visibleColsService.getTreeLeft(),this.rowsOfHeadersToRenderLeft,0),n(this.visibleColsService.getTreeRight(),this.rowsOfHeadersToRenderRight,0),n(this.visibleColsService.getTreeCenter(),this.rowsOfHeadersToRenderCenter,0)}extractViewport(){const e=s=>`${s.getId()}-${s.getPinned()||"normal"}`;this.extractViewportColumns();const t=this.getViewportColumns().map(e).join("#"),i=this.colsWithinViewportHash!==t;return i&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),i}},dU=class extends T{constructor(){super(...arguments),this.beanName="agComponentUtils"}wireBeans(e){this.componentMetadataProvider=e.componentMetadataProvider}adaptFunction(e,t){const i=this.componentMetadataProvider.retrieve(e);return i&&i.functionAdapter?i.functionAdapter(t):null}adaptCellRendererFunction(e){class t{refresh(){return!1}getGui(){return this.eGui}init(s){const n=e(s),r=typeof n;if(r==="string"||r==="number"||r==="boolean"){this.eGui=Do("<span>"+n+"</span>");return}if(n==null){this.eGui=Do("<span></span>");return}this.eGui=n}}return t}doesImplementIComponent(e){return e?e.prototype&&"getGui"in e.prototype:!1}},hU=class extends T{constructor(){super(...arguments),this.beanName="componentMetadataProvider"}wireBeans(e){this.agComponentUtils=e.agComponentUtils}postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(e){return this.componentMetaData[e]}},pU=["rowPositionUtils","cellPositionUtils","headerPositionUtils","paginationAutoPageSizeService","apiFunctionService","gridApi","userComponentRegistry","agComponentUtils","componentMetadataProvider","resizeObserverService","userComponentFactory","rowContainerHeightService","horizontalResizeService","localeService","validationService","pinnedRowModel","dragService","visibleColsService","eventService","gos","popupService","selectionService","columnFilterService","quickFilterService","filterManager","columnModel","headerNavigationService","pageBoundsService","paginationService","pageBoundsListener","rowRenderer","expressionService","columnFactory","alignedGridsService","navigationService","valueCache","valueService","loggerFactory","autoWidthCalculator","filterMenuFactory","dragAndDropService","focusService","mouseEventService","environment","cellNavigationService","stylingService","scrollVisibleService","sortController","columnHoverService","columnAnimationService","selectableService","autoColService","changeDetectionService","animationFrameService","undoRedoService","columnDefFactory","rowCssClassCalculator","rowNodeBlockLoader","rowNodeSorter","ctrlsService","pinnedWidthService","rowNodeEventThrottle","ctrlsFactory","dataTypeService","syncService","overlayService","stateService","expansionService","apiEventService","ariaAnnouncementService","menuService","columnApplyStateService","columnEventDispatcher","columnMoveService","columnAutosizeService","columnGetStateService","columnGroupStateService","columnSizeService","funcColsService","columnNameService","columnViewportService","pivotResultColsService","showRowGroupColsService"],FS=Object.fromEntries(pU.map((e,t)=>[e,t]));function fU(e,t){const i=(e.beanName?FS[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,s=(t.beanName?FS[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return i-s}function gU(e,t){return(e==null?void 0:e.beanName)==="gridDestroyService"?-1:0}var mU=class extends T{constructor(){super(...arguments),this.beanName="ctrlsFactory",this.registry={}}register(e){this.registry[e.name]=e.classImp}getInstance(e,...t){const i=this.registry[e];if(i!=null)return new i(...t)}},vU=class extends T{constructor(){super(...arguments),this.beanName="ctrlsService",this.params={},this.ready=!1,this.readyCallbacks=[]}checkReady(){const e=this.params;this.ready=e.gridCtrl!=null&&e.gridBodyCtrl!=null&&e.center!=null&&e.left!=null&&e.right!=null&&e.bottomCenter!=null&&e.bottomLeft!=null&&e.bottomRight!=null&&e.topCenter!=null&&e.topLeft!=null&&e.topRight!=null&&e.stickyTopCenter!=null&&e.stickyTopLeft!=null&&e.stickyTopRight!=null&&e.stickyBottomCenter!=null&&e.stickyBottomLeft!=null&&e.stickyBottomRight!=null&&e.centerHeader!=null&&e.leftHeader!=null&&e.rightHeader!=null&&e.fakeHScrollComp!=null&&e.fakeVScrollComp!=null&&e.gridHeaderCtrl!=null,this.ready&&(this.readyCallbacks.forEach(t=>t(e)),this.readyCallbacks.length=0)}whenReady(e){this.ready?e(this.params):this.readyCallbacks.push(e)}register(e,t){this.params[e]=t,this.checkReady()}registerHeaderContainer(e,t){const i=this.params;switch(t){case"left":i.leftHeader=e;break;case"right":i.rightHeader=e;break;default:i.centerHeader=e;break}this.checkReady()}get(e){return this.params[e]}getParams(){return this.params}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:i}=this.params;return[e,i,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}},CU=class extends T{constructor(){super(...arguments),this.beanName="cellPositionUtils"}createId(e){const{rowIndex:t,rowPinned:i,column:s}=e;return this.createIdFromValues({rowIndex:t,column:s,rowPinned:i})}createIdFromValues(e){const{rowIndex:t,rowPinned:i,column:s}=e;return`${t}.${i??"null"}.${s.getId()}`}equals(e,t){const i=e.column===t.column,s=e.rowPinned===t.rowPinned,n=e.rowIndex===t.rowIndex;return i&&s&&n}},wU=class extends T{constructor(){super(...arguments),this.beanName="rowNodeEventThrottle",this.events=[]}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowModel=e.rowModel}postConstruct(){this.rowModel.getType()=="clientSide"&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(e,t){if(this.clientSideRowModel==null){this.eventService.dispatchEvent(e);return}this.events.push(e);const i=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(s=>this.eventService.dispatchEvent(s)),this.events=[]};t?i():(this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(i)),this.dispatchExpandedDebounced())}},yU=class extends T{constructor(){super(...arguments),this.beanName="rowPositionUtils"}wireBeans(e){this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.pageBoundsService=e.pageBoundsService}getFirstRow(){let e=0,t;return this.pinnedRowModel.getPinnedTopRowCount()?t="top":this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(t="bottom"),t===void 0?null:{rowIndex:e,rowPinned:t}}getLastRow(){let e,t=null;const i=this.pinnedRowModel.getPinnedBottomRowCount(),s=this.pinnedRowModel.getPinnedTopRowCount();return i?(t="bottom",e=i-1):this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getLastRow()):s&&(t="top",e=s-1),e===void 0?null:{rowIndex:e,rowPinned:t}}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowNodes()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowNodes()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}}sameRow(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}before(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(A(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}},TS={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},xS={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},IS={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},SU=class extends T{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.themeClasses=[],this.eThemeAncestor=null,this.eMeasurementContainer=null,this.sizesMeasured=!1}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.eGridDiv=e.eGridDiv}postConstruct(){this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.themeClasses=this.getAncestorThemeClasses(),this.setUpThemeClassObservers(),this.getSizeEl(TS),this.getSizeEl(xS),this.getSizeEl(IS)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(TS)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(xS)}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(IS)}hasMeasuredSizes(){return this.sizesMeasured}getThemeClasses(){return this.themeClasses}applyThemeClasses(e){for(const t of Array.from(e.classList))t.startsWith("ag-theme-")&&!this.themeClasses.includes(t)&&e.classList.remove(t);for(const t of this.themeClasses)e.classList.contains(t)||e.classList.add(t)}getThemeAncestorElement(){return this.eThemeAncestor}refreshRowHeightVariable(){const e=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),t=this.gos.get("rowHeight");if(t==null||isNaN(t)||!isFinite(t))return e!==null&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;const i=`${t}px`;return e!=i?(this.eGridDiv.style.setProperty("--ag-line-height",i),t):e!=""?parseFloat(e):-1}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(t!=null)return t;const i=this.measureSizeEl(e);return i==="detached"||i==="no-styles"?e.defaultValue:(this.lastKnownValues.set(e,i),i)}measureSizeEl(e){const t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";const i=t.offsetWidth;return i===DS?"no-styles":(this.sizesMeasured=!0,i)}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;let i=this.eMeasurementContainer;i||(i=this.eMeasurementContainer=document.createElement("div"),i.className="ag-measurement-container",this.eGridDiv.appendChild(i)),t=document.createElement("div"),t.style.width=`var(${e.cssName}, ${DS}px)`,i.appendChild(t),this.sizeEls.set(e,t);let s=this.measureSizeEl(e);s==="no-styles"&&M(`no value for ${e.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e.defaultValue} will be used and updated when styles load.`);const n=this.resizeObserverService.observeResize(t,()=>{const r=this.measureSizeEl(e);r==="detached"||r==="no-styles"||(this.lastKnownValues.set(e,r),r!==s&&(s=r,this.fireGridStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>n()),t}fireGridStylesChangedEvent(e){const t={type:"gridStylesChanged",[e]:!0};this.eventService.dispatchEvent(t)}setUpThemeClassObservers(){const e=new MutationObserver(()=>{const i=this.getAncestorThemeClasses();RU(i,this.themeClasses)||(this.themeClasses=i,this.fireGridStylesChangedEvent("themeChanged"))});let t=this.eGridDiv;for(;t;)e.observe(t||this.eGridDiv,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement}getAncestorThemeClasses(){let e=this.eGridDiv;const t=[];for(this.eThemeAncestor=null;e;){const i=Array.from(e.classList).filter(s=>s.startsWith("ag-theme-"));for(const s of i)this.eThemeAncestor=e,t.includes(s)||t.unshift(s);e=e.parentElement}return Object.freeze(t)}},RU=(e,t)=>e.length===t.length&&e.findIndex((i,s)=>e[s]!==t[s])===-1,DS=15538,bU=class extends T{constructor(){super(...arguments),this.beanName="eventService",this.globalEventService=new $o}wireBeans(e){this.globalEventListener=e.globalEventListener,this.globalSyncEventListener=e.globalSyncEventListener}postConstruct(){if(this.globalEventListener){const e=this.gos.useAsyncEvents();this.addGlobalListener(this.globalEventListener,e)}this.globalSyncEventListener&&this.addGlobalListener(this.globalSyncEventListener,!1)}addEventListener(e,t,i){this.globalEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.globalEventService.removeEventListener(e,t,i)}addGlobalListener(e,t=!1){this.globalEventService.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalEventService.removeGlobalListener(e,t)}dispatchLocalEvent(){}dispatchEvent(e){this.globalEventService.dispatchEvent(this.gos.addGridCommonParams(e))}dispatchEventOnce(e){this.globalEventService.dispatchEventOnce(this.gos.addGridCommonParams(e))}},uC=class Yt extends T{constructor(){super(...arguments),this.beanName="focusService"}wireBeans(t){this.eGridDiv=t.eGridDiv,this.columnModel=t.columnModel,this.visibleColsService=t.visibleColsService,this.headerNavigationService=t.headerNavigationService,this.headerPositionUtils=t.headerPositionUtils,this.rowRenderer=t.rowRenderer,this.rowPositionUtils=t.rowPositionUtils,this.cellPositionUtils=t.cellPositionUtils,this.navigationService=t.navigationService,this.ctrlsService=t.ctrlsService,this.filterManager=t.filterManager,this.rangeService=t.rangeService,this.advancedFilterService=t.advancedFilterService}static addKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",Yt.toggleKeyboardMode),t.addEventListener("mousedown",Yt.toggleKeyboardMode))}static removeKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",Yt.toggleKeyboardMode),t.addEventListener("mousedown",Yt.toggleKeyboardMode))}static toggleKeyboardMode(t){const i=Yt.keyboardModeActive,s=t.type==="keydown";s&&(t.ctrlKey||t.metaKey||t.altKey)||i!==s&&(Yt.keyboardModeActive=s)}static unregisterGridCompController(t){Yt.removeKeyboardModeEvents(t)}postConstruct(){const t=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:t,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:t,columnRowGroupChanged:t}),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(i=>{this.gridCtrl=i.gridCtrl})}registerKeyboardFocusEvents(){const t=this.gos.getDocument();Yt.addKeyboardModeEvents(t),Yt.instanceCount++,this.addDestroyFunc(()=>{Yt.instanceCount--,Yt.unregisterGridCompController(t)})}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;const t=this.focusedCellPosition.column,i=this.columnModel.getCol(t.getId());t!==i&&this.clearFocusedCell()}isKeyboardMode(){return Yt.keyboardModeActive}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(this.gos.getActiveDomElement(),Qn.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(this.gos.getActiveDomElement(),lh.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(t,i){let s=t;for(;s;){if(this.gos.getDomData(s,i))return!1;s=s.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(t){return this.isCellRestoreFocused(t)?(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0):!1}isCellRestoreFocused(t){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.restoredFocusedCellPosition)}setRestoreFocusedCell(t){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=t)}getFocusEventParams(){const{rowIndex:t,rowPinned:i,column:s}=this.focusedCellPosition,n={rowIndex:t,rowPinned:i,column:s,isFullWidthCell:!1},r=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i});return r&&(n.isFullWidthCell=r.isFullWidth()),n}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition==null)return;const t={type:"cellFocusCleared",...this.getFocusEventParams()};this.focusedCellPosition=null,this.eventService.dispatchEvent(t)}setFocusedCell(t){const{column:i,rowIndex:s,rowPinned:n,forceBrowserFocus:r=!1,preventScrollOnBrowserFocus:o=!1}=t,l=this.columnModel.getCol(i);if(!l){this.focusedCellPosition=null;return}this.focusedCellPosition=l?{rowIndex:s,rowPinned:Kn(n),column:l}:null;const a={type:"cellFocused",...this.getFocusEventParams(),forceBrowserFocus:r,preventScrollOnBrowserFocus:o};this.eventService.dispatchEvent(a)}isCellFocused(t){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.focusedCellPosition)}isRowNodeFocused(t){return this.isRowFocused(t.rowIndex,t.rowPinned)}isHeaderWrapperFocused(t){if(this.focusedHeaderPosition==null)return!1;const i=t.getColumnGroupChild(),s=t.getRowIndex(),n=t.getPinned(),{column:r,headerRowIndex:o}=this.focusedHeaderPosition;return i===r&&s===o&&n==r.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(t,i){this.focusedHeaderPosition={headerRowIndex:t,column:i}}focusHeaderPosition(t){var u;if(this.gos.get("suppressHeaderFocus"))return!1;const{direction:i,fromTab:s,allowUserOverride:n,event:r,fromCell:o,rowWithoutSpanValue:l}=t;let{headerPosition:a}=t;if(o&&((u=this.filterManager)!=null&&u.isAdvancedFilterHeaderActive()))return this.focusAdvancedFilter(a);if(n){const c=this.getFocusedHeader(),d=this.headerNavigationService.getHeaderRowCount();if(s){const h=this.gos.getCallback("tabToNextHeader");h&&(a=this.getHeaderPositionFromUserFunc({userFunc:h,direction:i,currentPosition:c,headerPosition:a,headerRowCount:d}))}else{const h=this.gos.getCallback("navigateToNextHeader");if(h&&r){const p={key:r.key,previousHeaderPosition:c,nextHeaderPosition:a,headerRowCount:d,event:r};a=h(p)}}}return a?this.focusProvidedHeaderPosition({headerPosition:a,direction:i,event:r,fromCell:o,rowWithoutSpanValue:l}):!1}focusHeaderPositionFromUserFunc(t){if(this.gos.get("suppressHeaderFocus"))return!1;const{userFunc:i,headerPosition:s,direction:n,event:r}=t,o=this.getFocusedHeader(),l=this.headerNavigationService.getHeaderRowCount(),a=this.getHeaderPositionFromUserFunc({userFunc:i,direction:n,currentPosition:o,headerPosition:s,headerRowCount:l});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:n,event:r})}getHeaderPositionFromUserFunc(t){const{userFunc:i,direction:s,currentPosition:n,headerPosition:r,headerRowCount:o}=t,a=i({backwards:s==="Before",previousHeaderPosition:n,nextHeaderPosition:r,headerRowCount:o});return a===!0||a===null?(a===null&&M("Since v31.3 Returning `null` from tabToNextHeader is deprecated. Return `true` to stay on the current header, or `false` to let the browser handle the tab behaviour."),n):a===!1?null:a}focusProvidedHeaderPosition(t){var d;const{headerPosition:i,direction:s,fromCell:n,rowWithoutSpanValue:r,event:o}=t,{column:l,headerRowIndex:a}=i;if(a===-1)return(d=this.filterManager)!=null&&d.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(i):this.focusGridView(l);this.headerNavigationService.scrollToColumn(l,s);const c=this.ctrlsService.getHeaderRowContainerCtrl(l.getPinned()).focusHeader(i.headerRowIndex,l,o);return c&&(r!=null||n)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(r??-1),c}focusFirstHeader(){let t=this.visibleColsService.getAllCols()[0];if(!t)return!1;t.getParent()&&(t=this.visibleColsService.getColGroupAtLevel(t,0));const i=this.headerPositionUtils.getHeaderIndexToFocus(t,0);return this.focusHeaderPosition({headerPosition:i,rowWithoutSpanValue:0})}focusLastHeader(t){const i=this.headerNavigationService.getHeaderRowCount()-1,s=se(this.visibleColsService.getAllCols());return this.focusHeaderPosition({headerPosition:{headerRowIndex:i,column:s},rowWithoutSpanValue:-1,event:t})}focusPreviousFromFirstCell(t){var i;return(i=this.filterManager)!=null&&i.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(t)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(t,i){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===t&&this.focusedCellPosition.rowPinned===Kn(i)}findFocusableElements(t,i,s=!1){const n=PH;let r=mF;i&&(r+=", "+i),s&&(r+=', [tabindex="-1"]');const o=Array.prototype.slice.apply(t.querySelectorAll(n)).filter(u=>is(u)),l=Array.prototype.slice.apply(t.querySelectorAll(r));return l.length?((u,c)=>u.filter(d=>c.indexOf(d)===-1))(o,l):o}focusInto(t,i=!1,s=!1){const n=this.findFocusableElements(t,null,s),r=i?se(n):n[0];return r?(r.focus({preventScroll:!0}),!0):!1}findFocusableElementBeforeTabGuard(t,i){if(!i)return null;const s=this.findFocusableElements(t),n=s.indexOf(i);if(n===-1)return null;let r=-1;for(let o=n-1;o>=0;o--)if(s[o].classList.contains("ag-tab-guard-top")){r=o;break}return r<=0?null:s[r-1]}findNextFocusableElement(t=this.eGridDiv,i,s){const n=this.findFocusableElements(t,i?':not([tabindex="-1"])':null),r=this.gos.getActiveDomElement();let o;i?o=n.findIndex(a=>a.contains(r)):o=n.indexOf(r);const l=o+(s?-1:1);return l<0||l>=n.length?null:n[l]}isTargetUnderManagedComponent(t,i){if(!i)return!1;const s=t.querySelectorAll(`.${vr.FOCUS_MANAGED_CLASS}`);if(!s.length)return!1;for(let n=0;n<s.length;n++)if(s[n].contains(i))return!0;return!1}findTabbableParent(t,i=5){let s=0;for(;t&&Ig(t)===null&&++s<=i;)t=t.parentElement;return Ig(t)===null?null:t}focusGridView(t,i){var l;if(this.gos.get("suppressCellFocus"))return i?this.gos.get("suppressHeaderFocus")?this.focusNextGridCoreContainer(!0,!0):this.focusLastHeader():this.focusNextGridCoreContainer(!1);const s=i?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!s)return!1;const{rowIndex:n,rowPinned:r}=s,o=this.getFocusedHeader();return!t&&o&&(t=o.column),n==null||!t?!1:(this.navigationService.ensureCellVisible({rowIndex:n,column:t,rowPinned:r}),this.setFocusedCell({rowIndex:n,column:t,rowPinned:Kn(r),forceBrowserFocus:!0}),(l=this.rangeService)==null||l.setRangeToCell({rowIndex:n,rowPinned:r,column:t}),!0)}focusNextGridCoreContainer(t,i=!1){return!i&&this.gridCtrl.focusNextInnerContainer(t)?!0:((i||!t&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(t),!1)}focusAdvancedFilter(t){var i;return this.advancedFilterFocusColumn=t==null?void 0:t.column,((i=this.advancedFilterService)==null?void 0:i.getCtrl().focusHeaderComp())??!1}focusNextFromAdvancedFilter(t,i){var n;const s=(i?void 0:this.advancedFilterFocusColumn)??((n=this.visibleColsService.getAllCols())==null?void 0:n[0]);return t?this.focusHeaderPosition({headerPosition:{column:s,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(s)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}addFocusableContainer(t){this.gridCtrl.addFocusableContainer(t)}removeFocusableContainer(t){this.gridCtrl.removeFocusableContainer(t)}focusGridInnerElement(t){return this.gridCtrl.focusInnerElement(t)}};uC.keyboardModeActive=!1;uC.instanceCount=0;var EU=uC,PU=class extends T{constructor(){super(...arguments),this.beanName="pinnedWidthService"}wireBeans(e){this.visibleColsService=e.visibleColsService}postConstruct(){const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const e=this.gos.isDomLayout("print"),t=e?0:this.visibleColsService.getColsLeftWidth(),i=e?0:this.visibleColsService.getDisplayedColumnsRightWidth();t!=this.leftWidth&&(this.leftWidth=t,this.eventService.dispatchEvent({type:"leftPinnedWidthChanged"})),i!=this.rightWidth&&(this.rightWidth=i,this.eventService.dispatchEvent({type:"rightPinnedWidthChanged"}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}},FU=class extends T{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}wireBeans(e){this.beans=e,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}setComp(e,t,i){this.view=e,this.eGridHostDiv=t,this.eGui=i,this.eGui.setAttribute("grid-id",this.gridId);const{dragAndDropService:s,mouseEventService:n,ctrlsService:r,resizeObserverService:o}=this.beans;s.addDropTarget({getContainer:()=>this.eGui,isInterestedIn:a=>a===1||a===0,getIconName:()=>"notAllowed"}),n.stampTopLevelGridCompWithGridInstance(t),this.createManagedBean(new aC(this.view)),this.addRtlSupport();const l=o.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>l()),r.register("gridCtrl",this)}isDetailGrid(){var t;const e=this.focusService.findTabbableParent(this.getGui());return((t=e==null?void 0:e.getAttribute("row-id"))==null?void 0:t.startsWith("detail"))||!1}getOptionalSelectors(){var t,i,s,n,r;const e=this.beans;return{paginationSelector:(t=e.paginationService)==null?void 0:t.getPaginationSelector(),gridHeaderDropZonesSelector:(i=e.columnDropZonesService)==null?void 0:i.getDropZoneSelector(),sideBarSelector:(s=e.sideBarService)==null?void 0:s.getSideBarSelector(),statusBarSelector:(n=e.statusBarService)==null?void 0:n.getStatusPanelSelector(),watermarkSelector:(r=e.licenseManager)==null?void 0:r.getWatermarkSelector()}}onGridSizeChanged(){const e={type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight};this.eventService.dispatchEvent(e)}addRtlSupport(){const e=this.gos.get("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(e)}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),i=this.gos.getActiveDomElement(),s=t.findIndex(r=>r.getGui().contains(i)),n=s+(e?-1:1);if(n<0||n>=t.length)return!1;if(n===0){if(s>0){const r=this.visibleColsService.getAllCols(),o=se(r);if(this.focusService.focusGridView(o,!0))return!0}return!1}return this.focusContainer(t[n],e)}focusInnerElement(e){const t=this.getFocusableContainers(),i=this.visibleColsService.getAllCols(),s=this.gos.getCallback("focusGridInnerElement");if(s&&s({fromBottom:!!e}))return!0;if(e){if(t.length>1)return this.focusContainer(se(t),!0);const n=se(i);if(this.focusService.focusGridView(n,!0))return!0}if(this.gos.get("headerHeight")===0||this.gos.get("suppressHeaderFocus")){if(this.focusService.focusGridView(i[0]))return!0;for(let n=1;n<t.length;n++)if(this.focusService.focusInto(t[n].getGui()))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}focusContainer(e,t){var s,n;(s=e==null?void 0:e.setAllowFocus)==null||s.call(e,!0);const i=this.focusService.focusInto(e.getGui(),t);return(n=e==null?void 0:e.setAllowFocus)==null||n.call(e,!1),i}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers.values()]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},TU=class extends T{constructor(){super(...arguments),this.beanName="alignedGridsService",this.consuming=!1}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.ctrlsService=e.ctrlsService,this.columnApplyStateService=e.columnApplyStateService}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[];const t=typeof e=="function";typeof e=="function"&&(e=e());const i=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return e.map(n=>{var o;if(!n){oe("alignedGrids contains an undefined option."),t||oe(`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`),oe(i());return}if(this.isGridApi(n))return n;const r=n;return"current"in r?(o=r.current)==null?void 0:o.api:(r.api||oe(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${i()}`),r.api)}).filter(n=>!!n&&!n.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){const e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:t})=>this.onColumnEvent(t),alignedGridScroll:({event:t})=>this.onScrollEvent(t)})}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach(t=>{t.isDestroyed()||t.dispatchEvent(e)})}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){const t={type:"alignedGridColumn",event:e};this.fireEvent(t)}fireScrollEvent(e){if(e.direction!=="horizontal")return;const t={type:"alignedGridScroll",event:e};this.fireEvent(t)}onScrollEvent(e){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}getMasterColumns(e){const t=[];return e.columns?e.columns.forEach(i=>{t.push(i)}):e.column&&t.push(e.column),t}getColumnIds(e){const t=[];return e.columns?e.columns.forEach(i=>{t.push(i.getColId())}):e.column&&t.push(e.column.getColId()),t}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{const t=e;this.processColumnEvent(t);break}case"columnGroupOpened":{const t=e;this.processGroupOpenedEvent(t);break}case"columnPivotChanged":M("pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})}processGroupOpenedEvent(e){e.columnGroups.forEach(t=>{let i=null;if(t){const s=t.getGroupId();i=this.columnModel.getProvidedColGroup(s)}t&&!i||this.columnModel.setColumnGroupOpened(i,t.isExpanded(),"alignedGridChanged")})}processColumnEvent(e){var o;const t=e.column;let i=null;if(t&&(i=this.columnModel.getColDefCol(t.getColId())),t&&!i)return;const s=this.getMasterColumns(e);switch(e.type){case"columnMoved":{const a=e.api.getColumnState().map(u=>({colId:u.colId}));this.columnApplyStateService.applyColumnState({state:a,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{const a=e.api.getColumnState().map(u=>({colId:u.colId,hide:u.hide}));this.columnApplyStateService.applyColumnState({state:a},"alignedGridChanged")}break;case"columnPinned":{const a=e.api.getColumnState().map(u=>({colId:u.colId,pinned:u.pinned}));this.columnApplyStateService.applyColumnState({state:a},"alignedGridChanged")}break;case"columnResized":{const l=e,a={};s.forEach(u=>{a[u.getId()]={key:u.getColId(),newWidth:u.getActualWidth()}}),(o=l.flexColumns)==null||o.forEach(u=>{a[u.getId()]&&delete a[u.getId()]}),this.columnSizeService.setColumnWidths(Object.values(a),!1,l.finished,"alignedGridChanged");break}}const r=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(l=>{l.setGridOption("alwaysShowVerticalScroll",r)})}},xU={version:$,moduleName:"@ag-grid-community/aligned-grid",beans:[TU]};function IU(e,t){const i=e.columnModel.getColDefCol(t);return i?i.getColDef():null}function DU(e){return e.columnModel.getColumnDefs()}function kU(e,t){typeof t=="number"?e.columnSizeService.sizeColumnsToFit(t,"api"):e.ctrlsService.getGridBodyCtrl().sizeColumnsToFit(t)}function MU(e,t,i){e.columnModel.setColumnGroupOpened(t,i,"api")}function AU(e,t,i){return e.visibleColsService.getColumnGroup(t,i)}function _U(e,t){return e.columnModel.getProvidedColGroup(t)}function LU(e,t,i){return e.columnNameService.getDisplayNameForColumn(t,i)||""}function OU(e,t,i){return e.columnNameService.getDisplayNameForColumnGroup(t,i)||""}function NU(e,t){return e.columnModel.getColDefCol(t)}function GU(e){return e.columnModel.getColDefCols()}function HU(e,t){return e.columnApplyStateService.applyColumnState(t,"api")}function VU(e){return e.columnGetStateService.getColumnState()}function BU(e){e.columnApplyStateService.resetColumnState("api")}function WU(e){return e.columnGroupStateService.getColumnGroupState()}function zU(e,t){e.columnGroupStateService.setColumnGroupState(t,"api")}function UU(e){e.columnGroupStateService.resetColumnGroupState("api")}function jU(e){return e.visibleColsService.isPinningLeft()||e.visibleColsService.isPinningRight()}function $U(e){return e.visibleColsService.isPinningLeft()}function KU(e){return e.visibleColsService.isPinningRight()}function qU(e,t){return e.visibleColsService.getColAfter(t)}function YU(e,t){return e.visibleColsService.getColBefore(t)}function QU(e,t,i){e.columnModel.setColsVisible([t],i,"api")}function JU(e,t,i){e.columnModel.setColsVisible(t,i,"api")}function XU(e,t,i){e.columnModel.setColsPinned([t],i,"api")}function ZU(e,t,i){e.columnModel.setColsPinned(t,i,"api")}function e2(e){return e.columnModel.getCols()}function t2(e){return e.visibleColsService.getLeftCols()}function i2(e){return e.visibleColsService.getCenterCols()}function s2(e){return e.visibleColsService.getRightCols()}function n2(e){return e.visibleColsService.getAllCols()}function r2(e){return e.columnViewportService.getViewportColumns()}function o2(e,t,i){e.columnMoveService.moveColumns([t],i,"api")}function l2(e,t,i){e.columnMoveService.moveColumnByIndex(t,i,"api")}function a2(e,t,i){e.columnMoveService.moveColumns(t,i,"api")}function u2(e,t,i,s=!0,n="api"){e.columnSizeService.setColumnWidths([{key:t,newWidth:i}],!1,s,n)}function c2(e,t,i=!0,s="api"){e.columnSizeService.setColumnWidths(t,!1,i,s)}function d2(e){return e.visibleColsService.getTreeLeft()}function h2(e){return e.visibleColsService.getTreeCenter()}function p2(e){return e.visibleColsService.getTreeRight()}function f2(e){return e.visibleColsService.getAllTrees()}function g2(e,t,i){return e.columnAutosizeService.autoSizeCols({colKeys:[t],skipHeader:i,source:"api"})}function m2(e,t,i){e.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:i,source:"api"})}function v2(e,t){e.columnAutosizeService.autoSizeAllColumns("api",t)}var kS={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},MS=["january","february","march","april","may","june","july","august","september","october","november","december"],C2=class extends T{constructor(){super(...arguments),this.beanName="dataTypeService",this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}wireBeans(e){this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.columnApplyStateService=e.columnApplyStateService}postConstruct(){this.groupHideOpenParents=this.gos.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gos.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(qr(e.source))})}processDataTypeDefinitions(){const e=this.getDefaultDataTypes();this.dataTypeDefinitions={},this.formatValueFuncs={};const t=s=>n=>{const{column:r,node:o,value:l}=n;let a=r.getColDef().valueFormatter;return a===s.groupSafeValueFormatter&&(a=s.valueFormatter),this.valueService.formatValue(r,o,l,a)};Object.entries(e).forEach(([s,n])=>{const r={...n,groupSafeValueFormatter:this.createGroupSafeValueFormatter(n)};this.dataTypeDefinitions[s]=r,this.formatValueFuncs[s]=t(r)});const i=this.gos.get("dataTypeDefinitions")??{};this.dataTypeMatchers={},Object.entries(i).forEach(([s,n])=>{const r=this.processDataTypeDefinition(n,i,[s],e);r&&(this.dataTypeDefinitions[s]=r,n.dataTypeMatcher&&(this.dataTypeMatchers[s]=n.dataTypeMatcher),this.formatValueFuncs[s]=t(r))}),this.checkObjectValueHandlers(e),["dateString","text","number","boolean","date"].forEach(s=>{const n=this.dataTypeMatchers[s];n&&delete this.dataTypeMatchers[s],this.dataTypeMatchers[s]=n??e[s].dataTypeMatcher})}mergeDataTypeDefinitions(e,t){const i={...e,...t};return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(i.columnTypes=[...nc(e.columnTypes),...nc(t.columnTypes)]),i}processDataTypeDefinition(e,t,i,s){let n;const r=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let o=s[r];const l=t[r];if(o&&l&&(o=l),!this.validateDataTypeDefinition(e,o,r))return;n=this.mergeDataTypeDefinitions(o,e)}else{if(i.includes(r)){M('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');return}const o=t[r];if(!this.validateDataTypeDefinition(e,o,r))return;const l=this.processDataTypeDefinition(o,t,[...i,r],s);if(!l)return;n=this.mergeDataTypeDefinitions(l,e)}return{...n,groupSafeValueFormatter:this.createGroupSafeValueFormatter(n)}}validateDataTypeDefinition(e,t,i){return t?t.baseDataType!==e.baseDataType?(M('The "baseDataType" property of a data type definition must match that of its parent.'),!1):!0:(M(`The data type definition ${i} does not exist.`),!1)}createGroupSafeValueFormatter(e){if(e.valueFormatter)return t=>{var i,s;if((i=t.node)!=null&&i.group){const n=t.column.getAggFunc();if(n){if(n==="first"||n==="last")return e.valueFormatter(t);if(e.baseDataType==="number"&&n!=="count"){if(typeof t.value=="number")return e.valueFormatter(t);if(typeof t.value=="object"){if(!t.value)return;if("toNumber"in t.value)return e.valueFormatter({...t,value:t.value.toNumber()});if("value"in t.value)return e.valueFormatter({...t,value:t.value.value})}}}if(!this.gos.get("suppressGroupMaintainValueType"))return}else if(this.groupHideOpenParents&&t.column.isRowGroupActive()){if(typeof t.value!="string"||(s=e.dataTypeMatcher)!=null&&s.call(e,t.value))return e.valueFormatter(t);if(!this.gos.get("suppressGroupMaintainValueType"))return}return e.valueFormatter(t)}}updateColDefAndGetColumnType(e,t,i){let{cellDataType:s}=t;const{field:n}=t;if(s===void 0&&(s=e.cellDataType),(s==null||s===!0)&&(s=this.canInferCellDataType(e,t)?this.inferCellDataType(n,i):!1),!s){e.cellDataType=!1;return}const r=this.dataTypeDefinitions[s];if(!r){M(`Missing data type definition - "${s}"`);return}return e.cellDataType=s,r.groupSafeValueFormatter&&(e.valueFormatter=r.groupSafeValueFormatter),r.valueParser&&(e.valueParser=r.valueParser),r.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,s,r,i),r.columnTypes}addColumnListeners(e){if(!this.isWaitingForRowData)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const i=s=>{t.add(s.key)};e.addEventListener("columnStateUpdated",i),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.removeEventListener("columnStateUpdated",i))}canInferCellDataType(e,t){if(this.rowModel.getType()!=="clientSide")return!1;const i={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(t,i))return!1;const s=t.type===null?e.type:t.type;if(s){const n=this.gos.get("columnTypes")??{};if(nc(s).some(o=>{const l=n[o.trim()];return l&&this.doColDefPropsPreventInference(l,i)}))return!1}return!this.doColDefPropsPreventInference(e,i)}doColDefPropsPreventInference(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([i,s])=>this.doesColDefPropPreventInference(e,t,i,s))}doesColDefPropPreventInference(e,t,i,s){if(!t[i])return!1;const n=e[i];return n===null?(t[i]=!1,!1):s===void 0?!!n:n===s}inferCellDataType(e,t){if(!e)return;let i;const s=this.getInitialData();if(s){const r=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");i=Vl(s,e,r)}else this.initWaitForRowData(t);if(i==null)return;const[n]=Object.entries(this.dataTypeMatchers).find(([r,o])=>o(i))??["object"];return n}getInitialData(){const e=this.gos.get("rowData");if(e!=null&&e.length)return e[0];if(this.initialData)return this.initialData;{const t=this.rowModel.getRootNode().allLeafChildren;if(t!=null&&t.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions;t&&this.columnModel.queueResizeOperations();const[i]=this.addManagedEventListeners({rowDataUpdateStarted:s=>{const{firstRowData:n}=s;if(!n)return;i==null||i(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(n,t),this.columnStateUpdatesPendingInference={},t&&this.columnModel.processResizeOperations();const r={type:"dataTypesInferred"};this.eventService.dispatchEvent(r)}})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(e,t){this.initialData=e;const i=[];this.destroyColumnStateUpdateListeners();const s={},n={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([r,o])=>{const l=this.columnModel.getCol(r);if(!l)return;const a=l.getColDef();if(!this.columnModel.resetColDefIntoCol(l,"cellDataTypeInferred"))return;const u=l.getColDef();if(t&&u.type&&u.type!==a.type){const c=this.getUpdatedColumnState(l,o);c.rowGroup&&c.rowGroupIndex==null&&(s[r]=c),c.pivot&&c.pivotIndex==null&&(n[r]=c),i.push(c)}}),t&&i.push(...this.funcColsService.generateColumnStateForRowGroupAndPivotIndexes(s,n)),i.length&&this.columnApplyStateService.applyColumnState({state:i},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(e,t){const i=this.columnApplyStateService.getColumnStateFromColDef(e);return t.forEach(s=>{delete i[s],s==="rowGroup"?delete i.rowGroupIndex:s==="pivot"&&delete i.pivotIndex}),i}checkObjectValueHandlers(e){const t=this.dataTypeDefinitions.object,i=e.object;this.hasObjectValueParser=t.valueParser!==i.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==i.valueFormatter}getDateStringTypeDefinition(e){return e?this.getDataTypeDefinition(e)??this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){var t;return(t=this.getDataTypeDefinition(e))==null?void 0:t.baseDataType}checkType(e,t){var s;if(t==null)return!0;const i=(s=this.getDataTypeDefinition(e))==null?void 0:s.dataTypeMatcher;return i?i(t):!0}validateColDef(e){e.cellDataType==="object"&&(e.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&M('Cell data type is "object" but no value formatter has been provided. Please either provide an object data type definition with a value formatter, or set "colDef.valueFormatter"'),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&M('Cell data type is "object" but no value parser has been provided. Please either provide an object data type definition with a value parser, or set "colDef.valueParser"'))}getFormatValue(e){return this.formatValueFuncs[e]}setColDefPropertiesForBaseDataType(e,t,i,s){const n=this.formatValueFuncs[t],r=Rt.__isRegistered("@ag-grid-enterprise/set-filter",this.gridId),o=this.localeService.getLocaleTextFunc(),l=a=>{const{filterParams:u}=e;e.filterParams=typeof u=="object"?{...u,...a}:a};switch(i.baseDataType){case"number":{e.cellEditor="agNumberCellEditor",r&&l({comparator:(a,u)=>{const c=a==null?0:parseInt(a),d=u==null?0:parseInt(u);return c===d?0:c>d?1:-1}});break}case"boolean":{e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=a=>!!a.colDef.editable&&a.event.key===F.SPACE,l(r?{valueFormatter:a=>A(a.value)?o(String(a.value),a.value?"True":"False"):o("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(a,u)=>u,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(a,u)=>u===!1,numberOfInputs:0}]});break}case"date":{e.cellEditor="agDateCellEditor",e.keyCreator=n,r&&l({valueFormatter:a=>{const u=n(a);return A(u)?u:o("blanks","(Blanks)")},treeList:!0,treeListFormatter:(a,u)=>{if(u===1&&a!=null){const c=MS[Number(a)-1];return o(c,kS[c])}return a??o("blanks","(Blanks)")}});break}case"dateString":{e.cellEditor="agDateStringCellEditor",e.keyCreator=n;const a=i.dateParser;l(r?{valueFormatter:u=>{const c=n(u);return A(c)?c:o("blanks","(Blanks)")},treeList:!0,treeListPathGetter:u=>{const c=a(u??void 0);return c?[String(c.getFullYear()),String(c.getMonth()+1),String(c.getDate())]:null},treeListFormatter:(u,c)=>{if(c===1&&u!=null){const d=MS[Number(u)-1];return o(d,kS[d])}return u??o("blanks","(Blanks)")}}:{comparator:(u,c)=>{const d=a(c);return c==null||d<u?-1:d>u?1:0}});break}case"object":{e.cellEditorParams={useFormatter:!0},e.comparator=(a,u)=>{const c=this.columnModel.getColDefCol(s),d=c==null?void 0:c.getColDef();if(!c||!d)return 0;const h=a==null?"":n({column:c,node:null,value:a}),p=u==null?"":n({column:c,node:null,value:u});return h===p?0:h>p?1:-1},e.keyCreator=n,r?l({valueFormatter:a=>{const u=n(a);return A(u)?u:o("blanks","(Blanks)")}}):e.filterValueGetter=a=>n({column:a.column,node:a.node,value:this.valueService.getValue(a.column,a.node)});break}}}getDefaultDataTypes(){const e=i=>!!i.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:i=>{var s,n;return((n=(s=i.newValue)==null?void 0:s.trim)==null?void 0:n.call(s))===""?null:Number(i.newValue)},valueFormatter:i=>i.value==null?"":typeof i.value!="number"||isNaN(i.value)?t("invalidNumber","Invalid Number"):String(i.value),dataTypeMatcher:i=>typeof i=="number"},text:{baseDataType:"text",valueParser:i=>i.newValue===""?null:Sg(i.newValue),dataTypeMatcher:i=>typeof i=="string"},boolean:{baseDataType:"boolean",valueParser:i=>{var s,n;return i.newValue==null?i.newValue:((n=(s=i.newValue)==null?void 0:s.trim)==null?void 0:n.call(s))===""?null:String(i.newValue).toLowerCase()==="true"},valueFormatter:i=>i.value==null?"":String(i.value),dataTypeMatcher:i=>typeof i=="boolean"},date:{baseDataType:"date",valueParser:i=>Ht(i.newValue==null?null:String(i.newValue)),valueFormatter:i=>i.value==null?"":!(i.value instanceof Date)||isNaN(i.value.getTime())?t("invalidDate","Invalid Date"):mi(i.value,!1)??"",dataTypeMatcher:i=>i instanceof Date},dateString:{baseDataType:"dateString",dateParser:i=>Ht(i)??void 0,dateFormatter:i=>mi(i??null,!1)??void 0,valueParser:i=>e(String(i.newValue))?i.newValue:null,valueFormatter:i=>e(String(i.value))?i.value:"",dataTypeMatcher:i=>typeof i=="string"&&e(i)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:i=>Sg(i.value)??""}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach(e=>e()),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}},w2={version:$,moduleName:"@ag-grid-community/data-type",beans:[C2]},y2={version:$,moduleName:"@ag-grid-community/column-api",apiFunctions:{getColumnDef:IU,getColumnDefs:DU,sizeColumnsToFit:kU,setColumnGroupOpened:MU,getColumnGroup:AU,getProvidedColumnGroup:_U,getDisplayNameForColumn:LU,getDisplayNameForColumnGroup:OU,getColumn:NU,getColumns:GU,applyColumnState:HU,getColumnState:VU,resetColumnState:BU,getColumnGroupState:WU,setColumnGroupState:zU,resetColumnGroupState:UU,isPinning:jU,isPinningLeft:$U,isPinningRight:KU,getDisplayedColAfter:qU,getDisplayedColBefore:YU,setColumnVisible:QU,setColumnsVisible:JU,setColumnPinned:XU,setColumnsPinned:ZU,getAllGridColumns:e2,getDisplayedLeftColumns:t2,getDisplayedCenterColumns:i2,getDisplayedRightColumns:s2,getAllDisplayedColumns:n2,getAllDisplayedVirtualColumns:r2,moveColumn:o2,moveColumnByIndex:l2,moveColumns:a2,setColumnWidth:u2,setColumnWidths:c2,getLeftDisplayedColumnGroups:d2,getCenterDisplayedColumnGroups:h2,getRightDisplayedColumnGroups:p2,getAllDisplayedColumnGroups:f2,autoSizeColumn:g2,autoSizeColumns:m2,autoSizeAllColumns:v2}};function S2(e,t){e.ctrlsService.getGridBodyCtrl().getRowDragFeature().addRowDropZone(t)}function R2(e,t){const i=e.dragAndDropService.findExternalZone(t);i&&e.dragAndDropService.removeDropTarget(i)}function b2(e,t){return e.ctrlsService.getGridBodyCtrl().getRowDragFeature().getRowDropZone(t)}var E2={version:$,moduleName:"@ag-grid-community/drag-api",apiFunctions:{addRowDropZone:S2,removeRowDropZone:R2,getRowDropZoneParams:b2}};function P2(e){return e.pinnedRowModel.getPinnedTopRowCount()}function F2(e){return e.pinnedRowModel.getPinnedBottomRowCount()}function T2(e,t){return e.pinnedRowModel.getPinnedTopRow(t)}function x2(e,t){return e.pinnedRowModel.getPinnedBottomRow(t)}var I2={version:$,moduleName:"@ag-grid-community/pinned-row-api",apiFunctions:{getPinnedTopRowCount:P2,getPinnedBottomRowCount:F2,getPinnedTopRow:T2,getPinnedBottomRow:x2}};function D2(e){e.overlayService.showLoadingOverlay()}function k2(e){e.overlayService.showNoRowsOverlay()}function M2(e){e.overlayService.hideOverlay()}var A2={version:$,moduleName:"@ag-grid-community/overlay-api",apiFunctions:{showLoadingOverlay:D2,showNoRowsOverlay:k2,hideOverlay:M2}};function _2(e,t,i){if(!t)return;const s=e.ctrlsService.getGridBodyCtrl().getGui(),n=`aria-${t}`;i===null?s.removeAttribute(n):s.setAttribute(n,i)}function L2(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))}function O2(e,t={}){const i=s=>M(`Since v31.1 api.flashCells parameter '${s}Delay' is deprecated. Please use '${s}Duration' instead.`);A(t.fadeDelay)&&i("fade"),A(t.flashDelay)&&i("flash"),e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.flashCells(t))}function N2(e){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getHeaderRowContainerCtrls().forEach(t=>t.refresh()))}function G2(e){return e.animationFrameService.isQueueEmpty()}function H2(e){e.animationFrameService.flushAllFrames()}function V2(e){return{rowHeight:e.gos.getRowHeightAsNumber(),headerHeight:e.columnModel.getHeaderHeight()}}function B2(e,t={}){return e.rowRenderer.getCellRendererInstances(t).map(Wl)}var W2={version:$,moduleName:"@ag-grid-community/render-api",apiFunctions:{setGridAriaProperty:_2,refreshCells:L2,flashCells:O2,refreshHeader:N2,isAnimationFrameQueueEmpty:G2,flushAllAnimationFrames:H2,getSizesForCurrentTheme:V2,getCellRendererInstances:B2}};function z2(e){e.valueCache.expire()}function U2(e,t,i){return ST(e,{colKey:t,rowNode:i})}function ST(e,t){const{colKey:i,rowNode:s,useFormatter:n}=t,r=e.columnModel.getColDefCol(i)??e.columnModel.getCol(i);if(X(r))return null;const o=e.valueService.getValue(r,s);return n?e.valueService.formatValue(r,s,o)??Zi(o,!0):o}function j2(e){return e.context.getGridId()}function $2(e){e.gridDestroyService.destroy()}function K2(e){return e.gridDestroyService.isDestroyCalled()}function q2(e,t){return e.gos.get(t)}function Y2(e,t,i){RT(e,{[t]:i})}function RT(e,t){e.gos.updateGridOptions({options:t})}function Q2(e,t,i){e.apiEventService.addEventListener(t,i)}function J2(e,t,i){e.apiEventService.removeEventListener(t,i)}function X2(e,t){e.apiEventService.addGlobalListener(t)}function Z2(e,t){e.apiEventService.removeGlobalListener(t)}function ej(e){return e.focusService.getFocusedCell()}function tj(e){return e.focusService.clearFocusedCell()}function ij(e,t,i,s){e.focusService.setFocusedCell({rowIndex:t,column:i,rowPinned:s,forceBrowserFocus:!0})}function sj(e,t){return e.navigationService.tabToNextCell(!1,t)}function nj(e,t){return e.navigationService.tabToNextCell(!0,t)}function rj(e,t,i=!1){const s=e.headerNavigationService.getHeaderPositionForColumn(t,i);s&&e.focusService.focusHeaderPosition({headerPosition:s})}function oj(e,t,i){const s=e.columnModel.getCol(t);e.menuService.showColumnMenu({column:s,buttonElement:i,positionBy:"button"})}function lj(e,t,i){let s=e.columnModel.getCol(t);if(s||(s=e.columnModel.getColDefCol(t)),!s){oe(`column '${t}' not found`);return}e.menuService.showColumnMenu({column:s,mouseEvent:i,positionBy:"mouse"})}function aj(e,t){const i=e.columnModel.getCol(t);if(!i){oe(`column '${t}' not found`);return}e.menuService.showColumnMenu({column:i,positionBy:"auto"})}function uj(e){e.menuService.hidePopupMenu()}function cj(e,t={}){const i=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(i))}function dj(e,t,i,s,n){e.expansionService.setRowNodeExpanded(t,i,s,n)}function hj(e,t){return e.rowModel.getRowNode(t)}function pj(e,t,i,s){e.rowRenderer.addRenderedRowListener(t,i,s)}function fj(e){return e.rowRenderer.getRenderedNodes()}function gj(e,t,i){e.rowModel.forEachNode(t,i)}function mj(e){return bT(e)}function bT(e){return e.rowRenderer.getFirstVirtualRenderedRow()}function vj(e){return ET(e)}function ET(e){return e.rowRenderer.getLastVirtualRenderedRow()}function Cj(e,t){return e.rowModel.getRow(t)}function wj(e){return e.rowModel.getRowCount()}function yj(e){return e.rowModel}function Sj(e,t){if(!t.nodes.every(l=>l.rowPinned?(M("cannot select pinned rows"),!1):l.id===void 0?(M("cannot select node until id for node is known"),!1):!0))return;const{nodes:s,source:n,newValue:r}=t,o=s;e.selectionService.setNodesSelected({nodes:o,source:n??"api",newValue:r})}function Rj(e,t="apiSelectAll"){e.selectionService.selectAllRowNodes({source:t})}function bj(e,t="apiSelectAll"){e.selectionService.deselectAllRowNodes({source:t})}function Ej(e,t="apiSelectAllFiltered"){e.selectionService.selectAllRowNodes({source:t,justFiltered:!0})}function Pj(e,t="apiSelectAllFiltered"){e.selectionService.deselectAllRowNodes({source:t,justFiltered:!0})}function Fj(e,t="apiSelectAllCurrentPage"){e.selectionService.selectAllRowNodes({source:t,justCurrentPage:!0})}function Tj(e,t="apiSelectAllCurrentPage"){e.selectionService.deselectAllRowNodes({source:t,justCurrentPage:!0})}function xj(e){return e.selectionService.getSelectedNodes()}function Ij(e){return e.selectionService.getSelectedRows()}function Dj(e){e.sortController.onSortChanged("api")}var kj={version:$,moduleName:"@ag-grid-community/core-api",apiFunctions:{getGridId:j2,destroy:$2,isDestroyed:K2,getGridOption:q2,setGridOption:Y2,updateGridOptions:RT}},Mj={version:$,moduleName:"@ag-grid-community/row-selection-api",apiFunctions:{setNodesSelected:Sj,selectAll:Rj,deselectAll:bj,selectAllFiltered:Ej,deselectAllFiltered:Pj,selectAllOnCurrentPage:Fj,deselectAllOnCurrentPage:Tj,getSelectedNodes:xj,getSelectedRows:Ij}},Aj={version:$,moduleName:"@ag-grid-community/row-api",apiFunctions:{redrawRows:cj,setRowNodeExpanded:dj,getRowNode:hj,addRenderedRowListener:pj,getRenderedNodes:fj,forEachNode:gj,getFirstDisplayedRow:mj,getFirstDisplayedRowIndex:bT,getLastDisplayedRow:vj,getLastDisplayedRowIndex:ET,getDisplayedRowAtIndex:Cj,getDisplayedRowCount:wj,getModel:yj}},_j={version:$,moduleName:"@ag-grid-community/scroll-api",apiFunctions:{getVerticalPixelRange:Cz,getHorizontalPixelRange:wz,ensureColumnVisible:mT,ensureIndexVisible:vT,ensureNodeVisible:yz}},Lj={version:$,moduleName:"@ag-grid-community/keyboard-navigation-api",apiFunctions:{getFocusedCell:ej,clearFocusedCell:tj,setFocusedCell:ij,setFocusedHeader:rj,tabToNextCell:sj,tabToPreviousCell:nj}},Oj={version:$,moduleName:"@ag-grid-community/event-api",apiFunctions:{addEventListener:Q2,addGlobalListener:X2,removeEventListener:J2,removeGlobalListener:Z2}},Nj={version:$,moduleName:"@ag-grid-community/cell-api",apiFunctions:{expireValueCache:z2,getValue:U2,getCellValue:ST}},Gj={version:$,moduleName:"@ag-grid-community/menu-api",apiFunctions:{showColumnMenuAfterButtonClick:oj,showColumnMenuAfterMouseClick:lj,showColumnMenu:aj,hidePopupMenu:uj}},Hj={version:$,moduleName:"@ag-grid-community/sort-api",apiFunctions:{onSortChanged:Dj}},Vj={version:$,moduleName:"@ag-grid-community/api",dependantModules:[kj,I2,Mj,y2,Aj,E2,_j,A2,Lj,Oj,W2,Nj,Gj,Hj]};function Bj(e){var t;return((t=e.stateService)==null?void 0:t.getState())??{}}var Wj=class extends T{constructor(){super(...arguments),this.beanName="stateService",this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=It(()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=It(()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),0),this.onRowSelectedDebounced=It(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}wireBeans(e){this.filterManager=e.filterManager,this.ctrlsService=e.ctrlsService,this.pivotResultColsService=e.pivotResultColsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnGroupStateService=e.columnGroupStateService,this.columnGetStateService=e.columnGetStateService,this.paginationService=e.paginationService,this.rowModel=e.rowModel,this.selectionService=e.selectionService,this.expansionService=e.expansionService,this.columnAnimationService=e.columnAnimationService,this.columnApplyStateService=e.columnApplyStateService,this.sideBarService=e.sideBarService,this.rangeService=e.rangeService}postConstruct(){this.isClientSideRowModel=this.rowModel.getType()==="clientSide",this.cachedState=this.gos.get("initialState")??{},this.ctrlsService.whenReady(()=>this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnGridReady()));const[e,t,i]=this.addManagedEventListeners({newColumnsLoaded:({source:s})=>{s==="gridInitializing"&&(e(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnColumnsInitialised()))},rowCountReady:()=>{t==null||t(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnRowCountReady())},firstDataRendered:()=>{i==null||i(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnFirstDataRendered())}})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState());const e=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:e,sideBarUpdated:e})}setupStateOnColumnsInitialised(){const e=this.gos.get("initialState")??{};this.setColumnState(e),this.setColumnGroupState(e),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState()),this.addManagedEventListeners({columnValueChanged:()=>this.updateColumnState(["aggregation"]),columnMoved:()=>this.updateColumnState(["columnOrder"]),columnPinned:()=>this.updateColumnState(["columnPinning"]),columnResized:()=>this.updateColumnState(["columnSizing"]),columnVisible:()=>this.updateColumnState(["columnVisibility"]),columnPivotChanged:()=>this.updateColumnState(["pivot"]),columnPivotModeChanged:()=>this.updateColumnState(["pivot"]),columnRowGroupChanged:()=>this.updateColumnState(["rowGroup"]),sortChanged:()=>this.updateColumnState(["sort"]),newColumnsLoaded:()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setupStateOnRowCountReady(){const{filter:e,rowGroupExpansion:t,rowSelection:i,pagination:s}=this.gos.get("initialState")??{},n=this.gos.get("advancedFilterModel");(e||n)&&this.setFilterState(e,n),t&&this.setRowGroupExpansionState(t),i&&this.setRowSelectionState(i),s&&this.setPaginationState(s),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState()),this.addManagedEventListeners({filterChanged:()=>this.updateCachedState("filter",this.getFilterState()),rowGroupOpened:()=>this.onRowGroupOpenedDebounced(),expandOrCollapseAll:()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:r=>{(r.newPage||r.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())}})}setupStateOnFirstDataRendered(){const{scroll:e,rangeSelection:t,focusedCell:i,columnOrder:s}=this.gos.get("initialState")??{};i&&this.setFocusedCellState(i),t&&this.setRangeSelectionState(t),e&&this.setScrollState(e),this.setColumnPivotState(!!(s!=null&&s.orderedColIds)),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState()),this.updateCachedState("rangeSelection",this.getRangeSelectionState()),this.updateCachedState("scroll",this.getScrollState()),this.addManagedEventListeners({cellFocused:()=>this.updateCachedState("focusedCell",this.getFocusedCellState()),rangeSelectionChanged:n=>{n.finished&&this.updateCachedState("rangeSelection",this.getRangeSelectionState())},bodyScrollEnd:()=>this.updateCachedState("scroll",this.getScrollState())})}getColumnState(){const e=this.columnModel.isPivotMode(),t=[],i=[],s=[],n=[],r=[],o=[],l=[],a=[],u=[],c=this.columnGetStateService.getColumnState();for(let d=0;d<c.length;d++){const{colId:h,sort:p,sortIndex:f,rowGroup:m,rowGroupIndex:w,aggFunc:v,pivot:g,pivotIndex:y,pinned:S,hide:b,width:R,flex:E}=c[d];u.push(h),p&&(t[f??0]={colId:h,sort:p}),m&&(i[w??0]=h),typeof v=="string"&&s.push({colId:h,aggFunc:v}),g&&(n[y??0]=h),S&&(S==="right"?o:r).push(h),b&&l.push(h),(E||R)&&a.push({colId:h,flex:E??void 0,width:R})}return{sort:t.length?{sortModel:t}:void 0,rowGroup:i.length?{groupColIds:i}:void 0,aggregation:s.length?{aggregationModel:s}:void 0,pivot:n.length||e?{pivotMode:e,pivotColIds:n}:void 0,columnPinning:r.length||o.length?{leftColIds:r,rightColIds:o}:void 0,columnVisibility:l.length?{hiddenColIds:l}:void 0,columnSizing:a.length?{columnSizingModel:a}:void 0,columnOrder:u.length?{orderedColIds:u}:void 0}}setColumnState(e){const{sort:t,rowGroup:i,aggregation:s,pivot:n,columnPinning:r,columnVisibility:o,columnSizing:l,columnOrder:a}=e,u={},c=f=>{let m=u[f];return m||(m={colId:f},u[f]=m,m)};t&&t.sortModel.forEach(({colId:f,sort:m},w)=>{const v=c(f);v.sort=m,v.sortIndex=w}),i&&i.groupColIds.forEach((f,m)=>{const w=c(f);w.rowGroup=!0,w.rowGroupIndex=m}),s&&s.aggregationModel.forEach(({colId:f,aggFunc:m})=>{c(f).aggFunc=m}),n&&(n.pivotColIds.forEach((f,m)=>{const w=c(f);w.pivot=!0,w.pivotIndex=m}),this.gos.updateGridOptions({options:{pivotMode:n.pivotMode},source:"gridInitializing"})),r&&(r.leftColIds.forEach(f=>{c(f).pinned="left"}),r.rightColIds.forEach(f=>{c(f).pinned="right"})),o&&o.hiddenColIds.forEach(f=>{c(f).hide=!0}),l&&l.columnSizingModel.forEach(({colId:f,flex:m,width:w})=>{const v=c(f);v.flex=m??null,v.width=w});const d=a==null?void 0:a.orderedColIds,h=!!(d!=null&&d.length),p=h?d.map(f=>c(f)):Object.values(u);if(p.length){this.columnStates=p;const f={sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};this.columnApplyStateService.applyColumnState({state:p,applyOrder:h,defaultState:f},"gridInitializing")}}setColumnPivotState(e){const t=this.columnStates;this.columnStates=void 0;const i=this.columnGroupStates;if(this.columnGroupStates=void 0,!!this.pivotResultColsService.isPivotResultColsPresent()){if(t){const s=[];for(const n of t)this.pivotResultColsService.getPivotResultCol(n.colId)&&s.push(n);this.columnApplyStateService.applyColumnState({state:s,applyOrder:e},"gridInitializing")}i&&this.columnGroupStateService.setColumnGroupState(i,"gridInitializing")}}getColumnGroupState(){const e=this.columnGroupStateService.getColumnGroupState(),t=[];return e.forEach(({groupId:i,open:s})=>{s&&t.push(i)}),t.length?{openColumnGroupIds:t}:void 0}setColumnGroupState(e){var n;if(!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;const t=new Set((n=e.columnGroup)==null?void 0:n.openColumnGroupIds),s=this.columnGroupStateService.getColumnGroupState().map(({groupId:r})=>{const o=t.has(r);return o&&t.delete(r),{groupId:r,open:o}});t.forEach(r=>{s.push({groupId:r,open:!0})}),s.length&&(this.columnGroupStates=s),this.columnGroupStateService.setColumnGroupState(s,"gridInitializing")}getFilterState(){var i,s;let e=(i=this.filterManager)==null?void 0:i.getFilterModel();e&&Object.keys(e).length===0&&(e=void 0);const t=((s=this.filterManager)==null?void 0:s.getAdvancedFilterModel())??void 0;return e||t?{filterModel:e,advancedFilterModel:t}:void 0}setFilterState(e,t){var n,r;const{filterModel:i,advancedFilterModel:s}=e??{advancedFilterModel:t};i&&((n=this.filterManager)==null||n.setFilterModel(i,"columnFilter")),s&&((r=this.filterManager)==null||r.setAdvancedFilterModel(s))}getRangeSelectionState(){var t;const e=(t=this.rangeService)==null?void 0:t.getCellRanges().map(i=>{const{id:s,type:n,startRow:r,endRow:o,columns:l,startColumn:a}=i;return{id:s,type:n,startRow:r,endRow:o,colIds:l.map(u=>u.getColId()),startColId:a.getColId()}});return e!=null&&e.length?{cellRanges:e}:void 0}setRangeSelectionState(e){if(!this.gos.get("enableRangeSelection")||!this.rangeService)return;const t=[];e.cellRanges.forEach(i=>{const s=[];if(i.colIds.forEach(r=>{const o=this.columnModel.getCol(r);o&&s.push(o)}),!s.length)return;let n=this.columnModel.getCol(i.startColId);if(!n){const r=this.visibleColsService.getAllCols(),o=new Set(s);n=r.find(l=>o.has(l))}t.push({...i,columns:s,startColumn:n})}),this.rangeService.setCellRanges(t)}getScrollState(){var s;if(!this.isClientSideRowModel)return;const e=(s=this.ctrlsService.getGridBodyCtrl())==null?void 0:s.getScrollFeature(),{left:t}=(e==null?void 0:e.getHScrollPosition())??{left:0},{top:i}=(e==null?void 0:e.getVScrollPosition())??{top:0};return i||t?{top:i,left:t}:void 0}setScrollState(e){var s;if(!this.isClientSideRowModel)return;const{top:t,left:i}=e;(s=this.ctrlsService.getGridBodyCtrl())==null||s.getScrollFeature().setScrollPosition(t,i)}getSideBarState(){var e,t;return(t=(e=this.sideBarService)==null?void 0:e.getSideBarComp())==null?void 0:t.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.focusService.getFocusedCell();if(e){const{column:t,rowIndex:i,rowPinned:s}=e;return{colId:t.getColId(),rowIndex:i,rowPinned:s}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{colId:t,rowIndex:i,rowPinned:s}=e;this.focusService.setFocusedCell({column:this.columnModel.getCol(t),rowIndex:i,rowPinned:s,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){if(!this.paginationService)return;const e=this.paginationService.getCurrentPage(),t=this.gos.get("paginationAutoPageSize")?void 0:this.paginationService.getPageSize();if(!(!e&&!t))return{page:e,pageSize:t}}setPaginationState(e){this.paginationService&&(e.pageSize&&!this.gos.get("paginationAutoPageSize")&&this.paginationService.setPageSize(e.pageSize,"initialState"),typeof e.page=="number"&&this.paginationService.setPage(e.page))}getRowSelectionState(){var i;const e=this.selectionService.getSelectionState();return!e||!Array.isArray(e)&&(e.selectAll===!1||e.selectAllChildren===!1)&&!((i=e==null?void 0:e.toggledNodes)!=null&&i.length)?void 0:e}setRowSelectionState(e){this.selectionService.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){const e=this.expansionService.getExpandedRows();return e.length?{expandedRowGroupIds:e}:void 0}setRowGroupExpansionState(e){this.expansionService.expandRows(e.expandedRowGroupIds)}updateColumnState(e){const t=this.getColumnState();let i=!1;Object.entries(t).forEach(([s,n])=>{hd(n,this.cachedState[s])||(i=!0)}),this.cachedState={...this.cachedState,...t},i&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const i=this.cachedState[e];this.setCachedStateValue(e,t),hd(t,i)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState={...this.cachedState,[e]:t}}refreshStaleState(){this.staleStateKeys.forEach(e=>{switch(e){case"rowSelection":this.setCachedStateValue(e,this.getRowSelectionState());break}}),this.staleStateKeys.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach(t=>this.queuedUpdateSources.add(t)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const e=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear();const t={type:"stateUpdated",sources:e,state:this.cachedState};this.eventService.dispatchEvent(t)}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),e(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}},PT={version:$,moduleName:"@ag-grid-community/state-core",beans:[Wj]},zj={version:$,moduleName:"@ag-grid-community/state-api",apiFunctions:{getState:Bj},dependantModules:[PT]},Uj={version:$,moduleName:"@ag-grid-community/state",dependantModules:[PT,zj]};function jj(e){return e.rowModel.isLastRowIndexKnown()}function $j(e){var t;return((t=e.paginationService)==null?void 0:t.getPageSize())??100}function Kj(e){var t;return((t=e.paginationService)==null?void 0:t.getCurrentPage())??0}function qj(e){var t;return((t=e.paginationService)==null?void 0:t.getTotalPages())??1}function Yj(e){return e.paginationService?e.paginationService.getMasterRowCount():e.rowModel.getRowCount()}function Qj(e){var t;(t=e.paginationService)==null||t.goToNextPage()}function Jj(e){var t;(t=e.paginationService)==null||t.goToPreviousPage()}function Xj(e){var t;(t=e.paginationService)==null||t.goToFirstPage()}function Zj(e){var t;(t=e.paginationService)==null||t.goToLastPage()}function e$(e,t){var i;(i=e.paginationService)==null||i.goToPage(t)}var t$=class extends T{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}postConstruct(){this.ctrlsService.whenReady(e=>{this.centerRowsCtrl=e.center;const t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.paginationService.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.getViewportSizeFeature().getBodyHeight();if(e>0){const t=()=>{const i=Math.max(this.gos.getRowHeightAsNumber(),1),s=Math.floor(e/i);this.paginationService.setPageSize(s,"autoCalculated")};this.isBodyRendered?It(()=>t(),50)():(t(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};function i$(e,t,i){e.addManagedElementListeners(t,{keydown:s=>{if(!s.defaultPrevented&&s.key===F.TAB){const n=s.shiftKey;i.findNextFocusableElement(t,!1,n)||i.focusNextGridCoreContainer(n)&&s.preventDefault()}}})}var s$=class extends be{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.paginationService.getPageSize()||(this.paginationService.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.paginationService=e.paginationService}postConstruct(){this.addManagedPropertyListener("paginationPageSizeSelector",()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!(e!=null&&e.newPageSize))return;const t=this.paginationService.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp&&this.appendChild(this.selectPageSizeComp))}reset(){si(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get("paginationPageSizeSelector")!==!1}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.paginationService.getPageSize(),i=!t||!e.includes(t);i&&(e.unshift(""),M(`The paginationPageSize grid option is set to a value that is not in the list of page size options.
                Please make sure that the paginationPageSize grid option is set to one of the values in the 
                paginationPageSizeSelector array, or set the paginationPageSizeSelector to false to hide the page size selector.`)),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp));const s=this.localeService.getLocaleTextFunc(),n=s("pageSizeSelectorLabel","Page Size:"),r=e.map(l=>({value:String(l),text:String(l)})),o=s("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new Xv).addOptions(r).setValue(String(i?"":t)).setAriaLabel(o).setLabel(n).onValueChange(()=>this.handlePageSizeItemSelected()),this.hasEmptyOption=i}getPageSizeSelectorValues(){const e=[20,50,100],t=this.gos.get("paginationPageSizeSelector");return!Array.isArray(t)||!this.validateValues(t)?e:[...t].sort((i,s)=>i-s)}validateValues(e){if(!e.length)return M(`The paginationPageSizeSelector grid option is an empty array. This is most likely a mistake.
                If you want to hide the page size selector, please set the paginationPageSizeSelector to false.`),!1;for(let t=0;t<e.length;t++){const i=e[t],s=typeof i=="number",n=i>0;if(!s)return M(`The paginationPageSizeSelector grid option contains a non-numeric value.
                    Please make sure that all values in the paginationPageSizeSelector array are numbers.`),!1;if(!n)return M(`The paginationPageSizeSelector grid option contains a negative number or zero.
                    Please make sure that all values in the paginationPageSizeSelector array are positive.`),!1}return!0}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},n$={selector:"AG-PAGE-SIZE-SELECTOR",component:s$},r$=class extends Qz{constructor(){super(),this.btFirst=z,this.btPrevious=z,this.btNext=z,this.btLast=z,this.lbRecordCount=z,this.lbFirstRowOnPage=z,this.lbLastRowOnPage=z,this.lbCurrent=z,this.lbTotal=z,this.pageSizeComp=z,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1}wireBeans(e){this.rowNodeBlockLoader=e.rowNodeBlockLoader,this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.focusService=e.focusService}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[n$]);const{btFirst:t,btPrevious:i,btNext:s,btLast:n}=this;this.activateTabIndex([t,i,s,n]),t.insertAdjacentElement("afterbegin",Zt(e?"last":"first",this.gos)),i.insertAdjacentElement("afterbegin",Zt(e?"next":"previous",this.gos)),s.insertAdjacentElement("afterbegin",Zt(e?"previous":"next",this.gos)),n.insertAdjacentElement("afterbegin",Zt(e?"first":"last",this.gos)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:r=>{this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(r):this.focusService.focusGridInnerElement(r)},forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){const t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(e=>{const{el:t,fn:i}=e;this.addManagedListeners(t,{click:i,keydown:s=>{(s.key===F.ENTER||s.key===F.SPACE)&&(s.preventDefault(),i())}})}),i$(this,this.getGui(),this.focusService),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationService.goToFirstPage()}setCurrentPageLabel(){const e=this.paginationService.getTotalPages()>0,t=this.paginationService.getCurrentPage(),i=e?t+1:0;this.lbCurrent.textContent=this.formatNumber(i)}formatNumber(e){const t=this.gos.getCallback("paginationNumberFormatter");if(t)return t({value:e});const i=this.localeService.getLocaleTextFunc(),s=i("thousandSeparator",","),n=i("decimalSeparator",".");return qV(e,s,n)}getTemplate(){const e=this.localeService.getLocaleTextFunc(),t=e("page","Page"),i=e("to","to"),s=e("of","of"),n=e("firstPage","First Page"),r=e("previousPage","Previous Page"),o=e("nextPage","Next Page"),l=e("lastPage","Last Page"),a=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${a}">
                <ag-page-size-selector data-ref="pageSizeComp"></ag-page-size-selector>
                <span class="ag-paging-row-summary-panel" role="status">
                    <span id="ag-${a}-first-row" data-ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${a}-to">${i}</span>
                    <span id="ag-${a}-last-row" data-ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${a}-of">${s}</span>
                    <span id="ag-${a}-row-count" data-ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div data-ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${n}"></div>
                    <div data-ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${r}"></div>
                    <span class="ag-paging-description" role="status">
                        <span id="ag-${a}-start-page">${t}</span>
                        <span id="ag-${a}-start-page-number" data-ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${a}-of-page">${s}</span>
                        <span id="ag-${a}-of-page-number" data-ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div data-ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>
                    <div data-ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${l}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationService.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationService.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationService.goToLastPage()}enableOrDisableButtons(){const e=this.paginationService.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),i=this.paginationService.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const s=this.isZeroPagesToDisplay(),n=e===i-1;this.nextButtonDisabled=n||s,this.lastButtonDisabled=!t||s||e===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){dH(e,t),e.classList.toggle("ag-disabled",t)}updateRowLabels(){var o;const e=this.paginationService.getCurrentPage(),t=this.paginationService.getPageSize(),i=this.rowModel.isLastRowIndexKnown(),s=this.rowModel.isLastRowIndexKnown()?this.paginationService.getMasterRowCount():null;let n,r;if(this.isZeroPagesToDisplay()?n=r=0:(n=t*e+1,r=n+t-1,i&&r>s&&(r=s)),this.lbFirstRowOnPage.textContent=this.formatNumber(n),(o=this.rowNodeBlockLoader)!=null&&o.isLoading()){const l=this.localeService.getLocaleTextFunc();this.lbLastRowOnPage.innerHTML=l("pageLastRowUnknown","?")}else this.lbLastRowOnPage.textContent=this.formatNumber(r)}isZeroPagesToDisplay(){const e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages();return e&&t===0}setTotalLabels(){const e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages(),i=e?this.paginationService.getMasterRowCount():null;if(i===1){const s=this.rowModel.getRow(0);if(s&&s.group&&!(s.groupData||s.aggData)){this.setTotalLabelsToZero();return}}if(e)this.lbTotal.textContent=this.formatNumber(t),this.lbRecordCount.textContent=this.formatNumber(i);else{const s=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=s,this.lbRecordCount.innerHTML=s}}setTotalLabelsToZero(){this.lbFirstRowOnPage.textContent=this.formatNumber(0),this.lbCurrent.textContent=this.formatNumber(0),this.lbLastRowOnPage.textContent=this.formatNumber(0),this.lbTotal.textContent=this.formatNumber(0),this.lbRecordCount.textContent=this.formatNumber(0)}},o$={selector:"AG-PAGINATION",component:r$},l$=class extends T{constructor(){super(...arguments),this.beanName="paginationService",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.active=this.gos.get("pagination"),this.pageSizeFromGridOptions=this.gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return o$}isPaginateChildRows(){return this.gos.get("groupRemoveSingleChildren")||this.gos.get("groupRemoveLowestSingleChildren")?!0:this.gos.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){!this.active||this.currentPage===e||typeof this.currentPage!="number"||(this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0}))}isRowPresent(e){return e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;const t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){return this.active?this.getPageForIndex(e.rowIndex)===this.currentPage:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return A(this.pageSizeAutoCalculated)?this.pageSizeAutoCalculated:A(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:A(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:A(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.pageBoundsService.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){const i=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}i!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();const t=this.pageSize*this.currentPage;let i=this.pageSize*(this.currentPage+1)-1;if(i>e&&(i=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(t),i===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{const s=this.rowModel.getTopLevelRowDisplayedIndex(i+1);this.bottomDisplayedRowIndex=s-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){const{keepRenderedRows:t=!1,newPage:i=!1,newPageSize:s=!1}=e,n={type:"paginationChanged",animate:!1,newData:!1,newPage:i,newPageSize:s,keepRenderedRows:t};this.eventService.dispatchEvent(n)}},FT={version:$,moduleName:"@ag-grid-community/pagination-core",beans:[l$,t$]},a$={version:$,moduleName:"@ag-grid-community/pagination-api",dependantModules:[FT],apiFunctions:{paginationIsLastPageFound:jj,paginationGetPageSize:$j,paginationGetCurrentPage:Kj,paginationGetTotalPages:qj,paginationGetRowCount:Yj,paginationGoToNextPage:Qj,paginationGoToPreviousPage:Jj,paginationGoToFirstPage:Xj,paginationGoToLastPage:Zj,paginationGoToPage:e$}},u$={version:$,moduleName:"@ag-grid-community/pagination",dependantModules:[FT,a$]},P="@ag-grid-community/core",zi="@ag-grid-community/client-side-row-model",AS="@ag-grid-community/csv-export",_u="@ag-grid-community/infinite-row-model",Lu="@ag-grid-enterprise/advanced-filter",bi="@ag-grid-enterprise/charts",Er="@ag-grid-enterprise/clipboard",gl="@ag-grid-enterprise/excel-export",Ou="@ag-grid-enterprise/master-detail",jp="@ag-grid-enterprise/menu",$p="@ag-grid-enterprise/range-selection",we="@ag-grid-enterprise/row-grouping",os="@ag-grid-enterprise/server-side-row-model",Ui="@ag-grid-enterprise/side-bar",c$="@ag-grid-enterprise/status-bar",d$={dispatchEvent:P,getState:P,getGridId:P,destroy:P,isDestroyed:P,getGridOption:P,setGridOption:P,updateGridOptions:P,setNodesSelected:P,selectAll:P,deselectAll:P,selectAllFiltered:P,deselectAllFiltered:P,selectAllOnCurrentPage:P,deselectAllOnCurrentPage:P,getSelectedNodes:P,getSelectedRows:P,redrawRows:P,setRowNodeExpanded:P,getRowNode:P,addRenderedRowListener:P,getRenderedNodes:P,forEachNode:P,getFirstDisplayedRow:P,getFirstDisplayedRowIndex:P,getLastDisplayedRow:P,getLastDisplayedRowIndex:P,getDisplayedRowAtIndex:P,getDisplayedRowCount:P,getModel:P,getVerticalPixelRange:P,getHorizontalPixelRange:P,ensureColumnVisible:P,ensureIndexVisible:P,ensureNodeVisible:P,getFocusedCell:P,clearFocusedCell:P,setFocusedCell:P,tabToNextCell:P,tabToPreviousCell:P,setFocusedHeader:P,addEventListener:P,addGlobalListener:P,removeEventListener:P,removeGlobalListener:P,expireValueCache:P,getValue:P,getCellValue:P,showColumnMenuAfterButtonClick:P,showColumnMenuAfterMouseClick:P,showColumnMenu:P,hidePopupMenu:P,onSortChanged:P,getPinnedTopRowCount:P,getPinnedBottomRowCount:P,getPinnedTopRow:P,getPinnedBottomRow:P,showLoadingOverlay:P,showNoRowsOverlay:P,hideOverlay:P,setGridAriaProperty:P,refreshCells:P,flashCells:P,refreshHeader:P,isAnimationFrameQueueEmpty:P,flushAllAnimationFrames:P,getSizesForCurrentTheme:P,getCellRendererInstances:P,addRowDropZone:P,removeRowDropZone:P,getRowDropZoneParams:P,getColumnDef:P,getColumnDefs:P,sizeColumnsToFit:P,setColumnGroupOpened:P,getColumnGroup:P,getProvidedColumnGroup:P,getDisplayNameForColumn:P,getDisplayNameForColumnGroup:P,getColumn:P,getColumns:P,applyColumnState:P,getColumnState:P,resetColumnState:P,getColumnGroupState:P,setColumnGroupState:P,resetColumnGroupState:P,isPinning:P,isPinningLeft:P,isPinningRight:P,getDisplayedColAfter:P,getDisplayedColBefore:P,setColumnVisible:P,setColumnsVisible:P,setColumnPinned:P,setColumnsPinned:P,getAllGridColumns:P,getDisplayedLeftColumns:P,getDisplayedCenterColumns:P,getDisplayedRightColumns:P,getAllDisplayedColumns:P,getAllDisplayedVirtualColumns:P,moveColumn:P,moveColumnByIndex:P,moveColumns:P,setColumnWidth:P,setColumnWidths:P,getLeftDisplayedColumnGroups:P,getCenterDisplayedColumnGroups:P,getRightDisplayedColumnGroups:P,getAllDisplayedColumnGroups:P,autoSizeColumn:P,autoSizeColumns:P,autoSizeAllColumns:P,undoCellEditing:P,redoCellEditing:P,getCellEditorInstances:P,getEditingCells:P,stopEditing:P,startEditingCell:P,getCurrentUndoSize:P,getCurrentRedoSize:P,isAnyFilterPresent:P,onFilterChanged:P,isColumnFilterPresent:P,getFilterInstance:P,getColumnFilterInstance:P,destroyFilter:P,setFilterModel:P,getFilterModel:P,getColumnFilterModel:P,setColumnFilterModel:P,showColumnFilter:P,isQuickFilterPresent:P,getQuickFilter:P,resetQuickFilter:P,paginationIsLastPageFound:P,paginationGetPageSize:P,paginationGetCurrentPage:P,paginationGetTotalPages:P,paginationGetRowCount:P,paginationGoToNextPage:P,paginationGoToPreviousPage:P,paginationGoToFirstPage:P,paginationGoToLastPage:P,paginationGoToPage:P,expandAll:P,collapseAll:P,onRowHeightChanged:P,setRowCount:P,getCacheBlockState:P,onGroupExpandedOrCollapsed:zi,refreshClientSideRowModel:zi,forEachLeafNode:zi,forEachNodeAfterFilter:zi,forEachNodeAfterFilterAndSort:zi,resetRowHeights:zi,applyTransaction:zi,applyTransactionAsync:zi,flushAsyncTransactions:zi,getBestCostNodeSelection:zi,getDataAsCsv:AS,exportDataAsCsv:AS,refreshInfiniteCache:_u,purgeInfiniteCache:_u,getInfiniteRowCount:_u,isLastRowIndexKnown:_u,getAdvancedFilterModel:Lu,setAdvancedFilterModel:Lu,showAdvancedFilterBuilder:Lu,hideAdvancedFilterBuilder:Lu,getChartModels:bi,getChartRef:bi,getChartImageDataURL:bi,downloadChart:bi,openChartToolPanel:bi,closeChartToolPanel:bi,createRangeChart:bi,createPivotChart:bi,createCrossFilterChart:bi,updateChart:bi,restoreChart:bi,copyToClipboard:Er,cutToClipboard:Er,copySelectedRowsToClipboard:Er,copySelectedRangeToClipboard:Er,copySelectedRangeDown:Er,pasteFromClipboard:Er,getDataAsExcel:gl,exportDataAsExcel:gl,getSheetDataForExcel:gl,getMultipleSheetsAsExcel:gl,exportMultipleSheetsAsExcel:gl,addDetailGridInfo:Ou,removeDetailGridInfo:Ou,getDetailGridInfo:Ou,forEachDetailGridInfo:Ou,showContextMenu:jp,showColumnChooser:jp,hideColumnChooser:jp,getCellRanges:$p,addCellRange:$p,clearRangeSelection:$p,addAggFunc:we,addAggFuncs:we,clearAggFuncs:we,setColumnAggFunc:we,isPivotMode:we,getPivotResultColumn:we,setValueColumns:we,getValueColumns:we,removeValueColumn:we,removeValueColumns:we,addValueColumn:we,addValueColumns:we,setRowGroupColumns:we,removeRowGroupColumn:we,removeRowGroupColumns:we,addRowGroupColumn:we,addRowGroupColumns:we,getRowGroupColumns:we,moveRowGroupColumn:we,setPivotColumns:we,removePivotColumn:we,removePivotColumns:we,addPivotColumn:we,addPivotColumns:we,getPivotColumns:we,setPivotResultColumns:we,getPivotResultColumns:we,getServerSideSelectionState:os,setServerSideSelectionState:os,applyServerSideTransaction:os,applyServerSideTransactionAsync:os,applyServerSideRowData:os,retryServerSideLoads:os,flushServerSideAsyncTransactions:os,refreshServerSide:os,getServerSideGroupLevelState:os,isSideBarVisible:Ui,setSideBarVisible:Ui,setSideBarPosition:Ui,openToolPanel:Ui,closeToolPanel:Ui,getOpenedToolPanel:Ui,refreshToolPanel:Ui,isToolPanelShowing:Ui,getToolPanelInstance:Ui,getSideBar:Ui,getStatusPanel:c$},qt="clientSide",_t="serverSide",Pr="infinite",h$={onGroupExpandedOrCollapsed:[qt],refreshClientSideRowModel:[qt],forEachLeafNode:[qt],forEachNodeAfterFilter:[qt],forEachNodeAfterFilterAndSort:[qt],resetRowHeights:[qt],applyTransaction:[qt],applyTransactionAsync:[qt],flushAsyncTransactions:[qt],getBestCostNodeSelection:[qt],getServerSideSelectionState:[_t],setServerSideSelectionState:[_t],applyServerSideTransaction:[_t],applyServerSideTransactionAsync:[_t],applyServerSideRowData:[_t],retryServerSideLoads:[_t],flushServerSideAsyncTransactions:[_t],refreshServerSide:[_t],getServerSideGroupLevelState:[_t],refreshInfiniteCache:[Pr],purgeInfiniteCache:[Pr],getInfiniteRowCount:[Pr],isLastRowIndexKnown:[Pr],expandAll:[qt,_t],collapseAll:[qt,_t],onRowHeightChanged:[qt,_t],setRowCount:[Pr,_t],getCacheBlockState:[Pr,_t]},p$={getValue:{version:"v31.3",new:"getCellValue"},getFirstDisplayedRow:{version:"v31.1",new:"getFirstDisplayedRowIndex"},getLastDisplayedRow:{version:"v31.1",new:"getLastDisplayedRowIndex"},getModel:{version:"v31.1",message:"Please use the appropriate grid API methods instead."},setColumnVisible:{version:"v31.1",old:"setColumnVisible(key,visible)",new:"setColumnsVisible([key],visible)"},setColumnPinned:{version:"v31.1",old:"setColumnPinned(key,pinned)",new:"setColumnsPinned([key],pinned)"},moveColumn:{version:"v31.1",old:"moveColumn(key, toIndex)",new:"moveColumns([key], toIndex)"},setColumnWidth:{version:"v31.1",old:"setColumnWidth(col, width)",new:"setColumnWidths([{key: col, newWidth: width}])"},autoSizeColumn:{version:"v31.1",old:"autoSizeColumn(key, skipHeader)",new:"autoSizeColumns([key], skipHeader)"},addAggFunc:{version:"v31.1",old:"addAggFunc(key, func)",new:"addAggFuncs({ key: func })"},removeValueColumn:{version:"v31.1",old:"removeValueColumn(colKey)",new:"removeValueColumns([colKey])"},addValueColumn:{version:"v31.1",old:"addValueColumn(colKey)",new:"addValueColumns([colKey])"},removeRowGroupColumn:{version:"v31.1",old:"removeRowGroupColumn(colKey)",new:"removeRowGroupColumns([colKey])"},addRowGroupColumn:{version:"v31.1",old:"addRowGroupColumn(colKey)",new:"addRowGroupColumns([colKey])"},removePivotColumn:{version:"v31.1",old:"removePivotColumn(colKey)",new:"removePivotColumns([colKey])"},addPivotColumn:{version:"v31.1",old:"addPivotColumn(colKey)",new:"addPivotColumns([colKey])"},showColumnMenuAfterButtonClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere."},showColumnMenuAfterMouseClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere."},getFilterInstance:{version:"v31.1",message:"'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."},showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'}};function f$(e,t){const i=d$[e];i?Rt.__assertRegistered(i,`api.${e}`,t)&&M(`API function '${e}' not registered to module '${i}'`):oe(`Unknown API function: '${e}' on GridApi.`)}function g$(e,t,i){const s=p$[e];if(s){const{version:r,new:o,old:l,message:a}=s,u=l??e;return(...c)=>{const d=o?`Please use ${o} instead. `:"";return M(`Since ${r} api.${u} is deprecated. ${d}${a??""}`),t.apply(t,c)}}const n=h$[e];return n?(...r)=>{const o=i.rowModel.getType();if(!n.includes(o)){oe(`api.${e} can only be called when gridOptions.rowModelType is ${n.join(" or ")}`);return}return t.apply(t,r)}:t}var m$={columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"}},Vs=(e,t)=>(t.rowModelType??"clientSide")==="clientSide"?{module:"@ag-grid-enterprise/row-grouping"}:null,v$={enableRowGroup:Vs,rowGroup:Vs,rowGroupIndex:Vs,enablePivot:Vs,enableValue:Vs,pivot:Vs,pivotIndex:Vs,aggFunc:Vs,cellEditor:e=>e.cellEditor==="agRichSelect"||e.cellEditor==="agRichSelectCellEditor"?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:e=>{var i;const t=["columnsMenuTab","generalMenuTab"];return(i=e.menuTabs)!=null&&i.some(s=>t.includes(s))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],dependencies:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],dependencies:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],dependencies:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},children:()=>Yr},C$={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0},w$=Object.keys(C$),Yr={objectName:"colDef",allProperties:w$,docsUrl:"column-properties/",deprecations:m$,validations:v$},y$=()=>({advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."},groupIncludeFooter:{version:"31.3",message:"Use `groupTotalRow` instead."},groupIncludeTotalFooter:{version:"31.3",message:"Use `grandTotalRow` instead."},suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."}}),S$={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0},R$=()=>({sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",dependencies:e=>{const t=e.rowModelType??"clientSide";switch(t){case"clientSide":{const i=`treeData requires 'getDataPath' in the ${t} row model.`;return e.getDataPath?null:i}case"serverSide":{const i=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${t} row model.`;return e.isServerSideGroup&&e.getServerSideGroupKey?null:i}}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],dependencies:e=>{switch(e.rowModelType??"clientSide"){case"clientSide":return null;case"serverSide":{const i="groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll";return e.suppressServerSideInfiniteScroll?i:null}}return null}},groupHideOpenParents:{supportedRowModels:["clientSide"],dependencies:{groupTotalRow:[void 0,"bottom"]}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},columnDefs:()=>Yr,defaultColDef:()=>Yr,defaultColGroupDef:()=>Yr,autoGroupColumnDef:()=>Yr}),b$=()=>({objectName:"gridOptions",allProperties:[...ba.ALL_PROPERTIES,...Ea.EVENT_CALLBACKS],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:y$(),validations:R$()}),E$=class extends T{constructor(){super(...arguments),this.beanName="validationService"}wireBeans(e){this.beans=e,this.gridOptions=e.gridOptions}postConstruct(){this.processGridOptions(this.gridOptions)}processGridOptions(e){this.processOptions(e,b$())}processColumnDefs(e){this.processOptions(e,Yr)}warnMissingApiFunction(e){f$(e,this.gridId)}validateApiFunction(e,t){return g$(e,t,this.beans)}processOptions(e,t){const{validations:i,deprecations:s,allProperties:n,propertyExceptions:r,objectName:o,docsUrl:l}=t;n&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...r??[],...Object.keys(s)],n,o,l);const a=new Set;Object.keys(e).forEach(c=>{const d=s[c];if(d)if("renamed"in d){const{renamed:g,version:y}=d;a.add(`As of v${y}, ${String(c)} is deprecated. Please use ${String(g)} instead.`),e[g]=e[c]}else{const{message:g,version:y}=d;a.add(`As of v${y}, ${String(c)} is deprecated. ${g??""}`)}const h=e[c];if(h==null||h===!1)return;const p=i[c];let f;if(p)if(typeof p=="function"){const g=p(e,this.gridOptions);if(!g)return;if("objectName"in g){const y=e[c];if(Array.isArray(y)){y.forEach(S=>{this.processOptions(S,g)});return}this.processOptions(e[c],g);return}f=g}else f=p;else return;const{module:m,dependencies:w,supportedRowModels:v}=f;if(v){const g=this.gridOptions.rowModelType??"clientSide";if(!v.includes(g)){a.add(`${String(c)} is not supported with the '${g}' row model.`);return}}if(m){const g=Array.isArray(m)?m:[m];let y=!0;if(g.forEach(S=>{Rt.__assertRegistered(S,String(c),this.gridId)||(y=!1,a.add(`${String(c)} is only available when ${S} is loaded.`))}),!y)return}if(w){const g=this.checkForWarning(c,w,e);if(g){a.add(g);return}}}),a.size>0&&a.forEach(c=>{M(c)})}checkForWarning(e,t,i){if(typeof t=="function")return t(i,this.gridOptions);const n=Object.entries(t).find(([l,a])=>{const u=i[l];return!a.includes(u)});if(!n)return null;const[r,o]=n;return o.length>1?`'${String(e)}' requires '${r}' to be one of [${o.join(", ")}].`:`'${String(e)}' requires '${r}' to be ${o[0]}.`}checkProperties(e,t,i,s,n){const r=["__ob__","__v_skip","__metadata__"],o=JH(Object.getOwnPropertyNames(e),[...r,...t,...i],i);if(Ii(o,(l,a)=>{let u=`invalid ${s} property '${l}' did you mean any of these: ${a.slice(0,8).join(", ")}.`;i.includes("context")&&(u+=`
If you are trying to annotate ${s} with application data, use the '${s}.context' property instead.`),M(u)}),Object.keys(o).length>0&&n){const l=this.getFrameworkOverrides().getDocLink(n);M(`to see all the valid ${s} properties please check: ${l}`)}}},P$={version:$,moduleName:"@ag-grid-community/core"},F$={version:$,moduleName:"@ag-grid-community/core-validations",beans:[E$]},TT={version:$,moduleName:"@ag-grid-community/core-community-features",dependantModules:[P$,F$,Gz,MB,Uj,w2,xU,u$,Vj]},T$=class extends T{constructor(){super(...arguments),this.beanName="gridDestroyService",this.destroyCalled=!1}wireBeans(e){this.beans=e}destroy(){var t,i;if(this.destroyCalled)return;const e={type:"gridPreDestroyed",state:((t=this.beans.stateService)==null?void 0:t.getState())??{}};this.eventService.dispatchEvent(e),this.destroyCalled=!0,(i=this.beans.ctrlsService.get("gridCtrl"))==null||i.destroyGridUi(),this.beans.context.destroy(),super.destroy()}isDestroyCalled(){return this.destroyCalled}},oc=new Set(["gridPreDestroyed","fillStart","pasteStart"]),x$=e=>e==="checkboxSelected"||e==="rowClicked"||e==="spaceKey"||e==="uiSelectAll"||e==="uiSelectAllCurrentPage"||e==="uiSelectAllFiltered",I$=new Map([...ba.BOOLEAN_PROPERTIES.map(e=>[e,bg]),...ba.NUMBER_PROPERTIES.map(e=>[e,jF]),["groupAggFiltering",e=>typeof e=="function"?e:bg(e)],["pageSize",Wi(1)],["autoSizePadding",Wi(0)],["keepDetailRowsCount",Wi(1)],["rowBuffer",Wi(0)],["infiniteInitialRowCount",Wi(1)],["cacheOverflowSize",Wi(1)],["cacheBlockSize",Wi(1)],["serverSideInitialRowCount",Wi(1)],["viewportRowModelPageSize",Wi(1)],["viewportRowModelBufferSize",Wi(0)]]);function xT(e,t){const i=I$.get(e);return i?i(t):t}function D$(e){const t={};return Object.entries(e).forEach(([i,s])=>{const n=xT(i,s);t[i]=n}),t}var IT=class DT extends T{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new $o,this.globalEventHandlerFactory=t=>(i,s)=>{if(!this.isAlive())return;const n=oc.has(i);if(n&&!t||!n&&t)return;const r=Ea.getCallbackForEvent(i),o=this.gridOptions[r];typeof o=="function"&&this.frameworkOverrides.wrapOutgoing(()=>{o(s)})}}wireBeans(t){this.gridOptions=t.gridOptions,this.eGridDiv=t.eGridDiv,this.validationService=t.validationService,this.environment=t.environment,this.api=t.gridApi}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){const t=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),t),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.getScrollbarWidth(),this.addManagedEventListeners({gridOptionsChanged:({options:i})=>{this.updateGridOptions({options:i,force:!0,source:"gridOptionsUpdated"})}})}get(t){return this.gridOptions[t]??S$[t]}getCallback(t){return this.mergeGridCommonParams(this.gridOptions[t])}exists(t){return A(this.gridOptions[t])}mergeGridCommonParams(t){return t&&(s=>{const n=s;return n.api=this.api,n.context=this.gridOptionsContext,t(n)})}updateGridOptions({options:t,force:i,source:s="api"}){var o;const n={id:DT.changeSetId++,properties:[]},r=[];Object.entries(t).forEach(([l,a])=>{s==="api"&&nH[l]&&M(`${l} is an initial property and cannot be updated.`);const u=xT(l,a),c=i||typeof u=="object"&&s==="api",d=this.gridOptions[l];if(c||d!==u){this.gridOptions[l]=u;const h={type:l,currentValue:u,previousValue:d,changeSet:n,source:s};r.push(h)}}),(o=this.validationService)==null||o.processGridOptions(this.gridOptions),n.properties=r.map(l=>l.type),r.forEach(l=>{this.gridOptions.debug&&Mi(`Updated property ${l.type} from`,l.previousValue," to ",l.currentValue),this.propertyEventService.dispatchEvent(l)})}addPropertyEventListener(t,i){this.propertyEventService.addEventListener(t,i)}removePropertyEventListener(t,i){this.propertyEventService.removeEventListener(t,i)}getScrollbarWidth(){if(this.scrollbarWidth==null){const i=typeof this.gridOptions.scrollbarWidth=="number"&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:EH();i!=null&&(this.scrollbarWidth=i,this.eventService.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}isRowModelType(t){return this.gridOptions.rowModelType===t||t==="clientSide"&&X(this.gridOptions.rowModelType)}isDomLayout(t){return(this.gridOptions.domLayout??"normal")===t}isRowSelection(){return this.gridOptions.rowSelection==="single"||this.gridOptions.rowSelection==="multiple"}useAsyncEvents(){return!this.get("suppressAsyncEvents")}isGetRowHeightFunction(){return typeof this.gridOptions.getRowHeight=="function"}getRowHeightForNode(t,i=!1,s){if(s==null&&(s=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(i)return{height:s,estimated:!0};const r={node:t,data:t.data},o=this.getCallback("getRowHeight")(r);if(this.isNumeric(o))return o===0&&M("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,o),estimated:!1}}return t.detail&&this.get("masterDetail")?this.getMasterDetailRowHeight():{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:s,estimated:!1}}getMasterDetailRowHeight(){return this.get("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}}getRowHeightAsNumber(){if(!this.gridOptions.rowHeight||X(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();const t=this.environment.refreshRowHeightVariable();return t!==-1?t:(M("row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())}isNumeric(t){return!isNaN(t)&&typeof t=="number"&&isFinite(t)}getDomDataKey(){return this.domDataKey}getDomData(t,i){const s=t[this.getDomDataKey()];return s?s[i]:void 0}setDomData(t,i,s){const n=this.getDomDataKey();let r=t[n];X(r)&&(r={},t[n]=r),r[i]=s}getDocument(){let t=null;return this.gridOptions.getDocument&&A(this.gridOptions.getDocument)?t=this.gridOptions.getDocument():this.eGridDiv&&(t=this.eGridDiv.ownerDocument),t&&A(t)?t:document}getWindow(){return this.getDocument().defaultView||window}getRootNode(){return this.eGridDiv.getRootNode()}getActiveDomElement(){return this.getRootNode().activeElement}getAsyncTransactionWaitMillis(){return A(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50}isAnimateRows(){return this.get("ensureDomOrder")?!1:this.get("animateRows")}isGroupRowsSticky(){return!(this.get("paginateChildRows")||this.get("groupHideOpenParents")||this.isDomLayout("print"))}isColumnsSortingCoupledToGroup(){const t=this.gridOptions.autoGroupColumnDef;return!(t!=null&&t.comparator)&&!this.get("treeData")}getGroupAggFiltering(){const t=this.gridOptions.groupAggFiltering;if(typeof t=="function")return this.getCallback("groupAggFiltering");if(t===!0)return()=>!0}getGrandTotalRow(){const t=this.gridOptions.grandTotalRow;if(t)return t;if(this.gridOptions.groupIncludeTotalFooter)return"bottom"}getGroupTotalRowCallback(){const t=this.get("groupTotalRow");if(typeof t=="function")return this.getCallback("groupTotalRow");if(t)return()=>t;const i=this.get("groupIncludeFooter");if(typeof i=="function"){const s=this.getCallback("groupIncludeFooter");return n=>s(n)?"bottom":void 0}return()=>i?"bottom":void 0}isGroupMultiAutoColumn(){return this.gridOptions.groupDisplayType?this.gridOptions.groupDisplayType==="multipleColumns":this.get("groupHideOpenParents")}isGroupUseEntireRow(t){return t?!1:this.gridOptions.groupDisplayType==="groupRows"}getGridCommonParams(){return{api:this.api,context:this.gridOptionsContext}}addGridCommonParams(t){const i=t;return i.api=this.api,i.context=this.gridOptionsContext,i}getRowIdCallback(){const t=this.getCallback("getRowId");return t===void 0?t:i=>{let s=t(i);return typeof s!="string"&&(M("The getRowId callback must return a string. The ID ",s," is being cast to a string."),s=String(s)),s}}};IT.changeSetId=0;var k$=IT,M$=class extends T{constructor(){super(...arguments),this.beanName="headerPositionUtils"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}findHeader(e,t){let i,s;if(je(e.column)?i=this.visibleColsService.getGroupAtDirection(e.column,t):(s=`getCol${t}`,i=this.visibleColsService[s](e.column)),!i)return;const{headerRowIndex:n}=e;if(this.getHeaderRowType(n)!=="filter"){const l=[i];for(;i.getParent();)i=i.getParent(),l.push(i);i=l[l.length-1-n]}const{column:r,headerRowIndex:o}=this.getHeaderIndexToFocus(i,n);return{column:r,headerRowIndex:o}}getHeaderIndexToFocus(e,t){let i;if(je(e)&&this.isAnyChildSpanningHeaderHeight(e)&&e.isPadding()){const s=e;i=s.getLeafColumns()[0];let n=i;for(;n!==s;)t++,n=n.getParent()}return{column:i||e,headerRowIndex:t}}isAnyChildSpanningHeaderHeight(e){return e?e.getLeafColumns().some(t=>t.isSpanHeaderHeight()):!1}getColumnVisibleParent(e,t){const i=this.getHeaderRowType(t),s=i==="filter",n=i==="column";let r=s?e:e.getParent(),o=t-1,l=o;if(n&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;r&&r.isPadding();)r=r.getParent(),o--;l=o,o<0&&(r=e,o=t,l=void 0)}return{column:r,headerRowIndex:o,headerRowIndexWithoutSpan:l}}getColumnVisibleChild(e,t,i="After"){const s=this.getHeaderRowType(t);let n=e,r=t+1;const o=r;if(s==="group"){const l=e.getDisplayedLeafColumns(),a=i==="After"?l[0]:se(l),u=[];let c=a;for(;c.getParent()!==e;)c=c.getParent(),u.push(c);if(n=a,a.isSpanHeaderHeight())for(let d=u.length-1;d>=0;d--){const h=u[d];if(!h.isPadding()){n=h;break}r++}else n=se(u),n||(n=a)}return{column:n,headerRowIndex:r,headerRowIndexWithoutSpan:o}}getHeaderRowType(e){const t=this.ctrlsService.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){const i=this.visibleColsService.getAllCols(),s=i[t==="start"?0:i.length-1];if(!s)return;const r=this.ctrlsService.getHeaderRowContainerCtrl(s.getPinned()).getRowType(e);if(r=="group"){const o=this.visibleColsService.getColGroupAtLevel(s,e);return{headerRowIndex:e,column:o}}return{headerRowIndex:r==null?-1:e,column:s}}},A$=class extends T{constructor(){super(...arguments),this.beanName="localeService"}getLocaleTextFunc(){const e=this.gos.getCallback("getLocaleText");if(e)return(i,s,n)=>e({key:i,defaultValue:s,variableValues:n});const t=this.gos.get("localeText");return(i,s,n)=>{let r=t&&t[i];if(r&&n&&n.length){let o=0;for(;!(o>=n.length||r.indexOf("${variable}")===-1);)r=r.replace("${variable}",n[o++])}return r??s}}},_$=class extends T{constructor(){super(...arguments),this.beanName="apiEventService",this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new Lv(this.getFrameworkOverrides())}addEventListener(e,t){const i=this.frameworkEventWrappingService.wrap(t),s=this.gos.useAsyncEvents()&&!oc.has(e),n=s?this.asyncEventListeners:this.syncEventListeners;n.has(e)||n.set(e,new Set),n.get(e).add(i),this.eventService.addEventListener(e,i,s)}removeEventListener(e,t){var r;const i=this.frameworkEventWrappingService.unwrap(t),s=this.asyncEventListeners.get(e),n=!!(s!=null&&s.delete(i));n||(r=this.syncEventListeners.get(e))==null||r.delete(i),this.eventService.removeEventListener(e,i,n)}addGlobalListener(e){const t=this.frameworkEventWrappingService.wrapGlobal(e);if(this.gos.useAsyncEvents()){const s=(r,o)=>{oc.has(r)&&t(r,o)},n=(r,o)=>{oc.has(r)||t(r,o)};this.globalEventListenerPairs.set(e,{syncListener:s,asyncListener:n}),this.eventService.addGlobalListener(s,!1),this.eventService.addGlobalListener(n,!0)}else this.syncGlobalEventListeners.add(t),this.eventService.addGlobalListener(t,!1)}removeGlobalListener(e){const t=this.frameworkEventWrappingService.unwrapGlobal(e);if(this.globalEventListenerPairs.has(t)){const{syncListener:s,asyncListener:n}=this.globalEventListenerPairs.get(t);this.eventService.removeGlobalListener(s,!1),this.eventService.removeGlobalListener(n,!0),this.globalEventListenerPairs.delete(e)}else this.syncGlobalEventListeners.delete(t),this.eventService.removeGlobalListener(t,!1)}destroyEventListeners(e,t){e.forEach((i,s)=>{i.forEach(n=>this.eventService.removeEventListener(s,n,t)),i.clear()}),e.clear()}destroyGlobalListeners(e,t){e.forEach(i=>this.eventService.removeGlobalListener(i,t)),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach(({syncListener:e,asyncListener:t})=>{this.eventService.removeGlobalListener(e,!1),this.eventService.removeGlobalListener(t,!0)}),this.globalEventListenerPairs.clear()}},L$=class extends T{constructor(){super(...arguments),this.beanName="pageBoundsListener"}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages();const t={type:"paginationChanged",animate:e?e.animate:!1,newData:e?e.newData:!1,newPage:e?e.newPage:!1,newPageSize:e?e.newPageSize:!1,keepRenderedRows:e?e.keepRenderedRows:!1};this.eventService.dispatchEvent(t)}calculatePages(){this.paginationService?this.paginationService.calculatePages():this.pageBoundsService.calculateBounds(0,this.rowModel.getRowCount()-1)}},O$=class extends T{constructor(){super(...arguments),this.beanName="pageBoundsService",this.pixelOffset=0}wireBeans(e){this.rowModel=e.rowModel}getFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getCurrentPageHeight(){return X(this.topRowBounds)||X(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){const e=this.topRowBounds?this.topRowBounds.rowTop:0,t=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:e,pageLastPixel:t}}calculateBounds(e,t){this.topRowBounds=this.rowModel.getRowBounds(e),this.topRowBounds&&(this.topRowBounds.rowIndex=e),this.bottomRowBounds=this.rowModel.getRowBounds(t),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=t),this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){const e=A(this.topRowBounds)?this.topRowBounds.rowTop:0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},N$=class extends T{constructor(){super(),this.beanName="ariaAnnouncementService",this.descriptionContainer=null,this.announceValue=It(this.announceValue.bind(this),200)}wireBeans(e){this.eGridDiv=e.eGridDiv}postConstruct(){const e=this.gos.getDocument(),t=this.descriptionContainer=e.createElement("div");t.classList.add("ag-aria-description-container"),uF(t,"polite"),cH(t,"additions text"),uH(t,!0),this.eGridDiv.appendChild(t)}announceValue(e){this.descriptionContainer&&(this.descriptionContainer.textContent="",setTimeout(()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=e)},50))}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(si(e),e.parentElement&&e.parentElement.removeChild(e)),this.descriptionContainer=null,this.eGridDiv=null}},G$=class extends T{constructor(){super(...arguments),this.beanName="columnAnimationService",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.suppressAnimation=!1,this.animationThreadCount=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){this.active||this.gos.get("suppressColumnMoveAnimation")||this.gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)}finish(){this.active&&this.flush(()=>{this.active=!1})}executeNextVMTurn(e){this.active?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(e){if(this.executeNextFuncs.length===0&&this.executeLaterFuncs.length===0){e();return}const t=i=>{for(;i.length;){const s=i.pop();s&&s()}};this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>t(this.executeNextFuncs),0),window.setTimeout(()=>{e(),t(this.executeLaterFuncs)},200)})}},H$=class extends T{constructor(){super(...arguments),this.beanName="columnHoverService"}setMouseOver(e){this.selectedColumns=e;const t={type:"columnHoverChanged"};this.eventService.dispatchEvent(t)}clearMouseOver(){this.selectedColumns=null;const e={type:"columnHoverChanged"};this.eventService.dispatchEvent(e)}isHovered(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0}},V$=class extends T{constructor(){super(...arguments),this.beanName="overlayService",this.state=0,this.showInitialOverlay=!0}wireBeans(e){this.userComponentFactory=e.userComponentFactory,this.rowModel=e.rowModel,this.columnModel=e.columnModel}postConstruct(){const e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e}),this.addManagedPropertyListener("loading",e)}registerOverlayWrapperComp(e){this.overlayWrapperComp=e,this.updateOverlayVisibility()}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos.get("loading");!e&&(e!==void 0||this.gos.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1,!(this.gos.get("loading")||this.gos.get("suppressNoRowsOverlay"))&&this.doShowNoRowsOverlay()}hideOverlay(){this.showInitialOverlay=!1,!this.gos.get("loading")&&this.doHideOverlay()}updateOverlayVisibility(){let e=this.gos.get("loading");this.showInitialOverlay&&e===void 0&&!this.gos.get("suppressLoadingOverlay")&&(e=!this.gos.get("columnDefs")||!this.columnModel.isReady()||!this.gos.get("rowData")&&this.gos.isRowModelType("clientSide")),e?this.state!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,this.rowModel.isEmpty()&&!this.gos.get("suppressNoRowsOverlay")&&this.gos.isRowModelType("clientSide")?this.state!==2&&this.doShowNoRowsOverlay():this.state!==0&&this.doHideOverlay())}doShowLoadingOverlay(){this.state=1,this.showOverlay(this.userComponentFactory.getLoadingOverlayCompDetails({}),"ag-overlay-loading-wrapper","loadingOverlayComponentParams")}doShowNoRowsOverlay(){this.state=2,this.showOverlay(this.userComponentFactory.getNoRowsOverlayCompDetails({}),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams")}doHideOverlay(){this.state=0,this.overlayWrapperComp.hideOverlay()}showOverlay(e,t,i){const s=e.newAgStackInstance();this.overlayWrapperComp.showOverlay(s,t,i)}},B$=class extends T{constructor(){super(...arguments),this.beanName="rowCssClassCalculator"}wireBeans(e){this.stylingService=e.stylingService}getInitialRowClasses(e){const t=[];return A(e.extraCssClass)&&t.push(e.extraCssClass),t.push("ag-row"),t.push(e.rowFocused?"ag-row-focus":"ag-row-no-focus"),e.fadeRowIn&&t.push("ag-opacity-zero"),t.push(e.rowIsEven?"ag-row-even":"ag-row-odd"),e.rowNode.isRowPinned()&&t.push("ag-row-pinned"),e.rowNode.isSelected()&&t.push("ag-row-selected"),e.rowNode.footer&&t.push("ag-row-footer"),t.push("ag-row-level-"+e.rowLevel),e.rowNode.stub&&t.push("ag-row-loading"),e.fullWidthRow&&t.push("ag-full-width-row"),e.expandable&&(t.push("ag-row-group"),t.push(e.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),e.rowNode.dragging&&t.push("ag-row-dragging"),dS(t,this.processClassesFromGridOptions(e.rowNode)),dS(t,this.preProcessRowClassRules(e.rowNode)),t.push(e.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),e.firstRowOnPage&&t.push("ag-row-first"),e.lastRowOnPage&&t.push("ag-row-last"),e.fullWidthRow&&(e.pinned==="left"&&t.push("ag-cell-last-left-pinned"),e.pinned==="right"&&t.push("ag-cell-first-right-pinned")),t}processClassesFromGridOptions(e){const t=[],i=r=>{typeof r=="string"?t.push(r):Array.isArray(r)&&r.forEach(o=>t.push(o))},s=this.gos.get("rowClass");if(s){if(typeof s=="function")return M("rowClass should not be a function, please use getRowClass instead"),[];i(s)}const n=this.gos.getCallback("getRowClass");if(n){const r={data:e.data,node:e,rowIndex:e.rowIndex},o=n(r);i(o)}return t}preProcessRowClassRules(e){const t=[];return this.processRowClassRules(e,i=>{t.push(i)},()=>{}),t}processRowClassRules(e,t,i){const s=this.gos.addGridCommonParams({data:e.data,node:e,rowIndex:e.rowIndex});this.stylingService.processClassRules(void 0,this.gos.get("rowClassRules"),s,t,i)}calculateRowLevel(e){return e.group?e.level:e.parent?e.parent.level+1:0}},W$=class extends T{constructor(){super(...arguments),this.beanName="rowContainerHeightService",this.scrollY=0,this.uiBodyHeight=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=SH(),this.gos.get("debug")&&Mi("RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,i=this.getUiBodyHeight();(t!==this.scrollY||i!==this.uiBodyHeight)&&(this.scrollY=t,this.uiBodyHeight=i,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;this.gos.get("debug")&&Mi(`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventService.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return t.bottom-t.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=this.modelHeight-this.getUiBodyHeight(),i=e/t;return this.maxScrollY*i}},z$=class extends T{constructor(){super(...arguments),this.beanName="rowNodeSorter"}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.showRowGroupColsService=e.showRowGroupColsService}postConstruct(){this.isAccentedSort=this.gos.get("accentedSort"),this.primaryColumnsSortGroups=this.gos.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",e=>this.isAccentedSort=e.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=this.gos.isColumnsSortingCoupledToGroup())}doFullSort(e,t){const i=(n,r)=>({currentPos:r,rowNode:n}),s=e.map(i);return s.sort(this.compareRowNodes.bind(this,t)),s.map(n=>n.rowNode)}compareRowNodes(e,t,i){const s=t.rowNode,n=i.rowNode;for(let r=0,o=e.length;r<o;r++){const l=e[r],a=l.sort==="desc",u=this.getValue(s,l.column),c=this.getValue(n,l.column);let d;const h=this.getComparator(l,s);if(h?d=h(u,c,s,n,a):d=MG(u,c,this.isAccentedSort),!isNaN(d)&&d!==0)return l.sort==="asc"?d:d*-1}return t.currentPos-i.currentPos}getComparator(e,t){const i=e.column,s=i.getColDef().comparator;if(s!=null)return s;if(!i.getColDef().showRowGroup)return;const n=!t.group&&i.getColDef().field;if(!n)return;const r=this.columnModel.getColDefCol(n);if(r)return r.getColDef().comparator}getValue(e,t){var s,n,r;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(t,e,!1,!1);if(e.rowGroupColumn===t){if(this.gos.isGroupUseEntireRow(this.columnModel.isPivotActive())){const a=(s=e.allLeafChildren)==null?void 0:s[0];return a?this.valueService.getValue(t,a,!1,!1):void 0}const l=(n=this.showRowGroupColsService)==null?void 0:n.getShowRowGroupCol(t.getId());return l?(r=e.groupData)==null?void 0:r[l.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return this.valueService.getValue(t,e,!1,!1)}},uh=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(e,t){if(e.children)for(let i=0;i<e.children.length;i++)this.depthFirstSearchChangedPath(e.children[i],t);t(e.rowNode)}depthFirstSearchEverything(e,t,i){if(e.childrenAfterGroup)for(let s=0;s<e.childrenAfterGroup.length;s++){const n=e.childrenAfterGroup[s];n.childrenAfterGroup?this.depthFirstSearchEverything(e.childrenAfterGroup[s],t,i):i&&t(n)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,i=!1){this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,i=0;for(;!this.mapToItems[t.id];){const s={rowNode:t,children:null};this.mapToItems[t.id]=s,i++,t=t.parent}return i}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let i=e;for(;i;)this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={}),t.forEach(s=>this.nodeIdsToColumns[i.id][s.getId()]=!0),i=i.parent}linkPathItems(e,t){let i=e;for(let s=0;s<t;s++){const n=this.mapToItems[i.id],r=this.mapToItems[i.parent.id];r.children||(r.children=[]),r.children.push(n),i=i.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const i=this.createPathItems(e);this.linkPathItems(e,i),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const i=this.nodeIdsToColumns[e.id];return t.filter(n=>i[n.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const i=this.nodeIdsToColumns[e.id];return t.filter(n=>!i[n.getId()])}},kT=class extends T{constructor(){super(...arguments),this.beanName="selectionService",this.selectedNodes=new Map,this.selectionCtx=new Kz}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.selectionCtx.init(this.rowModel),this.rowSelection=this.gos.get("rowSelection"),this.groupSelectsChildren=this.gos.get("groupSelectsChildren"),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{this.groupSelectsChildren=this.gos.get("groupSelectsChildren"),this.rowSelection=this.gos.get("rowSelection"),this.deselectAllRowNodes({source:"api"})}),this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes(),this.selectionCtx.reset()}isMultiselect(){return this.rowSelection==="multiple"}overrideSelectionValue(e,t){if(!x$(t))return e;const i=this.selectionCtx.getRoot();return i?i.isSelected()??!1:!0}setNodesSelected(e){var d;const{newValue:t,clearSelection:i,suppressFinishActions:s,rangeSelect:n,nodes:r,event:o,source:l}=e;if(r.length===0)return 0;if(r.length>1&&!this.isMultiselect())return M("cannot multi select while rowSelection='single'"),0;const a=this.groupSelectsChildren&&e.groupSelectsFiltered===!0,u=r.map(h=>h.footer?h.sibling:h);if(n){if(u.length>1)return M("cannot range select while selecting multiple rows"),0;const h=u[0],p=this.overrideSelectionValue(t,l);if(this.isMultiselect()){if(this.selectionCtx.isInRange(h)){const f=this.selectionCtx.truncate(h);return p&&this.selectRange(f.discard,!1,l),this.selectRange(f.keep,p,l)}else if(this.selectionCtx.getRoot()!==h){const w=this.selectionCtx.extend(h,this.groupSelectsChildren);return p&&this.selectRange(w.discard,!1,l),this.selectRange(w.keep,p,l)}}}s||this.selectionCtx.setRoot(u[0]);let c=0;for(let h=0;h<u.length;h++){const p=u[h];a&&p.group||p.selectThisNode(t,o,l)&&c++,this.groupSelectsChildren&&((d=p.childrenAfterGroup)!=null&&d.length)&&(c+=this.selectChildren(p,t,a,l))}return s||(t&&(i||!this.isMultiselect())&&(c+=this.clearOtherNodes(u[0],l)),c>0&&(this.updateGroupsFromChildrenSelections(l),this.dispatchSelectionChanged(l))),c}selectRange(e,t,i){let s=0;return e.forEach(n=>{if(n.group&&this.groupSelectsChildren)return;n.selectThisNode(t,void 0,i)&&s++}),s>0&&(this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)),s}selectChildren(e,t,i,s){const n=i?e.childrenAfterAggFilter:e.childrenAfterGroup;return X(n)?0:this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:i,source:s,nodes:n})}getSelectedNodes(){const e=[];return this.selectedNodes.forEach(t=>{t&&e.push(t)}),e}getSelectedRows(){const e=[];return this.selectedNodes.forEach(t=>{t&&t.data&&e.push(t.data)}),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach((i,s)=>{i&&e(i)&&t.set(s,i)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsChildren||this.rowModel.getType()!=="clientSide")return!1;const s=this.rowModel.getRootNode();t||(t=new uh(!0,s),t.setInactive());let n=!1;return t.forEachChangedNodeDepthFirst(r=>{if(r!==s){const o=r.calculateSelectedFromChildren();n=r.selectThisNode(o===null?!1:o,void 0,e)||n}}),n}clearOtherNodes(e,t){const i=new Map;let s=0;return this.selectedNodes.forEach(n=>{if(n&&n.id!==e.id){const r=this.selectedNodes.get(n.id);s+=r.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsChildren&&n.parent&&i.set(n.parent.id,n.parent)}}),i.forEach(n=>{const r=n.calculateSelectedFromChildren();n.selectThisNode(r===null?!1:r,void 0,t)}),s}onRowSelected(e){const t=e.node;this.groupSelectsChildren&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}syncInOldRowNode(e,t){if(A(t)&&e.id!==t.id&&t){const s=t.id;this.selectedNodes.get(s)==e&&this.selectedNodes.set(t.id,t)}}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.setSelectedInitialValue(!0),this.selectedNodes.set(e.id,e)):e.setSelectedInitialValue(!1)}reset(e){const t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){var e;(e=this.selectedNodes)==null||e.clear()}getBestCostNodeSelection(){if(this.rowModel.getType()!=="clientSide")return;const t=this.rowModel.getTopLevelNodes();if(t===null)return;const i=[];function s(n){for(let r=0,o=n.length;r<o;r++){const l=n[r];if(l.isSelected())i.push(l);else{const a=l;a.group&&a.children&&s(a.children)}}}return s(t),i}isEmpty(){let e=0;return this.selectedNodes.forEach(t=>{t&&e++}),e===0}deselectAllRowNodes(e){const t=o=>o.selectThisNode(!1,void 0,s),i=this.rowModel.getType()==="clientSide",{source:s,justFiltered:n,justCurrentPage:r}=e;if(r||n){if(!i){oe("selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(n,r).forEach(t)}else this.selectedNodes.forEach(o=>{o&&t(o)}),this.reset(s);this.selectionCtx.reset(),i&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(s),this.dispatchSelectionChanged(s)}getSelectedCounts(e,t){let i=0,s=0;const n=r=>{this.groupSelectsChildren&&r.group||(r.isSelected()?i++:r.selectable&&s++)};return this.getNodesToSelect(e,t).forEach(n),{selectedCount:i,notSelectedCount:s}}getSelectAllState(e,t){const{selectedCount:i,notSelectedCount:s}=this.getSelectedCounts(e,t);return i===0&&s===0?!1:i>0&&s>0?null:i>0}hasNodesToSelect(e=!1,t=!1){return this.getNodesToSelect(e,t).filter(i=>i.selectable).length>0}getNodesToSelect(e=!1,t=!1){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);const i=[];if(t)return this.forEachNodeOnPage(n=>{if(!n.group){i.push(n);return}if(!n.expanded){const r=o=>{var l;i.push(o),(l=o.childrenAfterFilter)!=null&&l.length&&o.childrenAfterFilter.forEach(r)};r(n);return}this.groupSelectsChildren||i.push(n)}),i;const s=this.rowModel;return e?(s.forEachNodeAfterFilter(n=>{i.push(n)}),i):(s.forEachNode(n=>{i.push(n)}),i)}forEachNodeOnPage(e){const t=this.pageBoundsService.getFirstRow(),i=this.pageBoundsService.getLastRow();for(let s=t;s<=i;s++){const n=this.rowModel.getRow(s);n&&e(n)}}selectAllRowNodes(e){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);const{source:t,justFiltered:i,justCurrentPage:s}=e,n=this.getNodesToSelect(i,s);n.forEach(r=>r.selectThisNode(!0,void 0,t)),this.selectionCtx.setRoot(n[0]??null),this.selectionCtx.setEndRange(se(n)??null),this.rowModel.getType()==="clientSide"&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(t),this.dispatchSelectionChanged(t)}getSelectionState(){const e=[];return this.selectedNodes.forEach(t=>{t!=null&&t.id&&e.push(t.id)}),e.length?e:null}setSelectionState(e,t){if(!Array.isArray(e))return;const i=new Set(e),s=[];this.rowModel.forEachNode(n=>{i.has(n.id)&&s.push(n)}),this.setNodesSelected({newValue:!0,nodes:s,source:t})}dispatchSelectionChanged(e){const t={type:"selectionChanged",source:e};this.eventService.dispatchEvent(t)}},U$=class extends T{constructor(){super(...arguments),this.beanName="selectableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){this.addManagedPropertyListener("isRowSelectable",()=>this.updateSelectable())}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(e=!1){const t=!!this.gos.get("rowSelection"),i=this.gos.get("isRowSelectable");if(!t||!i)return;const s=this.gos.get("groupSelectsChildren"),n=this.rowModel.getType()==="clientSide"&&s,r=[],o=l=>{if(e&&!l.group)return;if(n&&l.group){const u=l.childrenAfterGroup.some(c=>c.selectable===!0);l.setRowSelectable(u,!0);return}const a=i?i(l):!0;l.setRowSelectable(a,!0),!a&&l.isSelected()&&r.push(l)};if(n){const l=this.rowModel;new uh(!1,l.getRootNode()).forEachChangedNodeDepthFirst(o,!0,!0)}else this.rowModel.forEachNode(o);r.length&&this.selectionService.setNodesSelected({nodes:r,newValue:!1,source:"selectableChanged"}),n&&this.selectionService instanceof kT&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}},_S=["asc","desc",null],j$=class extends T{constructor(){super(...arguments),this.beanName="sortController"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.showRowGroupColsService=e.showRowGroupColsService}progressSort(e,t,i){const s=this.getNextSortDirection(e);this.setSortForColumn(e,s,t,i)}setSortForColumn(e,t,i,s){t!=="asc"&&t!=="desc"&&(t=null);const n=this.gos.isColumnsSortingCoupledToGroup();let r=[e];if(n&&e.getColDef().showRowGroup){const a=this.funcColsService.getSourceColumnsForGroupColumn(e),u=a==null?void 0:a.filter(c=>c.isSortable());u&&(r=[e,...u])}r.forEach(a=>a.setSort(t,s));const o=(i||this.gos.get("alwaysMultiSort"))&&!this.gos.get("suppressMultiSort"),l=[];if(!o){const a=this.clearSortBarTheseColumns(r,s);l.push(...a)}this.updateSortIndex(e),l.push(...r),this.dispatchSortChangedEvents(s,l)}updateSortIndex(e){var l;const t=this.gos.isColumnsSortingCoupledToGroup(),i=(l=this.showRowGroupColsService)==null?void 0:l.getShowRowGroupCol(e.getId()),s=t&&i||e,n=this.getColumnsWithSortingOrdered();this.columnModel.getAllCols().forEach(a=>a.setSortIndex(null));const r=n.filter(a=>t&&a.getColDef().showRowGroup?!1:a!==s);(s.getSort()?[...r,s]:r).forEach((a,u)=>{a.setSortIndex(u)})}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){const t=this.columnModel.getAllCols().filter(i=>!!i.getSort());return t&&t.length>0}dispatchSortChangedEvents(e,t){const i={type:"sortChanged",source:e};t&&(i.columns=t),this.eventService.dispatchEvent(i)}clearSortBarTheseColumns(e,t){const i=[];return this.columnModel.getAllCols().forEach(s=>{e.includes(s)||(s.getSort()&&i.push(s),s.setSort(void 0,t))}),i}getNextSortDirection(e){let t;if(e.getColDef().sortingOrder?t=e.getColDef().sortingOrder:this.gos.get("sortingOrder")?t=this.gos.get("sortingOrder"):t=_S,!Array.isArray(t)||t.length<=0)return M(`sortingOrder must be an array with at least one element, currently it's ${t}`),null;const i=t.indexOf(e.getSort()),s=i<0,n=i==t.length-1;let r;return s||n?r=t[0]:r=t[i+1],_S.indexOf(r)<0?(M("invalid sort type ",r),null):r}getIndexedSortMap(){let e=this.columnModel.getAllCols().filter(r=>!!r.getSort());if(this.columnModel.isPivotMode()){const r=this.gos.isColumnsSortingCoupledToGroup();e=e.filter(o=>{var c;const l=!!o.getAggFunc(),a=!o.isPrimary(),u=r?(c=this.showRowGroupColsService)==null?void 0:c.getShowRowGroupCol(o.getId()):o.getColDef().showRowGroup;return l||a||u})}const t=this.funcColsService.getRowGroupColumns().filter(r=>!!r.getSort()),i={};e.forEach((r,o)=>i[r.getId()]=o),e.sort((r,o)=>{const l=r.getSortIndex(),a=o.getSortIndex();if(l!=null&&a!=null)return l-a;if(l==null&&a==null){const u=i[r.getId()],c=i[o.getId()];return u>c?1:-1}else return a==null?-1:1});const s=this.gos.isColumnsSortingCoupledToGroup()&&!!t.length;s&&(e=[...new Set(e.map(r=>{var o;return((o=this.showRowGroupColsService)==null?void 0:o.getShowRowGroupCol(r.getId()))??r}))]);const n=new Map;return e.forEach((r,o)=>n.set(r,o)),s&&t.forEach(r=>{const o=this.showRowGroupColsService.getShowRowGroupCol(r.getId());n.set(r,n.get(o))}),n}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([e,t],[i,s])=>t-s).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){const t=this.gos.isColumnsSortingCoupledToGroup(),i=!!e.getColDef().showRowGroup;return t&&i}getDisplaySortForColumn(e){const t=this.funcColsService.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!(t!=null&&t.length))return e.getSort();const s=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,n=s[0].getSort();return s.every(o=>o.getSort()==n)?n:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}},$$=class extends T{constructor(){super(...arguments),this.beanName="syncService",this.waitingForColumns=!1}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.rowModel=e.rowModel}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.ctrlsService.whenReady(()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){this.columnModel.setColumnDefs(e??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.dispatchGridReadyEvent();const e=Rt.__isRegistered("@ag-grid-enterprise/core",this.gridId);this.gos.get("debug")&&Mi(`initialised successfully, enterprise = ${e}`)}dispatchGridReadyEvent(){const e={type:"gridReady"};this.eventService.dispatchEvent(e)}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.columnModel.setColumnDefs(t,qr(e.source))}}},K$="paste",q$=class extends T{constructor(){super(...arguments),this.beanName="changeDetectionService"}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer}postConstruct(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){e.source!==K$&&this.doChangeDetection(e.node,e.column)}doChangeDetection(e,t){if(this.gos.get("suppressChangeDetection"))return;const i=[e];if(this.clientSideRowModel&&!e.isRowPinned()){const s=this.gos.get("aggregateOnlyChangedColumns"),n=new uh(s,this.clientSideRowModel.getRootNode());n.addParentNode(e.parent,[t]),this.clientSideRowModel.doAggregate(n),n.forEachChangedNodeDepthFirst(r=>{i.push(r)})}this.rowRenderer.refreshCells({rowNodes:i})}},Y$=class extends T{constructor(){super(...arguments),this.beanName="expressionService",this.expressionToFunctionCache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);oe("value should be either a string or a function",e)}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(i){return Mi("Processing of the expression failed"),Mi("Expression = ",e),Mi("Params = ",t),Mi("Exception = ",i),null}}createExpressionFunction(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];const t=this.createFunctionBody(e),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",t);return this.expressionToFunctionCache[e]=i,i}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}},Q$=class extends T{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){this.active=this.gos.get("valueCache"),this.neverExpires=this.gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,i){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[t]=i)}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}},J$=class extends T{constructor(){super(...arguments),this.beanName="valueService",this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionService=e.expressionService,this.columnModel=e.columnModel,this.valueCache=e.valueCache,this.dataTypeService=e.dataTypeService}postConstruct(){this.initialised||this.init()}init(){this.isSsrm=this.gos.isRowModelType("serverSide"),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const e=i=>this.callColumnCellValueChangedHandler(i),t=this.gos.useAsyncEvents();this.eventService.addEventListener("cellValueChanged",e,t),this.addDestroyFunc(()=>this.eventService.removeEventListener("cellValueChanged",e,t)),this.addManagedPropertyListener("treeData",i=>this.isTreeData=i.currentValue)}getValue(e,t,i=!1,s=!1){if(this.initialised||this.init(),!t)return;const n=e.getColDef(),r=n.field,o=e.getColId(),l=t.data;let a;const u=t.groupData&&t.groupData[o]!==void 0,c=!s&&t.aggData&&t.aggData[o]!==void 0,d=this.isSsrm&&s&&!!e.getColDef().aggFunc,h=this.isSsrm&&t.footer&&t.field&&(e.getColDef().showRowGroup===!0||e.getColDef().showRowGroup===t.field);if(i&&n.filterValueGetter?a=this.executeFilterValueGetter(n.filterValueGetter,l,e,t):this.isTreeData&&c?a=t.aggData[o]:this.isTreeData&&n.valueGetter?a=this.executeValueGetter(n.valueGetter,l,e,t):this.isTreeData&&r&&l?a=Vl(l,r,e.isFieldContainsDots()):u?a=t.groupData[o]:c?a=t.aggData[o]:n.valueGetter?a=this.executeValueGetter(n.valueGetter,l,e,t):h?a=Vl(l,t.field,e.isFieldContainsDots()):r&&l&&!d&&(a=Vl(l,r,e.isFieldContainsDots())),this.cellExpressions&&typeof a=="string"&&a.indexOf("=")===0){const p=a.substring(1);a=this.executeValueGetter(p,l,e,t)}if(a==null){const p=this.getOpenedGroup(t,e);if(p!=null)return p}return a}parseValue(e,t,i,s){const n=e.getColDef(),r=this.gos.addGridCommonParams({node:t,data:t==null?void 0:t.data,oldValue:s,newValue:i,colDef:n,column:e}),o=n.valueParser;return A(o)?typeof o=="function"?o(r):this.expressionService.evaluate(o,r):i}formatValue(e,t,i,s,n=!0){let r=null,o;const l=e.getColDef();if(s?o=s:n&&(o=l.valueFormatter),o){const a=this.gos.addGridCommonParams({value:i,node:t,data:t?t.data:null,colDef:l,column:e});typeof o=="function"?r=o(a):r=this.expressionService.evaluate(o,a)}else if(l.refData)return l.refData[i]||"";return r==null&&Array.isArray(i)&&(r=i.join(", ")),r}getOpenedGroup(e,t){if(!this.gos.get("showOpenedGroup")||!t.getColDef().showRowGroup)return;const s=t.getColDef().showRowGroup;let n=e.parent;for(;n!=null;){if(n.rowGroupColumn&&(s===!0||s===n.rowGroupColumn.getColId()))return n.key;n=n.parent}}setValue(e,t,i,s){const n=this.columnModel.getColDefCol(t);if(!e||!n)return!1;X(e.data)&&(e.data={});const{field:r,valueSetter:o}=n.getColDef();if(X(r)&&X(o))return M("you need either field or valueSetter set on colDef for editing to work"),!1;if(this.dataTypeService&&!this.dataTypeService.checkType(n,i))return M("Data type of the new value does not match the cell data type of the column"),!1;const l=this.gos.addGridCommonParams({node:e,data:e.data,oldValue:this.getValue(n,e),newValue:i,colDef:n.getColDef(),column:n});l.newValue=i;let a;if(A(o)?typeof o=="function"?a=o(l):a=this.expressionService.evaluate(o,l):a=this.setValueUsingField(e.data,r,i,n.isFieldContainsDots()),a===void 0&&(a=!0),!a)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),l.newValue=this.getValue(n,e);const u={type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:l.column,api:l.api,colDef:l.colDef,context:l.context,data:e.data,node:e,oldValue:l.oldValue,newValue:l.newValue,value:l.newValue,source:s};return this.eventService.dispatchEvent(u),!0}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;typeof t=="function"&&this.getFrameworkOverrides().wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,i,s){if(!t)return!1;let n=!1;if(!s)n=e[t]===i,n||(e[t]=i);else{const r=t.split(".");let o=e;for(;r.length>0&&o;){const l=r.shift();r.length===0?(n=o[l]===i,n||(o[l]=i)):o=o[l]}}return!n}executeFilterValueGetter(e,t,i,s){const n=this.gos.addGridCommonParams({data:t,node:s,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,s)});return typeof e=="function"?e(n):this.expressionService.evaluate(e,n)}executeValueGetter(e,t,i,s){const n=i.getColId(),r=this.valueCache.getValue(s,n);if(r!==void 0)return r;const o=this.gos.addGridCommonParams({data:t,node:s,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,s)});let l;return typeof e=="function"?l=e(o):l=this.expressionService.evaluate(e,o),this.valueCache.setValue(s,n,l),l}getValueCallback(e,t){const i=this.columnModel.getColDefCol(t);return i?this.getValue(i,e):null}getKeyForNode(e,t){const i=this.getValue(e,t),s=e.getColDef().keyCreator;let n=i;if(s){const r=this.gos.addGridCommonParams({value:i,colDef:e.getColDef(),column:e,node:t,data:t.data});n=s(r)}return typeof n=="string"||n==null||(n=String(n),n==="[object Object]"&&M("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),n}},Ng=class{};Ng.gridOptions=void 0;var X$=1,Z$=class{create(e,t,i,s,n){let r={};Ng.gridOptions?(hi(r,Ng.gridOptions,!0,!0),r={...r,...t}):r=t;const o=D$(r),l=o.gridId??String(X$++),a=this.getRegisteredModules(n,l),u=this.createBeansList(o.rowModelType,a,l),c=this.createProvidedBeans(e,o,n);if(!u){oe("Failed to create grid.");return}const d={providedBeanInstances:c,beanClasses:u,gridId:l,beanInitComparator:fU,beanDestroyComparator:gU,derivedBeans:[rU]},h=new CV(d);return this.registerModuleUserComponents(h,a),this.registerControllers(h,a),this.registerModuleApiFunctions(h,a),i(h),h.getBean("syncService").start(),s&&s(h),h.getBean("gridApi")}registerControllers(e,t){const i=e.getBean("ctrlsFactory");t.forEach(s=>{s.controllers&&s.controllers.forEach(n=>i.register(n))})}getRegisteredModules(e,t){const i=e?e.modules:null,s=Rt.__getRegisteredModules(t),n=[],r={},o=(l,a,u)=>{(d=>{r[d.moduleName]||(r[d.moduleName]=!0,n.push(d),Rt.__register(d,l,u))})(a),a.dependantModules&&a.dependantModules.forEach(d=>o(l,d,u))};return o(!!(i!=null&&i.length)||!Rt.__isPackageBased(),TT,void 0),i&&i.forEach(l=>o(!0,l,t)),s&&s.forEach(l=>o(!Rt.__isPackageBased(),l,void 0)),n}registerModuleUserComponents(e,t){const i=this.extractModuleEntity(t,n=>n.userComponents?n.userComponents:[]),s=e.getBean("userComponentRegistry");i.forEach(n=>{s.registerDefaultComponent(n.name,n.classImp)})}registerModuleApiFunctions(e,t){const i=e.getBean("apiFunctionService");t.forEach(s=>{const n=s.apiFunctions??{};Object.keys(n).forEach(o=>{i==null||i.addFunction(o,n[o])})})}createProvidedBeans(e,t,i){let s=i?i.frameworkOverrides:null;X(s)&&(s=new yT);const n={gridOptions:t,eGridDiv:e,globalEventListener:i?i.globalEventListener:null,globalSyncEventListener:i?i.globalSyncEventListener:null,frameworkOverrides:s};return i&&i.providedBeanInstances&&Object.assign(n,i.providedBeanInstances),n}createBeansList(e="clientSide",t,i){const s=t.filter(a=>!a.rowModel||a.rowModel===e),n={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!n[e]){oe("Could not find row model for rowModelType = ",e);return}if(!Rt.__assertRegistered(n[e],`rowModelType = '${e}'`,i))return;const r=[yU,CU,M$,T$,sU,ZH,dU,hU,XW,xF,W$,YW,A$,zz,bV,tH,bU,k$,Zz,kT,WG,AB,O$,L$,Bz,Y$,BG,qW,Q$,J$,Hz,QW,yV,EU,KW,SU,tU,qz,$W,j$,H$,G$,U$,q$,ZW,oU,B$,z$,vU,PU,wU,mU,$$,V$,ez,_$,N$,tz,KG,lU,qG,jG,aU,uU,eH,$G,XG,cU,ZG],o=this.extractModuleEntity(s,a=>a.beans?a.beans:[]);r.push(...o);const l=[];return r.forEach(a=>{l.indexOf(a)<0&&l.push(a)}),l}extractModuleEntity(e,t){return[].concat(...e.map(t))}},MT=class extends T{constructor(){super(...arguments),this.beanName="rowModelHelperService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){const e=this.rowModel;switch(e.getType()){case"clientSide":this.clientSideRowModel=e;break;case"infinite":this.infiniteRowModel=e;break;case"serverSide":this.serverSideRowModel=e;break}}getClientSideRowModel(){return this.clientSideRowModel}getInfiniteRowModel(){return this.infiniteRowModel}getServerSideRowModel(){return this.serverSideRowModel}};function e3(e){e.expansionService.expandAll(!0)}function t3(e){e.expansionService.expandAll(!1)}function i3(e){var s,n;const t=(s=e.rowModelHelperService)==null?void 0:s.getClientSideRowModel(),i=(n=e.rowModelHelperService)==null?void 0:n.getServerSideRowModel();t?t.onRowHeightChanged():i&&i.onRowHeightChanged()}function s3(e,t,i){var r,o;const s=(r=e.rowModelHelperService)==null?void 0:r.getServerSideRowModel();if(s){if(e.funcColsService.isRowGroupEmpty()){s.setRowCount(t,i);return}oe("setRowCount cannot be used while using row grouping.");return}const n=(o=e.rowModelHelperService)==null?void 0:o.getInfiniteRowModel();if(n){n.setRowCount(t,i);return}}function n3(e){var t;return((t=e.rowNodeBlockLoader)==null?void 0:t.getBlockState())??{}}var r3={version:$,moduleName:"@ag-grid-community/csrm-ssrm-shared-api",apiFunctions:{expandAll:e3,collapseAll:t3,onRowHeightChanged:i3}},o3={version:$,moduleName:"@ag-grid-community/ssrm-infinite-shared-api",apiFunctions:{setRowCount:s3,getCacheBlockState:n3}},l3=class{wrap(e,t,i=[],s){const n=this.createWrapper(e,s);return t.forEach(r=>{this.createMethod(n,r,!0)}),i.forEach(r=>{this.createMethod(n,r,!1)}),n}unwrap(e){return e}createMethod(e,t,i){e.addMethod(t,this.createMethodProxy(e,t,i))}createMethodProxy(e,t,i){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(i&&M("Framework component is missing the method "+t+"()"),null)}}};function a3(e,t){if(!e)return!1;const i=(o,l)=>{const a=t[o.id],u=t[l.id],c=a!==void 0,d=u!==void 0,h=c&&d,p=!c&&!d;return h?a-u:p?o.__objectId-l.__objectId:c?1:-1};let s,n,r=!1;for(let o=0;o<e.length-1;o++)if(s=e[o],n=e[o+1],i(s,n)>0){r=!0;break}return r?(e.sort(i),!0):!1}var Yo=typeof global>"u"?{}:global;Yo.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;Yo.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;Yo.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;Yo.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;Yo.Node=typeof Node>"u"?{}:Node;Yo.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var u3="ROOT_NODE_ID",Kp=0,c3=class{constructor(e,t,i,s,n,r){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=e,this.gos=t,this.eventService=i,this.funcColsService=s,this.beans=r,this.selectionService=n,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=u3,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return ZP(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(e){if(typeof e=="string"){M("rowData must be an array.");return}this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e);const t=this.rootNode,i=this.rootNode.sibling;t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?t.allLeafChildren=e.map(s=>this.createNode(s,this.rootNode,Kp)):(t.allLeafChildren=[],t.childrenAfterGroup=[]),i&&(i.childrenAfterFilter=t.childrenAfterFilter,i.childrenAfterGroup=t.childrenAfterGroup,i.childrenAfterAggFilter=t.childrenAfterAggFilter,i.childrenAfterSort=t.childrenAfterSort,i.childrenMapped=t.childrenMapped,i.allLeafChildren=t.allLeafChildren)}updateRowData(e,t){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e.add);const i={remove:[],update:[],add:[]},s=[];return this.executeRemove(e,i,s),this.executeUpdate(e,i,s),this.executeAdd(e,i),this.updateSelection(s,"rowDataChanged"),t&&a3(this.rootNode.allLeafChildren,t),i}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(e){const t={type:"rowDataUpdateStarted",firstRowData:e!=null&&e.length?e[0]:null};this.eventService.dispatchEvent(t)}updateSelection(e,t){const i=e.length>0;if(i&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),this.selectionService.updateGroupsFromChildrenSelections(t),i){const s={type:"selectionChanged",source:t};this.eventService.dispatchEvent(s)}}executeAdd(e,t){var o;const{add:i,addIndex:s}=e;if(lt(i))return;const n=i.map(l=>this.createNode(l,this.rootNode,Kp)),r=this.rootNode.allLeafChildren;if(typeof s=="number"&&s>=0){const l=r.length;let a=s;if(this.gos.get("treeData")&&s>0&&l>0){for(let h=0;h<l;h++)if(((o=r[h])==null?void 0:o.rowIndex)==s-1){a=h+1;break}}const c=r.slice(0,a),d=r.slice(a,r.length);this.rootNode.allLeafChildren=[...c,...n,...d]}else this.rootNode.allLeafChildren=[...r,...n];this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=r),t.add=n}executeRemove(e,t,i){var r;const{remove:s}=e;if(lt(s))return;const n={};s.forEach(o=>{const l=this.lookupRowNode(o);l&&(l.isSelected()&&i.push(l),l.clearRowTopAndRowIndex(),n[l.id]=!0,delete this.allNodesMap[l.id],t.remove.push(l))}),this.rootNode.allLeafChildren=((r=this.rootNode.allLeafChildren)==null?void 0:r.filter(o=>!n[o.id]))??null,this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(e,t,i){const{update:s}=e;lt(s)||s.forEach(n=>{const r=this.lookupRowNode(n);r&&(r.updateData(n),!r.selectable&&r.isSelected()&&i.push(r),this.setMasterForRow(r,n,Kp,!1),t.update.push(r))})}lookupRowNode(e){var s;const t=this.gos.getRowIdCallback();let i;if(t){const n=t({data:e,level:0});if(i=this.allNodesMap[n],!i)return oe(`could not find row id=${n}, data item was not found for this id`),null}else if(i=(s=this.rootNode.allLeafChildren)==null?void 0:s.find(n=>n.data===e),!i)return oe("could not find data item as object was not found",e),oe("Consider using getRowId to help the Grid find matching row data"),null;return i||null}createNode(e,t,i){const s=new ys(this.beans);return s.group=!1,this.setMasterForRow(s,e,i,!0),t&&(s.parent=t),s.level=i,s.setDataAndId(e,this.nextId.toString()),this.allNodesMap[s.id]&&M(`duplicate node id '${s.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[s.id]=s,this.nextId++,s}setMasterForRow(e,t,i,s){if(this.gos.get("treeData"))e.setMaster(!1),s&&(e.expanded=!1);else{if(this.gos.get("masterDetail")){const o=this.gos.get("isRowMaster");o?e.setMaster(o(t)):e.setMaster(!0)}else e.setMaster(!1);if(s){const o=this.funcColsService.getRowGroupColumns(),l=o?o.length:0,a=i+l;e.expanded=e.master?this.isExpanded(a):!1}}}isExpanded(e){const t=this.gos.get("groupDefaultExpanded");return t===-1?!0:e<t}},d3=class extends T{constructor(){super(...arguments),this.beanName="rowModel",this.onRowHeightChanged_debounced=It(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}wireBeans(e){this.beans=e,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.selectionService=e.selectionService,this.valueCache=e.valueCache,this.environment=e.environment,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggregationStage=e.aggregationStage,this.pivotStage=e.pivotStage,this.filterAggregatesStage=e.filterAggregatesStage}postConstruct(){const e=this.refreshModel.bind(this,{step:"group"}),t=!this.gos.get("suppressAnimationFrame"),i=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:t});this.addManagedEventListeners({newColumnsLoaded:i,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new ys(this.beans),this.nodeManager=new c3(this.rootNode,this.gos,this.eventService,this.funcColsService,this.selectionService,this.beans)}addPropertyListeners(){const e=new Set(["treeData","masterDetail"]),t=new Set(["groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),i=new Set(["excludeChildrenWhenTreeDataFiltering"]),s=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),n=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),r=new Set(["postSortRows","groupDisplayType","accentedSort"]),o=new Set([]),l=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),a=[...e,...t,...i,...s,...s,...n,...r,...o,...l];this.addManagedPropertyListeners(a,u=>{var h;const c=(h=u.changeSet)==null?void 0:h.properties;if(!c)return;const d=p=>c.some(f=>p.has(f));if(d(e)){this.setRowData(this.rootNode.allLeafChildren.map(p=>p.data));return}if(d(t)){this.refreshModel({step:"group"});return}if(d(i)){this.refreshModel({step:"filter"});return}if(d(s)){this.refreshModel({step:"pivot"});return}if(d(n)){this.refreshModel({step:"aggregate"});return}if(d(r)){this.refreshModel({step:"sort"});return}if(d(o)){this.refreshModel({step:"filter_aggregates"});return}d(l)&&this.refreshModel({step:"map"})}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){const e=this.gos.get("rowData");e&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(e))}ensureRowHeightsValid(e,t,i,s){let n,r=!1;do{n=!1;const o=this.getRowIndexAtPixel(e),l=this.getRowIndexAtPixel(t),a=Math.max(o,i),u=Math.min(l,s);for(let c=a;c<=u;c++){const d=this.getRow(c);if(d.rowHeightEstimated){const h=this.gos.getRowHeightForNode(d);d.setRowHeight(h.height),n=!0,r=!0}}n&&this.setRowTopAndRowIndex()}while(n);return r}setRowTopAndRowIndex(){const e=this.environment.getDefaultRowHeight();let t=0;const i=new Set,s=this.gos.isDomLayout("normal");for(let n=0;n<this.rowsToDisplay.length;n++){const r=this.rowsToDisplay[n];if(r.id!=null&&i.add(r.id),r.rowHeight==null){const o=this.gos.getRowHeightForNode(r,s,e);r.setRowHeight(o.height,o.estimated)}r.setRowTop(t),r.setRowIndex(n),t+=r.rowHeight}return i}clearRowTopAndRowIndex(e,t){const i=e.isActive(),s=r=>{r&&r.id!=null&&!t.has(r.id)&&r.clearRowTopAndRowIndex()},n=r=>{if(s(r),s(r.detailNode),s(r.sibling),r.hasChildren()&&r.childrenAfterGroup){const o=r.level==-1;i&&!o&&!r.expanded||r.childrenAfterGroup.forEach(n)}};n(this.rootNode)}ensureRowsAtPixel(e,t,i=0){const s=this.getRowIndexAtPixel(t),n=this.getRow(s),r=!this.gos.get("suppressAnimationFrame");return n===e[0]?!1:(e.forEach(o=>{xt(this.rootNode.allLeafChildren,o)}),e.forEach((o,l)=>{dd(this.rootNode.allLeafChildren,o,Math.max(s+i,0)+l)}),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate:r}),!0)}highlightRowAtPixel(e,t){const i=t!=null?this.getRowIndexAtPixel(t):null,s=i!=null?this.getRow(i):null;if(!s||!e||s===e||t==null){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null);return}const n=this.getHighlightPosition(t,s);this.lastHighlightedRow&&this.lastHighlightedRow!==s&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),s.setHighlighted(n),this.lastHighlightedRow=s}getHighlightPosition(e,t){if(!t){const n=this.getRowIndexAtPixel(e);if(t=this.getRow(n||0),!t)return 1}const{rowTop:i,rowHeight:s}=t;return e-i<s/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;const t=this.rootNode.sibling?1:0,i=this.rootNode.childrenAfterAggFilter;return(i?i.length:0)+t}getTopLevelRowDisplayedIndex(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;let i=e;if(this.rowsToDisplay[0].footer){if(e===0)return 0;i-=1}let s=this.rootNode.childrenAfterSort[i];if(this.gos.get("groupHideOpenParents"))for(;s.expanded&&s.childrenAfterSort&&s.childrenAfterSort.length>0;)s=s.childrenAfterSort[0];return s.rowIndex}getRowBounds(e){if(X(this.rowsToDisplay))return null;const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){const e=this.gos.isAnimateRows();this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;const t=this.gos.isAnimateRows(),s=e.columns.length===0||e.columns.some(n=>n.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:s,keepRenderedRows:!0,animate:t})}onSortChanged(){const e=this.gos.isAnimateRows();this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(e){const t=lt(e),i=new uh(!1,this.rootNode);return(t||this.gos.get("treeData"))&&i.setInactive(),i}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction")||e.rowNodeTransactions==null)return!1;const t=e.rowNodeTransactions.filter(s=>s.add!=null&&s.add.length>0||s.remove!=null&&s.remove.length>0);return t==null||t.length==0}buildRefreshModelParams(e){let t="group";const i={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",sort:"sort",pivot:"pivot"};if(A(e)&&(t=i[e]),X(t)){oe(`invalid step ${e}, available steps are ${Object.keys(i).join(", ")}`);return}const s=!this.gos.get("suppressAnimationFrame");return{step:t,keepRenderedRows:!0,keepEditingRows:!0,animate:s}}refreshModel(e){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.isChangeEventsDispatching())return;const t=typeof e=="object"&&"step"in e?e:this.buildRefreshModelParams(e);if(!t||this.isSuppressModelUpdateAfterUpdateTransaction(t))return;const i=this.createChangePath(t.rowNodeTransactions);switch(this.isRefreshingModel=!0,t.step){case"group":this.doRowGrouping(t.rowNodeTransactions,t.rowNodeOrder,i,!!t.afterColumnsChanged);case"filter":this.doFilter(i);case"pivot":this.doPivot(i);case"aggregate":this.doAggregate(i);case"filter_aggregates":this.doFilterAggregates(i);case"sort":this.doSort(t.rowNodeTransactions,i);case"map":this.doRowsToDisplay()}const s=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(i,s),this.isRefreshingModel=!1;const n={type:"modelUpdated",animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack};this.eventService.dispatchEvent(n)}isEmpty(){const e=X(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return X(this.rootNode)||e||!this.columnModel.isReady()}isRowsToRender(){return A(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let i=!1,s=!1;const n=[],r=this.gos.get("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort(o=>{if(s)return;if(i&&(o===t||o===e)&&(s=!0,o.group&&r)){n.push(...o.allLeafChildren);return}if(!i){if(o!==t&&o!==e)return;i=!0}if(!o.group||!r){n.push(o);return}}),n}setDatasource(e){oe("should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let t=0,i=this.rowsToDisplay.length-1;if(e<=0)return 0;if(se(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;let n=-1,r=-1;for(;;){const o=Math.floor((t+i)/2),l=this.rowsToDisplay[o];if(this.isRowInPixel(l,e)||(l.rowTop<e?t=o+1:l.rowTop>e&&(i=o-1),n===t&&r===i))return o;n=t,r=i}}isRowInPixel(e,t){const i=e.rowTop,s=e.rowTop+e.rowHeight;return i<=t&&s>t}forEachLeafNode(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((t,i)=>e(t,i))}forEachNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:e,recursionType:0,index:0,includeFooterNodes:t})}forEachNodeAfterFilter(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:e,recursionType:1,index:0,includeFooterNodes:t})}forEachNodeAfterFilterAndSort(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:e,recursionType:2,index:0,includeFooterNodes:t})}forEachPivotNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:3,index:0,includeFooterNodes:t})}recursivelyWalkNodesAndCallback(e){const{nodes:t,callback:i,recursionType:s,includeFooterNodes:n}=e;let{index:r}=e;const o=l=>{var p;const a=(p=t[0])==null?void 0:p.parent;if(!a)return;const u=n&&this.gos.getGrandTotalRow(),c=this.gos.getGroupTotalRowCallback(),d=n&&c({node:a});if(a===this.rootNode){u===l&&(a.createFooter(),i(a.sibling,r++));return}d===l&&(a.createFooter(),i(a.sibling,r++))};o("top");for(let l=0;l<t.length;l++){const a=t[l];if(i(a,r++),a.hasChildren()&&!a.footer){let u=null;switch(s){case 0:u=a.childrenAfterGroup;break;case 1:u=a.childrenAfterAggFilter;break;case 2:u=a.childrenAfterSort;break;case 3:u=a.leafGroup?null:a.childrenAfterSort;break}u&&(r=this.recursivelyWalkNodesAndCallback({nodes:[...u],callback:i,recursionType:s,index:r,includeFooterNodes:n}))}}return o("bottom"),r}doAggregate(e){var t;(t=this.aggregationStage)==null||t.execute({rowNode:this.rootNode,changedPath:e})}doFilterAggregates(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(e){const t=this.gos.get("treeData"),i=this.columnModel.isPivotActive(),s=o=>{o&&o.forEach(l=>{const a=()=>{l.expanded=e,s(l.childrenAfterGroup)};if(t){A(l.childrenAfterGroup)&&a();return}if(i){!l.leafGroup&&a();return}l.group&&a()})};this.rootNode&&s(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"});const r={type:"expandOrCollapseAll",source:e?"expandAll":"collapseAll"};this.eventService.dispatchEvent(r)}doSort(e,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:t})}doRowGrouping(e,t,i,s){if(this.groupStage){if(e?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,rowNodeOrder:t,changedPath:i}):this.groupStage.execute({rowNode:this.rootNode,changedPath:i,afterColumnsChanged:s}),this.gos.get("groupSelectsChildren")&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",i)){const r={type:"selectionChanged",source:"rowGroupChanged"};this.eventService.dispatchEvent(r)}}else this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren();this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})}doPivot(e){var t;(t=this.pivotStage)==null||t.execute({rowNode:this.rootNode,changedPath:e})}getCopyOfNodesMap(){return this.nodeManager.getCopyOfNodesMap()}getRowNode(e){if(typeof e=="string"&&e.indexOf(ys.ID_PREFIX_ROW_GROUP)==0){let i;return this.forEachNode(s=>{s.id===e&&(i=s)}),i}return this.nodeManager.getRowNode(e)}setRowData(e){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(e),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){const e={type:"rowDataUpdated"};this.eventService.dispatchEvent(e),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(e,t){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];const i=this.gos.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.executeBatchUpdateRowData()},i)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();const e=[],t=[];let i=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(s=>{const n=this.nodeManager.updateRowData(s.rowDataTransaction,void 0);t.push(n),s.callback&&e.push(s.callback.bind(null,n)),typeof s.rowDataTransaction.addIndex=="number"&&(i=!0)}),this.commonUpdateRowData(t,void 0,i),e.length>0&&window.setTimeout(()=>{e.forEach(s=>s())},0),t.length>0){const s={type:"asyncTransactionsFlushed",results:t};this.eventService.dispatchEvent(s)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e,t){this.valueCache.onDataChanged();const i=this.nodeManager.updateRowData(e,t),s=typeof e.addIndex=="number";return this.commonUpdateRowData([i],t,s),i}createRowNodeOrder(){if(this.gos.get("suppressMaintainUnsortedOrder"))return;const t={};if(this.rootNode&&this.rootNode.allLeafChildren)for(let i=0;i<this.rootNode.allLeafChildren.length;i++){const s=this.rootNode.allLeafChildren[i];t[s.id]=i}return t}commonUpdateRowData(e,t,i){if(!this.hasStarted)return;const s=!this.gos.get("suppressAnimationFrame");i&&(t=this.createRowNodeOrder());const n={type:"rowDataUpdated"};this.eventService.dispatchEvent(n),this.refreshModel({step:"group",rowNodeTransactions:e,rowNodeOrder:t,keepRenderedRows:!0,keepEditingRows:!0,animate:s})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){const e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);const i=t.detailNode;i&&i.setRowHeight(i.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){if(e.rowHeightChanged){if(this.columnModel.isAutoRowHeightActive())return;this.resetRowHeights()}}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}};function h3(e){e.expansionService.onGroupExpandedOrCollapsed()}function p3(e,t){var i,s;(s=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null||s.refreshModel(t)}function f3(e,t){var i,s;(s=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null||s.forEachLeafNode(t)}function g3(e,t){var i,s;(s=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null||s.forEachNodeAfterFilter(t)}function m3(e,t){var i,s;(s=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null||s.forEachNodeAfterFilterAndSort(t)}function v3(e){var t,i;if(e.columnModel.isAutoRowHeightActive()){M("calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}(i=(t=e.rowModelHelperService)==null?void 0:t.getClientSideRowModel())==null||i.resetRowHeights()}function C3(e,t){return e.frameworkOverrides.wrapIncoming(()=>{var i,s;return(s=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null?void 0:s.updateRowData(t)})}function w3(e,t,i){e.frameworkOverrides.wrapIncoming(()=>{var s,n;return(n=(s=e.rowModelHelperService)==null?void 0:s.getClientSideRowModel())==null?void 0:n.batchUpdateRowData(t,i)})}function y3(e){e.frameworkOverrides.wrapIncoming(()=>{var t,i;return(i=(t=e.rowModelHelperService)==null?void 0:t.getClientSideRowModel())==null?void 0:i.flushAsyncTransactions()})}function S3(e){return e.selectionService.getBestCostNodeSelection()}var R3=class extends T{constructor(){super(...arguments),this.beanName="filterStage"}wireBeans(e){this.filterManager=e.filterManager}execute(e){const{changedPath:t}=e;this.filter(t)}filter(e){var i;const t=!!((i=this.filterManager)!=null&&i.isChildFilterPresent());this.filterNodes(t,e)}filterNodes(e,t){const i=(s,n)=>{s.hasChildren()&&e&&!n?s.childrenAfterFilter=s.childrenAfterGroup.filter(r=>{const o=r.childrenAfterFilter&&r.childrenAfterFilter.length>0,l=r.data&&this.filterManager.doesRowPassFilter({rowNode:r});return o||l}):s.childrenAfterFilter=s.childrenAfterGroup,s.sibling&&(s.sibling.childrenAfterFilter=s.childrenAfterFilter)};if(this.doingTreeDataFiltering()){const s=(r,o)=>{if(r.childrenAfterGroup)for(let l=0;l<r.childrenAfterGroup.length;l++){const a=r.childrenAfterGroup[l],u=o||this.filterManager.doesRowPassFilter({rowNode:a});a.childrenAfterGroup?s(r.childrenAfterGroup[l],u):i(a,u)}i(r,o)},n=r=>s(r,!1);t.executeFromRootNode(n)}else{const s=n=>i(n,!1);t.forEachChangedNodeDepthFirst(s,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},b3=class extends T{constructor(){super(...arguments),this.beanName="flattenStage"}wireBeans(e){this.beans=e,this.columnModel=e.columnModel}execute(e){const t=e.rowNode,i=[],s=this.columnModel.isPivotMode(),n=s&&t.leafGroup,r=n?[t]:t.childrenAfterSort,o=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(o,r,i,s,0);const l=i.length>0;if(!n&&l&&o.grandTotalRow){t.createFooter();const u=o.grandTotalRow==="top";this.addRowNodeToRowsToDisplay(o,t.sibling,i,0,u)}return i}getFlattenDetails(){const e=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!e&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:e,isGroupMultiAutoColumn:this.gos.isGroupMultiAutoColumn(),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:this.gos.getGrandTotalRow(),groupTotalRow:this.gos.getGroupTotalRowCallback()}}recursivelyAddToRowsToDisplay(e,t,i,s,n){if(!lt(t))for(let r=0;r<t.length;r++){const o=t[r],l=o.hasChildren(),a=s&&!l,u=e.groupRemoveSingleChildren&&l&&o.childrenAfterGroup.length===1,c=e.groupRemoveLowestSingleChildren&&l&&o.leafGroup&&o.childrenAfterGroup.length===1,d=s&&o.leafGroup,h=e.hideOpenParents&&o.expanded&&!o.master&&!d;if(!a&&!h&&!u&&!c&&this.addRowNodeToRowsToDisplay(e,o,i,n),!(s&&o.leafGroup)){if(l){const f=u||c;if(o.expanded||f){const m=e.groupTotalRow({node:o});m||o.destroyFooter();const w=f?n:n+1;m==="top"&&(o.createFooter(),this.addRowNodeToRowsToDisplay(e,o.sibling,i,w)),this.recursivelyAddToRowsToDisplay(e,o.childrenAfterSort,i,s,w),m==="bottom"&&(o.createFooter(),this.addRowNodeToRowsToDisplay(e,o.sibling,i,w))}}else if(o.master&&o.expanded){const f=this.createDetailNode(o);this.addRowNodeToRowsToDisplay(e,f,i,n)}}}}addRowNodeToRowsToDisplay(e,t,i,s,n){n?i.unshift(t):i.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:s)}createDetailNode(e){if(A(e.detailNode))return e.detailNode;const t=new ys(this.beans);return t.detail=!0,t.selectable=!1,t.parent=e,A(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t}},E3=class extends T{constructor(){super(...arguments),this.beanName="immutableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",()=>this.onRowDataUpdated()))}isActive(){const e=this.gos.exists("getRowId");return this.gos.get("resetRowDataOnUpdate")?!1:e}setRowData(e){const t=this.createTransactionForRowData(e);if(!t)return;const[i,s]=t;this.clientSideRowModel.updateRowData(i,s)}createTransactionForRowData(e){if(X(this.clientSideRowModel)){oe("ImmutableService only works with ClientSideRowModel");return}const t=this.gos.getRowIdCallback();if(t==null){oe("ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!");return}const i={remove:[],update:[],add:[]},s=this.clientSideRowModel.getCopyOfNodesMap(),r=this.gos.get("suppressMaintainUnsortedOrder")?void 0:{};return A(e)&&e.forEach((o,l)=>{const a=t({data:o,level:0}),u=s[a];r&&(r[a]=l),u?(u.data!==o&&i.update.push(o),s[a]=void 0):i.add.push(o)}),Ii(s,(o,l)=>{l&&i.remove.push(l.data)}),[i,r]}onRowDataUpdated(){const e=this.gos.get("rowData");e&&(this.isActive()?this.setRowData(e):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(e)))}},P3=class extends T{constructor(){super(...arguments),this.beanName="sortService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.rowNodeSorter=e.rowNodeSorter,this.showRowGroupColsService=e.showRowGroupColsService}sort(e,t,i,s,n,r){const o=this.gos.get("groupMaintainOrder"),l=this.columnModel.getCols().some(h=>h.isRowGroupActive());let a={};i&&s&&(a=this.calculateDirtyNodes(s));const u=this.columnModel.isPivotMode(),c=this.gos.getCallback("postSortRows"),d=h=>{var m;this.pullDownGroupDataForHideOpenParents(h.childrenAfterAggFilter,!0);const p=u&&h.leafGroup;if(o&&l&&!h.leafGroup&&!r){const w=(m=this.funcColsService.getRowGroupColumns())==null?void 0:m[h.level+1],v=(w==null?void 0:w.getSort())===null,g=h.childrenAfterAggFilter.slice(0);if(h.childrenAfterSort&&!v){const y={};h.childrenAfterSort.forEach((S,b)=>{y[S.id]=b}),g.sort((S,b)=>(y[S.id]??0)-(y[b.id]??0))}h.childrenAfterSort=g}else!t||p?h.childrenAfterSort=h.childrenAfterAggFilter.slice(0):i?h.childrenAfterSort=this.doDeltaSort(h,a,n,e):h.childrenAfterSort=this.rowNodeSorter.doFullSort(h.childrenAfterAggFilter,e);if(h.sibling&&(h.sibling.childrenAfterSort=h.childrenAfterSort),this.updateChildIndexes(h),c){const w={nodes:h.childrenAfterSort};c(w)}};n&&n.forEachChangedNodeDepthFirst(d),this.updateGroupDataForHideOpenParents(n)}calculateDirtyNodes(e){const t={},i=s=>{s&&s.forEach(n=>t[n.id]=!0)};return e&&e.forEach(s=>{i(s.add),i(s.update),i(s.remove)}),t}doDeltaSort(e,t,i,s){const n=e.childrenAfterAggFilter,r=e.childrenAfterSort;if(!r)return this.rowNodeSorter.doFullSort(n,s);const o={},l=[];n.forEach(d=>{t[d.id]||!i.canSkip(d)?l.push(d):o[d.id]=!0});const a=r.filter(d=>o[d.id]),u=(d,h)=>({currentPos:h,rowNode:d}),c=l.map(u).sort((d,h)=>this.rowNodeSorter.compareRowNodes(s,d,h));return this.mergeSortedArrays(s,c,a.map(u)).map(({rowNode:d})=>d)}mergeSortedArrays(e,t,i){const s=[];let n=0,r=0;for(;n<t.length&&r<i.length;)this.rowNodeSorter.compareRowNodes(e,t[n],i[r])<0?s.push(t[n++]):s.push(i[r++]);for(;n<t.length;)s.push(t[n++]);for(;r<i.length;)s.push(i[r++]);return s}updateChildIndexes(e){if(X(e.childrenAfterSort))return;const t=e.childrenAfterSort;for(let i=0;i<t.length;i++){const s=t[i],n=i===0,r=i===e.childrenAfterSort.length-1;s.setFirstChild(n),s.setLastChild(r),s.setChildIndex(i)}}updateGroupDataForHideOpenParents(e){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return M("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;const t=i=>{this.pullDownGroupDataForHideOpenParents(i.childrenAfterSort,!1),i.childrenAfterSort.forEach(s=>{s.hasChildren()&&t(s)})};e&&e.executeFromRootNode(i=>t(i))}pullDownGroupDataForHideOpenParents(e,t){!this.gos.get("groupHideOpenParents")||X(e)||e.forEach(i=>{var n;(((n=this.showRowGroupColsService)==null?void 0:n.getShowRowGroupCols())??[]).forEach(r=>{const o=r.getColDef().showRowGroup;if(typeof o!="string"){oe("groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}const l=o,a=this.columnModel.getColDefCol(l);if(a!==i.rowGroupColumn)if(t)i.setGroupValue(r.getId(),void 0);else{const c=i.getFirstChildOfFirstChild(a);c&&i.setGroupValue(r.getId(),c.key)}})})}},F3=class extends T{constructor(){super(...arguments),this.beanName="sortStage"}wireBeans(e){this.sortService=e.sortService,this.sortController=e.sortController}execute(e){const t=this.sortController.getSortOptions(),i=A(t)&&t.length>0,s=i&&A(e.rowNodeTransactions)&&this.gos.get("deltaSort"),n=t.some(r=>this.gos.isColumnsSortingCoupledToGroup()?r.column.isPrimary()&&r.column.isRowGroupActive():!!r.column.getColDef().showRowGroup);this.sortService.sort(t,i,s,e.rowNodeTransactions,e.changedPath,n)}},cC="32.0.2",AT={version:cC,moduleName:"@ag-grid-community/client-side-row-model-core",rowModel:"clientSide",beans:[d3,R3,F3,b3,P3,E3]},T3={version:cC,moduleName:"@ag-grid-community/client-side-row-model-api",beans:[MT],apiFunctions:{onGroupExpandedOrCollapsed:h3,refreshClientSideRowModel:p3,forEachLeafNode:f3,forEachNodeAfterFilter:g3,forEachNodeAfterFilterAndSort:m3,resetRowHeights:v3,applyTransaction:C3,applyTransactionAsync:w3,flushAsyncTransactions:y3,getBestCostNodeSelection:S3},dependantModules:[AT,r3]},x3={version:cC,moduleName:"@ag-grid-community/client-side-row-model",dependantModules:[AT,T3]},I3=class extends T{setBeans(e){this.beans=e}getFileName(e){const t=this.getDefaultFileExtension();return(e==null||!e.length)&&(e=this.getDefaultFileName()),e.indexOf(".")===-1?`${e}.${t}`:e}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},D3=class{constructor(e){this.groupColumns=[];const{columnModel:t,funcColsService:i,columnNameService:s,valueService:n,gos:r,processCellCallback:o,processHeaderCallback:l,processGroupHeaderCallback:a,processRowGroupCallback:u}=e;this.columnModel=t,this.funcColsService=i,this.columnNameService=s,this.valueService=n,this.gos=r,this.processCellCallback=o,this.processHeaderCallback=l,this.processGroupHeaderCallback=a,this.processRowGroupCallback=u}prepare(e){this.groupColumns=e.filter(t=>!!t.getColDef().showRowGroup)}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,i,s,n){const o=(!this.gos.get("groupHideOpenParents")||n.footer)&&this.shouldRenderGroupSummaryCell(n,e,t)?this.createValueForGroupNode(e,n):this.valueService.getValue(e,n);return this.processCell({accumulatedRowIndex:i,rowNode:n,column:e,value:o,processCellCallback:this.processCellCallback,type:s})}shouldRenderGroupSummaryCell(e,t,i){var o;if(!(e&&e.group))return!1;if(this.groupColumns.indexOf(t)!==-1){if(((o=e.groupData)==null?void 0:o[t.getId()])!=null||this.gos.isRowModelType("serverSide")&&e.group)return!0;if(e.footer&&e.level===-1){const l=t.getColDef();return l==null||l.showRowGroup===!0||l.showRowGroup===this.funcColsService.getRowGroupColumns()[0].getId()}}const r=this.gos.isGroupUseEntireRow(this.columnModel.isPivotMode());return i===0&&r}getHeaderName(e,t){return e?e(this.gos.addGridCommonParams({column:t})):this.columnNameService.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(e,t){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:e,node:t}));const i=this.gos.get("treeData"),s=this.gos.get("suppressGroupMaintainValueType"),n=a=>{var c;if(i||s)return a.key;const u=(c=a.groupData)==null?void 0:c[e.getId()];return!u||!a.rowGroupColumn||a.rowGroupColumn.getColDef().useValueFormatterForExport===!1?u:this.valueService.formatValue(a.rowGroupColumn,a,u)??u},r=t.footer,o=[n(t)];if(!this.gos.isGroupMultiAutoColumn())for(;t.parent;)t=t.parent,o.push(n(t));const l=o.reverse().join(" -> ");return r?`Total ${l}`:l}processCell(e){const{accumulatedRowIndex:t,rowNode:i,column:s,value:n,processCellCallback:r,type:o}=e;return r?{value:r(this.gos.addGridCommonParams({accumulatedRowIndex:t,column:s,node:i,value:n,type:o,parseValue:l=>this.valueService.parseValue(s,i,l,this.valueService.getValue(s,i)),formatValue:l=>this.valueService.formatValue(s,i,l)??l}))??""}:s.getColDef().useValueFormatterForExport!==!1?{value:n??"",valueFormatted:this.valueService.formatValue(s,i,n)}:{value:n??""}}},k3=class{static download(e,t){const i=document.defaultView||window;if(!i){M("There is no `window` associated with the current `document`");return}const s=document.createElement("a"),n=i.URL.createObjectURL(t);s.setAttribute("href",n),s.setAttribute("download",e),s.style.display="none",document.body.appendChild(s),s.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),document.body.removeChild(s),i.setTimeout(()=>{i.URL.revokeObjectURL(n)},0)}},LS=`\r
`,M3=class extends D3{constructor(e){super(e),this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:i}=e;this.suppressQuotes=t,this.columnSeparator=i}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,LS),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((i,s)=>{s!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(i.data.value||""),i.mergeAcross&&this.appendEmptyCells(i.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,i,s){i!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(s)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,i){t!=0&&(this.result+=this.columnSeparator);const s=this.extractRowCellValue(e,t,t,"csv",i);this.result+=this.putInQuotes(s.valueFormatted??s.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(M("unknown value type during csv conversion"),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=LS),this.isFirstLine=!1}},A3=class extends I3{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.gridSerializer=e.gridSerializer}postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){M("Export cancelled. Export is not allowed as per your configuration.");return}const t=this.getMergedParams(e),i=this.getData(t),s=new Blob(["\uFEFF",i],{type:"text/plain"}),n=typeof t.fileName=="function"?t.fileName(this.gos.getGridCommonParams()):t.fileName;k3.download(this.getFileName(n),s)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){const i=t?Object.assign({},e):this.getMergedParams(e);return this.getData(i)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{columnModel:t,columnNameService:i,funcColsService:s,valueService:n,gos:r}=this,{processCellCallback:o,processHeaderCallback:l,processGroupHeaderCallback:a,processRowGroupCallback:u,suppressQuotes:c,columnSeparator:d}=e;return new M3({columnModel:t,columnNameService:i,funcColsService:s,valueService:n,gos:r,processCellCallback:o||void 0,processHeaderCallback:l||void 0,processGroupHeaderCallback:a||void 0,processRowGroupCallback:u||void 0,suppressQuotes:c||!1,columnSeparator:d||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function _3(e,t){var i;return(i=e.csvCreator)==null?void 0:i.getDataAsCsv(t)}function L3(e,t){var i;(i=e.csvCreator)==null||i.exportDataAsCsv(t)}var O3=class extends T{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.selectionService=e.selectionService,this.rowNodeSorter=e.rowNodeSorter,this.sortController=e.sortController}serialize(e,t={}){const{allColumns:i,columnKeys:s,skipRowGroups:n}=t,r=this.getColumnsToExport(i,n,s);return HG(this.prepareSession(r),this.prependContent(t),this.exportColumnGroups(t,r),this.exportHeaders(t,r),this.processPinnedTopRows(t,r),this.processRows(t,r),this.processPinnedBottomRows(t,r),this.appendContent(t))(e).parse()}processRow(e,t,i,s){var v;const n=t.shouldRowBeSkipped||(()=>!1),r=this.gos.get("groupRemoveSingleChildren"),o=this.gos.get("groupRemoveLowestSingleChildren"),a=t.rowPositions!=null||!!t.onlySelected,u=this.gos.get("groupHideOpenParents")&&!a,c=this.columnModel.isPivotMode()?s.leafGroup:!s.group,d=!!s.footer,h=o&&s.leafGroup,p=s.allChildrenCount===1&&((v=s.childrenAfterGroup)==null?void 0:v.length)===1&&(r||h);if(!c&&!d&&(t.skipRowGroups||p||u)||t.onlySelected&&!s.isSelected()||t.skipPinnedTop&&s.rowPinned==="top"||t.skipPinnedBottom&&s.rowPinned==="bottom"||s.level===-1&&!c&&!d||n(this.gos.addGridCommonParams({node:s})))return;const w=e.onNewBodyRow(s);if(i.forEach((g,y)=>{w.onColumn(g,y,s)}),t.getCustomContentBelowRow){const g=t.getCustomContentBelowRow(this.gos.addGridCommonParams({node:s}));g&&e.addCustomContent(g)}}appendContent(e){return t=>{const i=e.appendContent;return i&&t.addCustomContent(i),t}}prependContent(e){return t=>{const i=e.prependContent;return i&&t.addCustomContent(i),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return i=>{if(!e.skipColumnGroupHeaders){const s=new rF,n=this.visibleColsService.createGroups({columns:t,idCreator:s,pinned:null,isStandaloneStructure:!0});this.recursivelyAddHeaderGroups(n,i,e.processGroupHeaderCallback)}return i}}exportHeaders(e,t){return i=>{if(!e.skipColumnHeaders){const s=i.onNewHeaderRow();t.forEach((n,r)=>{s.onColumn(n,r,void 0)})}return i}}processPinnedTopRows(e,t){return i=>{const s=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(n=>n.rowPinned==="top").sort((n,r)=>n.rowIndex-r.rowIndex).map(n=>this.pinnedRowModel.getPinnedTopRow(n.rowIndex)).forEach(s):this.pinnedRowModel.forEachPinnedTopRow(s),i}}processRows(e,t){return i=>{const s=this.rowModel,n=s.getType(),r=n==="clientSide",o=n==="serverSide",l=!r&&e.onlySelected,a=this.processRow.bind(this,i,e,t),{exportedRows:u="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(c=>c.rowPinned==null).sort((c,d)=>c.rowIndex-d.rowIndex).map(c=>s.getRow(c.rowIndex)).forEach(a);else if(this.columnModel.isPivotMode())r?s.forEachPivotNode(a,!0):o?s.forEachNodeAfterFilterAndSort(a,!0):s.forEachNode(a);else if(e.onlySelectedAllPages||l){const c=this.selectionService.getSelectedNodes();this.replicateSortedOrder(c),c.forEach(a)}else u==="all"?s.forEachNode(a):r||o?s.forEachNodeAfterFilterAndSort(a,!0):s.forEachNode(a);return i}}replicateSortedOrder(e){const t=this.sortController.getSortOptions(),i=(s,n)=>{var r,o;return s.rowIndex!=null&&n.rowIndex!=null?s.rowIndex-n.rowIndex:s.level===n.level?((r=s.parent)==null?void 0:r.id)===((o=n.parent)==null?void 0:o.id)?this.rowNodeSorter.compareRowNodes(t,{rowNode:s,currentPos:s.rowIndex??-1},{rowNode:n,currentPos:n.rowIndex??-1}):i(s.parent,n.parent):s.level>n.level?i(s.parent,n):i(s,n.parent)};e.sort(i)}processPinnedBottomRows(e,t){return i=>{const s=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(n=>n.rowPinned==="bottom").sort((n,r)=>n.rowIndex-r.rowIndex).map(n=>this.pinnedRowModel.getPinnedBottomRow(n.rowIndex)).forEach(s):this.pinnedRowModel.forEachPinnedBottomRow(s),i}}getColumnsToExport(e=!1,t=!1,i){const s=this.columnModel.isPivotMode();if(i&&i.length)return this.columnModel.getColsForKeys(i);const n=this.gos.get("treeData");let r=[];return e&&!s?r=this.columnModel.getCols():r=this.visibleColsService.getAllCols(),t&&!n&&(r=r.filter(o=>o.getColId()!==Ka)),r}recursivelyAddHeaderGroups(e,t,i){const s=[];e.forEach(n=>{const r=n;r.getChildren&&r.getChildren().forEach(o=>s.push(o))}),e.length>0&&je(e[0])&&this.doAddHeaderHeader(t,e,i),s&&s.length>0&&this.recursivelyAddHeaderGroups(s,t,i)}doAddHeaderHeader(e,t,i){const s=e.onNewHeaderGroupingRow();let n=0;t.forEach(r=>{const o=r;let l;i?l=i(this.gos.addGridCommonParams({columnGroup:o})):l=this.columnNameService.getDisplayNameForColumnGroup(o,"header");const a=o.getLeafColumns().reduce((u,c,d,h)=>{let p=se(u);return c.getColumnGroupShow()==="open"?(!p||p[1]!=null)&&(p=[d],u.push(p)):p&&p[1]==null&&(p[1]=d-1),d===h.length-1&&p&&p[1]==null&&(p[1]=d),u},[]);s.onColumn(o,l||"",n++,o.getLeafColumns().length-1,a)})}},dC="32.0.2",_T={version:dC,moduleName:"@ag-grid-community/csv-export-core",beans:[A3,O3]},N3={version:dC,moduleName:"@ag-grid-community/csv-export-api",apiFunctions:{getDataAsCsv:_3,exportDataAsCsv:L3},dependantModules:[_T]},G3={version:dC,moduleName:"@ag-grid-community/csv-export",dependantModules:[_T,N3]},H3=class extends Uz{wireBeans(e){this.beans=e}constructor(e,t,i){super(e),this.parentCache=t,this.params=i,this.startRow=e*i.blockSize,this.endRow=this.startRow+i.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(e,t,i){A(t)?e.setDataAndId(t,i.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();if(X(this.params.datasource.getRows)){M("datasource is missing getRows method");return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(e,t,i){this.rowNodes.forEach((s,n)=>{this.startRow+n<i&&e(s,t.next())})}getLastAccessed(){return this.lastAccessed}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.next());const i=e-this.startRow;return this.rowNodes[i]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let e=0;e<this.params.blockSize;e++){const t=this.startRow+e,i=new ys(this.beans);i.setRowHeight(this.params.rowHeight),i.uiLevel=0,i.setRowIndex(t),i.setRowTop(this.params.rowHeight*t),this.rowNodes.push(i)}}processServerResult(e){this.rowNodes.forEach((i,s)=>{const n=e.rowData?e.rowData[s]:void 0;!i.id&&i.alreadyRendered&&n&&(this.rowNodes[s]=new ys(this.beans),this.rowNodes[s].setRowIndex(i.rowIndex),this.rowNodes[s].setRowTop(i.rowTop),this.rowNodes[s].setRowHeight(i.rowHeight),i.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[s],n,this.startRow+s)});const t=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,t)}destroy(){this.rowNodes.forEach(e=>{e.clearRowTopAndRowIndex()}),super.destroy()}},V3=2,B3=class extends T{constructor(e){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount,this.params=e}wireBeans(e){this.rowRenderer=e.rowRenderer,this.focusService=e.focusService}getRow(e,t=!1){const i=Math.floor(e/this.params.blockSize);let s=this.blocks[i];if(!s){if(t)return;s=this.createBlock(i)}return s.getRow(e)}createBlock(e){const t=this.createBean(new H3(e,this,this.params));return this.blocks[t.getId()]=t,this.blockCount++,this.purgeBlocksIfNeeded(t),this.params.rowNodeBlockLoader.addBlock(t),t}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(t=>t.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e)),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(this.gos.get("debug")&&Mi(`InfiniteCache - onPageLoaded: page = ${e.getId()}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter(o=>o!=e),i=(o,l)=>l.getLastAccessed()-o.getLastAccessed();t.sort(i);const s=this.params.maxBlocksInCache>0,n=s?this.params.maxBlocksInCache-1:null,r=V3-1;t.forEach((o,l)=>{const a=o.getState()==="needsLoading"&&l>=r,u=s?l>=n:!1;if(a||u){if(this.isBlockCurrentlyDisplayed(o)||this.isBlockFocused(o))return;this.removeBlockFromCache(o)}})}isBlockFocused(e){const t=this.focusService.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;const i=e.getStartRow(),s=e.getEndRow();return t.rowIndex>=i&&t.rowIndex<s}isBlockCurrentlyDisplayed(e){const t=e.getStartRow(),i=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(t,i)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const s=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<s&&(this.rowCount=s)}}setRowCount(e,t){this.rowCount=e,A(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t=new ko;this.getBlocksInOrder().forEach(i=>i.forEachNode(e,t,this.rowCount))}getBlocksInOrder(){const e=(i,s)=>i.getId()-s.getId();return Pg(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){if(this.isAlive()){this.destroyAllBlocksPastVirtualRowCount();const e={type:"storeUpdated"};this.eventService.dispatchEvent(e)}}destroyAllBlocksPastVirtualRowCount(){const e=[];this.getBlocksInOrder().forEach(t=>{t.getId()*this.params.blockSize>=this.rowCount&&e.push(t)}),e.length>0&&e.forEach(t=>this.destroyBlock(t))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const i=[];let s=-1,n=!1;const r=new ko;let o=!1;return this.getBlocksInOrder().forEach(a=>{if(!o){if(n&&s+1!==a.getId()){o=!0;return}s=a.getId(),a.forEachNode(u=>{const c=u===e||u===t;(n||c)&&i.push(u),c&&(n=!n)},r,this.rowCount)}}),o||n?[]:i}},W3=class extends T{constructor(){super(...arguments),this.beanName="rowModel"}wireBeans(e){this.filterManager=e.filterManager,this.sortController=e.sortController,this.selectionService=e.selectionService,this.rowRenderer=e.rowRenderer,this.rowNodeBlockLoader=e.rowNodeBlockLoader}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){this.gos.isRowModelType("infinite")&&(this.rowHeight=this.gos.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&M("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.onCacheUpdated.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=this.gos.getRowHeightAsNumber(),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let e;this.cacheParams?e=this.isSortModelDifferent():e=!0,e&&this.reset()}isSortModelDifferent(){return!hd(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,t):[]}reset(){if(!this.datasource)return;this.gos.getRowIdCallback()!=null||this.selectionService.reset("rowDataChanged"),this.resetCache()}createModelUpdatedEvent(){return{type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1}}resetCache(){var t;this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:((t=this.filterManager)==null?void 0:t.getFilterModel())??{},sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:this.gos.getRowHeightAsNumber(),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new ko},this.infiniteCache=this.createBean(new B3(this.cacheParams)),this.eventService.dispatchEventOnce({type:"rowCountReady"});const e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)}updateRowHeights(){this.forEachNode(t=>{t.setRowHeight(this.rowHeight),t.setRowTop(this.rowHeight*t.rowIndex)});const e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){const e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)}getRow(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)}getRowNode(e){let t;return this.forEachNode(i=>{i.id===e&&(t=i)}),t}forEachNode(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){const t=Math.floor(e/this.rowHeight),i=this.getRowCount()-1;return t>i?i:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1}setRowCount(e,t){this.infiniteCache&&this.infiniteCache.setRowCount(e,t)}};function z3(e){var t,i;(i=(t=e.rowModelHelperService)==null?void 0:t.getInfiniteRowModel())==null||i.refreshCache()}function U3(e){var t,i;(i=(t=e.rowModelHelperService)==null?void 0:t.getInfiniteRowModel())==null||i.purgeCache()}function j3(e){var t,i;return(i=(t=e.rowModelHelperService)==null?void 0:t.getInfiniteRowModel())==null?void 0:i.getRowCount()}function $3(e){var t,i;return(i=(t=e.rowModelHelperService)==null?void 0:t.getInfiniteRowModel())==null?void 0:i.isLastRowIndexKnown()}var hC="32.0.2",LT={version:hC,moduleName:"@ag-grid-community/infinite-row-model-core",rowModel:"infinite",beans:[W3],dependantModules:[$z]},K3={version:hC,moduleName:"@ag-grid-community/infinite-row-model-api",beans:[MT],apiFunctions:{refreshInfiniteCache:z3,purgeInfiniteCache:U3,getInfiniteRowCount:j3,isLastRowIndexKnown:$3},dependantModules:[LT,o3]},q3={version:hC,moduleName:"@ag-grid-community/infinite-row-model",dependantModules:[LT,K3]};Rt.__registerModules([TT,x3,q3,G3],!1,void 0);var At=_.createContext({}),Ja=(e,t,i,s)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const r=e.newAgStackInstance();if(r==null)return;let o,l,a=!1;return r.then(u=>{if(a){t.destroyBean(u);return}o=u,l=o.getGui(),i.appendChild(l),OS(s,o)}),()=>{a=!0,o&&(l&&l.parentElement&&l.parentElement.removeChild(l),t.destroyBean(o),s&&OS(s,void 0))}},OS=(e,t)=>{if(e)if(e instanceof Function)e(t);else{const i=e;i.current=t}},Fi=(...e)=>e.filter(i=>i!=null&&i!=="").join(" "),pi=class OT{constructor(...t){this.classesMap={},t.forEach(i=>{this.classesMap[i]=!0})}setClass(t,i){if(!!this.classesMap[t]==i)return this;const n=new OT;return n.classesMap={...this.classesMap},n.classesMap[t]=i,n}toString(){return Object.keys(this.classesMap).filter(i=>this.classesMap[i]).join(" ")}},Qo=e=>{const t=()=>typeof Symbol=="function"&&Symbol.for,i=()=>t()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===i()},NT=qf.createRoot!=null&&qf.flushSync!=null;function Y3(){return!NT}var lc=!1;function Q3(e){return lc||setTimeout(()=>lc=!1,0),lc=!0,e()}var pC=(e,t)=>{NT&&e&&!lc?qf.flushSync(t):t()};function fC(e,t,i){if(t==null||e==null)return t;if(e===t||t.length===0&&e.length===0)return e;if(i||e.length===0&&t.length>0||e.length>0&&t.length===0)return t;const s=[],n=[],r=new Map,o=new Map;for(let l=0;l<t.length;l++){const a=t[l];o.set(a.getInstanceId(),a)}for(let l=0;l<e.length;l++){const a=e[l];r.set(a.getInstanceId(),a),o.has(a.getInstanceId())&&s.push(a)}for(let l=0;l<t.length;l++){const a=t[l],u=a.getInstanceId();r.has(u)||n.push(a)}return s.length===e.length&&n.length===0?e:s.length===0&&n.length===t.length?t:s.length===0?n:n.length===0?s:[...s,...n]}var GT=C.forwardRef((e,t)=>{var re;const{ctrlsFactory:i,context:s}=C.useContext(At),n=C.useRef(null),r=C.useRef(null),o=C.useRef(null),l=C.useRef(null),a=C.useRef(null),u=C.useRef(),[c,d]=C.useState(),[h,p]=C.useState(),[f,m]=C.useState(),[w,v]=C.useState(()=>new pi),[g,y]=C.useState(()=>new pi("ag-hidden")),[S,b]=C.useState(()=>new pi("ag-hidden")),[R,E]=C.useState(()=>new pi("ag-invisible"));C.useImperativeHandle(t,()=>({refresh(){return!1}})),C.useLayoutEffect(()=>Ja(c,s,r.current),[c]);const x=C.useCallback(L=>{if(n.current=L,!n.current){s.destroyBean(u.current),u.current=null;return}const B={setInnerRenderer:(j,W)=>{d(j),m(W)},setChildCount:j=>p(j),addOrRemoveCssClass:(j,W)=>v(Te=>Te.setClass(j,W)),setContractedDisplayed:j=>b(W=>W.setClass("ag-hidden",!j)),setExpandedDisplayed:j=>y(W=>W.setClass("ag-hidden",!j)),setCheckboxVisible:j=>E(W=>W.setClass("ag-invisible",!j))},U=i.getInstance("groupCellRendererCtrl");U&&(u.current=s.createBean(U),u.current.init(B,n.current,o.current,l.current,a.current,GT,e))},[]),I=C.useMemo(()=>`ag-cell-wrapper ${w.toString()}`,[w]),D=C.useMemo(()=>`ag-group-expanded ${g.toString()}`,[g]),G=C.useMemo(()=>`ag-group-contracted ${S.toString()}`,[S]),H=C.useMemo(()=>`ag-group-checkbox ${R.toString()}`,[R]),J=c&&c.componentFromFramework,Z=J?c.componentClass:void 0,pe=c==null&&f!=null,Q=Zi(f,!0);return _.createElement("span",{className:I,ref:x,...e.colDef?{}:{role:(re=u.current)==null?void 0:re.getCellAriaRole()}},_.createElement("span",{className:D,ref:l}),_.createElement("span",{className:G,ref:a}),_.createElement("span",{className:H,ref:o}),_.createElement("span",{className:"ag-group-value",ref:r},pe&&_.createElement(_.Fragment,null,Q),J&&_.createElement(Z,{...c.params})),_.createElement("span",{className:"ag-group-child-count"},h))}),NS=GT,gC=C.createContext({setMethods:()=>{}}),J3=e=>{const{initialProps:t,addUpdateCallback:i,CustomComponentClass:s,setMethods:n}=e,[r,o]=C.useState(t);return C.useEffect(()=>{i(l=>o(l))},[]),_.createElement(gC.Provider,{value:{setMethods:n}},_.createElement(s,{...r}))},X3=C.memo(J3),Z3=0;function GS(){return`agPortalKey_${++Z3}`}var HT=class{constructor(e,t,i,s){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=i,this.suppressFallbackMethods=!!s,this.statelessComponent=this.isStateless(this.reactComponent),this.key=GS(),this.portalKey=GS(),this.instanceCreated=this.isStatelessComponent()?Ve.resolve(!1):new Ve(n=>{this.resolveInstanceCreated=n})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),i=document.createElement(t||"div");return i.classList.add("ag-react-container"),e.reactContainer=i,i}addParentContainerStyleAndClasses(){this.componentInstance&&(this.componentInstance.getReactContainerStyle&&this.componentInstance.getReactContainerStyle()&&(M('Since v31.1 "getReactContainerStyle" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),Object.assign(this.eParentElement.style,this.componentInstance.getReactContainerStyle())),this.componentInstance.getReactContainerClasses&&this.componentInstance.getReactContainerClasses()&&(M('Since v31.1 "getReactContainerClasses" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),this.componentInstance.getReactContainerClasses().forEach(t=>this.eParentElement.classList.add(t))))}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&t[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,t){const i=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!i){setTimeout(()=>this.callMethod(e,t));return}const s=i[e];if(s)return s.apply(i,t);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,t&&t[0]?t[0]:{})}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.params=e,this.createOrUpdatePortal(e),new Ve(t=>this.createReactComponent(t))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=t=>{var i;this.componentInstance=t,this.addParentContainerStyleAndClasses(),(i=this.resolveInstanceCreated)==null||i.call(this,!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=Vd.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return C.createElement(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const i=this[`${e}Component`];if(!this.suppressFallbackMethods&&i)return i.bind(this)(t)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function mC(e,t,i){e.forEach(s=>{const n=t[s];n&&(i[s]=n)})}var Os=class extends HT{constructor(){super(...arguments),this.awaitUpdateCallback=new Ve(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=X3}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:i=>this.setMethods(i),addUpdateCallback:i=>{this.updateCallback=()=>(i(this.getProps()),new Ve(s=>{setTimeout(()=>{s()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,mC(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new Ve(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},eK=class extends Os{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},tK=class extends Os{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},iK=class extends Os{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterChangedCallback(),this.expectingNewMethods=!0}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getOptionalMethods(){return["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){var t;this.expectingNewMethods===!1&&((t=this.providedMethods)==null?void 0:t.doesFilterPass)!==(e==null?void 0:e.doesFilterPass)&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e)}updateModel(e){this.setModel(e).then(()=>this.sourceParams.filterChangedCallback())}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,delete e.filterModifiedCallback,delete e.valueGetter,e}};function VT(e,t){e.parentFilterInstance(i=>{(i.setModel(t)||Ve.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var sK=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=i=>this.updateModel(i)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){mC(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),VT(this.floatingFilterParams,e)}},nK=class extends Os{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),VT(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},rK=class extends Os{refresh(e){this.sourceParams=e,this.refreshProps()}},oK=class extends Os{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},lK=class extends Os{refresh(e){this.sourceParams=e,this.refreshProps()}},aK=class extends Os{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},uK=class extends Os{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function vC(){M("As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.")}var cK=1e3,dK=class{constructor(e,t,i){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=i||cK}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(t=>t!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,i){this.portals=[...this.portals,e],this.waitForInstance(t,i),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t,i=Date.now()){if(this.destroyed){t(null);return}if(e.rendered())t(e);else{if(Date.now()-i>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate)return;window.setTimeout(()=>{this.waitForInstance(e,t,i)})}}},hK=e=>{const{ctrl:t}=e,i=t.isAlive(),{context:s}=C.useContext(At),n=i?t.getColId():void 0,[r,o]=C.useState(),l=C.useRef(null),a=C.useRef(null),u=C.useRef(null),c=C.useRef(),d=C.useRef();i&&!d.current&&(d.current=new qa(()=>l.current));const h=C.useCallback(w=>{var y;if(l.current=w,!l.current||!i)return;const v={setWidth:S=>{l.current&&(l.current.style.width=S)},addOrRemoveCssClass:(S,b)=>d.current.addOrRemoveCssClass(S,b),setAriaSort:S=>{l.current&&(S?CH(l.current,S):wH(l.current))},setUserCompDetails:S=>o(S),getUserCompInstance:()=>c.current||void 0};t.setComp(v,l.current,a.current,u.current);const g=t.getSelectAllGui();(y=a.current)==null||y.insertAdjacentElement("afterend",g)},[]);C.useLayoutEffect(()=>Ja(r,s,u.current,c),[r]),C.useEffect(()=>{t.setDragSource(l.current)},[r]);const p=C.useMemo(()=>!!((r==null?void 0:r.componentFromFramework)&&Qo(r.componentClass)),[r]),f=r&&r.componentFromFramework,m=r&&r.componentClass;return _.createElement("div",{ref:h,className:"ag-header-cell","col-id":n,role:"columnheader"},_.createElement("div",{ref:a,className:"ag-header-cell-resize",role:"presentation"}),_.createElement("div",{ref:u,className:"ag-header-cell-comp-wrapper",role:"presentation"},f&&p&&_.createElement(m,{...r.params}),f&&!p&&_.createElement(m,{...r.params,ref:c})))},pK=C.memo(hK),fK=e=>{const{context:t,gos:i}=C.useContext(At),[s,n]=C.useState(()=>new pi("ag-header-cell","ag-floating-filter")),[r,o]=C.useState(()=>new pi),[l,a]=C.useState(()=>new pi("ag-floating-filter-button","ag-hidden")),[u,c]=C.useState("false"),[d,h]=C.useState(),[,p]=C.useState(1),f=C.useRef(null),m=C.useRef(null),w=C.useRef(null),v=C.useRef(null),g=C.useRef(),y=C.useRef(),S=Q=>{Q!=null&&g.current&&g.current(Q)},{ctrl:b}=e,R=C.useCallback(Q=>{if(f.current=Q,!f.current)return;y.current=new Ve(L=>{g.current=L});const re={addOrRemoveCssClass:(L,B)=>n(U=>U.setClass(L,B)),addOrRemoveBodyCssClass:(L,B)=>o(U=>U.setClass(L,B)),setButtonWrapperDisplayed:L=>{a(B=>B.setClass("ag-hidden",!L)),c(L?"false":"true")},setWidth:L=>{f.current&&(f.current.style.width=L)},setCompDetails:L=>h(L),getFloatingFilterComp:()=>y.current?y.current:null,setMenuIcon:L=>{var B;return(B=v.current)==null?void 0:B.appendChild(L)}};b.setComp(re,f.current,v.current,m.current)},[]);C.useLayoutEffect(()=>Ja(d,t,m.current,S),[d]);const E=C.useMemo(()=>s.toString(),[s]),x=C.useMemo(()=>r.toString(),[r]),I=C.useMemo(()=>l.toString(),[l]),D=C.useMemo(()=>!!(d&&d.componentFromFramework&&Qo(d.componentClass)),[d]),G=C.useMemo(()=>i.get("reactiveCustomComponents"),[]),H=C.useMemo(()=>{if(d)if(G){const Q=new sK(d.params,()=>p(re=>re+1));return S(Q),Q}else d.componentFromFramework&&vC()},[d]),J=H==null?void 0:H.getProps(),Z=d&&d.componentFromFramework,pe=d&&d.componentClass;return _.createElement("div",{ref:R,className:E,role:"gridcell"},_.createElement("div",{ref:m,className:x,role:"presentation"},Z&&!G&&_.createElement(pe,{...d.params,ref:D?()=>{}:S}),Z&&G&&_.createElement(gC.Provider,{value:{setMethods:Q=>H.setMethods(Q)}},_.createElement(pe,{...J}))),_.createElement("div",{ref:w,"aria-hidden":u,className:I,role:"presentation"},_.createElement("button",{ref:v,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},gK=C.memo(fK),mK=e=>{const{context:t}=C.useContext(At),{ctrl:i}=e,[s,n]=C.useState(()=>new pi),[r,o]=C.useState(()=>new pi),[l,a]=C.useState("false"),[u,c]=C.useState(),[d,h]=C.useState(),p=C.useMemo(()=>i.getColId(),[]),f=C.useRef(null),m=C.useRef(null),w=C.useRef(),v=C.useCallback(E=>{if(f.current=E,!f.current)return;const x={setWidth:I=>{f.current&&(f.current.style.width=I)},addOrRemoveCssClass:(I,D)=>n(G=>G.setClass(I,D)),setUserCompDetails:I=>h(I),setResizableDisplayed:I=>{o(D=>D.setClass("ag-hidden",!I)),a(I?"false":"true")},setAriaExpanded:I=>c(I),getUserCompInstance:()=>w.current||void 0};i.setComp(x,f.current,m.current)},[]);C.useLayoutEffect(()=>Ja(d,t,f.current),[d]),C.useEffect(()=>{f.current&&i.setDragSource(f.current)},[d]);const g=C.useMemo(()=>!!((d==null?void 0:d.componentFromFramework)&&Qo(d.componentClass)),[d]),y=C.useMemo(()=>"ag-header-group-cell "+s.toString(),[s]),S=C.useMemo(()=>"ag-header-cell-resize "+r.toString(),[r]),b=d&&d.componentFromFramework,R=d&&d.componentClass;return _.createElement("div",{ref:v,className:y,"col-id":p,role:"columnheader","aria-expanded":u},b&&g&&_.createElement(R,{...d.params}),b&&!g&&_.createElement(R,{...d.params,ref:w}),_.createElement("div",{ref:m,"aria-hidden":l,className:S}))},vK=C.memo(mK),CK=e=>{const{ctrl:t}=e,{topOffset:i,rowHeight:s}=C.useMemo(()=>t.getTopAndHeight(),[]),n=t.getAriaRowIndex(),r=t.getHeaderRowClass(),[o,l]=C.useState(()=>s+"px"),[a,u]=C.useState(()=>i+"px"),c=C.useRef(null),d=C.useRef(null),[h,p]=C.useState(()=>t.getHeaderCtrls()),f=C.useRef(null),m=C.useCallback(g=>{if(f.current=g,!g)return;const y={setHeight:S=>l(S),setTop:S=>u(S),setHeaderCtrls:(S,b,R)=>{d.current=c.current,c.current=S;const E=fC(d.current,S,b);E!==d.current&&pC(R,()=>p(E))},setWidth:S=>{f.current&&(f.current.style.width=S)}};t.setComp(y,!1)},[]),w=C.useMemo(()=>({height:o,top:a}),[o,a]),v=C.useCallback(g=>{switch(t.getType()){case _g.COLUMN_GROUP:return _.createElement(vK,{ctrl:g,key:g.getInstanceId()});case _g.FLOATING_FILTER:return _.createElement(gK,{ctrl:g,key:g.getInstanceId()});default:return _.createElement(pK,{ctrl:g,key:g.getInstanceId()})}},[]);return _.createElement("div",{ref:m,className:r,role:"row",style:w,"aria-rowindex":n},h.map(v))},wK=C.memo(CK),yK=e=>{const[t,i]=C.useState(!0),[s,n]=C.useState([]),{context:r}=C.useContext(At),o=C.useRef(null),l=C.useRef(null),a=C.useRef(null),u=e.pinned==="left",c=e.pinned==="right",d=!u&&!c,h=C.useCallback(m=>{if(o.current=m,!o.current){r.destroyBean(a.current),a.current=null;return}const w={setDisplayed:i,setCtrls:v=>n(v),setCenterWidth:v=>{l.current&&(l.current.style.width=v)},setViewportScrollLeft:v=>{o.current&&(o.current.scrollLeft=v)},setPinnedContainerWidth:v=>{o.current&&(o.current.style.width=v,o.current.style.minWidth=v,o.current.style.maxWidth=v)}};a.current=r.createBean(new YB(e.pinned)),a.current.setComp(w,o.current)},[]),p=t?"":"ag-hidden",f=()=>s.map(m=>_.createElement(wK,{ctrl:m,key:m.getInstanceId()}));return _.createElement(_.Fragment,null,u&&_.createElement("div",{ref:h,className:"ag-pinned-left-header "+p,"aria-hidden":!t,role:"rowgroup"},f()),c&&_.createElement("div",{ref:h,className:"ag-pinned-right-header "+p,"aria-hidden":!t,role:"rowgroup"},f()),d&&_.createElement("div",{ref:h,className:"ag-header-viewport "+p,role:"presentation"},_.createElement("div",{ref:l,className:"ag-header-container",role:"rowgroup"},f())))},qp=C.memo(yK),SK=()=>{const[e,t]=C.useState(()=>new pi),[i,s]=C.useState(),{context:n}=C.useContext(At),r=C.useRef(null),o=C.useRef(null),l=C.useCallback(c=>{if(r.current=c,!c){n.destroyBean(o.current),o.current=null;return}const d={addOrRemoveCssClass:(h,p)=>t(f=>f.setClass(h,p)),setHeightAndMinHeight:h=>s(h)};o.current=n.createBean(new _B),o.current.setComp(d,r.current,r.current)},[]),a=C.useMemo(()=>"ag-header "+e.toString(),[e]),u=C.useMemo(()=>({height:i,minHeight:i}),[i]);return _.createElement("div",{ref:l,className:a,style:u,role:"presentation"},_.createElement(qp,{pinned:"left"}),_.createElement(qp,{pinned:null}),_.createElement(qp,{pinned:"right"}))},RK=C.memo(SK),bK=(e,t)=>{C.useEffect(()=>{const i=t.current;if(i){const s=i.parentElement;if(s){const n=document.createComment(e);return s.insertBefore(n,i),()=>{s.removeChild(n)}}}},[e])},On=bK,EK=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new Ve(i=>{this.resolveInstanceCreated=i}),this.onValueChange=i=>this.updateValue(i),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){mC(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){var t;this.componentInstance=e,(t=this.resolveInstanceCreated)==null||t.call(this),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached"]}updateValue(e){this.value=e,this.refreshProps()}},PK=e=>{const t=C.useRef(e),i=C.useRef(),s=C.useRef(!1),n=C.useRef(!1),[,r]=C.useState(0);s.current&&(n.current=!0),C.useEffect(()=>(s.current||(i.current=t.current(),s.current=!0),r(o=>o+1),()=>{n.current&&i.current&&i.current()}),[])},FK=e=>{const[t,i]=C.useState(),{context:s,popupService:n,localeService:r,gos:o,editService:l}=C.useContext(At);return PK(()=>{const{editDetails:a,cellCtrl:u,eParentCell:c}=e,{compDetails:d}=a,h=o.get("stopEditingWhenCellsLoseFocus"),p=s.createBean(l.createPopupEditorWrapper(d.params)),f=p.getGui();if(e.jsChildComp){const S=e.jsChildComp.getGui();S&&f.appendChild(S)}const m={column:u.getColumn(),rowNode:u.getRowNode(),type:"popupCellEditor",eventSource:c,ePopup:f,position:a.popupPosition,keepWithinBounds:!0},w=n.positionPopupByComponent.bind(n,m),v=r.getLocaleTextFunc(),g=n.addPopup({modal:h,eChild:f,closeOnEsc:!0,closedCallback:()=>{u.onPopupEditorClosed()},anchorToElement:c,positionCallback:w,ariaLabel:v("ariaLabelCellEditor","Cell Editor")}),y=g?g.hideFunc:void 0;return i(p),e.jsChildComp&&e.jsChildComp.afterGuiAttached&&e.jsChildComp.afterGuiAttached(),()=>{y!=null&&y(),s.destroyBean(p)}}),_.createElement(_.Fragment,null,t&&e.wrappedContent&&Vd.createPortal(e.wrappedContent,t.getGui()))},HS=C.memo(FK),TK=(e,t,i,s,n,r)=>{const{context:o}=C.useContext(At),l=C.useCallback(()=>{const a=n.current;if(!a)return;const u=a.getGui();u&&u.parentElement&&u.parentElement.removeChild(u),o.destroyBean(a),n.current=void 0},[]);C.useEffect(()=>{const a=e!=null,u=e&&e.compDetails&&!e.compDetails.componentFromFramework,c=t&&i==null;if(!(a&&u&&!c)){l();return}const h=e.compDetails;if(n.current){const f=n.current,w=f.refresh!=null&&e.force==!1?f.refresh(h.params):!1;if(w===!0||w===void 0)return;l()}const p=h.newAgStackInstance();p!=null&&p.then(f=>{if(!f)return;const m=f.getGui();if(!m)return;(t?i:r.current).appendChild(m),n.current=f})},[e,t,s]),C.useEffect(()=>l,[])},xK=TK,IK=(e,t,i)=>{const{compProxy:s}=e;i(s);const n=s.getProps(),r=Qo(t);return _.createElement(gC.Provider,{value:{setMethods:o=>s.setMethods(o)}},r&&_.createElement(t,{...n}),!r&&_.createElement(t,{...n,ref:o=>s.setRef(o)}))},VS=(e,t,i)=>{const s=e.compProxy;return _.createElement(_.Fragment,null,!s&&_.createElement(t,{...e.compDetails.params,ref:i}),s&&IK(e,t,i))},DK=(e,t,i,s,n,r)=>{const o=e.compDetails,l=o.componentClass,a=o.componentFromFramework&&!e.popup,u=o.componentFromFramework&&e.popup,c=!o.componentFromFramework&&e.popup;return _.createElement(_.Fragment,null,a&&VS(e,l,t),u&&_.createElement(HS,{editDetails:e,cellCtrl:n,eParentCell:s,wrappedContent:VS(e,l,i)}),c&&r&&_.createElement(HS,{editDetails:e,cellCtrl:n,eParentCell:s,jsChildComp:r}))},kK=(e,t,i,s,n,r,o)=>{const{compDetails:l,value:a}=e,u=!l,c=l&&l.componentFromFramework,d=l&&l.componentClass,h=a!=null&&a.toString?a.toString():a,p=()=>_.createElement(_.Fragment,null,u&&_.createElement(_.Fragment,null,h),c&&!r&&_.createElement(d,{...l.params,key:t,ref:s}),c&&r&&_.createElement(d,{...l.params,key:t}));return _.createElement(_.Fragment,null,n?_.createElement("span",{role:"presentation",id:`cell-${i}`,className:"ag-cell-value",ref:o},p()):p())},MK=e=>{const{context:t}=C.useContext(At),{cellCtrl:i,printLayout:s,editingRow:n}=e,r=i.getTabIndex(),o=i.getColumnIdSanitised(),l=i.getInstanceId(),[a,u]=C.useState(()=>i.isCellRenderer()?void 0:{compDetails:void 0,value:i.getValueToDisplay(),force:!1}),[c,d]=C.useState(),[h,p]=C.useState(1),[f,m]=C.useState(),[w,v]=C.useState(!1),[g,y]=C.useState(!1),[S,b]=C.useState(!1),[R,E]=C.useState(),x=C.useMemo(()=>i.isForceWrapper(),[i]),I=C.useMemo(()=>i.getCellAriaRole(),[i]),D=C.useRef(null),G=C.useRef(null),H=C.useRef(),J=C.useRef(),Z=C.useRef(),pe=C.useRef([]),Q=C.useRef(),[re,L]=C.useState(0),B=C.useCallback(ze=>{Q.current=ze,L(Ye=>Ye+1)},[]),U=a!=null&&(w||S||g),j=x||U,W=C.useCallback((ze,Ye)=>{J.current=Ye,Ye&&Ye.isCancelBeforeStart&&Ye.isCancelBeforeStart()&&setTimeout(()=>{i.stopEditing(!0),i.focusCell(!0)})},[i]),Te=C.useCallback(ze=>W(!0,ze),[W]),Le=C.useCallback(ze=>W(!1,ze),[W]),ue=C.useRef();ue.current||(ue.current=new qa(()=>D.current)),xK(a,j,Q.current,re,H,D);const ct=C.useRef();C.useLayoutEffect(()=>{const ze=ct.current,Ye=a;if(ct.current=a,ze==null||ze.compDetails==null||Ye==null||Ye.compDetails==null)return;const Xe=ze.compDetails,ve=Ye.compDetails;if(Xe.componentClass!=ve.componentClass||G.current==null||G.current.refresh==null)return;G.current.refresh(ve.params)!=!0&&p(Pt=>Pt+1)},[a]),C.useLayoutEffect(()=>{if(!(c&&!c.compDetails.componentFromFramework))return;const Ye=c.compDetails,Xe=c.popup===!0,ve=Ye.newAgStackInstance();return ve.then(De=>{if(!De)return;const Pt=De.getGui();if(W(Xe,De),!Xe){const it=(x?Z:D).current;it==null||it.appendChild(Pt),De.afterGuiAttached&&De.afterGuiAttached()}E(De)}),()=>{ve.then(De=>{const Pt=De.getGui();t.destroyBean(De),W(Xe,void 0),E(void 0),Pt&&Pt.parentElement&&Pt.parentElement.removeChild(Pt)})}},[c]);const Oe=C.useCallback(ze=>{if(Z.current=ze,!Z.current){pe.current.forEach(Xe=>Xe()),pe.current=[];return}const Ye=Xe=>{var ve;if(Xe){const De=Xe.getGui();(ve=Z.current)==null||ve.insertAdjacentElement("afterbegin",De),pe.current.push(()=>{t.destroyBean(Xe),ur(De)})}return Xe};if(w){const Xe=i.createSelectionCheckbox();Ye(Xe)}S&&Ye(i.createDndSource()),g&&Ye(i.createRowDragComp())},[i,t,S,g,w]),ns=C.useCallback(ze=>{if(D.current=ze,!D.current||!i)return;const Ye={addOrRemoveCssClass:(ve,De)=>ue.current.addOrRemoveCssClass(ve,De),setUserStyles:ve=>m(ve),getFocusableElement:()=>D.current,setIncludeSelection:ve=>v(ve),setIncludeRowDrag:ve=>y(ve),setIncludeDndSource:ve=>b(ve),getCellEditor:()=>J.current||null,getCellRenderer:()=>G.current?G.current:H.current,getParentOfValue:()=>Q.current?Q.current:Z.current?Z.current:D.current,setRenderDetails:(ve,De,Pt)=>{u(it=>(it==null?void 0:it.compDetails)!==ve||(it==null?void 0:it.value)!==De||(it==null?void 0:it.force)!==Pt?{value:De,compDetails:ve,force:Pt}:it)},setEditDetails:(ve,De,Pt,it)=>{if(ve){let Ns;it?Ns=new EK(ve.params,()=>p(In=>In+1)):ve.componentFromFramework&&vC(),d({compDetails:ve,popup:De,popupPosition:Pt,compProxy:Ns}),De||u(void 0)}else d(Ns=>{Ns!=null&&Ns.compProxy&&(J.current=void 0)})}},Xe=Z.current||void 0;i.setComp(Ye,D.current,Xe,s,n)},[]),yr=C.useMemo(()=>!!(a&&a.compDetails&&a.compDetails.componentFromFramework&&Qo(a.compDetails.componentClass)),[a]);C.useLayoutEffect(()=>{var ze;D.current&&(ue.current.addOrRemoveCssClass("ag-cell-value",!j),ue.current.addOrRemoveCssClass("ag-cell-inline-editing",!!c&&!c.popup),ue.current.addOrRemoveCssClass("ag-cell-popup-editing",!!c&&!!c.popup),ue.current.addOrRemoveCssClass("ag-cell-not-inline-editing",!c||!!c.popup),(ze=i.getRowCtrl())==null||ze.setInlineEditingCss(!!c),i.shouldRestoreFocus()&&!i.isEditing()&&D.current.focus({preventScroll:!0}))});const nu=()=>_.createElement(_.Fragment,null,a!=null&&kK(a,h,l,G,j,yr,B),c!=null&&DK(c,Le,Te,D.current,i,R));return _.createElement("div",{ref:ns,style:f,tabIndex:r,role:I,"col-id":o},j?_.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:Oe},nu()):nu())},AK=C.memo(MK),_K=e=>{const{context:t,gos:i}=C.useContext(At),{rowCtrl:s,containerType:n}=e,r=s.getTabIndex(),o=C.useRef(s.getDomOrder()),l=s.isFullWidth(),a=s.getRowNode().displayed,[u,c]=C.useState(()=>a?s.getRowIndex():null),[d,h]=C.useState(()=>s.getRowId()),[p,f]=C.useState(()=>s.getBusinessKey()),[m,w]=C.useState(()=>s.getRowStyles()),v=C.useRef(null),g=C.useRef(null),[y,S]=C.useState(()=>null),[b,R]=C.useState(),[E,x]=C.useState(()=>a?s.getInitialRowTop(n):void 0),[I,D]=C.useState(()=>a?s.getInitialTransform(n):void 0),G=C.useRef(null),H=C.useRef(),J=C.useRef(!1),[Z,pe]=C.useState(0);C.useEffect(()=>{var ct;if(J.current||!b||Z>10)return;const ue=(ct=G.current)==null?void 0:ct.firstChild;ue?(s.setupDetailRowAutoHeight(ue),J.current=!0):pe(Oe=>Oe+1)},[b,Z]);const Q=C.useRef();Q.current||(Q.current=new qa(()=>G.current));const re=C.useCallback(ue=>{if(G.current=ue,!G.current){s.unsetComp(n);return}if(!s.isAlive())return;const ct={setTop:x,setTransform:D,addOrRemoveCssClass:(Oe,ns)=>Q.current.addOrRemoveCssClass(Oe,ns),setDomOrder:Oe=>o.current=Oe,setRowIndex:c,setRowId:h,setRowBusinessKey:f,setUserStyles:w,setCellCtrls:(Oe,ns)=>{g.current=v.current,v.current=Oe;const yr=fC(g.current,Oe,o.current);yr!==g.current&&pC(ns,()=>S(yr))},showFullWidth:Oe=>R(Oe),getFullWidthCellRenderer:()=>H.current,refreshFullWidth:Oe=>W.current?(R(ns=>({...ns,params:Oe()})),!0):!H.current||!H.current.refresh?!1:H.current.refresh(Oe())};s.setComp(ct,G.current,n)},[]);C.useLayoutEffect(()=>Ja(b,t,G.current,H),[b]);const L=C.useMemo(()=>{const ue={top:E,transform:I};return Object.assign(ue,m),ue},[E,I,m]),B=l&&b&&b.componentFromFramework,U=!l&&y!=null,j=C.useMemo(()=>!!((b==null?void 0:b.componentFromFramework)&&Qo(b.componentClass)),[b]),W=C.useRef(!1);C.useEffect(()=>{W.current=j&&!!b&&!!i.get("reactiveCustomComponents")},[j,b]);const Te=()=>y==null?void 0:y.map(ue=>_.createElement(AK,{cellCtrl:ue,editingRow:s.isEditing(),printLayout:s.isPrintLayout(),key:ue.getInstanceId()})),Le=()=>{const ue=b.componentClass;return _.createElement(_.Fragment,null,j&&_.createElement(ue,{...b.params}),!j&&_.createElement(ue,{...b.params,ref:H}))};return _.createElement("div",{ref:re,role:"row",style:L,"row-index":u,"row-id":d,"row-business-key":p,tabIndex:r},U&&Te(),B&&Le())},LK=C.memo(_K),OK=e=>{const{context:t}=C.useContext(At),{name:i}=e,s=C.useMemo(()=>uT(i),[i]),n=C.useRef(null),r=C.useRef(null),o=C.useRef([]),l=C.useRef([]),[a,u]=C.useState(()=>[]),c=C.useRef(!1),d=C.useRef(),h=C.useMemo(()=>Fi(s.viewport),[s]),p=C.useMemo(()=>Fi(s.container),[s]),f=s.type==="center",m=f?n:r;On(" AG Row Container "+i+" ",m);const w=C.useCallback(()=>f?n.current!=null&&r.current!=null:r.current!=null,[]),v=C.useCallback(()=>f?n.current==null&&r.current==null:r.current==null,[]),g=C.useCallback(()=>{if(v()&&(t.destroyBean(d.current),d.current=null),w()){const R=x=>{const I=fC(l.current,o.current,c.current);I!==l.current&&(l.current=I,pC(x,()=>u(I)))},E={setViewportHeight:x=>{n.current&&(n.current.style.height=x)},setRowCtrls:({rowCtrls:x,useFlushSync:I})=>{const D=!!I&&o.current.length>0&&x.length>0;o.current=x,R(D)},setDomOrder:x=>{c.current!=x&&(c.current=x,R(!1))},setContainerWidth:x=>{r.current&&(r.current.style.width=x)},setOffsetTop:x=>{r.current&&(r.current.style.transform=`translateY(${x})`)}};d.current=t.createBean(new jW(i)),d.current.setComp(E,r.current,n.current)}},[w,v]),y=C.useCallback(R=>{r.current=R,g()},[g]),S=C.useCallback(R=>{n.current=R,g()},[g]),b=()=>_.createElement("div",{className:p,ref:y,role:"rowgroup"},a.map(R=>_.createElement(LK,{rowCtrl:R,containerType:s.type,key:R.getInstanceId()})));return _.createElement(_.Fragment,null,f?_.createElement("div",{className:h,ref:S,role:"presentation"},b()):b())},NK=C.memo(OK),GK=()=>{const{context:e,resizeObserverService:t}=C.useContext(At),[i,s]=C.useState(""),[n,r]=C.useState(0),[o,l]=C.useState(0),[a,u]=C.useState("0px"),[c,d]=C.useState("0px"),[h,p]=C.useState("100%"),[f,m]=C.useState("0px"),[w,v]=C.useState("0px"),[g,y]=C.useState("100%"),[S,b]=C.useState(""),[R,E]=C.useState(""),[x,I]=C.useState(null),[D,G]=C.useState(""),[H,J]=C.useState(null),[Z,pe]=C.useState("ag-layout-normal"),Q=C.useRef();Q.current||(Q.current=new qa(()=>re.current));const re=C.useRef(null),L=C.useRef(null),B=C.useRef(null),U=C.useRef(null),j=C.useRef(null),W=C.useRef(null),Te=C.useRef(null),Le=C.useRef([]),ue=C.useRef([]);On(" AG Grid Body ",re),On(" AG Pinned Top ",L),On(" AG Sticky Top ",B),On(" AG Middle ",W),On(" AG Pinned Bottom ",Te);const ct=C.useCallback(Sr=>{if(re.current=Sr,!re.current){e.destroyBeans(Le.current),ue.current.forEach(Ue=>Ue()),Le.current=[],ue.current=[];return}if(!e)return;const ru=(Ue,Kt)=>{Ue.appendChild(Kt),ue.current.push(()=>Ue.removeChild(Kt))},Uh=Ue=>{const Kt=e.createBean(new Ue);return Le.current.push(Kt),Kt},el=(Ue,Kt,Lx)=>{ru(Ue,document.createComment(Lx)),ru(Ue,Uh(Kt).getGui())};el(re.current,JB," AG Fake Horizontal Scroll "),el(re.current,QB," AG Overlay Wrapper "),j.current&&el(j.current,XB," AG Fake Vertical Scroll ");const _x={setRowAnimationCssOnBodyViewport:s,setColumnCount:Ue=>{re.current&&mH(re.current,Ue)},setRowCount:Ue=>{re.current&&fH(re.current,Ue)},setTopHeight:r,setBottomHeight:l,setStickyTopHeight:u,setStickyTopTop:d,setStickyTopWidth:p,setTopDisplay:b,setBottomDisplay:E,setColumnMovingCss:(Ue,Kt)=>Q.current.addOrRemoveCssClass(Ue,Kt),updateLayoutClasses:pe,setAlwaysVerticalScrollClass:I,setPinnedTopBottomOverflowY:G,setCellSelectableCss:(Ue,Kt)=>J(Kt?Ue:null),setBodyViewportWidth:Ue=>{W.current&&(W.current.style.width=Ue)},registerBodyViewportResizeListener:Ue=>{if(W.current){const Kt=t.observeResize(W.current,Ue);ue.current.push(()=>Kt())}},setStickyBottomHeight:m,setStickyBottomBottom:v,setStickyBottomWidth:y},OC=e.createBean(new sW);Le.current.push(OC),OC.setComp(_x,re.current,W.current,L.current,Te.current,B.current,U.current)},[]),Oe=C.useMemo(()=>Fi("ag-root","ag-unselectable",Z),[Z]),ns=C.useMemo(()=>Fi("ag-body-viewport",i,Z,x,H),[i,Z,x,H]),yr=C.useMemo(()=>Fi("ag-body",Z),[Z]),nu=C.useMemo(()=>Fi("ag-floating-top",H),[H]),ze=C.useMemo(()=>Fi("ag-sticky-top",H),[H]),Ye=C.useMemo(()=>Fi("ag-sticky-bottom",H),[H]),Xe=C.useMemo(()=>Fi("ag-floating-bottom",H),[H]),ve=C.useMemo(()=>({height:n,minHeight:n,display:S,overflowY:D}),[n,S,D]),De=C.useMemo(()=>({height:a,top:c,width:h}),[a,c,h]),Pt=C.useMemo(()=>({height:f,bottom:w,width:g}),[f,w,g]),it=C.useMemo(()=>({height:o,minHeight:o,display:R,overflowY:D}),[o,R,D]),Ns=Sr=>_.createElement(NK,{name:Sr,key:`${Sr}-container`}),In=({section:Sr,children:ru,className:Uh,style:el})=>_.createElement("div",{ref:Sr,className:Uh,role:"presentation",style:el},ru.map(Ns));return _.createElement("div",{ref:ct,className:Oe,role:"treegrid"},_.createElement(RK,null),In({section:L,className:nu,style:ve,children:["topLeft","topCenter","topRight","topFullWidth"]}),_.createElement("div",{className:yr,ref:j,role:"presentation"},In({section:W,className:ns,children:["left","center","right","fullWidth"]})),In({section:B,className:ze,style:De,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),In({section:U,className:Ye,style:Pt,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),In({section:Te,className:Xe,style:it,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},HK=C.memo(GK),VK=(e,t)=>{const{children:i,eFocusableElement:s,onTabKeyDown:n,gridCtrl:r,forceFocusOutWhenTabGuardsAreEmpty:o}=e,{context:l}=C.useContext(At),a=C.useRef(null),u=C.useRef(null),c=C.useRef(),d=w=>{const v=w==null?void 0:parseInt(w,10).toString();[a,u].forEach(g=>{var y,S;v===void 0?(y=g.current)==null||y.removeAttribute("tabindex"):(S=g.current)==null||S.setAttribute("tabindex",v)})};C.useImperativeHandle(t,()=>({forceFocusOutOfContainer(w){var v;(v=c.current)==null||v.forceFocusOutOfContainer(w)}}));const h=C.useCallback(()=>{if(!a.current&&!u.current){l.destroyBean(c.current),c.current=null;return}if(a.current&&u.current){const w={setTabIndex:d};c.current=l.createBean(new wT({comp:w,eTopGuard:a.current,eBottomGuard:u.current,eFocusableElement:s,onTabKeyDown:n,forceFocusOutWhenTabGuardsAreEmpty:o,focusInnerElement:v=>r.focusInnerElement(v)}))}},[]),p=C.useCallback(w=>{a.current=w,h()},[h]),f=C.useCallback(w=>{u.current=w,h()},[h]),m=w=>{const v=w==="top"?rc.TAB_GUARD_TOP:rc.TAB_GUARD_BOTTOM;return _.createElement("div",{className:`${rc.TAB_GUARD} ${v}`,role:"presentation",ref:w==="top"?p:f})};return _.createElement(_.Fragment,null,m("top"),i,m("bottom"))},BK=C.forwardRef(VK),WK=C.memo(BK),zK=({context:e})=>{const[t,i]=C.useState(""),[s,n]=C.useState(""),[r,o]=C.useState(null),[l,a]=C.useState(null),[u,c]=C.useState(!1),[d,h]=C.useState(),p=C.useRef(null),f=C.useRef(null),m=C.useRef(),[w,v]=C.useState(null),g=C.useRef(()=>{}),y=C.useRef(),S=C.useRef([]),b=C.useCallback(()=>{},[]),R=C.useMemo(()=>e.isDestroyed()?null:e.getBeans(),[e]);On(" AG Grid ",f);const E=C.useCallback(H=>{if(f.current=H,!f.current){e.destroyBean(p.current),p.current=null;return}if(e.isDestroyed())return;p.current=e.createBean(new FU);const J=p.current;g.current=J.focusInnerElement.bind(J);const Z={destroyGridUi:()=>{},setRtlClass:i,forceFocusOutOfContainer:pe=>{var Q,re;if(!pe&&((Q=y.current)!=null&&Q.isDisplayed())){y.current.forceFocusOutOfContainer(pe);return}(re=m.current)==null||re.forceFocusOutOfContainer(pe)},updateLayoutClasses:n,getFocusableContainers:()=>{var re;const pe=[],Q=(re=f.current)==null?void 0:re.querySelector(".ag-root");return Q&&pe.push({getGui:()=>Q}),S.current.forEach(L=>{L.isDisplayed()&&pe.push(L)}),pe},setCursor:o,setUserSelect:a};J.setComp(Z,f.current,f.current),c(!0)},[]);C.useEffect(()=>{if(!d||!R||!p.current||!w||!f.current)return;const H=p.current,J=[],{watermarkSelector:Z,paginationSelector:pe,sideBarSelector:Q,statusBarSelector:re,gridHeaderDropZonesSelector:L}=H.getOptionalSelectors(),B=[],U=f.current;if(L){const W=e.createBean(new L.component),Te=W.getGui();U.insertAdjacentElement("afterbegin",Te),B.push(Te),J.push(W)}if(Q){const W=e.createBean(new Q.component),Te=W.getGui(),Le=w.querySelector(".ag-tab-guard-bottom");Le&&(Le.insertAdjacentElement("beforebegin",Te),B.push(Te)),J.push(W),S.current.push(W)}const j=W=>{const Te=e.createBean(new W),Le=Te.getGui();return U.insertAdjacentElement("beforeend",Le),B.push(Le),J.push(Te),Te};if(re&&j(re.component),pe){const W=j(pe.component);y.current=W,S.current.push(W)}return Z&&j(Z.component),()=>{e.destroyBeans(J),B.forEach(W=>{W.parentElement&&W.parentElement.removeChild(W)})}},[d,w,R]);const x=C.useMemo(()=>Fi("ag-root-wrapper",t,s),[t,s]),I=C.useMemo(()=>Fi("ag-root-wrapper-body","ag-focus-managed",s),[s]),D=C.useMemo(()=>({userSelect:l??"",WebkitUserSelect:l??"",cursor:r??""}),[l,r]),G=C.useCallback(H=>{m.current=H,h(H!==null)},[]);return _.createElement("div",{ref:E,className:x,style:D,role:"presentation"},_.createElement("div",{className:I,ref:v,role:"presentation"},u&&w&&R&&_.createElement(At.Provider,{value:R},_.createElement(WK,{ref:G,eFocusableElement:w,onTabKeyDown:b,gridCtrl:p.current,forceFocusOutWhenTabGuardsAreEmpty:!0},_.createElement(HK,null)))))},UK=C.memo(zK),jK=class extends T{wireBeans(e){this.ctrlsService=e.ctrlsService}areHeaderCellsRendered(){return this.ctrlsService.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(t=>t.areCellsRendered()))}},BT=e=>{var m;const t=C.useRef(),i=C.useRef(null),s=C.useRef(null),n=C.useRef([]),r=C.useRef([]),o=C.useRef(e),l=C.useRef(),a=C.useRef(!1),[u,c]=C.useState(void 0),[,d]=C.useState(0),h=C.useCallback(w=>{if(i.current=w,!i.current){n.current.forEach(D=>D()),n.current.length=0;return}const v=e.modules||[];s.current||(s.current=new dK(()=>d(D=>D+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),n.current.push(()=>{var D;(D=s.current)==null||D.destroy(),s.current=null}));const g=rH(e.gridOptions,e),y=()=>{if(a.current){const D=()=>{var H;return(H=l.current)!=null&&H.shouldQueueUpdates()?void 0:r.current.shift()};let G=D();for(;G;)G(),G=D()}},S=Y3()?new YK(y):new WT;l.current=S;const b=new jK,R={providedBeanInstances:{frameworkComponentWrapper:new KK(s.current,g.reactiveCustomComponents??!0),renderStatusService:b},modules:v,frameworkOverrides:S},E=D=>{c(D),D.createBean(b),n.current.push(()=>{D.destroy()}),D.getBean("ctrlsService").whenReady(()=>{if(D.isDestroyed())return;const H=t.current;H&&e.setGridApi&&e.setGridApi(H)})},x=D=>{D.getBean("ctrlsService").whenReady(()=>{r.current.forEach(H=>H()),r.current.length=0,a.current=!0})},I=new Z$;t.current=I.create(i.current,g,E,x,R)},[]),p=C.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),f=C.useCallback(w=>{var v;a.current&&!((v=l.current)!=null&&v.shouldQueueUpdates())?w():r.current.push(w)},[]);return C.useEffect(()=>{const w=$K(o.current,e);o.current=e,f(()=>{t.current&&oH(w,t.current)})},[e]),_.createElement("div",{style:p,className:e.className,ref:h},u&&!u.isDestroyed()?_.createElement(UK,{context:u}):null,((m=s.current)==null?void 0:m.getPortals())??null)};function $K(e,t){const i={};return Object.keys(t).forEach(s=>{const n=t[s];e[s]!==n&&(i[s]=n)}),i}var KK=class extends l3{constructor(e,t){super(),this.parent=e,this.reactiveCustomComponents=t}createWrapper(e,t){if(this.reactiveCustomComponents){const n=(r=>{switch(r){case"filter":return iK;case"floatingFilterComponent":return nK;case"dateComponent":return tK;case"loadingOverlayComponent":return rK;case"noRowsOverlayComponent":return lK;case"statusPanel":return aK;case"toolPanel":return uK;case"menuItem":return oK;case"cellRenderer":return eK}})(t.propertyName);if(n)return new n(e,this.parent,t)}else switch(t.propertyName){case"filter":case"floatingFilterComponent":case"dateComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":vC();break}const i=!t.cellRenderer&&t.propertyName!=="toolPanel";return new HT(e,this.parent,t,i)}},qK=C.forwardRef((e,t)=>{const{ctrlsFactory:i,context:s,gos:n,resizeObserverService:r,rowModel:o}=C.useContext(At),[l,a]=C.useState(()=>new pi),[u,c]=C.useState(()=>new pi),[d,h]=C.useState(),[p,f]=C.useState(),m=C.useRef(),w=C.useRef(null),v=C.useRef(),g=C.useMemo(()=>Rt.__getGridRegisteredModules(e.api.getGridId()),[e]),y=C.useMemo(()=>l.toString()+" ag-details-row",[l]),S=C.useMemo(()=>u.toString()+" ag-details-grid",[u]);t&&C.useImperativeHandle(t,()=>({refresh(){var E;return((E=m.current)==null?void 0:E.refresh())??!1}})),e.template&&M("detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://ag-grid.com/react-data-grid/master-detail-custom-detail/");const b=C.useCallback(E=>{if(w.current=E,!w.current){s.destroyBean(m.current),v.current&&v.current();return}const x={addOrRemoveCssClass:(D,G)=>a(H=>H.setClass(D,G)),addOrRemoveDetailGridCssClass:(D,G)=>c(H=>H.setClass(D,G)),setDetailGrid:D=>h(D),setRowData:D=>f(D),getGui:()=>w.current},I=i.getInstance("detailCellRenderer");if(I&&(s.createBean(I),I.init(x,e),m.current=I,n.get("detailRowAutoHeight"))){const D=()=>{if(w.current==null)return;const G=w.current.clientHeight;G!=null&&G>0&&setTimeout(()=>{e.node.setRowHeight(G),(o.getType()==="clientSide"||o.getType()==="serverSide")&&o.onRowHeightChanged()},0)};v.current=r.observeResize(w.current,D),D()}},[]),R=C.useCallback(E=>{var x;(x=m.current)==null||x.registerDetailWithMaster(E)},[]);return _.createElement("div",{className:y,ref:b},d&&_.createElement(BT,{className:S,...d,modules:g,rowData:p,setGridApi:R}))}),WT=class extends yT{constructor(){super("react"),this.frameworkComponents={agGroupCellRenderer:NS,agGroupRowRenderer:NS,agDetailCellRenderer:qK},this.wrapIncoming=(e,t)=>t==="ensureVisible"?Q3(e):e(),this.renderingEngine="react"}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}shouldQueueUpdates(){return!1}getLockOnRefreshError(){return" This error can also occur if using 'ReactDOM.render' instead of 'createRoot'. If so, please upgrade to 'createRoot'."}},YK=class extends WT{constructor(e){super(),this.processQueuedUpdates=e,this.queueUpdates=!1}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}getLockOnRefreshError(){return""}},QK=class extends C.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e,this.apiListeners.forEach(t=>t(e))}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return _.createElement(BT,{...this.props,setGridApi:this.setGridApi})}};function Vi(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.includes(s))continue;i[s]=e[s]}return i}function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Y.apply(null,arguments)}function zT(e){var t,i,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(i=zT(e[t]))&&(s&&(s+=" "),s+=i)}else for(i in e)e[i]&&(s&&(s+=" "),s+=i);return s}function ch(){for(var e,t,i=0,s="",n=arguments.length;i<n;i++)(e=arguments[i])&&(t=zT(e))&&(s&&(s+=" "),s+=t);return s}function dh(e,t,i=void 0){const s={};return Object.keys(e).forEach(n=>{s[n]=e[n].reduce((r,o)=>{if(o){const l=t(o);l!==""&&r.push(l),i&&i[o]&&r.push(i[o])}return r},[]).join(" ")}),s}var Xa={},UT={exports:{}};(function(e){function t(i){return i&&i.__esModule?i:{default:i}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(UT);var jT=UT.exports,Yp={exports:{}},BS;function $T(){return BS||(BS=1,function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(i){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)({}).hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Yp)),Yp.exports}var Qp={exports:{}},WS;function JK(){return WS||(WS=1,function(e){function t(i,s){if(i==null)return{};var n={};for(var r in i)if({}.hasOwnProperty.call(i,r)){if(s.includes(r))continue;n[r]=i[r]}return n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Qp)),Qp.exports}function KT(e){var t=Object.create(null);return function(i){return t[i]===void 0&&(t[i]=e(i)),t[i]}}var XK=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,ZK=KT(function(e){return XK.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function e4(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function t4(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var i4=function(){function e(i){var s=this;this._insertTag=function(n){var r;s.tags.length===0?s.insertionPoint?r=s.insertionPoint.nextSibling:s.prepend?r=s.container.firstChild:r=s.before:r=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(n,r),s.tags.push(n)},this.isSpeedy=i.speedy===void 0?!0:i.speedy,this.tags=[],this.ctr=0,this.nonce=i.nonce,this.key=i.key,this.container=i.container,this.prepend=i.prepend,this.insertionPoint=i.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(s){s.forEach(this._insertTag)},t.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(t4(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var r=e4(n);try{r.insertRule(s,r.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(s));this.ctr++},t.flush=function(){this.tags.forEach(function(s){var n;return(n=s.parentNode)==null?void 0:n.removeChild(s)}),this.tags=[],this.ctr=0},e}(),Ct="-ms-",Sd="-moz-",ce="-webkit-",qT="comm",CC="rule",wC="decl",s4="@import",YT="@keyframes",n4="@layer",r4=Math.abs,hh=String.fromCharCode,o4=Object.assign;function l4(e,t){return ht(e,0)^45?(((t<<2^ht(e,0))<<2^ht(e,1))<<2^ht(e,2))<<2^ht(e,3):0}function QT(e){return e.trim()}function a4(e,t){return(e=t.exec(e))?e[0]:e}function de(e,t,i){return e.replace(t,i)}function Gg(e,t){return e.indexOf(t)}function ht(e,t){return e.charCodeAt(t)|0}function Ta(e,t,i){return e.slice(t,i)}function $i(e){return e.length}function yC(e){return e.length}function Nu(e,t){return t.push(e),e}function u4(e,t){return e.map(t).join("")}var ph=1,Mo=1,JT=0,jt=0,Qe=0,Jo="";function fh(e,t,i,s,n,r,o){return{value:e,root:t,parent:i,type:s,props:n,children:r,line:ph,column:Mo,length:o,return:""}}function ml(e,t){return o4(fh("",null,null,"",null,null,0),e,{length:-e.length},t)}function c4(){return Qe}function d4(){return Qe=jt>0?ht(Jo,--jt):0,Mo--,Qe===10&&(Mo=1,ph--),Qe}function ti(){return Qe=jt<JT?ht(Jo,jt++):0,Mo++,Qe===10&&(Mo=1,ph++),Qe}function es(){return ht(Jo,jt)}function ac(){return jt}function Za(e,t){return Ta(Jo,e,t)}function xa(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function XT(e){return ph=Mo=1,JT=$i(Jo=e),jt=0,[]}function ZT(e){return Jo="",e}function uc(e){return QT(Za(jt-1,Hg(e===91?e+2:e===40?e+1:e)))}function h4(e){for(;(Qe=es())&&Qe<33;)ti();return xa(e)>2||xa(Qe)>3?"":" "}function p4(e,t){for(;--t&&ti()&&!(Qe<48||Qe>102||Qe>57&&Qe<65||Qe>70&&Qe<97););return Za(e,ac()+(t<6&&es()==32&&ti()==32))}function Hg(e){for(;ti();)switch(Qe){case e:return jt;case 34:case 39:e!==34&&e!==39&&Hg(Qe);break;case 40:e===41&&Hg(e);break;case 92:ti();break}return jt}function f4(e,t){for(;ti()&&e+Qe!==47+10;)if(e+Qe===42+42&&es()===47)break;return"/*"+Za(t,jt-1)+"*"+hh(e===47?e:ti())}function g4(e){for(;!xa(es());)ti();return Za(e,jt)}function m4(e){return ZT(cc("",null,null,null,[""],e=XT(e),0,[0],e))}function cc(e,t,i,s,n,r,o,l,a){for(var u=0,c=0,d=o,h=0,p=0,f=0,m=1,w=1,v=1,g=0,y="",S=n,b=r,R=s,E=y;w;)switch(f=g,g=ti()){case 40:if(f!=108&&ht(E,d-1)==58){Gg(E+=de(uc(g),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:E+=uc(g);break;case 9:case 10:case 13:case 32:E+=h4(f);break;case 92:E+=p4(ac()-1,7);continue;case 47:switch(es()){case 42:case 47:Nu(v4(f4(ti(),ac()),t,i),a);break;default:E+="/"}break;case 123*m:l[u++]=$i(E)*v;case 125*m:case 59:case 0:switch(g){case 0:case 125:w=0;case 59+c:v==-1&&(E=de(E,/\f/g,"")),p>0&&$i(E)-d&&Nu(p>32?US(E+";",s,i,d-1):US(de(E," ","")+";",s,i,d-2),a);break;case 59:E+=";";default:if(Nu(R=zS(E,t,i,u,c,n,l,y,S=[],b=[],d),r),g===123)if(c===0)cc(E,t,R,R,S,r,d,l,b);else switch(h===99&&ht(E,3)===110?100:h){case 100:case 108:case 109:case 115:cc(e,R,R,s&&Nu(zS(e,R,R,0,0,n,l,y,n,S=[],d),b),n,b,d,l,s?S:b);break;default:cc(E,R,R,R,[""],b,0,l,b)}}u=c=p=0,m=v=1,y=E="",d=o;break;case 58:d=1+$i(E),p=f;default:if(m<1){if(g==123)--m;else if(g==125&&m++==0&&d4()==125)continue}switch(E+=hh(g),g*m){case 38:v=c>0?1:(E+="\f",-1);break;case 44:l[u++]=($i(E)-1)*v,v=1;break;case 64:es()===45&&(E+=uc(ti())),h=es(),c=d=$i(y=E+=g4(ac())),g++;break;case 45:f===45&&$i(E)==2&&(m=0)}}return r}function zS(e,t,i,s,n,r,o,l,a,u,c){for(var d=n-1,h=n===0?r:[""],p=yC(h),f=0,m=0,w=0;f<s;++f)for(var v=0,g=Ta(e,d+1,d=r4(m=o[f])),y=e;v<p;++v)(y=QT(m>0?h[v]+" "+g:de(g,/&\f/g,h[v])))&&(a[w++]=y);return fh(e,t,i,n===0?CC:l,a,u,c)}function v4(e,t,i){return fh(e,t,i,qT,hh(c4()),Ta(e,2,-2),0)}function US(e,t,i,s){return fh(e,t,i,wC,Ta(e,0,s),Ta(e,s+1,-1),s)}function ho(e,t){for(var i="",s=yC(e),n=0;n<s;n++)i+=t(e[n],n,e,t)||"";return i}function C4(e,t,i,s){switch(e.type){case n4:if(e.children.length)break;case s4:case wC:return e.return=e.return||e.value;case qT:return"";case YT:return e.return=e.value+"{"+ho(e.children,s)+"}";case CC:e.value=e.props.join(",")}return $i(i=ho(e.children,s))?e.return=e.value+"{"+i+"}":""}function w4(e){var t=yC(e);return function(i,s,n,r){for(var o="",l=0;l<t;l++)o+=e[l](i,s,n,r)||"";return o}}function y4(e){return function(t){t.root||(t=t.return)&&e(t)}}var S4=function(t,i,s){for(var n=0,r=0;n=r,r=es(),n===38&&r===12&&(i[s]=1),!xa(r);)ti();return Za(t,jt)},R4=function(t,i){var s=-1,n=44;do switch(xa(n)){case 0:n===38&&es()===12&&(i[s]=1),t[s]+=S4(jt-1,i,s);break;case 2:t[s]+=uc(n);break;case 4:if(n===44){t[++s]=es()===58?"&\f":"",i[s]=t[s].length;break}default:t[s]+=hh(n)}while(n=ti());return t},b4=function(t,i){return ZT(R4(XT(t),i))},jS=new WeakMap,E4=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var i=t.value,s=t.parent,n=t.column===s.column&&t.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(t.props.length===1&&i.charCodeAt(0)!==58&&!jS.get(s))&&!n){jS.set(t,!0);for(var r=[],o=b4(i,r),l=s.props,a=0,u=0;a<o.length;a++)for(var c=0;c<l.length;c++,u++)t.props[u]=r[a]?o[a].replace(/&\f/g,l[c]):l[c]+" "+o[a]}}},P4=function(t){if(t.type==="decl"){var i=t.value;i.charCodeAt(0)===108&&i.charCodeAt(2)===98&&(t.return="",t.value="")}};function ex(e,t){switch(l4(e,t)){case 5103:return ce+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ce+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ce+e+Sd+e+Ct+e+e;case 6828:case 4268:return ce+e+Ct+e+e;case 6165:return ce+e+Ct+"flex-"+e+e;case 5187:return ce+e+de(e,/(\w+).+(:[^]+)/,ce+"box-$1$2"+Ct+"flex-$1$2")+e;case 5443:return ce+e+Ct+"flex-item-"+de(e,/flex-|-self/,"")+e;case 4675:return ce+e+Ct+"flex-line-pack"+de(e,/align-content|flex-|-self/,"")+e;case 5548:return ce+e+Ct+de(e,"shrink","negative")+e;case 5292:return ce+e+Ct+de(e,"basis","preferred-size")+e;case 6060:return ce+"box-"+de(e,"-grow","")+ce+e+Ct+de(e,"grow","positive")+e;case 4554:return ce+de(e,/([^-])(transform)/g,"$1"+ce+"$2")+e;case 6187:return de(de(de(e,/(zoom-|grab)/,ce+"$1"),/(image-set)/,ce+"$1"),e,"")+e;case 5495:case 3959:return de(e,/(image-set\([^]*)/,ce+"$1$`$1");case 4968:return de(de(e,/(.+:)(flex-)?(.*)/,ce+"box-pack:$3"+Ct+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ce+e+e;case 4095:case 3583:case 4068:case 2532:return de(e,/(.+)-inline(.+)/,ce+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if($i(e)-1-t>6)switch(ht(e,t+1)){case 109:if(ht(e,t+4)!==45)break;case 102:return de(e,/(.+:)(.+)-([^]+)/,"$1"+ce+"$2-$3$1"+Sd+(ht(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Gg(e,"stretch")?ex(de(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(ht(e,t+1)!==115)break;case 6444:switch(ht(e,$i(e)-3-(~Gg(e,"!important")&&10))){case 107:return de(e,":",":"+ce)+e;case 101:return de(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ce+(ht(e,14)===45?"inline-":"")+"box$3$1"+ce+"$2$3$1"+Ct+"$2box$3")+e}break;case 5936:switch(ht(e,t+11)){case 114:return ce+e+Ct+de(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ce+e+Ct+de(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ce+e+Ct+de(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return ce+e+Ct+e+e}return e}var F4=function(t,i,s,n){if(t.length>-1&&!t.return)switch(t.type){case wC:t.return=ex(t.value,t.length);break;case YT:return ho([ml(t,{value:de(t.value,"@","@"+ce)})],n);case CC:if(t.length)return u4(t.props,function(r){switch(a4(r,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ho([ml(t,{props:[de(r,/:(read-\w+)/,":"+Sd+"$1")]})],n);case"::placeholder":return ho([ml(t,{props:[de(r,/:(plac\w+)/,":"+ce+"input-$1")]}),ml(t,{props:[de(r,/:(plac\w+)/,":"+Sd+"$1")]}),ml(t,{props:[de(r,/:(plac\w+)/,Ct+"input-$1")]})],n)}return""})}},T4=[F4],tx=function(t){var i=t.key;if(i==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(m){var w=m.getAttribute("data-emotion");w.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var n=t.stylisPlugins||T4,r={},o,l=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+i+' "]'),function(m){for(var w=m.getAttribute("data-emotion").split(" "),v=1;v<w.length;v++)r[w[v]]=!0;l.push(m)});var a,u=[E4,P4];{var c,d=[C4,y4(function(m){c.insert(m)})],h=w4(u.concat(n,d)),p=function(w){return ho(m4(w),h)};a=function(w,v,g,y){c=g,p(w?w+"{"+v.styles+"}":v.styles),y&&(f.inserted[v.name]=!0)}}var f={key:i,sheet:new i4({key:i,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:r,registered:{},insert:a};return f.sheet.hydrate(l),f},ix={exports:{}},ge={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ut=typeof Symbol=="function"&&Symbol.for,SC=ut?Symbol.for("react.element"):60103,RC=ut?Symbol.for("react.portal"):60106,gh=ut?Symbol.for("react.fragment"):60107,mh=ut?Symbol.for("react.strict_mode"):60108,vh=ut?Symbol.for("react.profiler"):60114,Ch=ut?Symbol.for("react.provider"):60109,wh=ut?Symbol.for("react.context"):60110,bC=ut?Symbol.for("react.async_mode"):60111,yh=ut?Symbol.for("react.concurrent_mode"):60111,Sh=ut?Symbol.for("react.forward_ref"):60112,Rh=ut?Symbol.for("react.suspense"):60113,x4=ut?Symbol.for("react.suspense_list"):60120,bh=ut?Symbol.for("react.memo"):60115,Eh=ut?Symbol.for("react.lazy"):60116,I4=ut?Symbol.for("react.block"):60121,D4=ut?Symbol.for("react.fundamental"):60117,k4=ut?Symbol.for("react.responder"):60118,M4=ut?Symbol.for("react.scope"):60119;function oi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case SC:switch(e=e.type,e){case bC:case yh:case gh:case vh:case mh:case Rh:return e;default:switch(e=e&&e.$$typeof,e){case wh:case Sh:case Eh:case bh:case Ch:return e;default:return t}}case RC:return t}}}function sx(e){return oi(e)===yh}ge.AsyncMode=bC;ge.ConcurrentMode=yh;ge.ContextConsumer=wh;ge.ContextProvider=Ch;ge.Element=SC;ge.ForwardRef=Sh;ge.Fragment=gh;ge.Lazy=Eh;ge.Memo=bh;ge.Portal=RC;ge.Profiler=vh;ge.StrictMode=mh;ge.Suspense=Rh;ge.isAsyncMode=function(e){return sx(e)||oi(e)===bC};ge.isConcurrentMode=sx;ge.isContextConsumer=function(e){return oi(e)===wh};ge.isContextProvider=function(e){return oi(e)===Ch};ge.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===SC};ge.isForwardRef=function(e){return oi(e)===Sh};ge.isFragment=function(e){return oi(e)===gh};ge.isLazy=function(e){return oi(e)===Eh};ge.isMemo=function(e){return oi(e)===bh};ge.isPortal=function(e){return oi(e)===RC};ge.isProfiler=function(e){return oi(e)===vh};ge.isStrictMode=function(e){return oi(e)===mh};ge.isSuspense=function(e){return oi(e)===Rh};ge.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===gh||e===yh||e===vh||e===mh||e===Rh||e===x4||typeof e=="object"&&e!==null&&(e.$$typeof===Eh||e.$$typeof===bh||e.$$typeof===Ch||e.$$typeof===wh||e.$$typeof===Sh||e.$$typeof===D4||e.$$typeof===k4||e.$$typeof===M4||e.$$typeof===I4)};ge.typeOf=oi;ix.exports=ge;var A4=ix.exports,nx=A4,_4={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},L4={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},rx={};rx[nx.ForwardRef]=_4;rx[nx.Memo]=L4;var O4=!0;function N4(e,t,i){var s="";return i.split(" ").forEach(function(n){e[n]!==void 0?t.push(e[n]+";"):s+=n+" "}),s}var ox=function(t,i,s){var n=t.key+"-"+i.name;(s===!1||O4===!1)&&t.registered[n]===void 0&&(t.registered[n]=i.styles)},lx=function(t,i,s){ox(t,i,s);var n=t.key+"-"+i.name;if(t.inserted[i.name]===void 0){var r=i;do t.insert(i===r?"."+n:"",r,t.sheet,!0),r=r.next;while(r!==void 0)}};function G4(e){for(var t=0,i,s=0,n=e.length;n>=4;++s,n-=4)i=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,i=(i&65535)*1540483477+((i>>>16)*59797<<16),i^=i>>>24,t=(i&65535)*1540483477+((i>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(n){case 3:t^=(e.charCodeAt(s+2)&255)<<16;case 2:t^=(e.charCodeAt(s+1)&255)<<8;case 1:t^=e.charCodeAt(s)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var H4={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},V4=/[A-Z]|^ms/g,B4=/_EMO_([^_]+?)_([^]*?)_EMO_/g,ax=function(t){return t.charCodeAt(1)===45},$S=function(t){return t!=null&&typeof t!="boolean"},Jp=KT(function(e){return ax(e)?e:e.replace(V4,"-$&").toLowerCase()}),KS=function(t,i){switch(t){case"animation":case"animationName":if(typeof i=="string")return i.replace(B4,function(s,n,r){return Ki={name:n,styles:r,next:Ki},n})}return H4[t]!==1&&!ax(t)&&typeof i=="number"&&i!==0?i+"px":i};function Ia(e,t,i){if(i==null)return"";var s=i;if(s.__emotion_styles!==void 0)return s;switch(typeof i){case"boolean":return"";case"object":{var n=i;if(n.anim===1)return Ki={name:n.name,styles:n.styles,next:Ki},n.name;var r=i;if(r.styles!==void 0){var o=r.next;if(o!==void 0)for(;o!==void 0;)Ki={name:o.name,styles:o.styles,next:Ki},o=o.next;var l=r.styles+";";return l}return W4(e,t,i)}case"function":{if(e!==void 0){var a=Ki,u=i(e);return Ki=a,Ia(e,t,u)}break}}var c=i;if(t==null)return c;var d=t[c];return d!==void 0?d:c}function W4(e,t,i){var s="";if(Array.isArray(i))for(var n=0;n<i.length;n++)s+=Ia(e,t,i[n])+";";else for(var r in i){var o=i[r];if(typeof o!="object"){var l=o;t!=null&&t[l]!==void 0?s+=r+"{"+t[l]+"}":$S(l)&&(s+=Jp(r)+":"+KS(r,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var a=0;a<o.length;a++)$S(o[a])&&(s+=Jp(r)+":"+KS(r,o[a])+";");else{var u=Ia(e,t,o);switch(r){case"animation":case"animationName":{s+=Jp(r)+":"+u+";";break}default:s+=r+"{"+u+"}"}}}return s}var qS=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Ki;function EC(e,t,i){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,n="";Ki=void 0;var r=e[0];if(r==null||r.raw===void 0)s=!1,n+=Ia(i,t,r);else{var o=r;n+=o[0]}for(var l=1;l<e.length;l++)if(n+=Ia(i,t,e[l]),s){var a=r;n+=a[l]}qS.lastIndex=0;for(var u="",c;(c=qS.exec(n))!==null;)u+="-"+c[1];var d=G4(n)+u;return{name:d,styles:n,next:Ki}}var z4=function(t){return t()},ux=Zp["useInsertionEffect"]?Zp["useInsertionEffect"]:!1,U4=ux||z4,YS=ux||C.useLayoutEffect,cx=C.createContext(typeof HTMLElement<"u"?tx({key:"css"}):null),j4=cx.Provider,dx=function(t){return C.forwardRef(function(i,s){var n=C.useContext(cx);return t(i,n,s)})},PC=C.createContext({});$T();var $4=dx(function(e,t){var i=e.styles,s=EC([i],void 0,C.useContext(PC)),n=C.useRef();return YS(function(){var r=t.key+"-global",o=new t.sheet.constructor({key:r,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),l=!1,a=document.querySelector('style[data-emotion="'+r+" "+s.name+'"]');return t.sheet.tags.length&&(o.before=t.sheet.tags[0]),a!==null&&(l=!0,a.setAttribute("data-emotion",r),o.hydrate([a])),n.current=[o,l],function(){o.flush()}},[t]),YS(function(){var r=n.current,o=r[0],l=r[1];if(l){r[1]=!1;return}if(s.next!==void 0&&lx(t,s.next,!0),o.tags.length){var a=o.tags[o.tags.length-1].nextElementSibling;o.before=a,o.flush()}t.insert("",s,o,!1)},[t,s.name]),null});function hx(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return EC(t)}var K4=function(){var t=hx.apply(void 0,arguments),i="animation-"+t.name;return{name:i,styles:"@keyframes "+i+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},q4=ZK,Y4=function(t){return t!=="theme"},QS=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?q4:Y4},JS=function(t,i,s){var n;if(i){var r=i.shouldForwardProp;n=t.__emotion_forwardProp&&r?function(o){return t.__emotion_forwardProp(o)&&r(o)}:r}return typeof n!="function"&&s&&(n=t.__emotion_forwardProp),n},Q4=function(t){var i=t.cache,s=t.serialized,n=t.isStringTag;return ox(i,s,n),U4(function(){return lx(i,s,n)}),null},J4=function e(t,i){var s=t.__emotion_real===t,n=s&&t.__emotion_base||t,r,o;i!==void 0&&(r=i.label,o=i.target);var l=JS(t,i,s),a=l||QS(n),u=!a("as");return function(){var c=arguments,d=s&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(r!==void 0&&d.push("label:"+r+";"),c[0]==null||c[0].raw===void 0)d.push.apply(d,c);else{d.push(c[0][0]);for(var h=c.length,p=1;p<h;p++)d.push(c[p],c[0][p])}var f=dx(function(m,w,v){var g=u&&m.as||n,y="",S=[],b=m;if(m.theme==null){b={};for(var R in m)b[R]=m[R];b.theme=C.useContext(PC)}typeof m.className=="string"?y=N4(w.registered,S,m.className):m.className!=null&&(y=m.className+" ");var E=EC(d.concat(S),w.registered,b);y+=w.key+"-"+E.name,o!==void 0&&(y+=" "+o);var x=u&&l===void 0?QS(g):a,I={};for(var D in m)u&&D==="as"||x(D)&&(I[D]=m[D]);return I.className=y,v&&(I.ref=v),C.createElement(C.Fragment,null,C.createElement(Q4,{cache:w,serialized:E,isStringTag:typeof g=="string"}),C.createElement(g,I))});return f.displayName=r!==void 0?r:"Styled("+(typeof n=="string"?n:n.displayName||n.name||"Component")+")",f.defaultProps=t.defaultProps,f.__emotion_real=f,f.__emotion_base=n,f.__emotion_styles=d,f.__emotion_forwardProp=l,Object.defineProperty(f,"toString",{value:function(){return"."+o}}),f.withComponent=function(m,w){return e(m,Y({},i,w,{shouldForwardProp:JS(f,w,!0)})).apply(void 0,d)},f}},X4=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Vg=J4.bind();X4.forEach(function(e){Vg[e]=Vg(e)});let Bg;typeof document=="object"&&(Bg=tx({key:"css",prepend:!0}));function Z4(e){const{injectFirst:t,children:i}=e;return t&&Bg?k.jsx(j4,{value:Bg,children:i}):i}function e5(e){return e==null||Object.keys(e).length===0}function t5(e){const{styles:t,defaultTheme:i={}}=e,s=typeof t=="function"?n=>t(e5(n)?i:n):t;return k.jsx($4,{styles:s})}/**
 * @mui/styled-engine v5.16.4
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function i5(e,t){return Vg(e,t)}const s5=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},n5=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:t5,StyledEngineProvider:Z4,ThemeContext:PC,css:hx,default:i5,internal_processStyles:s5,keyframes:K4},Symbol.toStringTag,{value:"Module"})),r5=Sn(n5);function Ys(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function px(e){if(!Ys(e))return e;const t={};return Object.keys(e).forEach(i=>{t[i]=px(e[i])}),t}function ts(e,t,i={clone:!0}){const s=i.clone?Y({},e):e;return Ys(e)&&Ys(t)&&Object.keys(t).forEach(n=>{Ys(t[n])&&Object.prototype.hasOwnProperty.call(e,n)&&Ys(e[n])?s[n]=ts(e[n],t[n],i):i.clone?s[n]=Ys(t[n])?px(t[n]):t[n]:s[n]=t[n]}),s}const o5=Object.freeze(Object.defineProperty({__proto__:null,default:ts,isPlainObject:Ys},Symbol.toStringTag,{value:"Module"})),l5=Sn(o5);function Da(e){let t="https://mui.com/production-error/?code="+e;for(let i=1;i<arguments.length;i+=1)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const a5=Object.freeze(Object.defineProperty({__proto__:null,default:Da},Symbol.toStringTag,{value:"Module"}));function Ds(e){if(typeof e!="string")throw new Error(Da(7));return e.charAt(0).toUpperCase()+e.slice(1)}const u5=Object.freeze(Object.defineProperty({__proto__:null,default:Ds},Symbol.toStringTag,{value:"Module"})),c5=Sn(u5);var fx={exports:{}},me={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FC=Symbol.for("react.element"),TC=Symbol.for("react.portal"),Ph=Symbol.for("react.fragment"),Fh=Symbol.for("react.strict_mode"),Th=Symbol.for("react.profiler"),xh=Symbol.for("react.provider"),Ih=Symbol.for("react.context"),d5=Symbol.for("react.server_context"),Dh=Symbol.for("react.forward_ref"),kh=Symbol.for("react.suspense"),Mh=Symbol.for("react.suspense_list"),Ah=Symbol.for("react.memo"),_h=Symbol.for("react.lazy"),h5=Symbol.for("react.offscreen"),gx;gx=Symbol.for("react.module.reference");function yi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case FC:switch(e=e.type,e){case Ph:case Th:case Fh:case kh:case Mh:return e;default:switch(e=e&&e.$$typeof,e){case d5:case Ih:case Dh:case _h:case Ah:case xh:return e;default:return t}}case TC:return t}}}me.ContextConsumer=Ih;me.ContextProvider=xh;me.Element=FC;me.ForwardRef=Dh;me.Fragment=Ph;me.Lazy=_h;me.Memo=Ah;me.Portal=TC;me.Profiler=Th;me.StrictMode=Fh;me.Suspense=kh;me.SuspenseList=Mh;me.isAsyncMode=function(){return!1};me.isConcurrentMode=function(){return!1};me.isContextConsumer=function(e){return yi(e)===Ih};me.isContextProvider=function(e){return yi(e)===xh};me.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===FC};me.isForwardRef=function(e){return yi(e)===Dh};me.isFragment=function(e){return yi(e)===Ph};me.isLazy=function(e){return yi(e)===_h};me.isMemo=function(e){return yi(e)===Ah};me.isPortal=function(e){return yi(e)===TC};me.isProfiler=function(e){return yi(e)===Th};me.isStrictMode=function(e){return yi(e)===Fh};me.isSuspense=function(e){return yi(e)===kh};me.isSuspenseList=function(e){return yi(e)===Mh};me.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ph||e===Th||e===Fh||e===kh||e===Mh||e===h5||typeof e=="object"&&e!==null&&(e.$$typeof===_h||e.$$typeof===Ah||e.$$typeof===xh||e.$$typeof===Ih||e.$$typeof===Dh||e.$$typeof===gx||e.getModuleId!==void 0)};me.typeOf=yi;fx.exports=me;var XS=fx.exports;const p5=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function mx(e){const t=`${e}`.match(p5);return t&&t[1]||""}function vx(e,t=""){return e.displayName||e.name||mx(e)||t}function ZS(e,t,i){const s=vx(t);return e.displayName||(s!==""?`${i}(${s})`:i)}function f5(e){if(e!=null){if(typeof e=="string")return e;if(typeof e=="function")return vx(e,"Component");if(typeof e=="object")switch(e.$$typeof){case XS.ForwardRef:return ZS(e,e.render,"ForwardRef");case XS.Memo:return ZS(e,e.type,"memo");default:return}}}const g5=Object.freeze(Object.defineProperty({__proto__:null,default:f5,getFunctionName:mx},Symbol.toStringTag,{value:"Module"})),m5=Sn(g5),v5=["values","unit","step"],C5=e=>{const t=Object.keys(e).map(i=>({key:i,val:e[i]}))||[];return t.sort((i,s)=>i.val-s.val),t.reduce((i,s)=>Y({},i,{[s.key]:s.val}),{})};function Cx(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:i="px",step:s=5}=e,n=Vi(e,v5),r=C5(t),o=Object.keys(r);function l(h){return`@media (min-width:${typeof t[h]=="number"?t[h]:h}${i})`}function a(h){return`@media (max-width:${(typeof t[h]=="number"?t[h]:h)-s/100}${i})`}function u(h,p){const f=o.indexOf(p);return`@media (min-width:${typeof t[h]=="number"?t[h]:h}${i}) and (max-width:${(f!==-1&&typeof t[o[f]]=="number"?t[o[f]]:p)-s/100}${i})`}function c(h){return o.indexOf(h)+1<o.length?u(h,o[o.indexOf(h)+1]):l(h)}function d(h){const p=o.indexOf(h);return p===0?l(o[1]):p===o.length-1?a(o[p]):u(h,o[o.indexOf(h)+1]).replace("@media","@media not all and")}return Y({keys:o,values:r,up:l,down:a,between:u,only:c,not:d,unit:i},n)}const w5={borderRadius:4},y5=w5;function jl(e,t){return t?ts(e,t,{clone:!1}):e}const xC={xs:0,sm:600,md:900,lg:1200,xl:1536},eR={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${xC[e]}px)`};function ks(e,t,i){const s=e.theme||{};if(Array.isArray(t)){const r=s.breakpoints||eR;return t.reduce((o,l,a)=>(o[r.up(r.keys[a])]=i(t[a]),o),{})}if(typeof t=="object"){const r=s.breakpoints||eR;return Object.keys(t).reduce((o,l)=>{if(Object.keys(r.values||xC).indexOf(l)!==-1){const a=r.up(l);o[a]=i(t[l],l)}else{const a=l;o[a]=t[a]}return o},{})}return i(t)}function S5(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((s,n)=>{const r=e.up(n);return s[r]={},s},{}))||{}}function R5(e,t){return e.reduce((i,s)=>{const n=i[s];return(!n||Object.keys(n).length===0)&&delete i[s],i},t)}function Lh(e,t,i=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&i){const s=`vars.${t}`.split(".").reduce((n,r)=>n&&n[r]?n[r]:null,e);if(s!=null)return s}return t.split(".").reduce((s,n)=>s&&s[n]!=null?s[n]:null,e)}function Rd(e,t,i,s=i){let n;return typeof e=="function"?n=e(i):Array.isArray(e)?n=e[i]||s:n=Lh(e,i)||s,t&&(n=t(n,s,e)),n}function Ke(e){const{prop:t,cssProperty:i=e.prop,themeKey:s,transform:n}=e,r=o=>{if(o[t]==null)return null;const l=o[t],a=o.theme,u=Lh(a,s)||{};return ks(o,l,d=>{let h=Rd(u,n,d);return d===h&&typeof d=="string"&&(h=Rd(u,n,`${t}${d==="default"?"":Ds(d)}`,d)),i===!1?h:{[i]:h}})};return r.propTypes={},r.filterProps=[t],r}function b5(e){const t={};return i=>(t[i]===void 0&&(t[i]=e(i)),t[i])}const E5={m:"margin",p:"padding"},P5={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},tR={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},F5=b5(e=>{if(e.length>2)if(tR[e])e=tR[e];else return[e];const[t,i]=e.split(""),s=E5[t],n=P5[i]||"";return Array.isArray(n)?n.map(r=>s+r):[s+n]}),IC=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],DC=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...IC,...DC];function eu(e,t,i,s){var n;const r=(n=Lh(e,t,!1))!=null?n:i;return typeof r=="number"?o=>typeof o=="string"?o:r*o:Array.isArray(r)?o=>typeof o=="string"?o:r[o]:typeof r=="function"?r:()=>{}}function wx(e){return eu(e,"spacing",8)}function tu(e,t){if(typeof t=="string"||t==null)return t;const i=Math.abs(t),s=e(i);return t>=0?s:typeof s=="number"?-s:`-${s}`}function T5(e,t){return i=>e.reduce((s,n)=>(s[n]=tu(t,i),s),{})}function x5(e,t,i,s){if(t.indexOf(i)===-1)return null;const n=F5(i),r=T5(n,s),o=e[i];return ks(e,o,r)}function yx(e,t){const i=wx(e.theme);return Object.keys(e).map(s=>x5(e,t,s,i)).reduce(jl,{})}function Ne(e){return yx(e,IC)}Ne.propTypes={};Ne.filterProps=IC;function Ge(e){return yx(e,DC)}Ge.propTypes={};Ge.filterProps=DC;function I5(e=8){if(e.mui)return e;const t=wx({spacing:e}),i=(...s)=>(s.length===0?[1]:s).map(r=>{const o=t(r);return typeof o=="number"?`${o}px`:o}).join(" ");return i.mui=!0,i}function Oh(...e){const t=e.reduce((s,n)=>(n.filterProps.forEach(r=>{s[r]=n}),s),{}),i=s=>Object.keys(s).reduce((n,r)=>t[r]?jl(n,t[r](s)):n,{});return i.propTypes={},i.filterProps=e.reduce((s,n)=>s.concat(n.filterProps),[]),i}function ci(e){return typeof e!="number"?e:`${e}px solid`}function Si(e,t){return Ke({prop:e,themeKey:"borders",transform:t})}const D5=Si("border",ci),k5=Si("borderTop",ci),M5=Si("borderRight",ci),A5=Si("borderBottom",ci),_5=Si("borderLeft",ci),L5=Si("borderColor"),O5=Si("borderTopColor"),N5=Si("borderRightColor"),G5=Si("borderBottomColor"),H5=Si("borderLeftColor"),V5=Si("outline",ci),B5=Si("outlineColor"),Nh=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=eu(e.theme,"shape.borderRadius",4),i=s=>({borderRadius:tu(t,s)});return ks(e,e.borderRadius,i)}return null};Nh.propTypes={};Nh.filterProps=["borderRadius"];Oh(D5,k5,M5,A5,_5,L5,O5,N5,G5,H5,Nh,V5,B5);const Gh=e=>{if(e.gap!==void 0&&e.gap!==null){const t=eu(e.theme,"spacing",8),i=s=>({gap:tu(t,s)});return ks(e,e.gap,i)}return null};Gh.propTypes={};Gh.filterProps=["gap"];const Hh=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=eu(e.theme,"spacing",8),i=s=>({columnGap:tu(t,s)});return ks(e,e.columnGap,i)}return null};Hh.propTypes={};Hh.filterProps=["columnGap"];const Vh=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=eu(e.theme,"spacing",8),i=s=>({rowGap:tu(t,s)});return ks(e,e.rowGap,i)}return null};Vh.propTypes={};Vh.filterProps=["rowGap"];const W5=Ke({prop:"gridColumn"}),z5=Ke({prop:"gridRow"}),U5=Ke({prop:"gridAutoFlow"}),j5=Ke({prop:"gridAutoColumns"}),$5=Ke({prop:"gridAutoRows"}),K5=Ke({prop:"gridTemplateColumns"}),q5=Ke({prop:"gridTemplateRows"}),Y5=Ke({prop:"gridTemplateAreas"}),Q5=Ke({prop:"gridArea"});Oh(Gh,Hh,Vh,W5,z5,U5,j5,$5,K5,q5,Y5,Q5);function po(e,t){return t==="grey"?t:e}const J5=Ke({prop:"color",themeKey:"palette",transform:po}),X5=Ke({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:po}),Z5=Ke({prop:"backgroundColor",themeKey:"palette",transform:po});Oh(J5,X5,Z5);function Jt(e){return e<=1&&e!==0?`${e*100}%`:e}const e6=Ke({prop:"width",transform:Jt}),kC=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=i=>{var s,n;const r=((s=e.theme)==null||(s=s.breakpoints)==null||(s=s.values)==null?void 0:s[i])||xC[i];return r?((n=e.theme)==null||(n=n.breakpoints)==null?void 0:n.unit)!=="px"?{maxWidth:`${r}${e.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:Jt(i)}};return ks(e,e.maxWidth,t)}return null};kC.filterProps=["maxWidth"];const t6=Ke({prop:"minWidth",transform:Jt}),i6=Ke({prop:"height",transform:Jt}),s6=Ke({prop:"maxHeight",transform:Jt}),n6=Ke({prop:"minHeight",transform:Jt});Ke({prop:"size",cssProperty:"width",transform:Jt});Ke({prop:"size",cssProperty:"height",transform:Jt});const r6=Ke({prop:"boxSizing"});Oh(e6,kC,t6,i6,s6,n6,r6);const o6={border:{themeKey:"borders",transform:ci},borderTop:{themeKey:"borders",transform:ci},borderRight:{themeKey:"borders",transform:ci},borderBottom:{themeKey:"borders",transform:ci},borderLeft:{themeKey:"borders",transform:ci},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ci},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Nh},color:{themeKey:"palette",transform:po},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:po},backgroundColor:{themeKey:"palette",transform:po},p:{style:Ge},pt:{style:Ge},pr:{style:Ge},pb:{style:Ge},pl:{style:Ge},px:{style:Ge},py:{style:Ge},padding:{style:Ge},paddingTop:{style:Ge},paddingRight:{style:Ge},paddingBottom:{style:Ge},paddingLeft:{style:Ge},paddingX:{style:Ge},paddingY:{style:Ge},paddingInline:{style:Ge},paddingInlineStart:{style:Ge},paddingInlineEnd:{style:Ge},paddingBlock:{style:Ge},paddingBlockStart:{style:Ge},paddingBlockEnd:{style:Ge},m:{style:Ne},mt:{style:Ne},mr:{style:Ne},mb:{style:Ne},ml:{style:Ne},mx:{style:Ne},my:{style:Ne},margin:{style:Ne},marginTop:{style:Ne},marginRight:{style:Ne},marginBottom:{style:Ne},marginLeft:{style:Ne},marginX:{style:Ne},marginY:{style:Ne},marginInline:{style:Ne},marginInlineStart:{style:Ne},marginInlineEnd:{style:Ne},marginBlock:{style:Ne},marginBlockStart:{style:Ne},marginBlockEnd:{style:Ne},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Gh},rowGap:{style:Vh},columnGap:{style:Hh},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Jt},maxWidth:{style:kC},minWidth:{transform:Jt},height:{transform:Jt},maxHeight:{transform:Jt},minHeight:{transform:Jt},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},iu=o6;function l6(...e){const t=e.reduce((s,n)=>s.concat(Object.keys(n)),[]),i=new Set(t);return e.every(s=>i.size===Object.keys(s).length)}function a6(e,t){return typeof e=="function"?e(t):e}function Sx(){function e(i,s,n,r){const o={[i]:s,theme:n},l=r[i];if(!l)return{[i]:s};const{cssProperty:a=i,themeKey:u,transform:c,style:d}=l;if(s==null)return null;if(u==="typography"&&s==="inherit")return{[i]:s};const h=Lh(n,u)||{};return d?d(o):ks(o,s,f=>{let m=Rd(h,c,f);return f===m&&typeof f=="string"&&(m=Rd(h,c,`${i}${f==="default"?"":Ds(f)}`,f)),a===!1?m:{[a]:m}})}function t(i){var s;const{sx:n,theme:r={}}=i||{};if(!n)return null;const o=(s=r.unstable_sxConfig)!=null?s:iu;function l(a){let u=a;if(typeof a=="function")u=a(r);else if(typeof a!="object")return a;if(!u)return null;const c=S5(r.breakpoints),d=Object.keys(c);let h=c;return Object.keys(u).forEach(p=>{const f=a6(u[p],r);if(f!=null)if(typeof f=="object")if(o[p])h=jl(h,e(p,f,r,o));else{const m=ks({theme:r},f,w=>({[p]:w}));l6(m,f)?h[p]=t({sx:f,theme:r}):h=jl(h,m)}else h=jl(h,e(p,f,r,o))}),R5(d,h)}return Array.isArray(n)?n.map(l):l(n)}return t}const Rx=Sx();Rx.filterProps=["sx"];const MC=Rx;function bx(e,t){const i=this;return i.vars&&typeof i.getColorSchemeSelector=="function"?{[i.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:i.palette.mode===e?t:{}}const u6=["breakpoints","palette","spacing","shape"];function Ex(e={},...t){const{breakpoints:i={},palette:s={},spacing:n,shape:r={}}=e,o=Vi(e,u6),l=Cx(i),a=I5(n);let u=ts({breakpoints:l,direction:"ltr",components:{},palette:Y({mode:"light"},s),spacing:a,shape:Y({},y5,r)},o);return u.applyStyles=bx,u=t.reduce((c,d)=>ts(c,d),u),u.unstable_sxConfig=Y({},iu,o==null?void 0:o.unstable_sxConfig),u.unstable_sx=function(d){return MC({sx:d,theme:this})},u}const c6=Object.freeze(Object.defineProperty({__proto__:null,default:Ex,private_createBreakpoints:Cx,unstable_applyStyles:bx},Symbol.toStringTag,{value:"Module"})),d6=Sn(c6),h6=["sx"],p6=e=>{var t,i;const s={systemProps:{},otherProps:{}},n=(t=e==null||(i=e.theme)==null?void 0:i.unstable_sxConfig)!=null?t:iu;return Object.keys(e).forEach(r=>{n[r]?s.systemProps[r]=e[r]:s.otherProps[r]=e[r]}),s};function Px(e){const{sx:t}=e,i=Vi(e,h6),{systemProps:s,otherProps:n}=p6(i);let r;return Array.isArray(t)?r=[s,...t]:typeof t=="function"?r=(...o)=>{const l=t(...o);return Ys(l)?Y({},s,l):s}:r=Y({},s,t),Y({},n,{sx:r})}const f6=Object.freeze(Object.defineProperty({__proto__:null,default:MC,extendSxProp:Px,unstable_createStyleFunctionSx:Sx,unstable_defaultSxConfig:iu},Symbol.toStringTag,{value:"Module"})),g6=Sn(f6);var Xo=jT;Object.defineProperty(Xa,"__esModule",{value:!0});var m6=Xa.default=I6;Xa.shouldForwardProp=dc;Xa.systemDefaultTheme=void 0;var li=Xo($T()),Wg=Xo(JK()),iR=b6(r5),v6=l5;Xo(c5);Xo(m5);var C6=Xo(d6),w6=Xo(g6);const y6=["ownerState"],S6=["variants"],R6=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function Fx(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,i=new WeakMap;return(Fx=function(s){return s?i:t})(e)}function b6(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var i=Fx(t);if(i&&i.has(e))return i.get(e);var s={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)){var o=n?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(s,r,o):s[r]=e[r]}return s.default=e,i&&i.set(e,s),s}function E6(e){return Object.keys(e).length===0}function P6(e){return typeof e=="string"&&e.charCodeAt(0)>96}function dc(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const F6=Xa.systemDefaultTheme=(0,C6.default)(),T6=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function Gu({defaultTheme:e,theme:t,themeId:i}){return E6(t)?e:t[i]||t}function x6(e){return e?(t,i)=>i[e]:null}function hc(e,t){let{ownerState:i}=t,s=(0,Wg.default)(t,y6);const n=typeof e=="function"?e((0,li.default)({ownerState:i},s)):e;if(Array.isArray(n))return n.flatMap(r=>hc(r,(0,li.default)({ownerState:i},s)));if(n&&typeof n=="object"&&Array.isArray(n.variants)){const{variants:r=[]}=n;let l=(0,Wg.default)(n,S6);return r.forEach(a=>{let u=!0;typeof a.props=="function"?u=a.props((0,li.default)({ownerState:i},s,i)):Object.keys(a.props).forEach(c=>{(i==null?void 0:i[c])!==a.props[c]&&s[c]!==a.props[c]&&(u=!1)}),u&&(Array.isArray(l)||(l=[l]),l.push(typeof a.style=="function"?a.style((0,li.default)({ownerState:i},s,i)):a.style))}),l}return n}function I6(e={}){const{themeId:t,defaultTheme:i=F6,rootShouldForwardProp:s=dc,slotShouldForwardProp:n=dc}=e,r=o=>(0,w6.default)((0,li.default)({},o,{theme:Gu((0,li.default)({},o,{defaultTheme:i,themeId:t}))}));return r.__mui_systemSx=!0,(o,l={})=>{(0,iR.internal_processStyles)(o,b=>b.filter(R=>!(R!=null&&R.__mui_systemSx)));const{name:a,slot:u,skipVariantsResolver:c,skipSx:d,overridesResolver:h=x6(T6(u))}=l,p=(0,Wg.default)(l,R6),f=c!==void 0?c:u&&u!=="Root"&&u!=="root"||!1,m=d||!1;let w,v=dc;u==="Root"||u==="root"?v=s:u?v=n:P6(o)&&(v=void 0);const g=(0,iR.default)(o,(0,li.default)({shouldForwardProp:v,label:w},p)),y=b=>typeof b=="function"&&b.__emotion_real!==b||(0,v6.isPlainObject)(b)?R=>hc(b,(0,li.default)({},R,{theme:Gu({theme:R.theme,defaultTheme:i,themeId:t})})):b,S=(b,...R)=>{let E=y(b);const x=R?R.map(y):[];a&&h&&x.push(G=>{const H=Gu((0,li.default)({},G,{defaultTheme:i,themeId:t}));if(!H.components||!H.components[a]||!H.components[a].styleOverrides)return null;const J=H.components[a].styleOverrides,Z={};return Object.entries(J).forEach(([pe,Q])=>{Z[pe]=hc(Q,(0,li.default)({},G,{theme:H}))}),h(G,Z)}),a&&!f&&x.push(G=>{var H;const J=Gu((0,li.default)({},G,{defaultTheme:i,themeId:t})),Z=J==null||(H=J.components)==null||(H=H[a])==null?void 0:H.variants;return hc({variants:Z},(0,li.default)({},G,{theme:J}))}),m||x.push(r);const I=x.length-R.length;if(Array.isArray(b)&&I>0){const G=new Array(I).fill("");E=[...b,...G],E.raw=[...b.raw,...G]}const D=g(E,...x);return o.muiName&&(D.muiName=o.muiName),D};return g.withConfig&&(S.withConfig=g.withConfig),S}}const sR=e=>e,D6=()=>{let e=sR;return{configure(t){e=t},generate(t){return e(t)},reset(){e=sR}}},k6=D6(),M6=k6,A6={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function su(e,t,i="Mui"){const s=A6[t];return s?`${i}-${s}`:`${M6.generate(e)}-${t}`}function _6(e,t){return Y({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}var qe={};const L6=Sn(a5);function O6(e,t=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,i))}const N6=Object.freeze(Object.defineProperty({__proto__:null,default:O6},Symbol.toStringTag,{value:"Module"})),G6=Sn(N6);var Tx=jT;Object.defineProperty(qe,"__esModule",{value:!0});var nR=qe.alpha=kx;qe.blend=J6;qe.colorChannel=void 0;var H6=qe.darken=_C;qe.decomposeColor=wi;qe.emphasize=Mx;var V6=qe.getContrastRatio=$6;qe.getLuminance=bd;qe.hexToRgb=xx;qe.hslToRgb=Dx;var B6=qe.lighten=LC;qe.private_safeAlpha=K6;qe.private_safeColorChannel=void 0;qe.private_safeDarken=q6;qe.private_safeEmphasize=Q6;qe.private_safeLighten=Y6;qe.recomposeColor=Zo;qe.rgbToHex=j6;var rR=Tx(L6),W6=Tx(G6);function AC(e,t=0,i=1){return(0,W6.default)(e,t,i)}function xx(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let i=e.match(t);return i&&i[0].length===1&&(i=i.map(s=>s+s)),i?`rgb${i.length===4?"a":""}(${i.map((s,n)=>n<3?parseInt(s,16):Math.round(parseInt(s,16)/255*1e3)/1e3).join(", ")})`:""}function z6(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function wi(e){if(e.type)return e;if(e.charAt(0)==="#")return wi(xx(e));const t=e.indexOf("("),i=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(i)===-1)throw new Error((0,rR.default)(9,e));let s=e.substring(t+1,e.length-1),n;if(i==="color"){if(s=s.split(" "),n=s.shift(),s.length===4&&s[3].charAt(0)==="/"&&(s[3]=s[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(n)===-1)throw new Error((0,rR.default)(10,n))}else s=s.split(",");return s=s.map(r=>parseFloat(r)),{type:i,values:s,colorSpace:n}}const Ix=e=>{const t=wi(e);return t.values.slice(0,3).map((i,s)=>t.type.indexOf("hsl")!==-1&&s!==0?`${i}%`:i).join(" ")};qe.colorChannel=Ix;const U6=(e,t)=>{try{return Ix(e)}catch{return e}};qe.private_safeColorChannel=U6;function Zo(e){const{type:t,colorSpace:i}=e;let{values:s}=e;return t.indexOf("rgb")!==-1?s=s.map((n,r)=>r<3?parseInt(n,10):n):t.indexOf("hsl")!==-1&&(s[1]=`${s[1]}%`,s[2]=`${s[2]}%`),t.indexOf("color")!==-1?s=`${i} ${s.join(" ")}`:s=`${s.join(", ")}`,`${t}(${s})`}function j6(e){if(e.indexOf("#")===0)return e;const{values:t}=wi(e);return`#${t.map((i,s)=>z6(s===3?Math.round(255*i):i)).join("")}`}function Dx(e){e=wi(e);const{values:t}=e,i=t[0],s=t[1]/100,n=t[2]/100,r=s*Math.min(n,1-n),o=(u,c=(u+i/30)%12)=>n-r*Math.max(Math.min(c-3,9-c,1),-1);let l="rgb";const a=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return e.type==="hsla"&&(l+="a",a.push(t[3])),Zo({type:l,values:a})}function bd(e){e=wi(e);let t=e.type==="hsl"||e.type==="hsla"?wi(Dx(e)).values:e.values;return t=t.map(i=>(e.type!=="color"&&(i/=255),i<=.03928?i/12.92:((i+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function $6(e,t){const i=bd(e),s=bd(t);return(Math.max(i,s)+.05)/(Math.min(i,s)+.05)}function kx(e,t){return e=wi(e),t=AC(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,Zo(e)}function K6(e,t,i){try{return kx(e,t)}catch{return e}}function _C(e,t){if(e=wi(e),t=AC(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let i=0;i<3;i+=1)e.values[i]*=1-t;return Zo(e)}function q6(e,t,i){try{return _C(e,t)}catch{return e}}function LC(e,t){if(e=wi(e),t=AC(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let i=0;i<3;i+=1)e.values[i]+=(255-e.values[i])*t;else if(e.type.indexOf("color")!==-1)for(let i=0;i<3;i+=1)e.values[i]+=(1-e.values[i])*t;return Zo(e)}function Y6(e,t,i){try{return LC(e,t)}catch{return e}}function Mx(e,t=.15){return bd(e)>.5?_C(e,t):LC(e,t)}function Q6(e,t,i){try{return Mx(e,t)}catch{return e}}function J6(e,t,i,s=1){const n=(a,u)=>Math.round((a**(1/s)*(1-i)+u**(1/s)*i)**s),r=wi(e),o=wi(t),l=[n(r.values[0],o.values[0]),n(r.values[1],o.values[1]),n(r.values[2],o.values[2])];return Zo({type:"rgb",values:l})}const X6={black:"#000",white:"#fff"},ka=X6,Z6={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},e8=Z6,t8={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Fr=t8,i8={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Tr=i8,s8={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},vl=s8,n8={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},xr=n8,r8={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Ir=r8,o8={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Dr=o8,l8=["mode","contrastThreshold","tonalOffset"],oR={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:ka.white,default:ka.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Xp={text:{primary:ka.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:ka.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function lR(e,t,i,s){const n=s.light||s,r=s.dark||s*1.5;e[t]||(e.hasOwnProperty(i)?e[t]=e[i]:t==="light"?e.light=B6(e.main,n):t==="dark"&&(e.dark=H6(e.main,r)))}function a8(e="light"){return e==="dark"?{main:xr[200],light:xr[50],dark:xr[400]}:{main:xr[700],light:xr[400],dark:xr[800]}}function u8(e="light"){return e==="dark"?{main:Fr[200],light:Fr[50],dark:Fr[400]}:{main:Fr[500],light:Fr[300],dark:Fr[700]}}function c8(e="light"){return e==="dark"?{main:Tr[500],light:Tr[300],dark:Tr[700]}:{main:Tr[700],light:Tr[400],dark:Tr[800]}}function d8(e="light"){return e==="dark"?{main:Ir[400],light:Ir[300],dark:Ir[700]}:{main:Ir[700],light:Ir[500],dark:Ir[900]}}function h8(e="light"){return e==="dark"?{main:Dr[400],light:Dr[300],dark:Dr[700]}:{main:Dr[800],light:Dr[500],dark:Dr[900]}}function p8(e="light"){return e==="dark"?{main:vl[400],light:vl[300],dark:vl[700]}:{main:"#ed6c02",light:vl[500],dark:vl[900]}}function f8(e){const{mode:t="light",contrastThreshold:i=3,tonalOffset:s=.2}=e,n=Vi(e,l8),r=e.primary||a8(t),o=e.secondary||u8(t),l=e.error||c8(t),a=e.info||d8(t),u=e.success||h8(t),c=e.warning||p8(t);function d(m){return V6(m,Xp.text.primary)>=i?Xp.text.primary:oR.text.primary}const h=({color:m,name:w,mainShade:v=500,lightShade:g=300,darkShade:y=700})=>{if(m=Y({},m),!m.main&&m[v]&&(m.main=m[v]),!m.hasOwnProperty("main"))throw new Error(Da(11,w?` (${w})`:"",v));if(typeof m.main!="string")throw new Error(Da(12,w?` (${w})`:"",JSON.stringify(m.main)));return lR(m,"light",g,s),lR(m,"dark",y,s),m.contrastText||(m.contrastText=d(m.main)),m},p={dark:Xp,light:oR};return ts(Y({common:Y({},ka),mode:t,primary:h({color:r,name:"primary"}),secondary:h({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:h({color:l,name:"error"}),warning:h({color:c,name:"warning"}),info:h({color:a,name:"info"}),success:h({color:u,name:"success"}),grey:e8,contrastThreshold:i,getContrastText:d,augmentColor:h,tonalOffset:s},p[t]),n)}const g8=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function m8(e){return Math.round(e*1e5)/1e5}const aR={textTransform:"uppercase"},uR='"Roboto", "Helvetica", "Arial", sans-serif';function v8(e,t){const i=typeof t=="function"?t(e):t,{fontFamily:s=uR,fontSize:n=14,fontWeightLight:r=300,fontWeightRegular:o=400,fontWeightMedium:l=500,fontWeightBold:a=700,htmlFontSize:u=16,allVariants:c,pxToRem:d}=i,h=Vi(i,g8),p=n/14,f=d||(v=>`${v/u*p}rem`),m=(v,g,y,S,b)=>Y({fontFamily:s,fontWeight:v,fontSize:f(g),lineHeight:y},s===uR?{letterSpacing:`${m8(S/g)}em`}:{},b,c),w={h1:m(r,96,1.167,-1.5),h2:m(r,60,1.2,-.5),h3:m(o,48,1.167,0),h4:m(o,34,1.235,.25),h5:m(o,24,1.334,0),h6:m(l,20,1.6,.15),subtitle1:m(o,16,1.75,.15),subtitle2:m(l,14,1.57,.1),body1:m(o,16,1.5,.15),body2:m(o,14,1.43,.15),button:m(l,14,1.75,.4,aR),caption:m(o,12,1.66,.4),overline:m(o,12,2.66,1,aR),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return ts(Y({htmlFontSize:u,pxToRem:f,fontFamily:s,fontSize:n,fontWeightLight:r,fontWeightRegular:o,fontWeightMedium:l,fontWeightBold:a},w),h,{clone:!1})}const C8=.2,w8=.14,y8=.12;function xe(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${C8})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${w8})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${y8})`].join(",")}const S8=["none",xe(0,2,1,-1,0,1,1,0,0,1,3,0),xe(0,3,1,-2,0,2,2,0,0,1,5,0),xe(0,3,3,-2,0,3,4,0,0,1,8,0),xe(0,2,4,-1,0,4,5,0,0,1,10,0),xe(0,3,5,-1,0,5,8,0,0,1,14,0),xe(0,3,5,-1,0,6,10,0,0,1,18,0),xe(0,4,5,-2,0,7,10,1,0,2,16,1),xe(0,5,5,-3,0,8,10,1,0,3,14,2),xe(0,5,6,-3,0,9,12,1,0,3,16,2),xe(0,6,6,-3,0,10,14,1,0,4,18,3),xe(0,6,7,-4,0,11,15,1,0,4,20,3),xe(0,7,8,-4,0,12,17,2,0,5,22,4),xe(0,7,8,-4,0,13,19,2,0,5,24,4),xe(0,7,9,-4,0,14,21,2,0,5,26,4),xe(0,8,9,-5,0,15,22,2,0,6,28,5),xe(0,8,10,-5,0,16,24,2,0,6,30,5),xe(0,8,11,-5,0,17,26,2,0,6,32,5),xe(0,9,11,-5,0,18,28,2,0,7,34,6),xe(0,9,12,-6,0,19,29,2,0,7,36,6),xe(0,10,13,-6,0,20,31,3,0,8,38,7),xe(0,10,13,-6,0,21,33,3,0,8,40,7),xe(0,10,14,-6,0,22,35,3,0,8,42,7),xe(0,11,14,-7,0,23,36,3,0,9,44,8),xe(0,11,15,-7,0,24,38,3,0,9,46,8)],R8=S8,b8=["duration","easing","delay"],E8={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},P8={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function cR(e){return`${Math.round(e)}ms`}function F8(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function T8(e){const t=Y({},E8,e.easing),i=Y({},P8,e.duration);return Y({getAutoHeightDuration:F8,create:(n=["all"],r={})=>{const{duration:o=i.standard,easing:l=t.easeInOut,delay:a=0}=r;return Vi(r,b8),(Array.isArray(n)?n:[n]).map(u=>`${u} ${typeof o=="string"?o:cR(o)} ${l} ${typeof a=="string"?a:cR(a)}`).join(",")}},e,{easing:t,duration:i})}const x8={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},I8=x8,D8=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function k8(e={},...t){const{mixins:i={},palette:s={},transitions:n={},typography:r={}}=e,o=Vi(e,D8);if(e.vars)throw new Error(Da(18));const l=f8(s),a=Ex(e);let u=ts(a,{mixins:_6(a.breakpoints,i),palette:l,shadows:R8.slice(),typography:v8(l,r),transitions:T8(n),zIndex:Y({},I8)});return u=ts(u,o),u=t.reduce((c,d)=>ts(c,d),u),u.unstable_sxConfig=Y({},iu,o==null?void 0:o.unstable_sxConfig),u.unstable_sx=function(d){return MC({sx:d,theme:this})},u}const M8=k8(),A8=M8,_8="$$material";function L8(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const O8=e=>L8(e)&&e!=="classes",N8=O8,G8=m6({themeId:_8,defaultTheme:A8,rootShouldForwardProp:N8}),Bh=G8;function zg(e,t){const i=Y({},t);return Object.keys(e).forEach(s=>{if(s.toString().match(/^(components|slots)$/))i[s]=Y({},e[s],i[s]);else if(s.toString().match(/^(componentsProps|slotProps)$/)){const n=e[s]||{},r=t[s];i[s]={},!r||!Object.keys(r)?i[s]=n:!n||!Object.keys(n)?i[s]=r:(i[s]=Y({},r),Object.keys(n).forEach(o=>{i[s][o]=zg(n[o],r[o])}))}else i[s]===void 0&&(i[s]=e[s])}),i}const H8=C.createContext(void 0);function V8(e){const{theme:t,name:i,props:s}=e;if(!t||!t.components||!t.components[i])return s;const n=t.components[i];return n.defaultProps?zg(n.defaultProps,s):!n.styleOverrides&&!n.variants?zg(n,s):s}function B8({props:e,name:t}){const i=C.useContext(H8);return V8({props:e,name:t,theme:{components:i}})}function Wh(e){return B8(e)}const W8=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)},dR=W8;function zh(e,t,i="Mui"){const s={};return t.forEach(n=>{s[n]=su(e,n,i)}),s}function z8(e){return su("MuiPaper",e)}zh("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const U8=["className","component","elevation","square","variant"],j8=e=>{const{square:t,elevation:i,variant:s,classes:n}=e,r={root:["root",s,!t&&"rounded",s==="elevation"&&`elevation${i}`]};return dh(r,z8,n)},$8=Bh("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[i.variant],!i.square&&t.rounded,i.variant==="elevation"&&t[`elevation${i.elevation}`]]}})(({theme:e,ownerState:t})=>{var i;return Y({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&Y({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${nR("#fff",dR(t.elevation))}, ${nR("#fff",dR(t.elevation))})`},e.vars&&{backgroundImage:(i=e.vars.overlays)==null?void 0:i[t.elevation]}))}),K8=C.forwardRef(function(t,i){const s=Wh({props:t,name:"MuiPaper"}),{className:n,component:r="div",elevation:o=1,square:l=!1,variant:a="elevation"}=s,u=Vi(s,U8),c=Y({},s,{component:r,elevation:o,square:l,variant:a}),d=j8(c);return k.jsx($8,Y({as:r,ownerState:c,className:ch(d.root,n),ref:i},u))}),q8=K8;function Y8(e){return su("MuiAppBar",e)}zh("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const Q8=["className","color","enableColorOnDark","position"],J8=e=>{const{color:t,position:i,classes:s}=e,n={root:["root",`color${Ds(t)}`,`position${Ds(i)}`]};return dh(n,Y8,s)},Hu=(e,t)=>e?`${e==null?void 0:e.replace(")","")}, ${t})`:t,X8=Bh(q8,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[`position${Ds(i.position)}`],t[`color${Ds(i.color)}`]]}})(({theme:e,ownerState:t})=>{const i=e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[900];return Y({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},t.position==="fixed"&&{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},t.position==="absolute"&&{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0},t.position==="sticky"&&{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0},t.position==="static"&&{position:"static"},t.position==="relative"&&{position:"relative"},!e.vars&&Y({},t.color==="default"&&{backgroundColor:i,color:e.palette.getContrastText(i)},t.color&&t.color!=="default"&&t.color!=="inherit"&&t.color!=="transparent"&&{backgroundColor:e.palette[t.color].main,color:e.palette[t.color].contrastText},t.color==="inherit"&&{color:"inherit"},e.palette.mode==="dark"&&!t.enableColorOnDark&&{backgroundColor:null,color:null},t.color==="transparent"&&Y({backgroundColor:"transparent",color:"inherit"},e.palette.mode==="dark"&&{backgroundImage:"none"})),e.vars&&Y({},t.color==="default"&&{"--AppBar-background":t.enableColorOnDark?e.vars.palette.AppBar.defaultBg:Hu(e.vars.palette.AppBar.darkBg,e.vars.palette.AppBar.defaultBg),"--AppBar-color":t.enableColorOnDark?e.vars.palette.text.primary:Hu(e.vars.palette.AppBar.darkColor,e.vars.palette.text.primary)},t.color&&!t.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":t.enableColorOnDark?e.vars.palette[t.color].main:Hu(e.vars.palette.AppBar.darkBg,e.vars.palette[t.color].main),"--AppBar-color":t.enableColorOnDark?e.vars.palette[t.color].contrastText:Hu(e.vars.palette.AppBar.darkColor,e.vars.palette[t.color].contrastText)},!["inherit","transparent"].includes(t.color)&&{backgroundColor:"var(--AppBar-background)"},{color:t.color==="inherit"?"inherit":"var(--AppBar-color)"},t.color==="transparent"&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))}),Z8=C.forwardRef(function(t,i){const s=Wh({props:t,name:"MuiAppBar"}),{className:n,color:r="primary",enableColorOnDark:o=!1,position:l="fixed"}=s,a=Vi(s,Q8),u=Y({},s,{color:r,position:l,enableColorOnDark:o}),c=J8(u);return k.jsx(X8,Y({square:!0,component:"header",ownerState:u,elevation:4,className:ch(c.root,n,l==="fixed"&&"mui-fixed"),ref:i},a))}),eq=Z8;function tq(e){return su("MuiToolbar",e)}zh("MuiToolbar",["root","gutters","regular","dense"]);const iq=["className","component","disableGutters","variant"],sq=e=>{const{classes:t,disableGutters:i,variant:s}=e;return dh({root:["root",!i&&"gutters",s]},tq,t)},nq=Bh("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,!i.disableGutters&&t.gutters,t[i.variant]]}})(({theme:e,ownerState:t})=>Y({position:"relative",display:"flex",alignItems:"center"},!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}},t.variant==="dense"&&{minHeight:48}),({theme:e,ownerState:t})=>t.variant==="regular"&&e.mixins.toolbar),rq=C.forwardRef(function(t,i){const s=Wh({props:t,name:"MuiToolbar"}),{className:n,component:r="div",disableGutters:o=!1,variant:l="regular"}=s,a=Vi(s,iq),u=Y({},s,{component:r,disableGutters:o,variant:l}),c=sq(u);return k.jsx(nq,Y({as:r,className:ch(c.root,n),ref:i,ownerState:u},a))}),oq=rq;function lq(e){return su("MuiTypography",e)}zh("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const aq=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],uq=e=>{const{align:t,gutterBottom:i,noWrap:s,paragraph:n,variant:r,classes:o}=e,l={root:["root",r,e.align!=="inherit"&&`align${Ds(t)}`,i&&"gutterBottom",s&&"noWrap",n&&"paragraph"]};return dh(l,lq,o)},cq=Bh("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.variant&&t[i.variant],i.align!=="inherit"&&t[`align${Ds(i.align)}`],i.noWrap&&t.noWrap,i.gutterBottom&&t.gutterBottom,i.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>Y({margin:0},t.variant==="inherit"&&{font:"inherit"},t.variant!=="inherit"&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),hR={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},dq={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},hq=e=>dq[e]||e,pq=C.forwardRef(function(t,i){const s=Wh({props:t,name:"MuiTypography"}),n=hq(s.color),r=Px(Y({},s,{color:n})),{align:o="inherit",className:l,component:a,gutterBottom:u=!1,noWrap:c=!1,paragraph:d=!1,variant:h="body1",variantMapping:p=hR}=r,f=Vi(r,aq),m=Y({},r,{align:o,color:n,className:l,component:a,gutterBottom:u,noWrap:c,paragraph:d,variant:h,variantMapping:p}),w=a||(d?"p":p[h]||hR[h])||"span",v=uq(m);return k.jsx(cq,Y({as:w,ref:i,ownerState:m,className:ch(v.root,l)},f))}),fq=pq;const gq=()=>k.jsxs(k.Fragment,{children:[k.jsx("option",{style:{color:"black"},value:"eiValittu",children:"Tekijä"}),k.jsx("option",{style:{color:"red"},id:"miikka",value:"35",children:"Miikka"}),k.jsx("option",{style:{color:"black"},value:"161",children:"Tuomas Ki."}),k.jsx("option",{style:{color:"black"},value:"77",children:"Jani R."}),k.jsx("option",{style:{color:"black"},value:"203",children:"Jouni"}),k.jsx("option",{style:{color:"black"},value:"119",children:"Lemmy"})]}),pR=[{1:["x","8.45","x","V","V","7.00a","7.00a","8.45","x","V","7.00a","x","V","12.00b","12.00a","12.00a","12.00a","12.00a","x","V","V"]},{2:["7.00a","x","x","6.00a","7.00a","V","V","x","6.00a","6.00a","V","6.00a","6.00a","V","V","V","x","8.45","6.00a","6.00a","6.00a"]},{3:["8.45","V","V","x","6.00a","6.00b","6.00b","7.00a","V","12.00a","12.00a","x","V","7.00b","7.00a","7.00a","8.45","x","x","V","V"]},{4:["x","6.00a","7.00a","7.00a","x","V","V","V","12.00a","8.45","x","8.45","12.00a","V","V","V","x","6.00a","12.00a","12.00b","12.00b"]},{5:["V","V","8.45","12.00b","12.00b","12.00a","12.00a","12.00b","V","7.00a","7.00b","x","V","6.00b","6.00a","x","12.00b","x","x","V","V"]},{6:["7.00b","7.00a","6.00b","6.00b","x","V","V","x","x","V","x","7.00a","7.00b","V","7.00b","x","6.00a","V","V","7.00a","7.00a"]},{7:["12.00a","12.00a","x","V","V","8.45","8.45","6.00a","8.45","x","6.00a","V","V","8.45","6.00b","7.00b","7.00a","x","x","V","V"]},{8:["x","x","7.00b","7.00b","12.00a","V","V","V","x","6.00b","x","12.00a","8.45","V","x","6.00a","V","V","6.00b","6.00b","6.00b"]},{9:["6.00a","x","x","V","V","7.00b","7.00b","7.00b","12.00b","x","6.00b","V","V","12.00a","8.45","8.45","x","7.00a","7.00a","V","V"]},{10:["x","7.00b","12.00a","12.00a","8.45","V","V","x","6.00b","x","V","x","6.00b","V","x","6.00b","6.00b","V","V","12.00a","12.00a"]},{11:["x","x","V","V","6.00b","6.00a","6.00a","V","7.00a","7.00b","x","6.00b","V","7.00a","x","x","7.00b","12.00b","12.00b","V","V"]},{12:["12.00b","12.00b","x","x","x","V","V","12.00a","x","V","8.45","12.00b","12.00b","V","V","V","x","6.00b","8.45","7.00b","7.00b"]},{13:["V","V","12.00b","8.45","7.00b","12.00b","12.00b","x","V","x","12.00b","x","V","6.00a","12.00b","12.00b","x","7.00b","7.00b","V","V"]},{14:["6.00b","6.00b","6.00a","x","x","V","V","6.00b","7.00b","12.00b","V","7.00b","7.00a","V","x","x","x","V","V","8.45","8.45"]}],mq=()=>{const e=[];for(var t=0;t<pR.length;t++){const s=Object.values(pR[t]);e.push(s[0])}return e.flat()},vq=(e,t,i)=>{if(e>293){let n=Math.floor(e/293);e=e-294*n}for(var s=e-3;s<e+5;s++){let n=(s%294+294)%294;n===e?t.push("| "+i[n]+" |"):t.push(i[n])}return i},Cq=(e,t,i)=>(e.map(s=>{var n=s.getDate(),r=s.getDay(),o=s.getMonth(),l=s.getFullYear();t.push(`${i[r]} ${n}.${o+1}.${l}`)}),i),wq=()=>{const[e,t]=C.useState([]),i=["Su","Ma","Ti","Ke","To","Pe","La"],[s,n]=C.useState(""),[r,o]=C.useState([]),[l,a]=C.useState([]),[u,c]=C.useState([]),[d,h]=C.useState(""),[p,f]=C.useState("");C.useEffect(()=>{t(mq())},[]);const m=new Date("2024-6-10");m.setUTCHours(0);const w=Number(m.getTime()),v=(I,D)=>{for(var G=[],H=[],J=-3;J<=5;J++)H.push(J);var Z=[];H.map(Q=>{Z.push(new Date(D+Q*1e3*60*60*24))});var pe=[];Cq(Z,pe,i),vq(I,G,e),h(Math.floor(I/21)+1),o([...G]),a([...pe]),g()},g=()=>{const I=r.map((D,G)=>({vuoro:D,paiva:l[G+1]}));c([...I])};C.useEffect(()=>{g()},[r]);const y=I=>{n(I.target.value)},S=()=>{if(p=="eiValittu"||p===""){alert("Tekijä ei ole valittu");return}var I=s.split(".");I=`${I[2]},${I[1]},${I[0]}`;var D=new Date(I);D.setUTCHours(0,0,0),D=D.getTime();var G=(D-w)/(1e3*60*60*24),H=p+G;v(H,D)},b=[{headerName:"Päivä",field:"paiva",sortable:!0,filter:!0,cellStyle:I=>{if(I.value&&I.value.includes(s)&&s.length>7)return{color:"red",fontWeight:"bold",fontStyle:"oblique",fontSize:"13px",borderBottom:"2px solid gray",borderTop:"2px solid gray",backgroundColor:"lightgrey"};if(I.value&&I.value.startsWith("La")||I.value&&I.value.startsWith("Su"))return{fontWeight:"bold",fontStyle:"oblique"}}},{headerName:"Vuoro",field:"vuoro",sortable:!1,filter:!1,cellStyle:I=>I.value&&I.value.startsWith("|")?{color:"red",fontSize:"13px",fontWeight:"bold",fontStyle:"oblique",borderBottom:"2px solid gray",borderTop:"2px solid gray",backgroundColor:"lightgrey"}:null}],R={noRowsToShow:"Hae päivämäärällä ja tekijällä."};if(d>14){var E=d%14;h(E)}else d<0&&h("");const x=I=>{f(Number(I.target.value))};return console.log(`${d+1} seur`),k.jsxs(k.Fragment,{children:[k.jsx(eq,{position:"static",style:{position:"fixed",width:"350px",backgroundColor:"var(--primary)",zIndex:"7"},children:k.jsx(oq,{children:k.jsx(fq,{variant:"h6",children:k.jsxs("div",{className:"vHaku",children:[k.jsx("input",{onChange:y,placeholder:"pv.kk.vvvv",className:"paivainput"}),k.jsx("button",{className:"haeNappi",onClick:S,children:"Hae"}),k.jsx("select",{value:p,onChange:x,className:"alasVeto",children:k.jsx(gq,{})})]})})})}),k.jsx("div",{className:"ag-theme-material",style:{height:"458px",marginTop:"50px",width:"350px",position:"fixed"},children:k.jsx(QK,{rowData:u,columnDefs:b,localeText:R,suppressHorizontalScroll:!0,suppressVerticalScroll:!0})}),k.jsx("div",{className:"kellokierto",children:k.jsxs("p",{className:"kierto",children:["kiertonumero: ",d]})})]})},fR=()=>k.jsx(k.Fragment,{});const yq=()=>{const[e,t]=C.useState(""),[i,s]=C.useState(""),[n,r]=C.useState(null),o=async l=>{l.preventDefault();try{await eN(cd,e,i),console.log("Login onnistui")}catch(a){r(a.message)}};return k.jsxs("div",{children:[k.jsxs("form",{onSubmit:o,className:"logForm",children:[k.jsxs("div",{children:[k.jsx("label",{}),k.jsx("input",{placeholder:"s-posti",style:{textAlign:"center"},className:"logInputMail",type:"email",value:e,onChange:l=>t(l.target.value),required:!0})]}),k.jsxs("div",{children:[k.jsx("label",{}),k.jsx("input",{placeholder:"salasana",style:{textAlign:"center"},className:"logInputPw",type:"password",value:i,onChange:l=>s(l.target.value),required:!0})]}),k.jsx("button",{type:"submit",className:"kirjaudu",children:"Kirjaudu"})]}),n&&k.jsx("p",{children:n})]})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Sq(e,t,i,s){function n(r){return r instanceof i?r:new i(function(o){o(r)})}return new(i||(i=Promise))(function(r,o){function l(c){try{u(s.next(c))}catch(d){o(d)}}function a(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):n(c.value).then(l,a)}u((s=s.apply(e,t||[])).next())})}function Rq(e,t){var i={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},s,n,r,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(c){return a([u,c])}}function a(u){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,n&&(r=u[0]&2?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[u[0]&2,r.value]),u[0]){case 0:case 1:r=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,n=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(r=i.trys,!(r=r.length>0&&r[r.length-1])&&(u[0]===6||u[0]===2)){i=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){i.label=u[1];break}if(u[0]===6&&i.label<r[1]){i.label=r[1],r=u;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(u);break}r[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(c){u=[6,c],n=0}finally{s=r=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Qr=function(){return Qr=Object.assign||function(t){for(var i,s=1,n=arguments.length;s<n;s++){i=arguments[s];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},Qr.apply(this,arguments)},Ax=function(e){return{loading:e==null,value:e}},bq=function(){return function(e,t){switch(t.type){case"error":return Qr(Qr({},e),{error:t.error,loading:!1,value:void 0});case"reset":return Ax(t.defaultValue);case"value":return Qr(Qr({},e),{error:void 0,loading:!1,value:t.value});default:return e}}},Eq=function(e){var t=e?e():void 0,i=C.useReducer(bq(),Ax(t)),s=i[0],n=i[1],r=C.useCallback(function(){var a=e?e():void 0;n({type:"reset",defaultValue:a})},[e]),o=C.useCallback(function(a){n({type:"error",error:a})},[]),l=C.useCallback(function(a){n({type:"value",value:a})},[]);return C.useMemo(function(){return{error:s.error,loading:s.loading,reset:r,setError:o,setValue:l,value:s.value}},[s.error,s.loading,r,o,l,s.value])},Pq=function(e,t){var i=Eq(function(){return e.currentUser}),s=i.error,n=i.loading,r=i.setError,o=i.setValue,l=i.value;return C.useEffect(function(){var a=GP(e,function(u){return Sq(void 0,void 0,void 0,function(){var c;return Rq(this,function(d){switch(d.label){case 0:if(!(t!=null&&t.onUserChanged))return[3,4];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,t.onUserChanged(u)];case 2:return d.sent(),[3,4];case 3:return c=d.sent(),r(c),[3,4];case 4:return o(u),[2]}})})},r);return function(){a()}},[e]),[l,n,s]};function Fq(){const[e,t,i]=Pq(cd),s=async()=>{try{await sN(cd),alert("Logged out!")}catch(n){console.error("Error signing out:",n),alert("Error signing out: "+n.message)}};return t?k.jsx("p",{children:"Loading..."}):i?k.jsxs("p",{children:["Error: ",i.message]}):k.jsx("div",{children:e?k.jsx("div",{children:k.jsx("button",{className:"log",onClick:s,children:"Logout"})}):k.jsxs(k.Fragment,{children:[k.jsx("p",{className:"log",children:"log in"}),k.jsx("div",{className:"jemma"})]})})}const Tq=()=>{const[e,t]=C.useState(new Date);C.useEffect(()=>{const s=setInterval(()=>{t(new Date)},1e3);return()=>clearInterval(s)},[]);const i=()=>{var s=new Date,n=`${s.getDate()}.${s.getMonth()+1}.${s.getFullYear()}`;return n};return k.jsxs("p",{className:"KellonAika",children:[i()," ",e.toLocaleTimeString()]})},xq=()=>No().pathname==="/"?k.jsxs(k.Fragment,{children:[k.jsx("h6",{className:"logOtsikko",children:"Kirjautuminen"}),k.jsx("div",{children:k.jsx(yq,{})})]}):null;function Iq(){const e=(t,i)=>{const s=t,n=i;document.documentElement.style.setProperty("--primary",s),document.documentElement.style.setProperty("--teksti",n)};return k.jsxs(k.Fragment,{children:[k.jsxs(nM,{basename:"/arbeit",children:[k.jsx("div",{style:{position:"static",zIndex:"7",maxHeight:"700px"},children:k.jsx(xq,{})}),k.jsx("div",{className:"boxi"}),k.jsx("div",{className:"ylapalk"}),k.jsx("div",{className:"alapalk"}),k.jsxs("nav",{style:{marginLeft:"5px"},children:[k.jsx(Fq,{}),k.jsx(bu,{to:"/",className:({isActive:t})=>t?"active":"",children:"Alku "}),k.jsx(bu,{to:"/Vuorohaku",className:({isActive:t})=>t?"active":"",children:"| Vuoro |"}),k.jsx(bu,{to:"/Vaunut",className:({isActive:t})=>t?"active":"",children:" Vaunut "}),k.jsx(bu,{to:"/Muuta",className:({isActive:t})=>t?"active":"",children:"| Muuta"})]}),k.jsxs(Qk,{children:[k.jsx(kr,{path:"/",element:k.jsx(fR,{})}),k.jsx(kr,{path:"/Muuta",element:k.jsx(CM,{})}),k.jsx(kr,{path:"/Vaunut",element:k.jsx(RG,{})}),k.jsx(kr,{path:"/Vuorohaku",element:k.jsx(wq,{})}),k.jsx(kr,{path:"*",element:k.jsx(fR,{})})]})]}),k.jsxs("div",{className:"aladiv",children:[k.jsx(Tq,{style:{zIndex:"7"}}),k.jsxs("div",{className:"varit",children:[k.jsx("div",{className:"vari0",onClick:()=>e("rgb(115, 147, 179)","black")}),k.jsx("div",{className:"vari1",onClick:()=>e("rgb(0, 71, 171)","white")}),k.jsx("div",{className:"vari3",onClick:()=>e("rgb(53, 57, 53)","white")}),k.jsx("div",{className:"vari4",onClick:()=>e("rgb(37, 199, 75)","black")})]})]})]})}ef.createRoot(document.getElementById("root")).render(k.jsx(_.StrictMode,{children:k.jsx(Iq,{})}));
